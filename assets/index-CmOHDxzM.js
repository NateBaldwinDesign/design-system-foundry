var Lx=Object.defineProperty;var Fx=(e,t,n)=>t in e?Lx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _a=(e,t,n)=>Fx(e,typeof t!="symbol"?t+"":t,n);import{u as nn,a as or,j as s,B as Z,T as B,b as Ne,V as me,H as xe,c as ps,I as wt,M as Hn,d as Mn,e as Wn,f as Dn,g as ir,h as On,F as Le,i as We,k as dt,l as ar,C as Bl,m as gt,S as Ga,n as Fi,o as $i,p as Gi,q as Lo,r as Ns,s as Ys,t as Kn,v as hn,w as _s,x as an,D as us,y as fn,z as ds,A as $x,E as Gx,G as qx,J as ht,K as Hx,L as Wx,N as Ki,O as ki,P as Ux,Q as Zx,R as Yx,U as Jx,W as Ai,X as Ni,Y as $n,Z as Za,_ as Ya,$ as cl,a0 as ul,a1 as kn,a2 as kp,a3 as dr,a4 as pa,a5 as d0,a6 as Ll,a7 as Gn,a8 as qn,a9 as jp,aa as h0,ab as dl,ac as Cp,ad as Tp,ae as Xx,af as _i,ag as xu,ah as Kx,ai as Pr,aj as Ea,ak as $c,al as Ma,am as ls,an as yh,ao as Qx,ap as bh,aq as Fo,ar as Ui,as as Zi,at as Yi,au as yu,av as bu,aw as vu,ax as wu,ay as Su,az as ey,aA as ma,aB as nr,aC as vh,aD as ku,aE as ju,aF as nt,aG as ty,aH as Ip,aI as ny,aJ as Es,aK as Bt,aL as Fl,aM as ry,aN as sy,aO as iy,aP as ay,aQ as wh,aR as Ap,aS as oy}from"./chakra-CSfqulmi.js";import{a as f0,b as St,r as P,d as ly,c as Np,g as cy}from"./vendor-CnbTAVxw.js";import{u as uy,L as dy,B as hy,R as fy,a as wn,N as qi}from"./router-CUf8MevI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Cu={},Sh=f0;Cu.createRoot=Sh.createRoot,Cu.hydrateRoot=Sh.hydrateRoot;const py="modulepreload",my=function(e){return"/"+e},kh={},Ji=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=my(h),h in kh)return;kh[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":py,f||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((g,v)=>{x.addEventListener("load",g),x.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var Yt;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return e.objectValues(l)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},e.find=(i,a)=>{for(const l of i)if(a(l))return l},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Yt||(Yt={}));var jh;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(jh||(jh={}));const Ke=Yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Hs=e=>{switch(typeof e){case"undefined":return Ke.undefined;case"string":return Ke.string;case"number":return Number.isNaN(e)?Ke.nan:Ke.number;case"boolean":return Ke.boolean;case"function":return Ke.function;case"bigint":return Ke.bigint;case"symbol":return Ke.symbol;case"object":return Array.isArray(e)?Ke.array:e===null?Ke.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ke.promise:typeof Map<"u"&&e instanceof Map?Ke.map:typeof Set<"u"&&e instanceof Set?Ke.set:typeof Date<"u"&&e instanceof Date?Ke.date:Ke.object;default:return Ke.unknown}},Me=Yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Os extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,h=0;for(;h<l.path.length;){const f=l.path[h];h===l.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(n(l))):u[f]=u[f]||{_errors:[]},u=u[f],h++}}};return i(this),r}static assert(t){if(!(t instanceof Os))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Os.create=e=>new Os(e);const Tu=(e,t)=>{let n;switch(e.code){case Me.invalid_type:e.received===Ke.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yt.jsonStringifyReplacer)}`;break;case Me.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yt.joinValues(e.keys,", ")}`;break;case Me.invalid_union:n="Invalid input";break;case Me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yt.joinValues(e.options)}`;break;case Me.invalid_enum_value:n=`Invalid enum value. Expected ${Yt.joinValues(e.options)}, received '${e.received}'`;break;case Me.invalid_arguments:n="Invalid function arguments";break;case Me.invalid_return_type:n="Invalid function return type";break;case Me.invalid_date:n="Invalid date";break;case Me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Me.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Me.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Me.custom:n="Invalid input";break;case Me.invalid_intersection_types:n="Intersection results could not be merged";break;case Me.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Me.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yt.assertNever(e)}return{message:n}};let gy=Tu;function xy(){return gy}const yy=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const h=r.filter(f=>!!f).slice().reverse();for(const f of h)u=f(l,{data:t,defaultError:u}).message;return{...i,path:a,message:u}};function He(e,t){const n=xy(),r=yy({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Tu?void 0:Tu].filter(i=>!!i)});e.common.issues.push(r)}class mr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return bt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,l=await i.value;r.push({key:a,value:l})}return mr.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return bt;a.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[a.value]=l.value)}return{status:t.value,value:r}}}const bt=Object.freeze({status:"aborted"}),Ba=e=>({status:"dirty",value:e}),Jr=e=>({status:"valid",value:e}),Ch=e=>e.status==="aborted",Th=e=>e.status==="dirty",ra=e=>e.status==="valid",hl=e=>typeof Promise<"u"&&e instanceof Promise;var at;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(at||(at={}));class ms{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ih=(e,t)=>{if(ra(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Os(e.common.issues);return this._error=n,this._error}}};function Tt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(l,u)=>{const{message:h}=e;return l.code==="invalid_enum_value"?{message:h??u.defaultError}:typeof u.data>"u"?{message:h??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:h??n??u.defaultError}},description:i}}class Vt{get description(){return this._def.description}_getType(t){return Hs(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Hs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new mr,ctx:{common:t.parent.common,data:t.data,parsedType:Hs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(hl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hs(t)},i=this._parseSync({data:t,path:r.path,parent:r});return Ih(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hs(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return ra(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>ra(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Hs(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(hl(i)?i:Promise.resolve(i));return Ih(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const l=t(i),u=()=>a.addIssue({code:Me.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(h=>h?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new aa({schema:this,typeName:xt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ei.create(this,this._def)}nullable(){return oa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hs.create(this)}promise(){return xl.create(this,this._def)}or(t){return pl.create([this,t],this._def)}and(t){return ml.create(this,t,this._def)}transform(t){return new aa({...Tt(this._def),schema:this,typeName:xt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new _u({...Tt(this._def),innerType:this,defaultValue:n,typeName:xt.ZodDefault})}brand(){return new Fy({typeName:xt.ZodBranded,type:this,...Tt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Eu({...Tt(this._def),innerType:this,catchValue:n,typeName:xt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return p0.create(this,t)}readonly(){return Mu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const by=/^c[^\s-]{8,}$/i,vy=/^[0-9a-z]+$/,wy=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Sy=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ky=/^[a-z0-9_-]{21}$/i,jy=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Cy=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ty=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Iy="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gc;const Ay=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ny=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_y=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ey=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,My=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Dy=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_p="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Oy=new RegExp(`^${_p}$`);function Ep(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function Ry(e){return new RegExp(`^${Ep(e)}$`)}function Vy(e){let t=`${_p}T${Ep(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function zy(e,t){return!!((t==="v4"||!t)&&Ay.test(e)||(t==="v6"||!t)&&_y.test(e))}function Py(e,t){if(!jy.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function By(e,t){return!!((t==="v4"||!t)&&Ny.test(e)||(t==="v6"||!t)&&Ey.test(e))}class Ms extends Vt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ke.string){const a=this._getOrReturnCtx(t);return He(a,{code:Me.invalid_type,expected:Ke.string,received:a.parsedType}),bt}const r=new mr;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const l=t.data.length>a.value,u=t.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(t,i),l?He(i,{code:Me.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&He(i,{code:Me.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Ty.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"email",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Gc||(Gc=new RegExp(Iy,"u")),Gc.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"emoji",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Sy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"uuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")ky.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"nanoid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")by.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"cuid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")vy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"cuid2",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")wy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"ulid",code:Me.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),He(i,{validation:"url",code:Me.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"regex",code:Me.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Vy(a).test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Oy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Ry(a).test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{code:Me.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Cy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"duration",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?zy(t.data,a.version)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"ip",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Py(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"jwt",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?By(t.data,a.version)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"cidr",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?My.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"base64",code:Me.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Dy.test(t.data)||(i=this._getOrReturnCtx(t,i),He(i,{validation:"base64url",code:Me.invalid_string,message:a.message}),r.dirty()):Yt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Me.invalid_string,...at.errToObj(r)})}_addCheck(t){return new Ms({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...at.errToObj(t)})}url(t){return this._addCheck({kind:"url",...at.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...at.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...at.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...at.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...at.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...at.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...at.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...at.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...at.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...at.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...at.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...at.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...at.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...at.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...at.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...at.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...at.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...at.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...at.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...at.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...at.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...at.errToObj(n)})}nonempty(t){return this.min(1,at.errToObj(t))}trim(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ms({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ms.create=e=>new Ms({checks:[],typeName:xt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Tt(e)});function Ly(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(e.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return a%l/10**i}class sa extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ke.number){const a=this._getOrReturnCtx(t);return He(a,{code:Me.invalid_type,expected:Ke.number,received:a.parsedType}),bt}let r;const i=new mr;for(const a of this._def.checks)a.kind==="int"?Yt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),He(r,{code:Me.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Ly(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),He(r,{code:Me.not_finite,message:a.message}),i.dirty()):Yt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,at.toString(n))}gt(t,n){return this.setLimit("min",t,!1,at.toString(n))}lte(t,n){return this.setLimit("max",t,!0,at.toString(n))}lt(t,n){return this.setLimit("max",t,!1,at.toString(n))}setLimit(t,n,r,i){return new sa({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:at.toString(i)}]})}_addCheck(t){return new sa({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:at.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:at.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:at.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}sa.create=e=>new sa({checks:[],typeName:xt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Tt(e)});class Ja extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ke.bigint)return this._getInvalidInput(t);let r;const i=new mr;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),He(r,{code:Me.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Yt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return He(n,{code:Me.invalid_type,expected:Ke.bigint,received:n.parsedType}),bt}gte(t,n){return this.setLimit("min",t,!0,at.toString(n))}gt(t,n){return this.setLimit("min",t,!1,at.toString(n))}lte(t,n){return this.setLimit("max",t,!0,at.toString(n))}lt(t,n){return this.setLimit("max",t,!1,at.toString(n))}setLimit(t,n,r,i){return new Ja({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:at.toString(i)}]})}_addCheck(t){return new Ja({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:at.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ja.create=e=>new Ja({checks:[],typeName:xt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Tt(e)});class Iu extends Vt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ke.boolean){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.boolean,received:r.parsedType}),bt}return Jr(t.data)}}Iu.create=e=>new Iu({typeName:xt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Tt(e)});class fl extends Vt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ke.date){const a=this._getOrReturnCtx(t);return He(a,{code:Me.invalid_type,expected:Ke.date,received:a.parsedType}),bt}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return He(a,{code:Me.invalid_date}),bt}const r=new mr;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Me.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),He(i,{code:Me.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Yt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new fl({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:at.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:at.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}fl.create=e=>new fl({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:xt.ZodDate,...Tt(e)});class Ah extends Vt{_parse(t){if(this._getType(t)!==Ke.symbol){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.symbol,received:r.parsedType}),bt}return Jr(t.data)}}Ah.create=e=>new Ah({typeName:xt.ZodSymbol,...Tt(e)});class Nh extends Vt{_parse(t){if(this._getType(t)!==Ke.undefined){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.undefined,received:r.parsedType}),bt}return Jr(t.data)}}Nh.create=e=>new Nh({typeName:xt.ZodUndefined,...Tt(e)});class _h extends Vt{_parse(t){if(this._getType(t)!==Ke.null){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.null,received:r.parsedType}),bt}return Jr(t.data)}}_h.create=e=>new _h({typeName:xt.ZodNull,...Tt(e)});class Au extends Vt{constructor(){super(...arguments),this._any=!0}_parse(t){return Jr(t.data)}}Au.create=e=>new Au({typeName:xt.ZodAny,...Tt(e)});class Eh extends Vt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Jr(t.data)}}Eh.create=e=>new Eh({typeName:xt.ZodUnknown,...Tt(e)});class ii extends Vt{_parse(t){const n=this._getOrReturnCtx(t);return He(n,{code:Me.invalid_type,expected:Ke.never,received:n.parsedType}),bt}}ii.create=e=>new ii({typeName:xt.ZodNever,...Tt(e)});class Mh extends Vt{_parse(t){if(this._getType(t)!==Ke.undefined){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.void,received:r.parsedType}),bt}return Jr(t.data)}}Mh.create=e=>new Mh({typeName:xt.ZodVoid,...Tt(e)});class hs extends Vt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==Ke.array)return He(n,{code:Me.invalid_type,expected:Ke.array,received:n.parsedType}),bt;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(l||u)&&(He(n,{code:l?Me.too_big:Me.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(He(n,{code:Me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(He(n,{code:Me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>i.type._parseAsync(new ms(n,l,n.path,u)))).then(l=>mr.mergeArray(r,l));const a=[...n.data].map((l,u)=>i.type._parseSync(new ms(n,l,n.path,u)));return mr.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new hs({...this._def,minLength:{value:t,message:at.toString(n)}})}max(t,n){return new hs({...this._def,maxLength:{value:t,message:at.toString(n)}})}length(t,n){return new hs({...this._def,exactLength:{value:t,message:at.toString(n)}})}nonempty(t){return this.min(1,t)}}hs.create=(e,t)=>new hs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:xt.ZodArray,...Tt(t)});function Wi(e){if(e instanceof zn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=ei.create(Wi(r))}return new zn({...e._def,shape:()=>t})}else return e instanceof hs?new hs({...e._def,type:Wi(e.element)}):e instanceof ei?ei.create(Wi(e.unwrap())):e instanceof oa?oa.create(Wi(e.unwrap())):e instanceof Ci?Ci.create(e.items.map(t=>Wi(t))):e}class zn extends Vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Yt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Ke.object){const f=this._getOrReturnCtx(t);return He(f,{code:Me.invalid_type,expected:Ke.object,received:f.parsedType}),bt}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof ii&&this._def.unknownKeys==="strip"))for(const f in i.data)l.includes(f)||u.push(f);const h=[];for(const f of l){const m=a[f],x=i.data[f];h.push({key:{status:"valid",value:f},value:m._parse(new ms(i,x,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof ii){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of u)h.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(f==="strict")u.length>0&&(He(i,{code:Me.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of u){const x=i.data[m];h.push({key:{status:"valid",value:m},value:f._parse(new ms(i,x,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of h){const x=await m.key,g=await m.value;f.push({key:x,value:g,alwaysSet:m.alwaysSet})}return f}).then(f=>mr.mergeObjectSync(r,f)):mr.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(t){return at.errToObj,new zn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,l;const i=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:at.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new zn({...this._def,unknownKeys:"strip"})}passthrough(){return new zn({...this._def,unknownKeys:"passthrough"})}extend(t){return new zn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:xt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zn({...this._def,catchall:t})}pick(t){const n={};for(const r of Yt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new zn({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Yt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new zn({...this._def,shape:()=>n})}deepPartial(){return Wi(this)}partial(t){const n={};for(const r of Yt.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new zn({...this._def,shape:()=>n})}required(t){const n={};for(const r of Yt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ei;)a=a._def.innerType;n[r]=a}return new zn({...this._def,shape:()=>n})}keyof(){return Mp(Yt.objectKeys(this.shape))}}zn.create=(e,t)=>new zn({shape:()=>e,unknownKeys:"strip",catchall:ii.create(),typeName:xt.ZodObject,...Tt(t)});zn.strictCreate=(e,t)=>new zn({shape:()=>e,unknownKeys:"strict",catchall:ii.create(),typeName:xt.ZodObject,...Tt(t)});zn.lazycreate=(e,t)=>new zn({shape:e,unknownKeys:"strip",catchall:ii.create(),typeName:xt.ZodObject,...Tt(t)});class pl extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Os(u.ctx.common.issues));return He(n,{code:Me.invalid_union,unionErrors:l}),bt}if(n.common.async)return Promise.all(r.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const h of r){const f={...n,common:{...n.common,issues:[]},parent:null},m=h._parseSync({data:n.data,path:n.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(h=>new Os(h));return He(n,{code:Me.invalid_union,unionErrors:u}),bt}}get options(){return this._def.options}}pl.create=(e,t)=>new pl({options:e,typeName:xt.ZodUnion,...Tt(t)});function Nu(e,t){const n=Hs(e),r=Hs(t);if(e===t)return{valid:!0,data:e};if(n===Ke.object&&r===Ke.object){const i=Yt.objectKeys(t),a=Yt.objectKeys(e).filter(u=>i.indexOf(u)!==-1),l={...e,...t};for(const u of a){const h=Nu(e[u],t[u]);if(!h.valid)return{valid:!1};l[u]=h.data}return{valid:!0,data:l}}else if(n===Ke.array&&r===Ke.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const l=e[a],u=t[a],h=Nu(l,u);if(!h.valid)return{valid:!1};i.push(h.data)}return{valid:!0,data:i}}else return n===Ke.date&&r===Ke.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ml extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,l)=>{if(Ch(a)||Ch(l))return bt;const u=Nu(a.value,l.value);return u.valid?((Th(a)||Th(l))&&n.dirty(),{status:n.value,value:u.data}):(He(r,{code:Me.invalid_intersection_types}),bt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ml.create=(e,t,n)=>new ml({left:e,right:t,typeName:xt.ZodIntersection,...Tt(n)});class Ci extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.array)return He(r,{code:Me.invalid_type,expected:Ke.array,received:r.parsedType}),bt;if(r.data.length<this._def.items.length)return He(r,{code:Me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bt;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:Me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((l,u)=>{const h=this._def.items[u]||this._def.rest;return h?h._parse(new ms(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(a).then(l=>mr.mergeArray(n,l)):mr.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new Ci({...this._def,rest:t})}}Ci.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ci({items:e,typeName:xt.ZodTuple,rest:null,...Tt(t)})};class gl extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.object)return He(r,{code:Me.invalid_type,expected:Ke.object,received:r.parsedType}),bt;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in r.data)i.push({key:a._parse(new ms(r,u,r.path,u)),value:l._parse(new ms(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?mr.mergeObjectAsync(n,i):mr.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Vt?new gl({keyType:t,valueType:n,typeName:xt.ZodRecord,...Tt(r)}):new gl({keyType:Ms.create(),valueType:t,typeName:xt.ZodRecord,...Tt(n)})}}class Dh extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.map)return He(r,{code:Me.invalid_type,expected:Ke.map,received:r.parsedType}),bt;const i=this._def.keyType,a=this._def.valueType,l=[...r.data.entries()].map(([u,h],f)=>({key:i._parse(new ms(r,u,r.path,[f,"key"])),value:a._parse(new ms(r,h,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const h of l){const f=await h.key,m=await h.value;if(f.status==="aborted"||m.status==="aborted")return bt;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(f.value,m.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const h of l){const f=h.key,m=h.value;if(f.status==="aborted"||m.status==="aborted")return bt;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(f.value,m.value)}return{status:n.value,value:u}}}}Dh.create=(e,t,n)=>new Dh({valueType:t,keyType:e,typeName:xt.ZodMap,...Tt(n)});class Xa extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.set)return He(r,{code:Me.invalid_type,expected:Ke.set,received:r.parsedType}),bt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(He(r,{code:Me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(He(r,{code:Me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function l(h){const f=new Set;for(const m of h){if(m.status==="aborted")return bt;m.status==="dirty"&&n.dirty(),f.add(m.value)}return{status:n.value,value:f}}const u=[...r.data.values()].map((h,f)=>a._parse(new ms(r,h,r.path,f)));return r.common.async?Promise.all(u).then(h=>l(h)):l(u)}min(t,n){return new Xa({...this._def,minSize:{value:t,message:at.toString(n)}})}max(t,n){return new Xa({...this._def,maxSize:{value:t,message:at.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Xa.create=(e,t)=>new Xa({valueType:e,minSize:null,maxSize:null,typeName:xt.ZodSet,...Tt(t)});class Oh extends Vt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Oh.create=(e,t)=>new Oh({getter:e,typeName:xt.ZodLazy,...Tt(t)});class Rh extends Vt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return He(n,{received:n.data,code:Me.invalid_literal,expected:this._def.value}),bt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Rh.create=(e,t)=>new Rh({value:e,typeName:xt.ZodLiteral,...Tt(t)});function Mp(e,t){return new ia({values:e,typeName:xt.ZodEnum,...Tt(t)})}class ia extends Vt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return He(n,{expected:Yt.joinValues(r),received:n.parsedType,code:Me.invalid_type}),bt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return He(n,{received:n.data,code:Me.invalid_enum_value,options:r}),bt}return Jr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ia.create(t,{...this._def,...n})}exclude(t,n=this._def){return ia.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}ia.create=Mp;class Vh extends Vt{_parse(t){const n=Yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ke.string&&r.parsedType!==Ke.number){const i=Yt.objectValues(n);return He(r,{expected:Yt.joinValues(i),received:r.parsedType,code:Me.invalid_type}),bt}if(this._cache||(this._cache=new Set(Yt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Yt.objectValues(n);return He(r,{received:r.data,code:Me.invalid_enum_value,options:i}),bt}return Jr(t.data)}get enum(){return this._def.values}}Vh.create=(e,t)=>new Vh({values:e,typeName:xt.ZodNativeEnum,...Tt(t)});class xl extends Vt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ke.promise&&n.common.async===!1)return He(n,{code:Me.invalid_type,expected:Ke.promise,received:n.parsedType}),bt;const r=n.parsedType===Ke.promise?n.data:Promise.resolve(n.data);return Jr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}xl.create=(e,t)=>new xl({type:e,typeName:xt.ZodPromise,...Tt(t)});class aa extends Vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:l=>{He(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(r.data,a);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return bt;const h=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return h.status==="aborted"?bt:h.status==="dirty"||n.value==="dirty"?Ba(h.value):h});{if(n.value==="aborted")return bt;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?bt:u.status==="dirty"||n.value==="dirty"?Ba(u.value):u}}if(i.type==="refinement"){const l=u=>{const h=i.refinement(u,a);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?bt:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?bt:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ra(l))return bt;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>ra(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:n.value,value:u})):bt);Yt.assertNever(i)}}aa.create=(e,t,n)=>new aa({schema:e,typeName:xt.ZodEffects,effect:t,...Tt(n)});aa.createWithPreprocess=(e,t,n)=>new aa({schema:t,effect:{type:"preprocess",transform:e},typeName:xt.ZodEffects,...Tt(n)});class ei extends Vt{_parse(t){return this._getType(t)===Ke.undefined?Jr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ei.create=(e,t)=>new ei({innerType:e,typeName:xt.ZodOptional,...Tt(t)});class oa extends Vt{_parse(t){return this._getType(t)===Ke.null?Jr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}oa.create=(e,t)=>new oa({innerType:e,typeName:xt.ZodNullable,...Tt(t)});class _u extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}_u.create=(e,t)=>new _u({innerType:e,typeName:xt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Tt(t)});class Eu extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hl(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Os(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Os(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Eu.create=(e,t)=>new Eu({innerType:e,typeName:xt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Tt(t)});class zh extends Vt{_parse(t){if(this._getType(t)!==Ke.nan){const r=this._getOrReturnCtx(t);return He(r,{code:Me.invalid_type,expected:Ke.nan,received:r.parsedType}),bt}return{status:"valid",value:t.data}}}zh.create=e=>new zh({typeName:xt.ZodNaN,...Tt(e)});class Fy extends Vt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class p0 extends Vt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?bt:a.status==="dirty"?(n.dirty(),Ba(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?bt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new p0({in:t,out:n,typeName:xt.ZodPipeline})}}class Mu extends Vt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(ra(i)&&(i.value=Object.freeze(i.value)),i);return hl(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Mu.create=(e,t)=>new Mu({innerType:e,typeName:xt.ZodReadonly,...Tt(t)});var xt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(xt||(xt={}));const se=Ms.create,Jt=sa.create,Rn=Iu.create,li=Au.create;ii.create;const Qe=hs.create,Be=zn.create,Jn=pl.create;ml.create;Ci.create;const ci=gl.create,tn=ia.create;xl.create;ei.create;oa.create;const $y=tn(["COLOR","DIMENSION","SPACING","FONT_FAMILY","FONT_WEIGHT","FONT_SIZE","LINE_HEIGHT","LETTER_SPACING","DURATION","CUBIC_BEZIER","BLUR","SPREAD","RADIUS"]),Gy=Be({pattern:se().optional(),minimum:Jt().optional(),maximum:Jt().optional(),allowedValues:Qe(se()).optional()}),qy=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),type:$y.optional(),description:se().optional(),validation:Gy.optional()}),Hy=tn(["experimental","stable","deprecated"]),Wy=tn(["PRIMITIVE","SEMANTIC","COMPONENT"]),Uy=tn(["MOST_SPECIFIC_MATCH","DIMENSION_PRIORITY","NEAREST_PARENT","DEFAULT_VALUE"]),Du=Be({hex:se().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/),rgb:Be({r:Jt().int().min(0).max(255),g:Jt().int().min(0).max(255),b:Jt().int().min(0).max(255),a:Jt().min(0).max(1).optional()}).optional()}),Gr=Jn([Be({value:Jt(),unit:tn(["px","rem","%","em","vh","vw","pt"])}),se().regex(/^[0-9]+(\.[0-9]+)?(px|rem|%|em|vh|vw|pt)$/)]);Jn([Be({value:Jt().min(0),unit:tn(["ms","s"])}),se().regex(/^[0-9]+(\.[0-9]+)?(ms|s)$/)]);Jn([Be({x1:Jt().min(0).max(1),y1:Jt(),x2:Jt().min(0).max(1),y2:Jt()}),se().regex(/^cubic-bezier\([0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?\)$/)]);Jn([Be({offsetX:Gr,offsetY:Gr,blur:Gr,spread:Gr,color:Du,inset:Rn().optional()}),Qe(Be({offsetX:Gr,offsetY:Gr,blur:Gr,spread:Gr,color:Du,inset:Rn().optional()})),se().regex(/^([0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))( inset)?)(, ?[0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))( inset)?)*$/)]);Be({fontFamily:se(),fontSize:Gr,fontWeight:Jn([Jt().int().min(100).max(900).multipleOf(100),tn(["normal","bold","lighter","bolder"])]),lineHeight:Jn([Jt(),Gr]).optional(),letterSpacing:Gr.optional(),textDecoration:tn(["none","underline","line-through","overline"]).optional(),textTransform:tn(["none","capitalize","uppercase","lowercase"]).optional()});Jn([Be({width:Gr,style:tn(["solid","dashed","dotted","double","groove","ridge","inset","outset","none"]),color:Du}),se().regex(/^[0-9]+(\.[0-9]+)?(px|rem) (solid|dashed|dotted|double|groove|ridge|inset|outset|none) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))$/)]);const Zy=Jn([Be({value:li()}),Be({tokenId:se().regex(/^[a-zA-Z0-9-_]+$/)})]),Yy=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),dimensionId:se().regex(/^[a-zA-Z0-9-_]+$/)}),Jy=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),modes:Qe(Yy).min(1),required:Rn().default(!1),defaultMode:se(),resolvedValueTypeIds:Qe(se()).optional()}),Xy=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),resolvedValueTypeIds:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),private:Rn().default(!1),defaultModeIds:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)).optional(),modeResolutionStrategy:Be({priorityByType:Qe(se()),fallbackStrategy:Uy}).optional()}),Ky=Be({platformId:se(),value:se(),metadata:ci(li()).optional()}),Qy=Be({taxonomyId:se(),termId:se()}),m0=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/).optional(),resolvedValueTypeId:se().regex(/^[a-zA-Z0-9-_]+$/),private:Rn().default(!1),themeable:Rn().default(!1),status:Hy.optional(),tokenTier:Wy,generatedByAlgorithm:Rn().default(!1),algorithmId:se().regex(/^[a-zA-Z0-9-_]+$/).optional(),taxonomies:Qe(Qy),propertyTypes:Qe(se()),codeSyntax:Qe(Be({platformId:se(),formattedName:se()})),valuesByMode:Qe(Be({modeIds:Qe(se()),value:Zy,metadata:ci(li()).optional(),platformOverrides:Qe(Ky).optional()})).describe("If any entry in valuesByMode has modeIds: [], it must be the only entry in the array. Otherwise, all entries must have modeIds.length > 0. This enforces that a token can have either a single global value or multiple mode-specific values, but not both.").min(1)}),e2=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/),tokens:Qe(m0)});Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/),tokens:Qe(m0)});const t2=tn(["","_","-",".","/"]),n2=Be({id:se(),displayName:se(),description:se().optional(),syntaxPatterns:Be({prefix:se().optional(),suffix:se().optional(),delimiter:t2.optional(),capitalization:tn(["none","uppercase","lowercase","capitalize"]).optional(),formatString:se().optional()}).optional(),valueFormatters:Be({color:tn(["hex","rgb","rgba","hsl","hsla"]).optional(),dimension:tn(["px","rem","em","pt","dp","sp"]).optional(),numberPrecision:Jt().int().min(0).max(10).optional()}).optional()}),r2=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),isDefault:Rn()}),Dp=Be({value:Jn([se(),Jt(),Rn()]),tokenId:se().regex(/^[a-zA-Z0-9-_]+$/).optional()}),s2=Be({platformId:se(),value:Dp}),i2=Be({tokenId:se().regex(/^[a-zA-Z0-9-_]+$/),value:Dp,platformOverrides:Qe(s2).optional()}),a2=ci(Qe(i2)),o2=Be({id:se(),name:se(),description:se().optional()}),l2=Be({id:se(),name:se(),description:se(),terms:Qe(o2),resolvedValueTypeIds:Qe(se()).optional()}),c2=Be({emptyModeIds:tn(["mapToDefaults","preserveEmpty","requireExplicit"]),preserveOriginalValues:Rn()}),u2=Be({version:se(),dimensions:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),date:se(),migrationStrategy:c2.optional()}),d2=Be({whenAdding:se().regex(/^[a-zA-Z0-9-_]+$/),mapEmptyModeIdsTo:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),preserveDefaultValues:Rn().optional()}),h2=Be({rules:Qe(d2)}),f2=Be({systemName:se(),systemId:se().regex(/^[a-zA-Z0-9-_]+$/),description:se().optional(),version:se(),versionHistory:Qe(u2),dimensionEvolution:h2.optional(),dimensions:Qe(Jy),dimensionOrder:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)).optional(),tokenCollections:Qe(Xy),tokens:Qe(m0),platforms:Qe(n2),themes:Qe(r2).optional(),themeOverrides:a2.optional(),taxonomies:Qe(l2),resolvedValueTypes:Qe(qy),extensions:Be({tokenGroups:Qe(e2).optional(),tokenVariants:ci(li()).optional()}).optional()}).refine(e=>{if(!e.dimensionOrder)return!0;const t=new Set(e.dimensions.map(n=>n.id));return e.dimensionOrder.every(n=>t.has(n))},{message:"All dimensionOrder IDs must match existing dimension IDs",path:["dimensionOrder"]}),p2=e=>f2.parse(e),$l={core:()=>Ji(()=>import("./core-data-CE-_Zp81.js"),[]),brandAOverrides:()=>Ji(()=>import("./brand-a-overrides-CZ5KNG5B.js"),[]),brandBOverrides:()=>Ji(()=>import("./brand-b-overrides-yrCeUxK4.js"),[]),minimal:()=>Ji(()=>import("./example-minimal-data-B-6C8thN.js"),[])},Op={core:()=>Ji(()=>import("./core-algorithms-CZqvVs2X.js"),[]).catch(()=>null),minimal:()=>Ji(()=>import("./example-minimal-algorithms-B4SVSBJt.js"),[]).catch(()=>null)},m2=["COLOR","DIMENSION","SPACING","FONT_FAMILY","FONT_WEIGHT","FONT_SIZE","LINE_HEIGHT","LETTER_SPACING","DURATION","CUBIC_BEZIER","BLUR","SPREAD","RADIUS"];function g2(){return m2.map(e=>{const t=e.toLowerCase().replace(/_/g,"-"),n=e.toLowerCase().replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase());return{id:t,displayName:n,type:e}})}const Rp=g2();console.debug("[StorageService] Initialized default value types:",Rp);const Sn={TOKENS:"token-model:tokens",COLLECTIONS:"token-model:collections",MODES:"token-model:modes",VALUE_TYPES:"token-model:value-types",DIMENSIONS:"token-model:dimensions",DIMENSION_ORDER:"token-model:dimension-order",PLATFORMS:"token-model:platforms",THEMES:"token-model:themes",TAXONOMIES:"token-model:taxonomies",NAMING_RULES:"token-model:naming-rules",ALGORITHMS:"token-model:algorithms",ALGORITHM_FILE:"token-model:algorithm-file"};class ve{static getItem(t,n){const r=localStorage.getItem(t);return r?JSON.parse(r):(localStorage.setItem(t,JSON.stringify(n)),n)}static setItem(t,n){localStorage.setItem(t,JSON.stringify(n))}static getTokens(){return this.getItem(Sn.TOKENS,[])}static setTokens(t){localStorage.setItem(Sn.TOKENS,JSON.stringify(t))}static getCollections(){return this.getItem(Sn.COLLECTIONS,[])}static setCollections(t){localStorage.setItem(Sn.COLLECTIONS,JSON.stringify(t))}static getModes(){return this.getItem(Sn.MODES,[])}static setModes(t){localStorage.setItem(Sn.MODES,JSON.stringify(t))}static getValueTypes(){const t=this.getItem(Sn.VALUE_TYPES,Rp);return console.debug("[StorageService] Retrieved value types:",t),t}static setValueTypes(t){console.debug("[StorageService] Setting value types:",t),localStorage.setItem(Sn.VALUE_TYPES,JSON.stringify(t))}static getDimensions(){return this.getItem(Sn.DIMENSIONS,[])}static setDimensions(t){localStorage.setItem(Sn.DIMENSIONS,JSON.stringify(t))}static getDimensionOrder(){return this.getItem(Sn.DIMENSION_ORDER,[])}static setDimensionOrder(t){localStorage.setItem(Sn.DIMENSION_ORDER,JSON.stringify(t))}static getPlatforms(){return this.getItem(Sn.PLATFORMS,[])}static setPlatforms(t){localStorage.setItem(Sn.PLATFORMS,JSON.stringify(t))}static getThemes(){return this.getItem(Sn.THEMES,[])}static setThemes(t){localStorage.setItem(Sn.THEMES,JSON.stringify(t))}static getTaxonomies(){return this.getItem(Sn.TAXONOMIES,[])}static setTaxonomies(t){localStorage.setItem(Sn.TAXONOMIES,JSON.stringify(t))}static getNamingRules(){return this.getItem(Sn.NAMING_RULES,{taxonomyOrder:[]})}static setNamingRules(t){const n=this.getTaxonomies(),r=new Set(n.map(l=>l.id)),i=t.taxonomyOrder.filter(l=>r.has(l));i.length!==t.taxonomyOrder.length&&console.warn("[StorageService] Removed invalid taxonomy IDs from naming rules:",t.taxonomyOrder.filter(l=>!r.has(l)));const a={taxonomyOrder:i};this.setItem(Sn.NAMING_RULES,a)}static getAlgorithms(){return this.getItem(Sn.ALGORITHMS,[])}static setAlgorithms(t){this.setItem(Sn.ALGORITHMS,t)}static getAlgorithmFile(){const t=localStorage.getItem(Sn.ALGORITHM_FILE);return t?JSON.parse(t):null}static setAlgorithmFile(t){this.setItem(Sn.ALGORITHM_FILE,t)}static clearAll(){Object.values(Sn).forEach(t=>localStorage.removeItem(t))}}var Vp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ph=St.createContext&&St.createContext(Vp),ti=function(){return ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ti.apply(this,arguments)},x2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zp(e){return e&&e.map(function(t,n){return St.createElement(t.tag,ti({key:n},t.attr),zp(t.child))})}function Ei(e){return function(t){return St.createElement(y2,ti({attr:ti({},e.attr)},t),zp(e.child))}}function y2(e){var t=function(n){var r=e.attr,i=e.size,a=e.title,l=x2(e,["attr","size","title"]),u=i||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),St.createElement("svg",ti({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:h,style:ti(ti({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&St.createElement("title",null,a),e.children)};return Ph!==void 0?St.createElement(Ph.Consumer,null,function(n){return t(n)}):t(Vp)}function b2(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 9 6 6 6-6"}}]})(e)}function v2(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m18 15-6-6-6 6"}}]})(e)}function Pp(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"9",cy:"5",r:"1"}},{tag:"circle",attr:{cx:"9",cy:"19",r:"1"}},{tag:"circle",attr:{cx:"15",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"15",cy:"5",r:"1"}},{tag:"circle",attr:{cx:"15",cy:"19",r:"1"}}]})(e)}function xs(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}},{tag:"path",attr:{d:"m15 5 4 4"}}]})(e)}function es(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"}},{tag:"path",attr:{d:"M12 5v14"}}]})(e)}function w2(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function ts(e){return Ei({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"}},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}},{tag:"line",attr:{x1:"10",x2:"10",y1:"11",y2:"17"}},{tag:"line",attr:{x1:"14",x2:"14",y1:"11",y2:"17"}}]})(e)}class sr{static validateData(t){var n,r,i;try{p2(t);const a=t;if(a.config&&Array.isArray(a.config.systemVariables)){const l=a.config.systemVariables,u=new Set((a.dimensions||[]).map(h=>h.id));for(const h of l){if(!h.id||!h.name||!h.type)return{isValid:!1,errors:[`System variable is missing required fields (id, name, type): ${JSON.stringify(h)}`]};if(!["string","number","boolean","color"].includes(h.type))return{isValid:!1,errors:[`System variable ${h.id} has invalid type: ${h.type}`]};if(h.modeBased){if(!h.dimensionId)return{isValid:!1,errors:[`System variable ${h.id} is mode-based but missing dimensionId.`]};if(!u.has(h.dimensionId))return{isValid:!1,errors:[`System variable ${h.id} references non-existent dimensionId: ${h.dimensionId}`]};if(!Array.isArray(h.valuesByMode)||h.valuesByMode.length===0)return{isValid:!1,errors:[`System variable ${h.id} is mode-based but has no valuesByMode array.`]};for(const f of h.valuesByMode)if(!Array.isArray(f.modeIds)||typeof f.value>"u")return{isValid:!1,errors:[`System variable ${h.id} has invalid valuesByMode entry: ${JSON.stringify(f)}`]}}}}if(a.tokens){const l=new Set(((n=a.resolvedValueTypes)==null?void 0:n.map(u=>u.id))||[]);if(l.size===0)return{isValid:!1,errors:["No resolvedValueTypes found in data. Your system data must include all value types required by your schema."]};for(const u of a.tokens){const h=u.resolvedValueTypeId;if(!h)return{isValid:!1,errors:[`Token ${u.id} is missing required resolvedValueTypeId`]};if(!l.has(h))return{isValid:!1,errors:[`Token ${u.id} has invalid resolvedValueTypeId "${h}". Must be one of: ${Array.from(l).join(", ")}`]};for(const f of u.valuesByMode){const m=f.value;if("tokenId"in m&&!a.tokens.find(g=>g.id===m.tokenId))return{isValid:!1,errors:[`Token ${u.id} references non-existent token ${m.tokenId} in valuesByMode`]}}if(u.tokenCollectionId){const f=a.tokenCollections.find(m=>m.id===u.tokenCollectionId);if(!f)return{isValid:!1,errors:[`Token ${u.id} references non-existent collection ${u.tokenCollectionId}`]};if(!f.resolvedValueTypeIds.includes(u.resolvedValueTypeId))return{isValid:!1,errors:[`Token ${u.id} has type ${u.resolvedValueTypeId} which is not supported by collection ${f.id}`]}}}if(a.dimensions){const u=new Set(a.dimensions.map(h=>h.id));if(a.dimensionOrder){for(const f of a.dimensionOrder)if(!u.has(f))return{isValid:!1,errors:[`dimensionOrder contains ID "${f}" that does not exist in dimensions`]};const h=new Set(a.dimensionOrder);for(const f of a.dimensions)if(!h.has(f.id))return{isValid:!1,errors:[`Dimension "${f.id}" is not included in dimensionOrder`]};if(new Set(a.dimensionOrder).size!==a.dimensionOrder.length)return{isValid:!1,errors:["dimensionOrder contains duplicate IDs"]}}for(const h of a.dimensions){if(!h.resolvedValueTypeIds)return{isValid:!1,errors:[`Dimension ${h.id} is missing required resolvedValueTypeIds`]};for(const f of h.resolvedValueTypeIds)if(!l.has(f))return{isValid:!1,errors:[`Dimension ${h.id} has invalid resolvedValueTypeId "${f}". Must be one of: ${Array.from(l).join(", ")}`]}}}if(a.tokenCollections)for(const u of a.tokenCollections){const h=u.resolvedValueTypeIds;if(!h||h.length===0)return{isValid:!1,errors:[`Collection ${u.id} is missing required resolvedValueTypeIds`]};for(const f of h)if(!l.has(f))return{isValid:!1,errors:[`Collection ${u.id} has invalid resolvedValueTypeId "${f}". Must be one of: ${Array.from(l).join(", ")}`]}}if(a.taxonomies)for(const u of a.taxonomies){if(!u.terms||u.terms.length===0)return{isValid:!1,errors:[`Taxonomy ${u.id} must have at least one term`]};if(u.resolvedValueTypeIds){for(const h of u.resolvedValueTypeIds)if(!l.has(h))return{isValid:!1,errors:[`Taxonomy ${u.id} has invalid resolvedValueTypeId "${h}". Must be one of: ${Array.from(l).join(", ")}`]}}}if(a.themes&&a.themes.filter(h=>h.isDefault).length!==1)return{isValid:!1,errors:["Exactly one theme must be marked as default"]};if((r=a.namingRules)!=null&&r.taxonomyOrder){const u=new Set(((i=a.taxonomies)==null?void 0:i.map(h=>h.id))||[]);for(const h of a.namingRules.taxonomyOrder)if(!u.has(h))return{isValid:!1,errors:[`namingRules.taxonomyOrder contains ID "${h}" that does not exist in taxonomies`]}}}return{isValid:!0}}catch(a){return a&&typeof a=="object"&&"errors"in a?{isValid:!1,errors:a.errors}:{isValid:!1,errors:[a instanceof Error?a.message:String(a)]}}}}function S2({themes:e,setThemes:t}){const{colorMode:n}=nn(),[r,i]=P.useState(!1),[a,l]=P.useState(null),[u,h]=P.useState({id:"",displayName:"",description:"",isDefault:!1}),f=or(),m=[],x=[],g=[],v=[],N=[],D=(A=null)=>{l(A),h(A!==null?e[A]:{id:"",displayName:"",description:"",isDefault:!1}),i(!0)},j=()=>{i(!1),l(null)},S=(A,I)=>{h(W=>({...W,[A]:I}))},T=A=>{const I={tokenCollections:x,dimensions:g,tokens:m,platforms:v,taxonomies:N,themes:A,version:"1.0.0",versionHistory:[]};return sr.validateData(I).isValid?(t(A),!0):(f({title:"Schema Validation Failed",description:"Your change would make the data invalid. See the Validation tab for details.",status:"error",duration:4e3,isClosable:!0}),!1)},E=()=>{if(!u.displayName.trim()){f({title:"Required Field Missing",description:"Display name is required for themes.",status:"error",duration:4e3,isClosable:!0});return}const A=u.id||u.displayName.trim().replace(/\s+/g,"_").toLowerCase();if(!u.id&&e.some(J=>J.id===A)){f({title:"Duplicate Theme",description:"A theme with this name already exists. Please choose a different name.",status:"error",duration:4e3,isClosable:!0});return}const I=[...e],W={...u,id:A,isDefault:u.isDefault};a!==null?I[a]=W:I.push(W),W.isDefault&&I.forEach(J=>{J.id!==W.id&&(J.isDefault=!1)}),T(I)&&(i(!1),l(null),f({title:"Theme Saved",description:`Successfully ${a!==null?"updated":"created"} theme "${u.displayName}"`,status:"success",duration:3e3,isClosable:!0}))},M=A=>{const I=e[A],W=e.filter((J,le)=>le!==A);T(W)&&f({title:"Theme Deleted",description:`Successfully deleted theme "${I.displayName}"`,status:"info",duration:3e3,isClosable:!0})};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Themes"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:n==="dark"?"gray.900":"white",children:[s.jsx(Ne,{leftIcon:s.jsx(es,{}),size:"sm",onClick:()=>D(null),colorScheme:"blue",mb:4,children:"Add Theme"}),s.jsx(me,{align:"stretch",spacing:2,children:e.map((A,I)=>s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:n==="dark"?"gray.800":"gray.50",borderColor:n==="dark"?"gray.600":"gray.200",children:s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsxs(Z,{children:[s.jsx(B,{fontSize:"lg",fontWeight:"medium",children:A.displayName}),s.jsx(B,{fontSize:"sm",color:n==="dark"?"gray.400":"gray.600",children:A.description||""}),A.isDefault&&s.jsx(ps,{colorScheme:"green",size:"sm",mt:1,children:"Default"})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit theme",icon:s.jsx(xs,{}),size:"sm",onClick:()=>D(I),colorScheme:n==="dark"?"blue":"gray"}),s.jsx(wt,{"aria-label":"Delete theme",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>M(I)})]})]})},A.id))})]}),s.jsxs(Hn,{isOpen:r,onClose:j,size:"lg",children:[s.jsx(Mn,{}),s.jsxs(Wn,{bg:n==="dark"?"gray.900":"white",children:[s.jsx(Dn,{children:a!==null?"Edit Theme":"Add Theme"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Display Name"}),s.jsx(dt,{value:u.displayName,onChange:A=>S("displayName",A.target.value),bg:n==="dark"?"gray.700":"white"})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:u.description||"",onChange:A=>S("description",A.target.value),bg:n==="dark"?"gray.700":"white"})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Default Theme"}),s.jsx(Ne,{colorScheme:u.isDefault?"green":"gray",onClick:()=>S("isDefault",!u.isDefault),size:"sm",children:u.isDefault?"Default Theme":"Set as Default"})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:j,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:E,children:"Save"})]})]})]})]})}const k2=({themes:e,setThemes:t})=>{const{colorMode:n}=nn();return s.jsx(me,{p:4,bg:n==="dark"?"gray.900":"gray.50",flex:"1",align:"stretch",spacing:0,children:s.jsx(Bl,{maxW:"1000px",p:0,children:s.jsx(S2,{themes:e,setThemes:t})})})};function j2(e){const t=e.length,n=e.filter(l=>l.private).length,r=t-n,i=e.filter(l=>l.themeable).length,a=t-i;return{total:t,privateCount:n,publicCount:r,privatePercent:t?n/t*100:0,publicPercent:t?r/t*100:0,themeableCount:i,nonThemeableCount:a,themeablePercent:t?i/t*100:0,nonThemeablePercent:t?a/t*100:0}}function C2(e,t){return t.map(n=>{const r=e.filter(i=>Array.isArray(i.valuesByMode)&&i.valuesByMode.some(a=>Array.isArray(a.platformOverrides)&&a.platformOverrides.some(l=>l.platformId===n.id))).length;return{platformId:n.id,platformName:n.displayName,count:r}})}function T2(e){const t=e.length,n=e.map(r=>({themeId:r.id,themeName:r.displayName,percentWithOverride:0}));return{totalThemes:t,themeOverrides:n}}function I2(){return{version:"v1.0.0",date:"2024-01-01"}}function A2(){return[{id:1,description:'Token "Primary Color" updated',date:"2024-06-01"},{id:2,description:'Theme "Dark" created',date:"2024-05-30"},{id:3,description:'Platform "iOS" added',date:"2024-05-28"}]}const N2=({tokens:e,platforms:t,themes:n})=>{const{colorMode:r}=nn(),i=j2(e),a=C2(e,t),l=T2(n),u=I2(),h=A2();return s.jsx(Z,{p:0,borderWidth:0,borderRadius:"md",bg:r==="dark"?"gray.900":"gray.50",children:s.jsxs(Z,{p:8,children:[s.jsx(gt,{size:"xl",mb:8,children:"Dashboard"}),s.jsxs(Ga,{columns:{base:1,md:2},spacing:8,mb:8,children:[s.jsxs(Z,{p:6,borderWidth:1,borderRadius:"md",bg:"chakra-body-bg",children:[s.jsx(gt,{size:"md",mb:4,children:"Tokens"}),s.jsxs(Ga,{columns:2,spacing:4,mb:4,children:[s.jsxs(Fi,{children:[s.jsx($i,{children:"Total"}),s.jsx(Gi,{children:i.total})]}),s.jsxs(Fi,{children:[s.jsx($i,{children:"Private"}),s.jsx(Gi,{children:i.privateCount}),s.jsxs(Lo,{children:[i.privatePercent.toFixed(1),"%"]})]}),s.jsxs(Fi,{children:[s.jsx($i,{children:"Public"}),s.jsx(Gi,{children:i.publicCount}),s.jsxs(Lo,{children:[i.publicPercent.toFixed(1),"%"]})]}),s.jsxs(Fi,{children:[s.jsx($i,{children:"Themeable"}),s.jsx(Gi,{children:i.themeableCount}),s.jsxs(Lo,{children:[i.themeablePercent.toFixed(1),"%"]})]}),s.jsxs(Fi,{children:[s.jsx($i,{children:"Not Themeable"}),s.jsx(Gi,{children:i.nonThemeableCount}),s.jsxs(Lo,{children:[i.nonThemeablePercent.toFixed(1),"%"]})]})]})]}),s.jsxs(Z,{p:6,borderWidth:1,borderRadius:"md",bg:"chakra-body-bg",children:[s.jsx(gt,{size:"md",mb:4,children:"Platforms"}),s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:"Platform"}),s.jsx(hn,{isNumeric:!0,children:"Tokens w/ Overrides"})]})}),s.jsx(_s,{children:a.map(f=>s.jsxs(Kn,{children:[s.jsx(an,{children:f.platformName}),s.jsx(an,{isNumeric:!0,children:f.count})]},f.platformId))})]})]})]}),s.jsxs(Ga,{columns:{base:1,md:2},spacing:8,mb:8,children:[s.jsxs(Z,{p:6,borderWidth:1,borderRadius:"md",bg:"chakra-body-bg",children:[s.jsx(gt,{size:"md",mb:4,children:"Themes"}),s.jsxs(Fi,{children:[s.jsx($i,{children:"Total Themes"}),s.jsx(Gi,{children:l.totalThemes})]}),s.jsx(us,{my:4}),s.jsx(gt,{size:"sm",mb:2,children:"Theme Overrides"}),s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:"Theme"}),s.jsx(hn,{isNumeric:!0,children:"% Tokens w/ Override"})]})}),s.jsx(_s,{children:l.themeOverrides.map(f=>s.jsxs(Kn,{children:[s.jsx(an,{children:f.themeName}),s.jsxs(an,{isNumeric:!0,children:[f.percentWithOverride,"%"]})]},f.themeId))})]})]}),s.jsxs(Z,{p:6,borderWidth:1,borderRadius:"md",bg:"chakra-body-bg",children:[s.jsx(gt,{size:"md",mb:4,children:"Releases"}),s.jsxs(me,{align:"start",spacing:2,children:[s.jsxs(B,{children:[s.jsx("b",{children:"Latest Version:"})," ",u.version]}),s.jsxs(B,{children:[s.jsx("b",{children:"Date:"})," ",u.date]}),s.jsx(ps,{colorScheme:"gray",children:"Placeholder"})]})]})]}),s.jsxs(Z,{p:6,borderWidth:1,borderRadius:"md",bg:"chakra-body-bg",children:[s.jsx(gt,{size:"md",mb:4,children:"Latest Activity"}),s.jsxs(me,{align:"start",spacing:2,children:[h.map(f=>s.jsxs(xe,{spacing:4,children:[s.jsx(B,{children:f.description}),s.jsx(B,{color:"gray.500",fontSize:"sm",children:f.date})]},f.id)),s.jsx(ps,{colorScheme:"gray",children:"Placeholder"})]})]})]})})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E2=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Bh=e=>{const t=E2(e);return t.charAt(0).toUpperCase()+t.slice(1)},Bp=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),M2=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...u},h)=>P.createElement("svg",{ref:h,...D2,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Bp("lucide",i),...!a&&!M2(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>P.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(e,t)=>{const n=P.forwardRef(({className:r,...i},a)=>P.createElement(O2,{ref:a,iconNode:t,className:Bp(`lucide-${_2(Bh(e))}`,`lucide-${e}`,r),...i}));return n.displayName=Bh(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lh=rt("arrow-right",R2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],Lp=rt("blend",V2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"m13.11 7.664 1.78 2.672",key:"go2gg9"}],["path",{d:"m14.162 12.788-3.324 1.424",key:"11x848"}],["path",{d:"m20 4-6.06 1.515",key:"1wxxh7"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["circle",{cx:"12",cy:"6",r:"2",key:"1jj5th"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}],["circle",{cx:"9",cy:"15",r:"2",key:"lf2ghp"}]],P2=rt("chart-network",z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qc=rt("check",B2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qo=rt("chevron-down",L2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$2=rt("chevron-left",F2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q2=rt("chevron-right",G2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],W2=rt("circle-alert",H2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fp=rt("circle-check-big",U2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$p=rt("circle",Z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Fh=rt("clock",Y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],X2=rt("columns-2",J2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],$h=rt("database",K2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],e4=rt("download",Q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],Gp=rt("expand",t4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],qa=rt("file-code",n4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M20 17a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.9a2 2 0 0 1-1.69-.9l-.81-1.2a2 2 0 0 0-1.67-.9H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2Z",key:"4u7rpt"}],["path",{d:"M2 8v11a2 2 0 0 0 2 2h14",key:"1eicx1"}]],qp=rt("folders",r4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],i4=rt("funnel",s4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],o4=rt("git-branch",a4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Hp=rt("git-commit-horizontal",l4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]],u4=rt("git-pull-request-arrow",c4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ou=rt("grip-vertical",d4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Wp=rt("history",h4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gh=rt("info",f4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],m4=rt("layers",p4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],x4=rt("layout-dashboard",g4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],b4=rt("list-ordered",y4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M5 12h14",key:"1ays0h"}]],g0=rt("minus",v4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],Up=rt("monitor-smartphone",w4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Zp=rt("move-horizontal",S4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]],Yp=rt("move-vertical",k4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Gl=rt("palette",j4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}]],T4=rt("parentheses",C4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],yl=rt("pencil-ruler",I4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],qh=rt("play",A4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ur=rt("plus",N4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],E4=rt("redo-2",_4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],D4=rt("refresh-cw",M4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bl=rt("rotate-ccw",O4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Jp=rt("ruler",R4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xp=rt("save",V4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Kp=rt("search",z4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ru=rt("settings",P4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],L4=rt("sparkle",B4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],$4=rt("split",F4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],Zs=rt("square-function",G4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],x0=rt("square-pen",q4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M21 11a8 8 0 0 0-8-8",key:"1lxwo5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1dv2y5"}]],Qp=rt("square-round-corner",H4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]],em=rt("square-stack",W4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["line",{x1:"6",x2:"6",y1:"4",y2:"20",key:"fy8qot"}],["polygon",{points:"10,4 20,12 10,20",key:"1mc1pf"}]],Z4=rt("step-forward",U4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],vl=rt("tag",Y4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],X4=rt("tags",J4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]],Q4=rt("text-cursor-input",K4);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],tm=rt("timer",eb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],cs=rt("trash-2",tb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vu=rt("triangle-alert",nb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],nm=rt("type",rb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ib=rt("undo-2",sb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],ob=rt("unlink",ab);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cb=rt("user",lb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],db=rt("users",ub);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],wl=rt("variable",hb);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rm=rt("x",fb),pb=({size:e=40,color:t="inherit"})=>s.jsx("span",{style:{display:"inline-block",color:t},children:s.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"Logo",children:s.jsx("path",{d:"M10.4902 1.35589C11.4183 0.820116 12.5621 0.820141 13.4902 1.35589L20.4492 5.37444C21.3774 5.9103 21.9491 6.90039 21.9492 7.9721V16.0082C21.9492 17.08 21.3774 18.07 20.4492 18.6059L13.5 22.6186V15.6987C14.9656 15.1052 15.9998 13.669 16 11.9907C16 9.78154 14.2091 7.99065 12 7.99065C9.79088 7.99065 8.00002 9.78154 8 11.9907C8.00017 13.669 9.03444 15.1052 10.5 15.6987V22.6293C10.4968 22.6275 10.4934 22.6263 10.4902 22.6244L3.53125 18.6059C2.60305 18.07 2.03125 17.08 2.03125 16.0082V7.9721C2.03133 6.90039 2.60311 5.9103 3.53125 5.37444L10.4902 1.35589Z",fill:"currentColor"})})}),sm=({size:e=24})=>s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M21 16V8C20.9996 7.64927 20.9071 7.30481 20.7315 7.00116C20.556 6.69752 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69752 3.26846 7.00116C3.09294 7.30481 3.00036 7.64927 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.998 12 21.998C12.3511 21.998 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("circle",{cx:"12",cy:"12",r:"3.5",stroke:"currentColor",strokeWidth:"2"}),s.jsx("line",{x1:"3.03381",y1:"6.55748",x2:"9.05547",y2:"10.468",stroke:"currentColor",strokeWidth:"2"}),s.jsx("line",{y1:"-1",x2:"7.18",y2:"-1",transform:"matrix(-0.838671 0.544639 0.544639 0.838671 21.5108 7.39615)",stroke:"currentColor",strokeWidth:"2"}),s.jsx("line",{x1:"12",y1:"16.1429",x2:"12",y2:"21.6525",stroke:"currentColor",strokeWidth:"2"})]}),mb=[{id:"dashboard",label:"Dashboard",icon:x4,route:"/dashboard"},{id:"tokens",label:"Tokens",children:[{id:"tokens",label:"Tokens",icon:sm,route:"/tokens/tokens"},{id:"collections",label:"Collections",icon:qp,route:"/tokens/collections"},{id:"system-variables",label:"System Variables",icon:Lp,route:"/tokens/system-variables"},{id:"algorithms",label:"Algorithms",icon:Zs,route:"/tokens/algorithms"},{id:"analysis",label:"Analysis",icon:P2,route:"/tokens/analysis"}]},{id:"setup",label:"Setup",children:[{id:"dimensions",label:"Dimensions",icon:em,route:"/dimensions"},{id:"classification",label:"Classification",icon:vl,route:"/classification"},{id:"naming-rules",label:"Naming Rules",icon:b4,route:"/naming-rules"},{id:"value-types",label:"Value Types",icon:yl,route:"/value-types"}]},{id:"themes",label:"Themes",icon:Gl,route:"/themes"},{id:"publishing",label:"Publishing",children:[{id:"platforms",label:"Platforms",icon:Up,route:"/platforms"},{id:"export-settings",label:"Export Settings",icon:Ru,route:"/export-settings"},{id:"validation",label:"Validation",icon:Fp,route:"/validation"},{id:"version-history",label:"Version History",icon:Wp,route:"/version-history"}]},{id:"access",label:"Access",icon:db,route:"/access"},{id:"schemas",label:"Schemas",children:[{id:"core-data",label:"Core Data",icon:qa,route:"/schemas/core-data"},{id:"theme-overrides",label:"Theme Overrides",icon:qa,route:"/schemas/theme-overrides"},{id:"algorithm-data",label:"Algorithm Data",icon:qa,route:"/schemas/algorithm-data"}]}],gb=({dataSource:e,setDataSource:t,dataOptions:n,onResetData:r,onExportData:i})=>{const[a,l]=P.useState(!1),{colorMode:u}=nn(),h=uy(),f=u==="dark"?"gray.800":"white",m=u==="dark"?"gray.700":"gray.200",x=(g,v=!1)=>{const N=h.pathname===g.route,D=g.icon;if(g.children&&!v)return a?null:s.jsx(B,{fontSize:"xs",fontWeight:"bold",color:"gray.500",textTransform:"uppercase",letterSpacing:"wider",mt:4,mb:2,px:2,children:g.label},g.id);const j=s.jsxs(Z,{as:dy,to:g.route,display:"flex",alignItems:"center",p:2,borderRadius:"md",bg:N?"blue.500":"transparent",color:N?"white":"inherit",_hover:{bg:N?"blue.600":u==="dark"?"gray.700":"gray.100"},cursor:"pointer",role:"menuitem","aria-current":N?"page":void 0,tabIndex:0,textDecoration:"none",children:[D&&s.jsx(D,{size:20}),!a&&s.jsx(B,{ml:3,fontSize:"sm",children:g.label})]},g.id);return a?s.jsx(ds,{label:g.label,placement:"right",children:j},g.id):j};return s.jsx(Z,{as:"nav",position:"relative",w:a?"64px":"260px",h:"100vh",bg:f,borderRight:"1px",borderColor:m,transition:"width 0.2s",role:"navigation","aria-label":"Main navigation",children:s.jsxs(me,{spacing:0,align:"stretch",h:"full",children:[s.jsxs(Z,{px:4,py:3,borderBottom:"1px",borderColor:m,display:"flex",gap:2,justifyContent:"center",alignItems:"center",children:[s.jsx(pb,{size:28,color:u==="dark"?"white":"black"}),!a&&s.jsxs(B,{fontSize:"sm",lineHeight:"1",fontWeight:"bold",children:["Design System",s.jsx("br",{}),"Foundry"]})]}),s.jsx(me,{spacing:1,align:"stretch",p:4,flex:1,children:mb.map(g=>g.children?s.jsxs(Z,{children:[x(g),s.jsx(me,{spacing:1,align:"stretch",ml:0,mt:1,children:g.children.map(v=>x(v,!0))},`${g.id}-children`)]},g.id):x(g))}),!a&&n&&e&&t&&r&&s.jsx(Z,{p:4,borderTop:"1px",borderColor:m,children:s.jsx(me,{spacing:2,align:"stretch",children:s.jsx(fn,{size:"sm",value:e,onChange:g=>t(g.target.value),children:n.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})})}),!a&&n&&e&&t&&r&&s.jsxs(xe,{gap:2,p:2,borderTop:"1px",borderColor:m,children:[i&&s.jsx(Ne,{size:"sm",leftIcon:s.jsx(e4,{size:16}),onClick:i,variant:"outline",w:"full",children:!a&&"Export Data"}),s.jsx(Ne,{size:"sm",leftIcon:s.jsx(D4,{size:16}),onClick:r,variant:"outline",w:"full",children:"Reset Data"})]}),s.jsx(Z,{px:4,py:2,borderBottom:"1px",borderColor:m,children:s.jsx(Ne,{"aria-label":a?"Expand sidebar":"Collapse sidebar",size:"sm",leftIcon:a?s.jsx(q2,{size:16}):s.jsx($2,{size:16}),onClick:()=>l(!a),variant:"ghost",w:"full",gap:1,justifyContent:"flex-start",children:!a&&"Collapse"})})]})})},xb=e=>{switch(e){case"token":return qa;case"theme":return Gl;case"dimension":return m4;case"mode":return Ru;case"resolvedValueType":return vl;case"taxonomy":return $h;case"term":return vl;case"algorithm":return Zs;case"collection":return $h;case"platform":return Ru;default:return qa}},yb=e=>{switch(e){case"added":return Ur;case"removed":return g0;case"modified":return x0}},wr=(e,t=50)=>{if(e==null)return"null";if(typeof e=="string")return e.length>t?`${e.substring(0,t)}...`:e;if(typeof e=="object"){const n=JSON.stringify(e);return n.length>t?`${n.substring(0,t)}...`:n}return String(e)},bb=(e,t)=>{var a,l,u;const n=[],r=new Map,i=new Map;e==null||e.forEach((h,f)=>{var m;if(typeof h=="object"&&h!==null){const x=((m=h.modeIds)==null?void 0:m.join(","))||`index-${f}`;r.set(x,h)}}),t==null||t.forEach((h,f)=>{var m;if(typeof h=="object"&&h!==null){const x=((m=h.modeIds)==null?void 0:m.join(","))||`index-${f}`;i.set(x,h)}});for(const[h,f]of i){const m=r.get(h);m?JSON.stringify(m.value)!==JSON.stringify(f.value)&&n.push({field:"valuesByMode",oldValue:m.value,newValue:f.value,context:`Modified for modes: ${((l=f.modeIds)==null?void 0:l.join(", "))||"global"}`}):n.push({field:"valuesByMode",newValue:f.value,context:`Added for modes: ${((a=f.modeIds)==null?void 0:a.join(", "))||"global"}`})}for(const[h,f]of r)i.has(h)||n.push({field:"valuesByMode",oldValue:f.value,context:`Removed for modes: ${((u=f.modeIds)==null?void 0:u.join(", "))||"global"}`});return n},vb=(e,t)=>{const n=[],r=new Map,i=new Map;e==null||e.forEach(a=>{typeof a=="object"&&a!==null&&r.set(a.platformId,a)}),t==null||t.forEach(a=>{typeof a=="object"&&a!==null&&i.set(a.platformId,a)});for(const[a,l]of i){const u=r.get(a);u?u.value!==l.value&&n.push({field:"platformOverrides",oldValue:u.value,newValue:l.value,context:`Modified for platform: ${a}`}):n.push({field:"platformOverrides",newValue:l.value,context:`Added for platform: ${a}`})}for(const[a,l]of r)i.has(a)||n.push({field:"platformOverrides",oldValue:l.value,context:`Removed for platform: ${a}`});return n},Hh=(e,t,n="id")=>{const r=[],i=new Map,a=new Map;e==null||e.forEach(l=>{typeof l=="object"&&l!==null&&i.set(l[n],l)}),t==null||t.forEach(l=>{typeof l=="object"&&l!==null&&a.set(l[n],l)});for(const[l,u]of a)if(!i.get(l)){const f=u;r.push({field:"array",newValue:f.name||f.displayName||l,context:`Added ${l}`})}for(const[l,u]of i)if(!a.has(l)){const h=u;r.push({field:"array",oldValue:h.name||h.displayName||l,context:`Removed ${l}`})}return r},wb=(e,t)=>{const n=[];if(!e||!t)return n;const r=e.tokens||[],i=t.tokens||[],a=new Map,l=new Map;r.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&a.set(Q.id,Q)}}),i.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&l.set(Q.id,Q)}});for(const[F,Q]of l)if(!a.has(F)){const de=Q;n.push({type:"added",entityType:"token",entityId:F,entityName:de.displayName||F,changes:[{field:"token",newValue:`Added token: ${de.displayName||F} (${de.resolvedValueTypeId||"unknown"})`}]})}for(const[F,Q]of a)if(!l.has(F)){const de=Q;n.push({type:"removed",entityType:"token",entityId:F,entityName:de.displayName||F,changes:[{field:"token",oldValue:`Removed token: ${de.displayName||F}`}]})}for(const[F,Q]of l){const de=a.get(F);if(de){const q=[],pe=Q,H=de;["displayName","description","tokenTier","status","themeable","private"].forEach(oe=>{H[oe]!==pe[oe]&&q.push({field:oe,oldValue:wr(H[oe]),newValue:wr(pe[oe])})});const X=bb(H.valuesByMode||[],pe.valuesByMode||[]);q.push(...X);const he=H.valuesByMode||[],ge=pe.valuesByMode||[];if(he.length>0||ge.length>0)for(let oe=0;oe<Math.max(he.length,ge.length);oe++){const Se=he[oe],ne=ge[oe];if(Se!=null&&Se.platformOverrides||ne!=null&&ne.platformOverrides){const be=vb((Se==null?void 0:Se.platformOverrides)||[],(ne==null?void 0:ne.platformOverrides)||[]);q.push(...be)}}q.length>0&&n.push({type:"modified",entityType:"token",entityId:F,entityName:pe.displayName||F,changes:q})}}const u=e.themes||[],h=t.themes||[],f=new Map,m=new Map;u.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&f.set(Q.id,Q)}}),h.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&m.set(Q.id,Q)}});for(const[F,Q]of m)if(f.has(F)){const de=f.get(F),q=[],pe=de,H=Q;["displayName","description","isDefault"].forEach(L=>{pe[L]!==H[L]&&q.push({field:L,oldValue:wr(pe[L]),newValue:wr(H[L])})}),q.length>0&&n.push({type:"modified",entityType:"theme",entityId:F,entityName:H.displayName||F,changes:q})}else{const de=Q;n.push({type:"added",entityType:"theme",entityId:F,entityName:de.displayName||F,changes:[{field:"theme",newValue:`Added theme: ${de.displayName||F}`}]})}for(const[F,Q]of f)if(!m.has(F)){const de=Q;n.push({type:"removed",entityType:"theme",entityId:F,entityName:de.displayName||F,changes:[{field:"theme",oldValue:`Removed theme: ${de.displayName||F}`}]})}const x=e.dimensions||[],g=t.dimensions||[],v=new Map,N=new Map;x.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&v.set(Q.id,Q)}}),g.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&N.set(Q.id,Q)}});for(const[F,Q]of N)if(v.has(F)){const de=v.get(F),q=[],pe=de,H=Q;["displayName","description","required","defaultMode"].forEach(X=>{pe[X]!==H[X]&&q.push({field:X,oldValue:wr(pe[X]),newValue:wr(H[X])})});const L=Hh(pe.modes||[],H.modes||[]);q.push(...L),q.length>0&&n.push({type:"modified",entityType:"dimension",entityId:F,entityName:H.displayName||F,changes:q})}else{const de=Q;n.push({type:"added",entityType:"dimension",entityId:F,entityName:de.displayName||F,changes:[{field:"dimension",newValue:`Added dimension: ${de.displayName||F}`}]})}for(const[F,Q]of v)if(!N.has(F)){const de=Q;n.push({type:"removed",entityType:"dimension",entityId:F,entityName:de.displayName||F,changes:[{field:"dimension",oldValue:`Removed dimension: ${de.displayName||F}`}]})}const D=e.resolvedValueTypes||[],j=t.resolvedValueTypes||[],S=new Map,T=new Map;D.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&S.set(Q.id,Q)}}),j.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&T.set(Q.id,Q)}});for(const[F,Q]of T)if(S.has(F)){const de=S.get(F),q=[],pe=de,H=Q;["displayName","description","type"].forEach(L=>{pe[L]!==H[L]&&q.push({field:L,oldValue:wr(pe[L]),newValue:wr(H[L])})}),q.length>0&&n.push({type:"modified",entityType:"resolvedValueType",entityId:F,entityName:H.displayName||F,changes:q})}else{const de=Q;n.push({type:"added",entityType:"resolvedValueType",entityId:F,entityName:de.displayName||F,changes:[{field:"resolvedValueType",newValue:`Added value type: ${de.displayName||F}`}]})}for(const[F,Q]of S)if(!T.has(F)){const de=Q;n.push({type:"removed",entityType:"resolvedValueType",entityId:F,entityName:de.displayName||F,changes:[{field:"resolvedValueType",oldValue:`Removed value type: ${de.displayName||F}`}]})}const E=e.taxonomies||[],M=t.taxonomies||[],A=new Map,I=new Map;E.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&A.set(Q.id,Q)}}),M.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&I.set(Q.id,Q)}});for(const[F,Q]of I)if(A.has(F)){const de=A.get(F),q=[],pe=de,H=Q;["name","description"].forEach(X=>{pe[X]!==H[X]&&q.push({field:X,oldValue:wr(pe[X]),newValue:wr(H[X])})});const L=Hh(pe.terms||[],H.terms||[]);q.push(...L),q.length>0&&n.push({type:"modified",entityType:"taxonomy",entityId:F,entityName:H.name||F,changes:q})}else{const de=Q;n.push({type:"added",entityType:"taxonomy",entityId:F,entityName:de.name||F,changes:[{field:"taxonomy",newValue:`Added taxonomy: ${de.name||F}`}]})}for(const[F,Q]of A)if(!I.has(F)){const de=Q;n.push({type:"removed",entityType:"taxonomy",entityId:F,entityName:de.name||F,changes:[{field:"taxonomy",oldValue:`Removed taxonomy: ${de.name||F}`}]})}const W=e.algorithms||[],J=t.algorithms||[],le=new Map,ce=new Map;W.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&le.set(Q.id,Q)}}),J.forEach(F=>{if(typeof F=="object"&&F!==null){const Q=F;Q.id&&ce.set(Q.id,Q)}});for(const[F,Q]of ce)if(le.has(F)){const de=le.get(F),q=[],pe=de,H=Q;["name","description","resolvedValueTypeId"].forEach(L=>{pe[L]!==H[L]&&q.push({field:L,oldValue:wr(pe[L]),newValue:wr(H[L])})}),q.length>0&&n.push({type:"modified",entityType:"algorithm",entityId:F,entityName:H.name||F,changes:q})}else{const de=Q;n.push({type:"added",entityType:"algorithm",entityId:F,entityName:de.name||F,changes:[{field:"algorithm",newValue:`Added algorithm: ${de.name||F}`}]})}for(const[F,Q]of le)if(!ce.has(F)){const de=Q;n.push({type:"removed",entityType:"algorithm",entityId:F,entityName:de.name||F,changes:[{field:"algorithm",oldValue:`Removed algorithm: ${de.name||F}`}]})}return n},Sb=({previousData:e,currentData:t})=>{const{colorMode:n}=nn();if(!e||!t)return s.jsx(Z,{p:4,textAlign:"center",children:s.jsx(B,{color:"gray.500",children:"No data available for comparison"})});const r=wb(e,t);if(r.length===0)return s.jsx(Z,{p:4,textAlign:"center",children:s.jsx(B,{color:"gray.500",children:"No changes detected"})});const i=r.reduce((a,l)=>(a[l.entityType]||(a[l.entityType]=[]),a[l.entityType].push(l),a),{});return s.jsxs(Z,{children:[s.jsxs(B,{fontSize:"lg",fontWeight:"bold",mb:4,children:["Change Log (",r.length," changes)"]}),s.jsx($x,{allowMultiple:!0,children:Object.entries(i).map(([a,l])=>{const u=xb(a),h=a.charAt(0).toUpperCase()+a.slice(1);return s.jsxs(Gx,{children:[s.jsxs(qx,{children:[s.jsxs(xe,{flex:"1",justify:"flex-start",children:[s.jsx(u,{size:16}),s.jsx(B,{fontWeight:"medium",children:h}),s.jsx(ht,{colorScheme:"blue",ml:"auto",children:l.length})]}),s.jsx(Hx,{})]}),s.jsx(Wx,{children:s.jsx(me,{spacing:3,align:"stretch",children:l.map((f,m)=>{const x=yb(f.type),g=f.type==="added"?"green":f.type==="removed"?"red":"orange";return s.jsxs(Z,{p:3,border:"1px",borderColor:n==="dark"?"gray.600":"gray.200",borderRadius:"md",bg:n==="dark"?"gray.700":"gray.50",children:[s.jsxs(xe,{spacing:2,mb:2,children:[s.jsx(x,{size:16,color:g==="green"?"#22c55e":g==="red"?"#ef4444":"#f97316"}),s.jsx(ht,{colorScheme:g,size:"sm",children:f.type.toUpperCase()}),s.jsx(B,{fontWeight:"medium",fontSize:"sm",children:f.entityName})]}),s.jsx(me,{spacing:1,align:"stretch",children:f.changes.map((v,N)=>s.jsxs(Z,{pl:4,children:[v.context&&s.jsx(B,{fontSize:"xs",color:"gray.500",mb:1,children:v.context}),v.oldValue!==void 0&&v.oldValue!==null&&s.jsxs(B,{fontSize:"sm",color:"red.500",children:[s.jsx(B,{as:"span",fontWeight:"medium",children:"-"})," ",String(wr(v.oldValue))]}),v.newValue!==void 0&&v.newValue!==null&&s.jsxs(B,{fontSize:"sm",color:"green.500",children:[s.jsx(B,{as:"span",fontWeight:"medium",children:"+"})," ",String(wr(v.newValue))]})]},N))})]},`${f.entityId}-${m}`)})})})]},a)})})]})},kb=({hasChanges:e=!1,changeCount:t=0,getCurrentData:n,getBaselineData:r})=>{const{colorMode:i}=nn(),a=i==="dark"?"gray.700":"gray.200",l=i==="dark"?"gray.800":"white",{isOpen:u,onOpen:h,onClose:f}=Ki(),[m,x]=P.useState(null),g=()=>{const v=n(),N=r();x({currentData:v,baselineData:N}),h()};return s.jsxs(s.Fragment,{children:[s.jsx(Z,{as:"header",borderBottom:"1px",borderColor:a,bg:l,px:4,py:3,display:"flex",justifyContent:"flex-end",alignItems:"center",children:s.jsxs(xe,{spacing:2,children:[s.jsx(wt,{"aria-label":"Pull Request",icon:s.jsx(u4,{size:20}),variant:"ghost",size:"sm",onClick:()=>{console.log("Pull request clicked")}}),s.jsx(wt,{"aria-label":"User Profile",icon:s.jsx(cb,{size:20}),variant:"ghost",size:"sm",onClick:()=>{console.log("User profile clicked")}}),s.jsxs(Z,{position:"relative",children:[s.jsx(wt,{"aria-label":"History",icon:s.jsx(Wp,{size:20}),variant:"ghost",size:"sm",onClick:g}),e&&s.jsx(ht,{position:"absolute",top:"-2px",right:"-2px",colorScheme:"red",variant:"solid",size:"sm",borderRadius:"full",minW:"18px",h:"18px",fontSize:"xs",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,children:t>99?"99+":t})]})]})}),s.jsxs(Hn,{isOpen:u,onClose:f,size:"xl",scrollBehavior:"inside",closeOnOverlayClick:!0,closeOnEsc:!0,isCentered:!0,children:[s.jsx(Mn,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:"Change History"}),s.jsx(ir,{}),s.jsx(On,{pb:6,children:s.jsx(Sb,{previousData:m==null?void 0:m.baselineData,currentData:m==null?void 0:m.currentData})})]})]})]})},jb=({dataSource:e,setDataSource:t,dataOptions:n,onResetData:r,onExportData:i,children:a})=>{const{colorMode:l}=nn(),[u,h]=P.useState(!1),[f,m]=P.useState(0),x=P.useRef({}),g=P.useRef(!1),v=()=>({tokens:ve.getTokens(),collections:ve.getCollections(),modes:ve.getModes(),resolvedValueTypes:ve.getValueTypes(),dimensions:ve.getDimensions(),dimensionOrder:ve.getDimensionOrder(),platforms:ve.getPlatforms(),themes:ve.getThemes(),taxonomies:ve.getTaxonomies(),namingRules:ve.getNamingRules(),algorithms:ve.getAlgorithms(),algorithmFile:ve.getAlgorithmFile()}),N=()=>{const D=x.current;return{tokens:D["token-model:tokens"]||[],collections:D["token-model:collections"]||[],modes:D["token-model:modes"]||[],resolvedValueTypes:D["token-model:value-types"]||[],dimensions:D["token-model:dimensions"]||[],dimensionOrder:D["token-model:dimension-order"]||[],platforms:D["token-model:platforms"]||[],themes:D["token-model:themes"]||[],taxonomies:D["token-model:taxonomies"]||[],namingRules:D["token-model:naming-rules"]||{},algorithms:D["token-model:algorithms"]||[],algorithmFile:D["token-model:algorithm-file"]||null}};return P.useEffect(()=>{const D=["token-model:tokens","token-model:collections","token-model:modes","token-model:value-types","token-model:dimensions","token-model:dimension-order","token-model:platforms","token-model:themes","token-model:taxonomies","token-model:naming-rules","token-model:algorithms","token-model:algorithm-file"],j=()=>{const M={};D.forEach(A=>{const I=localStorage.getItem(A);if(I)try{M[A]=JSON.parse(I)}catch{M[A]=I}else M[A]=null}),x.current=M,g.current=!0},S=()=>{if(!g.current){j();return}try{let M=0,A=!1;D.forEach(I=>{const W=localStorage.getItem(I),J=x.current[I];let le=null;if(W)try{le=JSON.parse(W)}catch{le=W}if(JSON.stringify(le)!==JSON.stringify(J))if(A=!0,Array.isArray(le)&&Array.isArray(J)){const ce=le.filter(Q=>!J.some(de=>de.id===Q.id)),F=J.filter(Q=>!le.some(de=>de.id===Q.id));M+=ce.length+F.length}else le!==J&&(M+=1)}),h(A),m(M)}catch(M){console.error("Error checking for changes:",M)}};j();const T=setInterval(S,2e3),E=()=>{S()};return window.addEventListener("storage",E),()=>{clearInterval(T),window.removeEventListener("storage",E)}},[]),s.jsxs(ki,{h:"100vh",overflow:"hidden",children:[s.jsx(gb,{dataSource:e,setDataSource:t,dataOptions:n,onResetData:r,onExportData:i}),s.jsxs(ki,{flex:"1",direction:"column",overflow:"hidden",children:[s.jsx(kb,{hasChanges:u,changeCount:f,getCurrentData:v,getBaselineData:N}),s.jsx(Z,{flex:"1",overflow:"auto",p:4,bg:l==="dark"?"gray.900":"gray.50",children:a})]})]})},Cb=typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches;console.log("System prefers dark mode:",Cb);const Tb={initialColorMode:"system",useSystemColorMode:!0},zu=Ux({config:Tb,styles:{global:{body:{transition:"background-color 0.2s, color 0.2s"}}},components:{VStack:{baseStyle:{bg:"transparent"}},Modal:{baseStyle:{dialog:{bg:"chakra-body-bg",maxH:"calc(100vh - 80px)",my:"40px",overflow:"hidden"},header:{px:6,py:4},body:{px:6,py:4,overflowY:"auto"},footer:{px:6,py:4}}},Popover:{baseStyle:{content:{bg:"chakra-body-bg",borderColor:"chakra-border-color"}}},NumberInput:{baseStyle:{field:{bg:"chakra-body-bg",borderColor:"chakra-border-color"},stepper:{borderColor:"chakra-border-color"}}}},semanticTokens:{colors:{"chakra-body-text":{_light:"gray.800",_dark:"white"},"chakra-body-bg":{_light:"white",_dark:"gray.900"},"chakra-border-color":{_light:"gray.200",_dark:"gray.700"}}}});typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{console.log("System color scheme changed:",e.matches?"dark":"light")});const Br=(e,t,n,r)=>n?s.jsx(ds,{label:`${r} token generated by algorithm`,placement:"top",hasArrow:!0,children:s.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e,s.jsx("span",{className:"badgeIcon",style:{position:"absolute",top:"-8px",right:"-8px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(L4,{size:t/2,strokeWidth:3.5})})]})}):e,y0=(e,t=24,n=!1,r)=>{if(!e)return s.jsx(yl,{size:t});const i=r||e;switch(e){case"COLOR":return Br(s.jsx(Gl,{size:t}),t,n,i);case"DIMENSION":return Br(s.jsx(Jp,{size:t}),t,n,i);case"SPACING":return Br(s.jsx(Gp,{size:t}),t,n,i);case"FONT_FAMILY":case"FONT_WEIGHT":case"FONT_SIZE":return Br(s.jsx(nm,{size:t}),t,n,i);case"LINE_HEIGHT":return Br(s.jsx(Yp,{size:t}),t,n,i);case"LETTER_SPACING":return Br(s.jsx(Zp,{size:t}),t,n,i);case"DURATION":return Br(s.jsx(tm,{size:t}),t,n,i);case"CUBIC_BEZIER":return Br(s.jsx($p,{size:t}),t,n,i);case"BLUR":return Br(s.jsx(g0,{size:t}),t,n,i);case"SPREAD":return Br(s.jsx(Ur,{size:t}),t,n,i);case"RADIUS":return Br(s.jsx(Qp,{size:t}),t,n,i);default:return Br(s.jsx(yl,{size:t}),t,n,i)}},Pu=({displayName:e,resolvedValueTypeId:t,resolvedValueTypes:n,value:r,isPill:i=!1,onClick:a})=>{const l=n.find(u=>u.id===t);if(!l)throw new Error(`Unknown value type: ${t}`);return s.jsx(Z,{onClick:a,width:"100%",textAlign:"left",borderRadius:"md",py:1,px:2,bg:i?"gray.100":"transparent",borderWidth:i?"1px":"0",borderColor:"gray.200",children:s.jsxs(xe,{width:"100%",justifyContent:"space-between",children:[s.jsxs(xe,{children:[l.type==="COLOR"&&s.jsx("div",{style:{display:"flex",flexGrow:0,flexShrink:0,width:"16px",height:"16px",borderRadius:"4px",backgroundColor:String(r)}}),l.type!=="COLOR"&&s.jsx("div",{style:{display:"flex",flexGrow:0,flexShrink:0,width:"16px",height:"16px"},children:y0(l.type,16)}),s.jsx(B,{className:"kode-mono",children:e})]}),s.jsx(B,{color:"gray.500",children:String(r)})]})})};function Ib(e,t){console.debug("[getValueTypeFromId] Input:",{resolvedValueTypeId:e,availableTypes:t.map(r=>({id:r.id,type:r.type}))});const n=t.find(r=>r.id===e);return console.debug("[getValueTypeFromId] Found value type:",n),n==null?void 0:n.type}function Ab(e,t){console.debug("[getDefaultValueForType] Input:",{resolvedValueTypeId:e,availableTypes:t.map(i=>({id:i.id,type:i.type}))});const n=t.find(i=>i.id===e);if(console.debug("[getDefaultValueForType] Found value type:",n),!n)throw console.error("[getDefaultValueForType] Error: Unknown value type",{requestedId:e,availableIds:t.map(i=>i.id)}),new Error(`Unknown value type: ${e}`);console.debug("[getDefaultValueForType] Determining default value for type:",n.type);let r;switch(n.type){case"COLOR":r={value:"#000000"};break;case"DIMENSION":case"SPACING":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"BLUR":case"SPREAD":case"RADIUS":r={value:0};break;case"FONT_WEIGHT":r={value:400};break;case"FONT_FAMILY":r={value:"system-ui"};break;case"DURATION":r={value:0};break;case"CUBIC_BEZIER":r={value:"cubic-bezier(0.4, 0, 0.2, 1)"};break;default:n.type==="LINE_HEIGHT"?r={value:1.5}:r={value:""}}return console.debug("[getDefaultValueForType] Generated default value:",r),r}function Nb(e,t,n){const r=n.find(i=>i.id===t);if(!r)return String(e);switch(r.type){case"COLOR":return typeof e=="string"?e:String(e);case"DIMENSION":case"SPACING":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"DURATION":case"BLUR":case"SPREAD":case"RADIUS":return`${typeof e=="number"?e:Number(e)}px`;case"FONT_WEIGHT":return typeof e=="number"?e.toString():String(e);case"FONT_FAMILY":case"CUBIC_BEZIER":return typeof e=="string"?e:String(e);default:return typeof e=="string"?e:String(e)}}function _b({tokens:e,collections:t,resolvedValueTypes:n,taxonomies:r,renderAddTokenButton:i,onEditToken:a}){const[l,u]=P.useState("PRIMITIVE"),{colorMode:h}=nn(),[f,m]=P.useState([]),[x,g]=P.useState([]),[v,N]=P.useState([]),[D,j]=P.useState([]),[S,T]=P.useState([]),[E,M]=P.useState(""),[A,I]=P.useState({tokenTier:!1,propertyTypes:!1,codeSyntax:!1,taxonomies:!1,private:!1,themeable:!0,status:!0,collection:!1,generatedByAlgorithm:!1,algorithm:!1}),W=()=>{m([]),g([]),N([]),j([]),T([]),M("")},J=Array.from(new Set(e.map(L=>L.status||"experimental"))).sort(),le=e.filter(L=>{var De;const X=L.displayName.toLowerCase().includes(E.toLowerCase())||((De=L.description)==null?void 0:De.toLowerCase().includes(E.toLowerCase())),he=E?!0:L.tokenTier===l,ge=f.length===0||f.some(Pe=>{const Ve=t.find(ct=>ct.id===Pe);return Ve?!!(L.tokenCollectionId===Pe||!L.tokenCollectionId&&Ve.resolvedValueTypeIds.includes(L.resolvedValueTypeId)):!1}),oe=x.length===0||x.includes(L.resolvedValueTypeId??""),Se=v.length===0||v.includes(L.status||"experimental"),ne=D.length===0||D.includes(L.private),be=S.length===0||S.includes(L.themeable);return X&&he&&ge&&oe&&Se&&ne&&be}),ce=L=>{const X=n.find(he=>he.id===L);return(X==null?void 0:X.type)||L},F=L=>{const X=n.find(he=>he.id===L);return(X==null?void 0:X.displayName)||L},Q=L=>{var X;return(X=L.valuesByMode)!=null&&X.length?L.valuesByMode.map(he=>{var De,Pe;const ge=he.value;if(!ge)return null;const oe=n.find(Ve=>Ve.id===L.resolvedValueTypeId);if(!oe)return console.warn("No resolved value type found for token:",{tokenId:L.id,resolvedValueTypeId:L.resolvedValueTypeId}),"-";let Se;const ne=Ve=>{if(!Ve||typeof Ve!="object")return null;const ct=Ve;return"tokenId"in ct&&typeof ct.tokenId=="string"?ct.tokenId:"value"in ct&&ct.value&&typeof ct.value=="object"?ne(ct.value):null},be=ne(ge);if(be){const Ve=e.find(ct=>ct.id===be);if(Ve){const ct=(Pe=(De=Ve.valuesByMode)==null?void 0:De[0])==null?void 0:Pe.value;if(ct&&"value"in ct){const Dt=typeof ct.value=="object"&&ct.value!==null&&"value"in ct.value?ct.value.value:ct.value;Se=s.jsx(Pu,{displayName:Ve.displayName,resolvedValueTypeId:Ve.resolvedValueTypeId,resolvedValueTypes:n,value:Dt,isPill:!0})}else Se=Ve.displayName}else Se=be}else if(typeof ge=="object"&&ge!==null&&"value"in ge){const Ve=typeof ge.value=="object"&&ge.value!==null&&"value"in ge.value?ge.value.value:ge.value,ct=Nb(Ve,L.resolvedValueTypeId,n);switch(oe.type){case"COLOR":Se=s.jsxs(xe,{spacing:2,children:[s.jsx(Z,{w:4,h:4,borderRadius:"sm",bg:typeof Ve=="string"?Ve:String(Ve),border:"1px solid",borderColor:"gray.200"}),s.jsx(B,{children:ct})]});break;case"DIMENSION":case"SPACING":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"DURATION":case"BLUR":case"SPREAD":case"RADIUS":Se=`${typeof Ve=="number"?Ve:Number(Ve)}px`;break;case"FONT_WEIGHT":Se=typeof Ve=="number"?Ve.toString():String(Ve);break;case"FONT_FAMILY":case"CUBIC_BEZIER":Se=typeof Ve=="string"?Ve:String(Ve);break;default:Se=ct}}else Se=String(ge);return s.jsx(Z,{children:Se},he.modeIds.join(","))}):"-"},de=L=>{var X;return(X=L.taxonomies)!=null&&X.length?L.taxonomies.map(he=>{const ge=r.find(Se=>Se.id===he.taxonomyId),oe=ge==null?void 0:ge.terms.find(Se=>Se.id===he.termId);return`${(ge==null?void 0:ge.name)||he.taxonomyId}: ${(oe==null?void 0:oe.name)||he.termId}`}).join(`
`):"-"},q=L=>!L.generatedByAlgorithm||!L.algorithmId?"-":L.algorithmId,pe=L=>{a&&a(L)},H=L=>{I(X=>({...X,[L]:!X[L]}))};return s.jsxs(Z,{p:4,children:[s.jsx(ki,{justify:"space-between",align:"center",mb:4,width:"100%",children:s.jsxs(xe,{spacing:4,width:"100%",justify:"space-between",children:[s.jsx(gt,{size:"md",children:"Tokens"}),s.jsxs(Zx,{width:"300px",children:[s.jsx(Yx,{pointerEvents:"none",children:s.jsx(Kp,{size:16})}),s.jsx(dt,{placeholder:"Search tokens...",value:E,onChange:L=>M(L.target.value)}),E&&s.jsx(Jx,{children:s.jsx(wt,{"aria-label":"Clear search",icon:s.jsx(rm,{size:14}),size:"sm",variant:"ghost",onClick:()=>M("")})})]})]})}),s.jsx(Ai,{onChange:L=>{u(["PRIMITIVE","SEMANTIC","COMPONENT"][L])},mb:4,variant:E?"unstyled":"line",opacity:E?.5:1,children:s.jsxs(Ni,{children:[s.jsx($n,{isDisabled:!!E,children:"Primitive"}),s.jsx($n,{isDisabled:!!E,children:"Semantic"}),s.jsx($n,{isDisabled:!!E,children:"Component"})]})}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:h==="dark"?"gray.900":"white",children:[s.jsxs(ki,{gap:2,mb:4,justify:"space-between",width:"100%",children:[i,s.jsxs(xe,{spacing:4,children:[s.jsxs(Za,{placement:"bottom-end",children:[s.jsx(Ya,{children:s.jsx(Ne,{leftIcon:s.jsx(i4,{size:16}),size:"sm",variant:"outline",children:"Filters"})}),s.jsx(cl,{width:"200px",children:s.jsx(ul,{children:s.jsxs(me,{align:"start",spacing:4,children:[s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Collection"}),s.jsx(me,{align:"start",spacing:1,children:t.map(L=>s.jsx(kn,{isChecked:f.includes(L.id),onChange:X=>{m(he=>X.target.checked?[...he,L.id]:he.filter(ge=>ge!==L.id))},children:L.name},L.id))})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Type"}),s.jsx(me,{align:"start",spacing:1,children:n.map(L=>s.jsx(kn,{isChecked:x.includes(L.id),onChange:X=>{g(he=>X.target.checked?[...he,L.id]:he.filter(ge=>ge!==L.id))},children:L.displayName},L.id))})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Status"}),s.jsx(me,{align:"start",spacing:1,children:J.map(L=>s.jsx(kn,{isChecked:v.includes(L),onChange:X=>{N(he=>X.target.checked?[...he,L]:he.filter(ge=>ge!==L))},children:L},L))})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Private"}),s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(kn,{isChecked:D.includes(!0),onChange:L=>{j(X=>L.target.checked?[...X,!0]:X.filter(he=>he!==!0))},children:"Yes"}),s.jsx(kn,{isChecked:D.includes(!1),onChange:L=>{j(X=>L.target.checked?[...X,!1]:X.filter(he=>he!==!1))},children:"No"})]})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Themeable"}),s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(kn,{isChecked:S.includes(!0),onChange:L=>{T(X=>L.target.checked?[...X,!0]:X.filter(he=>he!==!0))},children:"Yes"}),s.jsx(kn,{isChecked:S.includes(!1),onChange:L=>{T(X=>L.target.checked?[...X,!1]:X.filter(he=>he!==!1))},children:"No"})]})]}),s.jsx(Ne,{size:"sm",variant:"ghost",onClick:W,width:"100%",children:"Clear filters"})]})})})]}),s.jsxs(Za,{placement:"bottom-end",children:[s.jsx(Ya,{children:s.jsx(Ne,{leftIcon:s.jsx(X2,{size:16}),size:"sm",variant:"outline",children:"Columns"})}),s.jsx(cl,{width:"200px",children:s.jsx(ul,{children:s.jsxs(me,{align:"start",spacing:2,children:[s.jsx(kn,{isChecked:A.collection,onChange:()=>H("collection"),children:"Collection"}),s.jsx(kn,{isChecked:A.status,onChange:()=>H("status"),children:"Status"}),s.jsx(kn,{isChecked:A.themeable,onChange:()=>H("themeable"),children:"Themeable"}),s.jsx(kn,{isChecked:A.private,onChange:()=>H("private"),children:"Private"}),s.jsx(kn,{isChecked:A.taxonomies,onChange:()=>H("taxonomies"),children:"Taxonomies"}),s.jsx(kn,{isChecked:A.tokenTier,onChange:()=>H("tokenTier"),children:"Token Tier"}),s.jsx(kn,{isChecked:A.propertyTypes,onChange:()=>H("propertyTypes"),children:"Property Types"}),s.jsx(kn,{isChecked:A.codeSyntax,onChange:()=>H("codeSyntax"),children:"Code Syntax"}),s.jsx(kn,{isChecked:A.generatedByAlgorithm,onChange:()=>H("generatedByAlgorithm"),children:"Generated By Algorithm"}),s.jsx(kn,{isChecked:A.algorithm,onChange:()=>H("algorithm"),children:"Algorithm"})]})})})]})]})]}),le.length===0?s.jsx(kp,{p:8,children:s.jsxs(me,{spacing:4,children:[s.jsx(Z,{color:"gray.400",children:s.jsx(dr,{as:sm,size:48})}),s.jsxs(me,{spacing:2,children:[s.jsx(B,{fontSize:"lg",fontWeight:"medium",children:e.length===0?"No tokens found":"No matching tokens"}),s.jsx(B,{color:"gray.500",textAlign:"center",children:e.length===0?"Get started by adding your first token":"Try adjusting your filters or search term"})]}),e.length===0&&i&&s.jsx(Z,{mt:2,children:i})]})}):s.jsxs(Ns,{variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:"Type"}),s.jsx(hn,{children:"Name"}),A.collection&&s.jsx(hn,{children:"Collection"}),s.jsx(hn,{children:"Value"}),A.status&&s.jsx(hn,{children:"Status"}),A.themeable&&s.jsx(hn,{children:"Themeable"}),A.private&&s.jsx(hn,{children:"Private"}),A.taxonomies&&s.jsx(hn,{children:"Taxonomies"}),A.tokenTier&&s.jsx(hn,{children:"Token Tier"}),A.propertyTypes&&s.jsx(hn,{children:"Property Types"}),A.codeSyntax&&s.jsx(hn,{children:"Code Syntax"}),A.generatedByAlgorithm&&s.jsx(hn,{children:"Generated By Algorithm"}),A.algorithm&&s.jsx(hn,{children:"Algorithm"}),s.jsx(hn,{children:"Actions"})]})}),s.jsx(_s,{children:le.map(L=>{var X,he,ge;return s.jsxs(Kn,{children:[s.jsx(an,{children:s.jsx(xe,{spacing:2,backgroundColor:L.generatedByAlgorithm?"orange.100":"gray.100",borderRadius:"md",p:2,width:"fit-content",children:y0(ce(L.resolvedValueTypeId),20,L.generatedByAlgorithm,F(L.resolvedValueTypeId))})}),s.jsxs(an,{children:[s.jsx(B,{fontWeight:"medium",children:L.displayName}),L.description&&s.jsx(B,{fontSize:"sm",color:"gray.500",children:L.description})]}),A.collection&&s.jsx(an,{children:((X=t.find(oe=>oe.id===L.tokenCollectionId))==null?void 0:X.name)||L.tokenCollectionId}),s.jsx(an,{children:Q(L)}),A.status&&s.jsx(an,{children:s.jsx(ht,{colorScheme:L.status==="stable"?"green":L.status==="deprecated"?"red":"yellow",children:L.status||"experimental"})}),A.themeable&&s.jsx(an,{children:L.themeable?"Yes":"No"}),A.private&&s.jsx(an,{children:L.private?"Yes":"No"}),A.taxonomies&&s.jsx(an,{children:de(L).split(`
`).map((oe,Se)=>s.jsx(B,{fontSize:"sm",children:oe},Se))}),A.tokenTier&&s.jsx(an,{children:s.jsx(ht,{colorScheme:"blue",children:L.tokenTier})}),A.propertyTypes&&s.jsx(an,{children:(he=L.propertyTypes)==null?void 0:he.map((oe,Se)=>s.jsx(ht,{mr:1,mb:1,colorScheme:"purple",children:oe},Se))}),A.codeSyntax&&s.jsx(an,{children:(ge=L.codeSyntax)==null?void 0:ge.map((oe,Se)=>s.jsxs(B,{fontSize:"sm",children:[oe.platformId,": ",oe.formattedName]},Se))}),A.generatedByAlgorithm&&s.jsx(an,{children:L.generatedByAlgorithm?"Yes":"No"}),A.algorithm&&s.jsx(an,{children:q(L)}),s.jsx(an,{children:s.jsx(xe,{spacing:2,children:a&&s.jsx(wt,{"aria-label":"Edit token",icon:s.jsx(x0,{size:16}),size:"sm",variant:"ghost",onClick:()=>pe(L)})})})]},L.id)})})]})]})]})}function im({value:e,onChange:t,label:n="Value Types",isRequired:r=!1,disabled:i=!1,error:a}){const l=ve.getValueTypes()||[],u=f=>{f&&t([...e,f])},h=f=>{t(e.filter(m=>m!==f))};return s.jsxs(Le,{isRequired:r,isInvalid:!!a,isDisabled:i,children:[s.jsx(We,{children:n}),s.jsxs(fn,{value:"",onChange:f=>u(f.target.value),children:[s.jsx("option",{value:"",children:"Add a value type..."}),l.filter(f=>!e.includes(f.id)).map(f=>s.jsx("option",{value:f.id,children:f.displayName},f.id))]}),s.jsx(Z,{mt:2,children:s.jsx(xe,{spacing:2,wrap:"wrap",children:e.map(f=>{const m=l.find(x=>x.id===f);return m?s.jsxs(ps,{size:"md",borderRadius:"full",variant:"solid",colorScheme:"blue",children:[s.jsx(pa,{children:m.displayName}),s.jsx(d0,{onClick:()=>h(f)})]},f):null})})}),a&&s.jsx(B,{color:"red.500",fontSize:"sm",children:a})]})}function Eb({open:e,onClose:t,onSave:n,collection:r,isNew:i=!1,resolvedValueTypes:a}){const[l,u]=P.useState({name:"",description:"",resolvedValueTypeIds:[],private:!1}),[h,f]=P.useState({}),m=or();P.useEffect(()=>{if(e){if(r){const v=r;u({name:r.name||"",description:r.description||"",resolvedValueTypeIds:v.resolvedValueTypeIds||[],private:!!r.private})}else u({name:"",description:"",resolvedValueTypeIds:[],private:!1});f({})}},[e,r]);const x=(v,N)=>{u(D=>({...D,[v]:N}))},g=()=>{if(f({}),!l.name||!l.name.trim()){f({name:"Name is required"}),m({title:"Validation Error",description:"Name is required",status:"error",duration:2e3});return}if(!Array.isArray(l.resolvedValueTypeIds)||l.resolvedValueTypeIds.length===0){f({resolvedValueTypeIds:"At least one value type is required"}),m({title:"Validation Error",description:"At least one value type is required",status:"error",duration:2e3});return}n({...r,name:l.name,description:l.description,resolvedValueTypeIds:l.resolvedValueTypeIds,private:!!l.private,id:(r==null?void 0:r.id)||crypto.randomUUID()})};return s.jsxs(Hn,{isOpen:e,onClose:t,size:"md",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:i?"Create Collection":"Edit Collection"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isInvalid:!!h.name,isRequired:!0,children:[s.jsx(We,{children:"Name"}),s.jsx(dt,{value:l.name||"",onChange:v=>x("name",v.target.value)}),h.name&&s.jsx(B,{color:"red.500",fontSize:"sm",children:h.name})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:l.description||"",onChange:v=>x("description",v.target.value),as:"textarea",rows:2})]}),s.jsx(Le,{isInvalid:!!h.resolvedValueTypeIds,isRequired:!0,children:s.jsx(im,{value:l.resolvedValueTypeIds,onChange:v=>x("resolvedValueTypeIds",v),label:"Resolved Value Types",isRequired:!0,error:h.resolvedValueTypeIds})}),s.jsx(Le,{children:s.jsx(kn,{isChecked:!!l.private,onChange:v=>x("private",v.target.checked),children:"Private"})})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:g,children:i?"Create":"Save"})]})]})]})}const ga=({title:e,cardType:t="algorithm"})=>{let n=null;const r=20;switch(t){case"algorithm":n=s.jsx(Zs,{size:r});break;case"collection":n=s.jsx(qp,{size:r});break;case"taxonomy":n=s.jsx(vl,{size:r});break;case"dimension":n=s.jsx(em,{size:r});break;case"COLOR":n=s.jsx(Gl,{size:r});break;case"DIMENSION":n=s.jsx(Jp,{size:r});break;case"SPACING":n=s.jsx(Gp,{size:r});break;case"FONT_FAMILY":case"FONT_WEIGHT":case"FONT_SIZE":n=s.jsx(nm,{size:r});break;case"LINE_HEIGHT":n=s.jsx(Yp,{size:r});break;case"LETTER_SPACING":n=s.jsx(Zp,{size:r});break;case"DURATION":n=s.jsx(tm,{size:r});break;case"CUBIC_BEZIER":n=s.jsx($p,{size:r});break;case"BLUR":n=s.jsx(g0,{size:r});break;case"SPREAD":n=s.jsx(Ur,{size:r});break;case"RADIUS":n=s.jsx(Qp,{size:r});break;case"system-variable":n=s.jsx(Lp,{size:r});break;default:n=s.jsx(yl,{size:r});break}return s.jsxs(xe,{children:[n,s.jsx(B,{fontSize:"lg",fontWeight:"bold",children:e})]})};function Mb({collections:e,onUpdate:t,tokens:n,resolvedValueTypes:r}){const{colorMode:i}=nn(),[a,l]=P.useState(!1),[u,h]=P.useState(null),[f,m]=P.useState(!1),x=or();function g(E){return n.filter(M=>M.tokenCollectionId===E.id&&!E.resolvedValueTypeIds.includes(M.resolvedValueTypeId)).length}function v(E){return n.filter(M=>M.tokenCollectionId===E.id&&!E.resolvedValueTypeIds.includes(M.resolvedValueTypeId)).map(M=>{const A=r.find(I=>I.id===M.resolvedValueTypeId);return{name:M.displayName,type:(A==null?void 0:A.displayName)||M.resolvedValueTypeId}})}const N=()=>{h(null),m(!0),l(!0)},D=E=>{h(E),m(!1),l(!0)},j=E=>{let M;f?M=[...e,E]:M=e.map(A=>A.id===E.id?E:A),t(M),x({title:f?"Collection created":"Collection updated",status:"success",duration:2e3}),l(!1)},S=()=>{l(!1)},T=E=>{const M=e.filter(A=>A.id!==E);t(M),x({title:"Collection deleted",status:"info",duration:2e3})};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Collections"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:i==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",onClick:N,colorScheme:"blue",mb:4,leftIcon:s.jsx(es,{}),children:"Create New Collection"}),s.jsx(me,{align:"stretch",spacing:2,children:e.map(E=>{const M=E.resolvedValueTypeIds.length===1;return s.jsxs(Z,{p:3,borderWidth:1,borderRadius:"md",bg:i==="dark"?"gray.800":"gray.50",borderColor:i==="dark"?"gray.600":"gray.200",children:[s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsx(Z,{children:s.jsxs(xe,{children:[s.jsx(ga,{title:E.name,cardType:"collection"}),M&&s.jsx(ds,{label:"Type-based collections support only one resolved value type",placement:"top",children:s.jsx(ps,{size:"sm",colorScheme:"blackAlpha",ml:2,children:"Type-based"})})]})}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit collection",icon:s.jsx(xs,{}),size:"sm",onClick:()=>D(E)}),s.jsx(wt,{"aria-label":"Delete collection",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>T(E.id)})]})]}),s.jsxs(me,{align:"start",spacing:1,mt:2,ml:2,children:[s.jsx(B,{fontSize:"sm",color:"gray.600",children:s.jsx("b",{children:"Value Types:"})}),s.jsx(Ll,{spacing:2,children:Array.isArray(E.resolvedValueTypeIds)&&E.resolvedValueTypeIds.map(A=>{const I=r.find(F=>F.id===A),W=n.filter(F=>F.tokenCollectionId===E.id&&F.resolvedValueTypeId===A).length,J=n.filter(F=>!F.tokenCollectionId&&F.resolvedValueTypeId===A).length,le=W+J,ce=[W>0?`${W} ${W===1?"token is":"tokens are"} assigned to this collection`:null,J>0?`${J} ${J===1?"token is":"tokens are"} compatible but not assigned`:null].filter(Boolean).join(`
`);return I?s.jsx(ds,{label:ce,placement:"top",hasArrow:!0,children:s.jsx(ps,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"blue",children:s.jsxs(pa,{children:[I.displayName," (",le,")"]})})},A):null})}),g(E)>0&&s.jsxs(Gn,{status:"warning",size:"sm",mt:2,borderRadius:"md",children:[s.jsx(qn,{}),v(E).map((A,I)=>s.jsxs(B,{fontSize:"sm",children:["Token '",A.name,"' has type '",A.type,"' which is not supported by collection '",E.name,"'"]},I))]}),E.private&&s.jsx(B,{fontSize:"sm",color:"gray.500",children:s.jsx("b",{children:"Private"})})]})]},E.id)})})]}),s.jsx(Eb,{open:a,onClose:S,onSave:j,collection:u,isNew:f,resolvedValueTypes:r})]})}const Bu=({variable:e,onVariableChange:t,dimensions:n})=>{const[r,i]=P.useState(null);P.useEffect(()=>{if(e.dimensionId){const h=n.find(f=>f.id===e.dimensionId);i(h||null)}},[e.dimensionId,n]);const a=h=>{const f={...e,modeBased:h,dimensionId:h?e.dimensionId:void 0,valuesByMode:h?e.valuesByMode||[]:void 0};t(f)},l=h=>{const f=n.find(x=>x.id===h);i(f||null);const m={...e,dimensionId:h,valuesByMode:f?e.valuesByMode||[]:void 0};t(m)},u=(h,f)=>{const m=e.valuesByMode||[],x=m.findIndex(D=>D.modeIds.includes(h));let g;switch(e.type){case"number":g=f===""?0:Number(f);break;case"boolean":g=f==="true"||f==="1";break;default:g=f}let v;x>=0?(v=[...m],v[x]={...v[x],value:g}):v=[...m,{modeIds:[h],value:g}];const N={...e,valuesByMode:v};t(N)};return s.jsx(Z,{p:4,borderWidth:1,borderRadius:"md",bg:"gray.50",children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{justify:"space-between",children:[s.jsx(B,{fontWeight:"bold",children:"Mode-Based Variable Settings"}),s.jsx(jp,{isChecked:e.modeBased||!1,onChange:h=>a(h.target.checked)})]}),e.modeBased&&s.jsxs(s.Fragment,{children:[s.jsx(us,{}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Dimension"}),s.jsx(fn,{value:e.dimensionId||"",onChange:h=>l(h.target.value),placeholder:"Select a dimension",children:n.map(h=>s.jsxs("option",{value:h.id,children:[h.displayName," (",h.modes.length," modes)"]},h.id))})]}),r&&s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"medium",mb:3,children:["Mode-Specific Values for ",r.displayName,""]}),s.jsx(me,{spacing:3,align:"stretch",children:r.modes.map(h=>s.jsxs(xe,{spacing:3,children:[s.jsx(ht,{colorScheme:"blue",minW:"80px",children:h.name}),s.jsx(Le,{children:s.jsx(dt,{placeholder:`Value for ${h.name}`,value:(()=>{var m,x;const f=(x=(m=e.valuesByMode)==null?void 0:m.find(g=>g.modeIds.includes(h.id)))==null?void 0:x.value;return f==null?"":String(f)})(),onChange:f=>u(h.id,f.target.value),size:"sm"})})]},h.id))}),r.modes.length===0&&s.jsx(B,{fontSize:"sm",color:"gray.500",children:"No modes available for this dimension"})]})]})]})})};function Ar(e){let t;return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?t=crypto.randomUUID():t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const r=Math.random()*16|0;return(n==="x"?r:r&3|8).toString(16)}),`${e}Id-${t}`}function ni(e){return`${e}-${crypto.randomUUID()}`}const Db=({open:e,onClose:t,onSave:n,variable:r,isNew:i=!1,dimensions:a})=>{const l=or(),u=/^[a-zA-Z_][a-zA-Z0-9_]*$/,[h,f]=P.useState({id:"",name:"",type:"number",defaultValue:"",description:"",modeBased:!1,valuesByMode:[],dimensionId:void 0}),m=h.name?u.test(h.name):!0;P.useEffect(()=>{f(r?{...r,id:r.id||ni("system-variable")}:{id:ni("system-variable"),name:"",type:"number",defaultValue:"",description:"",modeBased:!1,valuesByMode:[],dimensionId:void 0})},[r]);const x=()=>{var v;if(!((v=h.name)!=null&&v.trim())){l({title:"Error",description:"Please enter a variable name",status:"error",duration:3e3,isClosable:!0});return}if(!m){l({title:"Error",description:"Variable name must start with a letter or underscore and contain only letters, numbers, and underscores.",status:"error",duration:3e3,isClosable:!0});return}if(!h.type){l({title:"Error",description:"Please select a variable type",status:"error",duration:3e3,isClosable:!0});return}if(h.modeBased&&!h.dimensionId){l({title:"Error",description:"Please select a dimension for mode-based variable",status:"error",duration:3e3,isClosable:!0});return}n(h),t()},g=v=>{f(v)};return s.jsxs(Hn,{isOpen:e,onClose:t,size:"xl",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:i?"Create New System Variable":"Edit System Variable"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{spacing:4,children:[s.jsxs(Le,{isRequired:!0,isInvalid:!!h.name&&!m,children:[s.jsx(We,{children:"Variable Name"}),s.jsx(dt,{placeholder:"Variable Name",value:h.name,onChange:v=>f(N=>({...N,name:v.target.value}))}),!m&&h.name&&s.jsx(B,{fontSize:"xs",color:"red.500",children:"Variable names must start with a letter or underscore and contain only letters, numbers, and underscores."})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Type"}),s.jsxs(fn,{value:h.type,onChange:v=>f(N=>({...N,type:v.target.value})),children:[s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"string",children:"String"}),s.jsx("option",{value:"boolean",children:"Boolean"}),s.jsx("option",{value:"color",children:"Color"})]})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Default Value"}),s.jsx(dt,{placeholder:"Default Value (optional)",value:h.defaultValue||"",onChange:v=>f(N=>({...N,defaultValue:v.target.value}))})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{placeholder:"Description (optional)",value:h.description||"",onChange:v=>f(N=>({...N,description:v.target.value}))})]}),s.jsx(Bu,{variable:h,onVariableChange:g,dimensions:a})]})}),s.jsx(ar,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(Ne,{variant:"ghost",onClick:t,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:x,isDisabled:!m,children:i?"Create Variable":"Save Changes"})]})})]})]})};class Qn{static normalizeSystemVariable(t){return{id:t.id||ni("system-variable"),name:t.name||"",type:t.type||"string",defaultValue:t.defaultValue||"",description:t.description||"",modeBased:t.modeBased||!1,valuesByMode:t.valuesByMode||[],dimensionId:t.dimensionId}}static getSystemVariables(){try{const t=new Map,n=ve.getAlgorithmFile();if(n&&n.config&&typeof n.config=="object"){const i=n.config;i.systemVariables&&Array.isArray(i.systemVariables)&&i.systemVariables.forEach(a=>{if(a.id&&typeof a.id=="string"){const l=this.normalizeSystemVariable(a);t.set(a.id,l)}})}return this.getUserSystemVariables().forEach(i=>{i.id&&t.set(i.id,i)}),Array.from(t.values())}catch(t){return console.error("Error loading system variables:",t),[]}}static getUserSystemVariables(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading user system variables:",t),[]}}static saveSystemVariable(t){try{const n=ve.getAlgorithmFile();if(n&&n.config&&typeof n.config=="object"){const a=n.config;if(a.systemVariables&&Array.isArray(a.systemVariables)){const l=a.systemVariables.findIndex(u=>u.id===t.id);if(l>=0){const u={...t},h={...n,config:{...a,systemVariables:a.systemVariables.map((f,m)=>m===l?u:f)}};return ve.setAlgorithmFile(h),!0}}}const r=this.getUserSystemVariables();t.id||(t.id=ni("system-variable"));const i=r.findIndex(a=>a.id===t.id);return i>=0?r[i]={...t}:r.push({...t}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),!0}catch(n){return console.error("Error saving system variable:",n),!1}}static updateSystemVariable(t){return this.saveSystemVariable(t)}static deleteSystemVariable(t){try{const n=ve.getAlgorithmFile();if(n&&n.config&&typeof n.config=="object"){const a=n.config;if(a.systemVariables&&Array.isArray(a.systemVariables)){const l=a.systemVariables.findIndex(u=>u.id===t);if(l>=0){const u={...n,config:{...a,systemVariables:a.systemVariables.filter((h,f)=>f!==l)}};return ve.setAlgorithmFile(u),!0}}}const r=this.getUserSystemVariables(),i=r.filter(a=>a.id!==t);return i.length===r.length?!1:(localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),!0)}catch(n){return console.error("Error deleting system variable:",n),!1}}static getSystemVariableByName(t){return this.getSystemVariables().find(r=>r.name===t)}static systemVariableExists(t){return this.getSystemVariableByName(t)!==void 0}static exportToConfig(){const t=this.getSystemVariables(),n={};return t.forEach(r=>{r.defaultValue!==void 0&&(n[r.name]=this.parseValue(r.defaultValue,r.type))}),n}static importFromConfig(t){const n=[];for(const[i,a]of Object.entries(t))(typeof a=="string"||typeof a=="number"||typeof a=="boolean")&&n.push({id:`system-${i}`,name:i,type:this.inferType(a),defaultValue:String(a),description:`System variable: ${i}`,modeBased:!1,valuesByMode:[],dimensionId:void 0});const r=ve.getAlgorithmFile();if(r){const i=r.config&&typeof r.config=="object"?r.config:{},a={...r,config:{...i,systemVariables:n}};ve.setAlgorithmFile(a)}else{const i={schemaVersion:"5.0.0",profile:"basic",metadata:{name:"Algorithm Collection",description:"Algorithm collection",version:"1.0.0",author:"Design System Manager"},config:{systemVariables:n},algorithms:[],execution:{order:[],parallel:!1,onError:"stop"},integration:{targetSchema:"https://designsystem.org/schemas/tokens/v1.0.0",outputFormat:"design-tokens",mergeStrategy:"merge",validation:!0},examples:[]};ve.setAlgorithmFile(i)}}static inferType(t){return typeof t=="number"?"number":typeof t=="boolean"?"boolean":typeof t=="string"&&(t.startsWith("#")||t.startsWith("rgb")||t.startsWith("hsl"))?"color":"string"}static parseValue(t,n){if(!t)return"";switch(n){case"number":return Number(t);case"boolean":return t.toLowerCase()==="true";case"color":case"string":default:return t}}static getSystemVariableById(t){return this.getSystemVariables().find(r=>r.id===t)}static getVariableNameById(t){const n=this.getSystemVariableById(t);return n==null?void 0:n.name}static getVariableIdByName(t){const n=this.getSystemVariableByName(t);return n==null?void 0:n.id}}_a(Qn,"STORAGE_KEY","systemVariables");function Ob({dimensions:e}){const{colorMode:t}=nn(),[n,r]=P.useState(!1),[i,a]=P.useState(null),[l,u]=P.useState(!1),[h,f]=P.useState([]),m=or();P.useEffect(()=>{const S=Qn.getSystemVariables();f(S)},[]);const x=()=>{a(null),u(!0),r(!0)},g=S=>{a(S),u(!1),r(!0)},v=S=>{if(Qn.saveSystemVariable(S)){const E=Qn.getSystemVariables();f(E),m({title:l?"System variable created":"System variable updated",status:"success",duration:2e3})}else m({title:"Error",description:"Failed to save system variable",status:"error",duration:3e3,isClosable:!0});r(!1)},N=()=>{r(!1)},D=S=>{if(Qn.deleteSystemVariable(S)){const E=Qn.getSystemVariables();f(E),m({title:"System variable deleted",status:"info",duration:2e3})}else m({title:"Error",description:"Failed to delete system variable",status:"error",duration:3e3,isClosable:!0})},j=(S,T)=>{if(!T)return S;const E=e.find(A=>A.id===T);if(!E)return S;const M=E.modes.find(A=>A.id===S);return M?M.name:S};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"System Variables"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:t==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",onClick:x,colorScheme:"blue",mb:4,leftIcon:s.jsx(es,{}),children:"Create New System Variable"}),h.length===0?s.jsx(kp,{p:8,children:s.jsxs(me,{spacing:4,children:[s.jsx(dr,{as:w2,boxSize:12,color:"gray.400"}),s.jsxs(me,{spacing:2,children:[s.jsx(B,{fontSize:"lg",fontWeight:"medium",children:"No system variables found"}),s.jsx(B,{color:"gray.500",textAlign:"center",children:"Get started by adding your first system variable"})]}),s.jsx(Z,{mt:2,children:s.jsx(Ne,{size:"sm",onClick:x,colorScheme:"blue",leftIcon:s.jsx(es,{}),children:"Create New System Variable"})})]})}):s.jsx(me,{align:"stretch",spacing:2,children:h.map(S=>s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:t==="dark"?"gray.800":"gray.50",borderColor:t==="dark"?"gray.600":"gray.200",children:s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsxs(Z,{flex:1,children:[s.jsxs(xe,{spacing:2,mb:1,children:[s.jsx(ga,{title:S.name,cardType:"system-variable"}),s.jsx(ht,{colorScheme:"blue",size:"sm",children:S.type}),S.modeBased&&s.jsx(ht,{colorScheme:"green",size:"sm",children:"Mode-Based"})]}),S.description&&s.jsx(B,{fontSize:"sm",color:"gray.600",mb:1,children:S.description}),S.defaultValue&&!S.modeBased&&s.jsxs(B,{fontSize:"sm",color:"gray.500",children:["Default: ",S.defaultValue]}),S.modeBased&&S.valuesByMode&&S.valuesByMode.length>0&&s.jsxs(Z,{mt:2,children:[s.jsx(B,{fontSize:"xs",color:"gray.500",mb:1,children:"Mode Values:"}),s.jsx(xe,{spacing:2,wrap:"wrap",children:S.valuesByMode.map((T,E)=>s.jsxs(ht,{size:"sm",colorScheme:"purple",variant:"outline",children:[T.modeIds.map(M=>j(M,S.dimensionId)).join(", "),": ",T.value]},T.modeIds.join("-")||E))})]})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit system variable",icon:s.jsx(xs,{}),size:"sm",onClick:()=>g(S)}),s.jsx(wt,{"aria-label":"Delete system variable",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>D(S.id)})]})]})},S.id))})]}),s.jsx(Db,{open:n,onClose:N,onSave:v,variable:i,isNew:l,dimensions:e})]})}function ur(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Rb=typeof Symbol=="function"&&Symbol.observable||"@@observable",Wh=Rb,Uh=()=>Math.random().toString(36).substring(7).split("").join("."),Vb={INIT:`@@redux/INIT${Uh()}`,REPLACE:`@@redux/REPLACE${Uh()}`},Zh=Vb;function zb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function am(e,t,n){if(typeof e!="function")throw new Error(ur(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ur(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ur(1));return n(am)(e,t)}let r=e,i=t,a=new Map,l=a,u=0,h=!1;function f(){l===a&&(l=new Map,a.forEach((j,S)=>{l.set(S,j)}))}function m(){if(h)throw new Error(ur(3));return i}function x(j){if(typeof j!="function")throw new Error(ur(4));if(h)throw new Error(ur(5));let S=!0;f();const T=u++;return l.set(T,j),function(){if(S){if(h)throw new Error(ur(6));S=!1,f(),l.delete(T),a=null}}}function g(j){if(!zb(j))throw new Error(ur(7));if(typeof j.type>"u")throw new Error(ur(8));if(typeof j.type!="string")throw new Error(ur(17));if(h)throw new Error(ur(9));try{h=!0,i=r(i,j)}finally{h=!1}return(a=l).forEach(T=>{T()}),j}function v(j){if(typeof j!="function")throw new Error(ur(10));r=j,g({type:Zh.REPLACE})}function N(){const j=x;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(ur(11));function T(){const M=S;M.next&&M.next(m())}return T(),{unsubscribe:j(T)}},[Wh](){return this}}}return g({type:Zh.INIT}),{dispatch:g,subscribe:x,getState:m,replaceReducer:v,[Wh]:N}}function Yh(e,t){return function(...n){return t(e.apply(this,n))}}function Jh(e,t){if(typeof e=="function")return Yh(e,t);if(typeof e!="object"||e===null)throw new Error(ur(16));const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=Yh(i,t))}return n}function om(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Pb(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(ur(15))};const l={getState:i.getState,dispatch:(h,...f)=>a(h,...f)},u=e.map(h=>h(l));return a=om(...u)(i.dispatch),{...i,dispatch:a}}}var Bb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=P;function Lb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fb=typeof Object.is=="function"?Object.is:Lb,$b=mo.useSyncExternalStore,Gb=mo.useRef,qb=mo.useEffect,Hb=mo.useMemo,Wb=mo.useDebugValue;Bb.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=Gb(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=Hb(function(){function h(v){if(!f){if(f=!0,m=v,v=r(v),i!==void 0&&l.hasValue){var N=l.value;if(i(N,v))return x=N}return x=v}if(N=x,Fb(m,v))return N;var D=r(v);return i!==void 0&&i(N,D)?(m=v,N):(m=v,x=D)}var f=!1,m,x,g=n===void 0?null:n;return[function(){return h(t())},g===null?void 0:function(){return h(g())}]},[t,n,r,i]);var u=$b(e,a[0],a[1]);return qb(function(){l.hasValue=!0,l.value=u},[u]),Wb(u),u};var Ub=P.version.startsWith("19"),Zb=Symbol.for(Ub?"react.transitional.element":"react.element"),Yb=Symbol.for("react.portal"),Jb=Symbol.for("react.fragment"),Xb=Symbol.for("react.strict_mode"),Kb=Symbol.for("react.profiler"),Qb=Symbol.for("react.consumer"),ev=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),tv=Symbol.for("react.suspense"),nv=Symbol.for("react.suspense_list"),b0=Symbol.for("react.memo"),rv=Symbol.for("react.lazy"),sv=lm,iv=b0;function av(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Zb:switch(e=e.type,e){case Jb:case Kb:case Xb:case tv:case nv:return e;default:switch(e=e&&e.$$typeof,e){case ev:case lm:case rv:case b0:return e;case Qb:return e;default:return t}}case Yb:return t}}}function ov(e){return av(e)===b0}function lv(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:l}){let u=!1,h,f,m,x,g;function v(T,E){return h=T,f=E,m=e(h,f),x=t(r,f),g=n(m,x,f),u=!0,g}function N(){return m=e(h,f),t.dependsOnOwnProps&&(x=t(r,f)),g=n(m,x,f),g}function D(){return e.dependsOnOwnProps&&(m=e(h,f)),t.dependsOnOwnProps&&(x=t(r,f)),g=n(m,x,f),g}function j(){const T=e(h,f),E=!l(T,m);return m=T,E&&(g=n(m,x,f)),g}function S(T,E){const M=!a(E,f),A=!i(T,h,E,f);return h=T,f=E,M&&A?N():M?D():A?j():g}return function(E,M){return u?S(E,M):v(E,M)}}function cv(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const a=t(e,i),l=n(e,i),u=r(e,i);return lv(a,l,u,e,i)}function uv(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...a)=>t(i(...a)))}return n}function Lu(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Xh(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function cm(e,t){return function(r,{displayName:i}){const a=function(u,h){return a.dependsOnOwnProps?a.mapToProps(u,h):a.mapToProps(u,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(u,h){a.mapToProps=e,a.dependsOnOwnProps=Xh(e);let f=a(u,h);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=Xh(f),f=a(u,h)),f},a}}function v0(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function dv(e){return e&&typeof e=="object"?Lu(t=>uv(e,t)):e?typeof e=="function"?cm(e):v0(e,"mapDispatchToProps"):Lu(t=>({dispatch:t}))}function hv(e){return e?typeof e=="function"?cm(e):v0(e,"mapStateToProps"):Lu(()=>({}))}function fv(e,t,n){return{...n,...e,...t}}function pv(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let a=!1,l;return function(h,f,m){const x=e(h,f,m);return a?i(x,l)||(l=x):(a=!0,l=x),l}}}function mv(e){return e?typeof e=="function"?pv(e):v0(e,"mergeProps"):()=>fv}function gv(e){e()}function xv(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gv(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Kh={notify(){},get:()=>[]};function um(e,t){let n,r=Kh,i=0,a=!1;function l(D){m();const j=r.subscribe(D);let S=!1;return()=>{S||(S=!0,j(),x())}}function u(){r.notify()}function h(){N.onStateChange&&N.onStateChange()}function f(){return a}function m(){i++,n||(n=t?t.addNestedSub(h):e.subscribe(h),r=xv())}function x(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Kh)}function g(){a||(a=!0,m())}function v(){a&&(a=!1,x())}const N={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:f,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return N}var yv=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bv=yv(),vv=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wv=vv(),Sv=()=>bv||wv?P.useLayoutEffect:P.useEffect,Sl=Sv();function Qh(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Hc(e,t){if(Qh(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Qh(e[n[i]],t[n[i]]))return!1;return!0}var kv={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},jv={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Cv={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Tv={[sv]:Cv,[iv]:dm};function ef(e){return ov(e)?dm:Tv[e.$$typeof]||kv}var Iv=Object.defineProperty,Av=Object.getOwnPropertyNames,tf=Object.getOwnPropertySymbols,Nv=Object.getOwnPropertyDescriptor,_v=Object.getPrototypeOf,nf=Object.prototype;function Fu(e,t){if(typeof t!="string"){if(nf){const a=_v(t);a&&a!==nf&&Fu(e,a)}let n=Av(t);tf&&(n=n.concat(tf(t)));const r=ef(e),i=ef(t);for(let a=0;a<n.length;++a){const l=n[a];if(!jv[l]&&!(i&&i[l])&&!(r&&r[l])){const u=Nv(t,l);try{Iv(e,l,u)}catch{}}}}return e}var Wc=Symbol.for("react-redux-context"),Uc=typeof globalThis<"u"?globalThis:{};function Ev(){if(!P.createContext)return{};const e=Uc[Wc]??(Uc[Wc]=new Map);let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var hm=Ev(),Mv=[null,null];function Dv(e,t,n){Sl(()=>e(...t),n)}function Ov(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function Rv(e,t,n,r,i,a,l,u,h,f,m){if(!e)return()=>{};let x=!1,g=null;const v=()=>{if(x||!u.current)return;const D=t.getState();let j,S;try{j=r(D,i.current)}catch(T){S=T,g=T}S||(g=null),j===a.current?l.current||f():(a.current=j,h.current=j,l.current=!0,m())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(x=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g}}function Vv(e,t){return e===t}function zv(e,t,n,{pure:r,areStatesEqual:i=Vv,areOwnPropsEqual:a=Hc,areStatePropsEqual:l=Hc,areMergedPropsEqual:u=Hc,forwardRef:h=!1,context:f=hm}={}){const m=f,x=hv(e),g=dv(t),v=mv(n),N=!!e;return j=>{const S=j.displayName||j.name||"Component",T=`Connect(${S})`,E={shouldHandleStateChanges:N,displayName:T,wrappedComponentName:S,WrappedComponent:j,initMapStateToProps:x,initMapDispatchToProps:g,initMergeProps:v,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:a,areMergedPropsEqual:u};function M(W){const[J,le,ce]=P.useMemo(()=>{const{reactReduxForwardedRef:_e,...pt}=W;return[W.context,_e,pt]},[W]),F=P.useMemo(()=>{let _e=m;return J!=null&&J.Consumer,_e},[J,m]),Q=P.useContext(F),de=!!W.store&&!!W.store.getState&&!!W.store.dispatch,q=!!Q&&!!Q.store,pe=de?W.store:Q.store,H=q?Q.getServerState:pe.getState,L=P.useMemo(()=>cv(pe.dispatch,E),[pe]),[X,he]=P.useMemo(()=>{if(!N)return Mv;const _e=um(pe,de?void 0:Q.subscription),pt=_e.notifyNestedSubs.bind(_e);return[_e,pt]},[pe,de,Q]),ge=P.useMemo(()=>de?Q:{...Q,subscription:X},[de,Q,X]),oe=P.useRef(void 0),Se=P.useRef(ce),ne=P.useRef(void 0),be=P.useRef(!1),De=P.useRef(!1),Pe=P.useRef(void 0);Sl(()=>(De.current=!0,()=>{De.current=!1}),[]);const Ve=P.useMemo(()=>()=>ne.current&&ce===Se.current?ne.current:L(pe.getState(),ce),[pe,ce]),ct=P.useMemo(()=>pt=>X?Rv(N,pe,X,L,Se,oe,be,De,ne,he,pt):()=>{},[X]);Dv(Ov,[Se,oe,be,ce,ne,he]);let Dt;try{Dt=P.useSyncExternalStore(ct,Ve,H?()=>L(H(),ce):Ve)}catch(_e){throw Pe.current&&(_e.message+=`
The error may be correlated with this previous error:
${Pe.current.stack}

`),_e}Sl(()=>{Pe.current=void 0,ne.current=void 0,oe.current=Dt});const Qt=P.useMemo(()=>P.createElement(j,{...Dt,ref:le}),[le,j,Dt]);return P.useMemo(()=>N?P.createElement(F.Provider,{value:ge},Qt):Qt,[F,Qt,ge])}const I=P.memo(M);if(I.WrappedComponent=j,I.displayName=M.displayName=T,h){const J=P.forwardRef(function(ce,F){return P.createElement(I,{...ce,reactReduxForwardedRef:F})});return J.displayName=T,J.WrappedComponent=j,Fu(J,j)}return Fu(I,j)}}var fm=zv;function Pv(e){const{children:t,context:n,serverState:r,store:i}=e,a=P.useMemo(()=>{const h=um(i);return{store:i,subscription:h,getServerState:r?()=>r:void 0}},[i,r]),l=P.useMemo(()=>i.getState(),[i]);Sl(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),l!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,l]);const u=n||hm;return P.createElement(u.Provider,{value:a},t)}var Bv=Pv,Ka=function(t){var n=[],r=null,i=function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];n=u,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function pm(e,t){}pm.bind(null,"warn");pm.bind(null,"error");function ri(){}function Lv(e,t){return{...e,...t}}function Zr(e,t,n){const r=t.map(i=>{const a=Lv(n,i.options);return e.addEventListener(i.eventName,i.fn,a),function(){e.removeEventListener(i.eventName,i.fn,a)}});return function(){r.forEach(a=>{a()})}}const Fv="Invariant failed";class kl extends Error{}kl.prototype.toString=function(){return this.message};function ze(e,t){throw new kl(Fv)}class $v extends St.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=ri,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof kl&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Zr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof kl){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Gv=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,jl=e=>e+1,qv=e=>`
  You have lifted an item in position ${jl(e.source.index)}
`,mm=(e,t)=>{const n=e.droppableId===t.droppableId,r=jl(e.index),i=jl(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},gm=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Hv=e=>{const t=e.destination;if(t)return mm(e.source,t);const n=e.combine;return n?gm(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},rf=e=>`
  The item has returned to its starting position
  of ${jl(e.index)}
`,Wv=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${rf(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${mm(e.source,t)}
    `:n?`
      You have dropped the item.
      ${gm(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${rf(e.source)}
  `},el={dragHandleUsageInstructions:Gv,onDragStart:qv,onDragUpdate:Hv,onDragEnd:Wv};function Uv(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function xm(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Uv(e[n],t[n]))return!1;return!0}function Lt(e,t){const n=P.useState(()=>({inputs:t,result:e()}))[0],r=P.useRef(!0),i=P.useRef(n),l=r.current||!!(t&&i.current.inputs&&xm(t,i.current.inputs))?i.current:{inputs:t,result:e()};return P.useEffect(()=>{r.current=!1,i.current=l},[l]),l.result}function lt(e,t){return Lt(()=>e,t)}const Xn={x:0,y:0},er=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Nr=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),si=(e,t)=>e.x===t.x&&e.y===t.y,xa=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Ti=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Qa=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),sf=(e,t)=>Math.min(...t.map(n=>Qa(e,n))),ym=e=>t=>({x:e(t.x),y:e(t.y)});var Zv=(e,t)=>{const n=_i({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const go=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),af=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Yv={top:0,right:0,bottom:0,left:0},Jv=(e,t)=>t?go(e,t.scroll.diff.displacement):e,Xv=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Kv=(e,t)=>t&&t.shouldClipSubject?Zv(t.pageMarginBox,e):_i(e);var la=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const i=Jv(e.marginBox,r),a=Xv(i,n,t),l=Kv(a,r);return{page:e,withPlaceholder:t,active:l}},w0=(e,t)=>{e.frame||ze();const n=e.frame,r=Nr(t,n.scroll.initial),i=xa(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},l=la({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:l}};function Yn(e,t=xm){let n=null;function r(...i){if(n&&n.lastThis===this&&t(i,n.lastArgs))return n.lastResult;const a=e.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const bm=Yn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),vm=Yn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ql=Yn(e=>Object.values(e)),Qv=Yn(e=>Object.values(e));var ya=Yn((e,t)=>Qv(t).filter(r=>e===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function S0(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Hl(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Wl=Yn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),e3=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!S0(i))return null;function l(v){const N={type:"COMBINE",combine:{draggableId:v,droppableId:n.descriptor.id}};return{...i,at:N}}const u=i.displaced.all,h=u.length?u[0]:null;if(e)return h?l(h):null;const f=Wl(t,r);if(!h){if(!f.length)return null;const v=f[f.length-1];return l(v.descriptor.id)}const m=f.findIndex(v=>v.descriptor.id===h);m===-1&&ze();const x=m-1;if(x<0)return null;const g=f[x];return l(g.descriptor.id)},ba=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const wm={point:Xn,value:0},eo={invisible:{},visible:{},all:[]},t3={displaced:eo,displacedBy:wm,at:null};var Yr=(e,t)=>n=>e<=n&&n<=t,Sm=e=>{const t=Yr(e.top,e.bottom),n=Yr(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),l=n(r.left)||n(r.right);if(a&&l)return!0;const h=r.top<e.top&&r.bottom>e.bottom,f=r.left<e.left&&r.right>e.right;return h&&f?!0:h&&l||f&&a}},n3=e=>{const t=Yr(e.top,e.bottom),n=Yr(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const k0={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},km={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var r3=e=>t=>{const n=Yr(t.top,t.bottom),r=Yr(t.left,t.right);return i=>e===k0?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const s3=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Xn;return go(e,n)},i3=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,a3=(e,t,n)=>n(t)(e),j0=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const a=r?s3(e,t):e;return i3(a,t,i)&&a3(a,n,i)},o3=e=>j0({...e,isVisibleThroughFrameFn:Sm}),jm=e=>j0({...e,isVisibleThroughFrameFn:n3}),l3=e=>j0({...e,isVisibleThroughFrameFn:r3(e.destination.axis)}),c3=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:i}=t;if(r[e])return!1;const a=i[e];return a?a.shouldAnimate:!0};function u3(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return _i(Tp(n,r))}function to({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(u,h){const f=u3(h,n),m=h.descriptor.id;if(u.all.push(m),!o3({target:f,destination:t,viewport:r,withDroppableDisplacement:!0}))return u.invisible[h.descriptor.id]=!0,u;const g=c3(m,a,i),v={draggableId:m,shouldAnimate:g};return u.visible[m]=v,u},{all:[],visible:{},invisible:{}})}function d3(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function of({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const i=d3(e,{inHomeList:t});return{displaced:eo,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Cl({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:l,forceShouldAnimate:u}){const h=ba(e,n);if(l==null)return of({insideDestination:t,inHomeList:h,displacedBy:i,destination:n});const f=t.find(N=>N.descriptor.index===l);if(!f)return of({insideDestination:t,inHomeList:h,displacedBy:i,destination:n});const m=Wl(e,t),x=t.indexOf(f),g=m.slice(x);return{displaced:to({afterDragging:g,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:u}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function ai(e,t){return!!t.effected[e]}var h3=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,u=n[a].descriptor.index;return ai(a,i)?e?u:u-1:e?u+1:u},f3=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,a=e?i+1:i-1,l=n[0].descriptor.index,u=n[n.length-1].descriptor.index,h=t?u:u+1;return a<l||a>h?null:a},p3=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:l,viewport:u,afterCritical:h})=>{const f=l.at;if(f||ze(),f.type==="REORDER"){const x=f3({isMovingForward:e,isInHomeList:t,location:f.destination,insideDestination:a});return x==null?null:Cl({draggable:n,insideDestination:a,destination:i,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:x})}const m=h3({isMovingForward:e,destination:i,displaced:l.displaced,draggables:r,combine:f.combine,afterCritical:h});return m==null?null:Cl({draggable:n,insideDestination:a,destination:i,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:m})},m3=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const i=!!(e.visible[n]||e.invisible[n]);return ai(n,t)?i?Xn:xa(r.point):i?r.point:Xn},g3=({afterCritical:e,impact:t,draggables:n})=>{const r=Hl(t);r||ze();const i=r.draggableId,a=n[i].page.borderBox.center,l=m3({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return er(a,l)};const Cm=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,x3=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,C0=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,lf=({axis:e,moveRelativeTo:t,isMoving:n})=>Ti(e.line,t.marginBox[e.end]+Cm(e,n),C0(e,t.marginBox,n)),cf=({axis:e,moveRelativeTo:t,isMoving:n})=>Ti(e.line,t.marginBox[e.start]-x3(e,n),C0(e,t.marginBox,n)),y3=({axis:e,moveInto:t,isMoving:n})=>Ti(e.line,t.contentBox[e.start]+Cm(e,n),C0(e,t.contentBox,n));var b3=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{const a=ya(r.descriptor.id,n),l=t.page,u=r.axis;if(!a.length)return y3({axis:u,moveInto:r.page,isMoving:l});const{displaced:h,displacedBy:f}=e,m=h.all[0];if(m){const g=n[m];if(ai(m,i))return cf({axis:u,moveRelativeTo:g.page,isMoving:l});const v=xu(g.page,f.point);return cf({axis:u,moveRelativeTo:v,isMoving:l})}const x=a[a.length-1];if(x.descriptor.id===t.descriptor.id)return l.borderBox.center;if(ai(x.descriptor.id,i)){const g=xu(x.page,xa(i.displacedBy.point));return lf({axis:u,moveRelativeTo:g,isMoving:l})}return lf({axis:u,moveRelativeTo:x.page,isMoving:l})},$u=(e,t)=>{const n=e.frame;return n?er(t,n.scroll.diff.displacement):t};const v3=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{const a=t.page.borderBox.center,l=e.at;return!n||!l?a:l.type==="REORDER"?b3({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):g3({impact:e,draggables:r,afterCritical:i})};var Ul=e=>{const t=v3(e),n=e.droppable;return n?$u(n,t):t},Tm=(e,t)=>{const n=Nr(t,e.scroll.initial),r=xa(n);return{frame:_i({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function uf(e,t){return e.map(n=>t[n])}function w3(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var S3=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{const a=Tm(t,er(t.scroll.current,i)),l=n.frame?w0(n,er(n.frame.scroll.current,i)):n,u=e.displaced,h=to({afterDragging:uf(u.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:u,forceShouldAnimate:!1}),f=to({afterDragging:uf(u.all,r),destination:l,displacedBy:e.displacedBy,viewport:t.frame,last:u,forceShouldAnimate:!1}),m={},x={},g=[u,h,f];return u.all.forEach(N=>{const D=w3(N,g);if(D){x[N]=D;return}m[N]=!0}),{...e,displaced:{all:u.all,invisible:m,visible:x}}},k3=(e,t)=>er(e.scroll.diff.displacement,t),T0=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=k3(n,e),i=Nr(r,t.page.borderBox.center);return er(t.client.borderBox.center,i)},Im=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{const l=Nr(n,e.page.borderBox.center),h={target:go(e.page.borderBox,l),destination:t,withDroppableDisplacement:i,viewport:r};return a?l3(h):jm(h)},j3=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:l,previousClientSelection:u,afterCritical:h})=>{if(!n.isEnabled)return null;const f=ya(n.descriptor.id,r),m=ba(t,n),x=e3({isMovingForward:e,draggable:t,destination:n,insideDestination:f,previousImpact:i})||p3({isMovingForward:e,isInHomeList:m,draggable:t,draggables:r,destination:n,insideDestination:f,previousImpact:i,viewport:a,afterCritical:h});if(!x)return null;const g=Ul({impact:x,draggable:t,droppable:n,draggables:r,afterCritical:h});if(Im({draggable:t,destination:n,newPageBorderBoxCenter:g,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:T0({pageBorderBoxCenter:g,draggable:t,viewport:a}),impact:x,scrollJumpRequest:null};const N=Nr(g,l),D=S3({impact:x,viewport:a,destination:n,draggables:r,maxScrollChange:N});return{clientSelection:u,impact:D,scrollJumpRequest:N}};const cr=e=>{const t=e.subject.active;return t||ze(),t};var C3=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{const a=n.subject.active;if(!a)return null;const l=n.axis,u=Yr(a[l.start],a[l.end]),h=ql(r).filter(m=>m!==n).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>Sm(i.frame)(cr(m))).filter(m=>{const x=cr(m);return e?a[l.crossAxisEnd]<x[l.crossAxisEnd]:x[l.crossAxisStart]<a[l.crossAxisStart]}).filter(m=>{const x=cr(m),g=Yr(x[l.start],x[l.end]);return u(x[l.start])||u(x[l.end])||g(a[l.start])||g(a[l.end])}).sort((m,x)=>{const g=cr(m)[l.crossAxisStart],v=cr(x)[l.crossAxisStart];return e?g-v:v-g}).filter((m,x,g)=>cr(m)[l.crossAxisStart]===cr(g[0])[l.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const f=h.filter(m=>Yr(cr(m)[l.start],cr(m)[l.end])(t[l.line]));return f.length===1?f[0]:f.length>1?f.sort((m,x)=>cr(m)[l.start]-cr(x)[l.start])[0]:h.sort((m,x)=>{const g=sf(t,af(cr(m))),v=sf(t,af(cr(x)));return g!==v?g-v:cr(m)[l.start]-cr(x)[l.start]})[0]};const df=(e,t)=>{const n=e.page.borderBox.center;return ai(e.descriptor.id,t)?Nr(n,t.displacedBy.point):n},T3=(e,t)=>{const n=e.page.borderBox;return ai(e.descriptor.id,t)?go(n,xa(t.displacedBy.point)):n};var I3=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(l=>jm({target:T3(l,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((l,u)=>{const h=Qa(e,$u(n,df(l,i))),f=Qa(e,$u(n,df(u,i)));return h<f?-1:f<h?1:l.descriptor.index-u.descriptor.index})[0]||null,xo=Yn(function(t,n){const r=n[t.line];return{value:r,point:Ti(t.line,r)}});const A3=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Ti(r.line,t[r.line]);const i=e.subject.page.contentBox[r.size],h=ya(e.descriptor.id,n).reduce((f,m)=>f+m.client.marginBox[r.size],0)+t[r.line]-i;return h<=0?null:Ti(r.line,h)},Am=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Nm=(e,t,n)=>{const r=e.frame;ba(t,e)&&ze(),e.subject.withPlaceholder&&ze();const i=xo(e.axis,t.displaceBy).point,a=A3(e,i,n),l={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const m=la({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:m}}const u=a?er(r.scroll.max,a):r.scroll.max,h=Am(r,u),f=la({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return{...e,subject:f,frame:h}},N3=e=>{const t=e.subject.withPlaceholder;t||ze();const n=e.frame;if(!n){const l=la({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const r=t.oldFrameMaxScroll;r||ze();const i=Am(n,r),a=la({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}};var _3=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:l,afterCritical:u})=>{if(!t){if(n.length)return null;const x={displaced:eo,displacedBy:wm,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},g=Ul({impact:x,draggable:r,droppable:a,draggables:i,afterCritical:u}),v=ba(r,a)?a:Nm(a,r,i);return Im({draggable:r,destination:v,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?x:null}const h=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],f=(()=>{const x=t.descriptor.index;return t.descriptor.id===r.descriptor.id||h?x:x+1})(),m=xo(a.axis,r.displaceBy);return Cl({draggable:r,insideDestination:n,destination:a,viewport:l,displacedBy:m,last:eo,index:f})},E3=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:l,afterCritical:u})=>{const h=C3({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:l});if(!h)return null;const f=ya(h.descriptor.id,i),m=I3({pageBorderBoxCenter:t,viewport:l,destination:h,insideDestination:f,afterCritical:u}),x=_3({previousPageBorderBoxCenter:t,destination:h,draggable:n,draggables:i,moveRelativeTo:m,insideDestination:f,viewport:l,afterCritical:u});if(!x)return null;const g=Ul({impact:x,draggable:n,droppable:h,draggables:i,afterCritical:u});return{clientSelection:T0({pageBorderBoxCenter:g,draggable:n,viewport:l}),impact:x,scrollJumpRequest:null}},_r=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const M3=(e,t)=>{const n=_r(e);return n?t[n]:null};var D3=({state:e,type:t})=>{const n=M3(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,l=a.axis.direction,u=l==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||l==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(u&&!r)return null;const h=t==="MOVE_DOWN"||t==="MOVE_RIGHT",f=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:x,droppables:g}=e.dimensions;return u?j3({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:f,destination:a,draggables:x,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):E3({isMovingForward:h,previousPageBorderBoxCenter:m,draggable:f,isOver:a,draggables:x,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function vi(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function _m(e){const t=Yr(e.top,e.bottom),n=Yr(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function O3(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function R3({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,i=n.map(a=>{const l=a.axis,u=Ti(a.axis.line,e.center[l.line],a.page.borderBox.center[l.crossAxisLine]);return{id:a.descriptor.id,distance:Qa(r,u)}}).sort((a,l)=>l.distance-a.distance);return i[0]?i[0].id:null}function V3({pageBorderBox:e,draggable:t,droppables:n}){const r=ql(n).filter(i=>{if(!i.isEnabled)return!1;const a=i.subject.active;if(!a||!O3(e,a))return!1;if(_m(a)(e.center))return!0;const l=i.axis,u=a.center[l.crossAxisLine],h=e[l.crossAxisStart],f=e[l.crossAxisEnd],m=Yr(a[l.crossAxisStart],a[l.crossAxisEnd]),x=m(h),g=m(f);return!x&&!g?!0:x?h<u:f>u});return r.length?r.length===1?r[0].descriptor.id:R3({pageBorderBox:e,draggable:t,candidates:r}):null}const Em=(e,t)=>_i(go(e,t));var z3=(e,t)=>{const n=e.frame;return n?Em(t,n.scroll.diff.value):t};function Mm({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function P3({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var B3=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:l})=>{const u=n.axis,h=xo(n.axis,t.displaceBy),f=h.value,m=e[u.start],x=e[u.end],v=Wl(t,r).find(D=>{const j=D.descriptor.id,S=D.page.borderBox.center[u.line],T=ai(j,l),E=Mm({displaced:i,id:j});return T?E?x<=S:m<S-f:E?x<=S+f:m<S})||null,N=P3({draggable:t,closest:v,inHomeList:ba(t,n)});return Cl({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:h,index:N})};const L3=4;var F3=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const l=r.axis,u=xo(r.axis,e.displaceBy),h=u.value,f=t[l.start],m=t[l.end],g=Wl(e,i).find(N=>{const D=N.descriptor.id,j=N.page.borderBox,T=j[l.size]/L3,E=ai(D,a),M=Mm({displaced:n.displaced,id:D});return E?M?m>j[l.start]+T&&m<j[l.end]-T:f>j[l.start]-h+T&&f<j[l.end]-h-T:M?m>j[l.start]+h+T&&m<j[l.end]+h-T:f>j[l.start]+T&&f<j[l.end]-T});return g?{displacedBy:u,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:r.descriptor.id}}}:null},Dm=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:l})=>{const u=Em(t.page.borderBox,e),h=V3({pageBorderBox:u,draggable:t,droppables:r});if(!h)return t3;const f=r[h],m=ya(f.descriptor.id,n),x=z3(f,u);return F3({pageBorderBoxWithDroppableScroll:x,draggable:t,previousImpact:i,destination:f,insideDestination:m,afterCritical:l})||B3({pageBorderBoxWithDroppableScroll:x,draggable:t,destination:f,insideDestination:m,last:i.displaced,viewport:a,afterCritical:l})},I0=(e,t)=>({...e,[t.descriptor.id]:t});const $3=({previousImpact:e,impact:t,droppables:n})=>{const r=_r(e),i=_r(t);if(!r||r===i)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const l=N3(a);return I0(n,l)};var G3=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{const a=$3({previousImpact:r,impact:i,droppables:n}),l=_r(i);if(!l)return a;const u=n[l];if(ba(e,u)||u.subject.withPlaceholder)return a;const h=Nm(u,e,t);return I0(a,h)},Ha=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{const l=r||e.viewport,u=n||e.dimensions,h=t||e.current.client.selection,f=Nr(h,e.initial.client.selection),m={offset:f,selection:h,borderBoxCenter:er(e.initial.client.borderBoxCenter,f)},x={selection:er(m.selection,l.scroll.current),borderBoxCenter:er(m.borderBoxCenter,l.scroll.current),offset:er(m.offset,l.scroll.diff.value)},g={client:m,page:x};if(e.phase==="COLLECTING")return{...e,dimensions:u,viewport:l,current:g};const v=u.draggables[e.critical.draggable.id],N=i||Dm({pageOffset:x.offset,draggable:v,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),D=G3({draggable:v,impact:N,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables});return{...e,current:g,dimensions:{draggables:u.draggables,droppables:D},impact:N,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function q3(e,t){return e.map(n=>t[n])}var Om=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{const a=e.displaced,l=q3(a.all,n),u=to({afterDragging:l,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:u}},Rm=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{const l=Ul({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return T0({pageBorderBoxCenter:l,draggable:t,viewport:i})},Vm=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ze();const r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:l,droppables:u}=a,h=l[e.critical.draggable.id],f=_r(r);f||ze();const m=u[f],x=Om({impact:r,viewport:i,destination:m,draggables:l}),g=Rm({impact:x,draggable:h,droppable:m,draggables:l,viewport:i,afterCritical:e.afterCritical});return Ha({impact:x,clientSelection:g,state:e,dimensions:a,viewport:i})},H3=e=>({index:e.index,droppableId:e.droppableId}),zm=({draggable:e,home:t,draggables:n,viewport:r})=>{const i=xo(t.axis,e.displaceBy),a=ya(t.descriptor.id,n),l=a.indexOf(e);l===-1&&ze();const u=a.slice(l+1),h=u.reduce((g,v)=>(g[v.descriptor.id]=!0,g),{}),f={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:h};return{impact:{displaced:to({afterDragging:u,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:H3(e.descriptor)}},afterCritical:f}},W3=(e,t)=>({draggables:e.draggables,droppables:I0(e.droppables,t)}),U3=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=xu(e.client,t),i=dl(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},Z3=e=>{const t=e.frame;return t||ze(),t},Y3=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(i=>{const a=i.descriptor.droppableId,l=t[a],h=Z3(l).scroll.diff.value,f=er(r,h);return U3({draggable:i,offset:f,initialWindowScroll:n.scroll.initial})})},J3=({state:e,published:t})=>{const n=t.modified.map(S=>{const T=e.dimensions.droppables[S.droppableId];return w0(T,S.scroll)}),r={...e.dimensions.droppables,...bm(n)},i=vm(Y3({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(S=>{delete a[S]});const l={droppables:r,draggables:a},u=_r(e.impact),h=u?l.droppables[u]:null,f=l.draggables[e.critical.draggable.id],m=l.droppables[e.critical.droppable.id],{impact:x,afterCritical:g}=zm({draggable:f,home:m,draggables:a,viewport:e.viewport}),v=h&&h.isCombineEnabled?e.impact:x,N=Dm({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:e.viewport,afterCritical:g}),D={...e,phase:"DRAGGING",impact:N,onLiftImpact:x,dimensions:l,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?D:{...D,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Gu=e=>e.movementMode==="SNAP",Zc=(e,t,n)=>{const r=W3(e.dimensions,t);return!Gu(e)||n?Ha({state:e,dimensions:r}):Vm({state:e,dimensions:r})};function Yc(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const hf={phase:"IDLE",completed:null,shouldFlush:!1};var X3=(e=hf,t)=>{if(t.type==="FLUSH")return{...hf,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ze();const{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:l}=t.payload,u=a.draggables[n.draggable.id],h=a.droppables[n.droppable.id],f={selection:r,borderBoxCenter:u.client.borderBox.center,offset:Xn},m={client:f,page:{selection:er(f.selection,i.scroll.initial),borderBoxCenter:er(f.selection,i.scroll.initial),offset:er(f.selection,i.scroll.diff.value)}},x=ql(a.droppables).every(D=>!D.isFixedOnPage),{impact:g,afterCritical:v}=zm({draggable:u,home:h,draggables:a.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:a,initial:m,current:m,isWindowScrollAllowed:x,impact:g,afterCritical:v,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ze(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ze(),J3({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;vi(e)||ze();const{client:n}=t.payload;return si(n,e.current.client.selection)?e:Ha({state:e,clientSelection:n,impact:Gu(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Yc(e);vi(e)||ze();const{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;const a=w0(i,r);return Zc(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;vi(e)||ze();const{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ze(),i.isEnabled===r&&ze();const a={...i,isEnabled:r};return Zc(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;vi(e)||ze();const{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];i||ze(),i.isCombineEnabled===r&&ze();const a={...i,isCombineEnabled:r};return Zc(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;vi(e)||ze(),e.isWindowScrollAllowed||ze();const n=t.payload.newScroll;if(si(e.viewport.scroll.current,n))return Yc(e);const r=Tm(e.viewport,n);return Gu(e)?Vm({state:e,viewport:r}):Ha({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!vi(e))return e;const n=t.payload.maxScroll;if(si(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ze();const n=D3({state:e,type:t.type});return n?Ha({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ze(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ze(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function en(e,t){return e instanceof Object&&"type"in e&&e.type===t}const K3=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Q3=e=>({type:"LIFT",payload:e}),e5=e=>({type:"INITIAL_PUBLISH",payload:e}),t5=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),n5=()=>({type:"COLLECTION_STARTING",payload:null}),r5=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),s5=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),i5=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Pm=e=>({type:"MOVE",payload:e}),a5=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),o5=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),l5=()=>({type:"MOVE_UP",payload:null}),c5=()=>({type:"MOVE_DOWN",payload:null}),u5=()=>({type:"MOVE_RIGHT",payload:null}),d5=()=>({type:"MOVE_LEFT",payload:null}),A0=()=>({type:"FLUSH",payload:null}),h5=e=>({type:"DROP_ANIMATE",payload:e}),N0=e=>({type:"DROP_COMPLETE",payload:e}),Bm=e=>({type:"DROP",payload:e}),f5=e=>({type:"DROP_PENDING",payload:e}),Lm=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var p5=e=>({getState:t,dispatch:n})=>r=>i=>{if(!en(i,"LIFT")){r(i);return}const{id:a,clientSelection:l,movementMode:u}=i.payload,h=t();h.phase==="DROP_ANIMATING"&&n(N0({completed:h.completed})),t().phase!=="IDLE"&&ze(),n(A0()),n(K3({draggableId:a,movementMode:u}));const m={draggableId:a,scrollOptions:{shouldPublishImmediately:u==="SNAP"}},{critical:x,dimensions:g,viewport:v}=e.startPublishing(m);n(e5({critical:x,dimensions:g,clientSelection:l,movementMode:u,viewport:v}))},m5=e=>()=>t=>n=>{en(n,"INITIAL_PUBLISH")&&e.dragging(),en(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(en(n,"FLUSH")||en(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const _0={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},no={opacity:{drop:0,combining:.7},scale:{drop:.75}},Fm={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},bi=`${Fm.outOfTheWay}s ${_0.outOfTheWay}`,Wa={fluid:`opacity ${bi}`,snap:`transform ${bi}, opacity ${bi}`,drop:e=>{const t=`${e}s ${_0.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${bi}`,placeholder:`height ${bi}, width ${bi}, margin ${bi}`},ff=e=>si(e,Xn)?void 0:`translate(${e.x}px, ${e.y}px)`,qu={moveTo:ff,drop:(e,t)=>{const n=ff(e);if(n)return t?`${n} scale(${no.scale.drop})`:n}},{minDropTime:Hu,maxDropTime:$m}=Fm,g5=$m-Hu,pf=1500,x5=.6;var y5=({current:e,destination:t,reason:n})=>{const r=Qa(e,t);if(r<=0)return Hu;if(r>=pf)return $m;const i=r/pf,a=Hu+g5*i,l=n==="CANCEL"?a*x5:a;return Number(l.toFixed(2))},b5=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:a,droppables:l}=n,u=_r(e),h=u?l[u]:null,f=l[t.descriptor.droppableId],m=Rm({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:h||f,viewport:r});return Nr(m,t.client.borderBox.center)},v5=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:Om({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:eo},didDropInsideDroppable:!0};const w5=({getState:e,dispatch:t})=>n=>r=>{if(!en(r,"DROP")){n(r);return}const i=e(),a=r.payload.reason;if(i.phase==="COLLECTING"){t(f5({reason:a}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ze(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ze();const u=i.critical,h=i.dimensions,f=h.draggables[i.critical.draggable.id],{impact:m,didDropInsideDroppable:x}=v5({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),g=x?S0(m):null,v=x?Hl(m):null,N={index:u.draggable.index,droppableId:u.droppable.id},D={draggableId:f.descriptor.id,type:f.descriptor.type,source:N,reason:a,mode:i.movementMode,destination:g,combine:v},j=b5({impact:m,draggable:f,dimensions:h,viewport:i.viewport,afterCritical:i.afterCritical}),S={critical:i.critical,afterCritical:i.afterCritical,result:D,impact:m};if(!(!si(i.current.client.offset,j)||!!D.combine)){t(N0({completed:S}));return}const E=y5({current:i.current.client.offset,destination:j,reason:a});t(h5({newHomeClientOffset:j,dropDuration:E,completed:S}))};var Gm=()=>({x:window.pageXOffset,y:window.pageYOffset});function S5(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function k5({onWindowScroll:e}){function t(){e(Gm())}const n=Ka(t),r=S5(n);let i=ri;function a(){return i!==ri}function l(){a()&&ze(),i=Zr(window,[r])}function u(){a()||ze(),n.cancel(),i(),i=ri}return{start:l,stop:u,isActive:a}}const j5=e=>en(e,"DROP_COMPLETE")||en(e,"DROP_ANIMATE")||en(e,"FLUSH"),C5=e=>{const t=k5({onWindowScroll:n=>{e.dispatch(a5({newScroll:n}))}});return n=>r=>{!t.isActive()&&en(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&j5(r)&&t.stop(),n(r)}};var T5=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=()=>t,i},I5=()=>{const e=[],t=i=>{const a=e.findIndex(u=>u.timerId===i);a===-1&&ze();const[l]=e.splice(a,1);l.callback()};return{add:i=>{const a=setTimeout(()=>t(a)),l={timerId:a,callback:i};e.push(l)},flush:()=>{if(!e.length)return;const i=[...e];e.length=0,i.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const A5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,N5=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,_5=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Da=(e,t)=>{t()},$o=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Jc(e,t,n,r){if(!e){n(r(t));return}const i=T5(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var E5=(e,t)=>{const n=I5();let r=null;const i=(x,g)=>{r&&ze(),Da("onBeforeCapture",()=>{const v=e().onBeforeCapture;v&&v({draggableId:x,mode:g})})},a=(x,g)=>{r&&ze(),Da("onBeforeDragStart",()=>{const v=e().onBeforeDragStart;v&&v($o(x,g))})},l=(x,g)=>{r&&ze();const v=$o(x,g);r={mode:g,lastCritical:x,lastLocation:v.source,lastCombine:null},n.add(()=>{Da("onDragStart",()=>Jc(e().onDragStart,v,t,el.onDragStart))})},u=(x,g)=>{const v=S0(g),N=Hl(g);r||ze();const D=!_5(x,r.lastCritical);D&&(r.lastCritical=x);const j=!A5(r.lastLocation,v);j&&(r.lastLocation=v);const S=!N5(r.lastCombine,N);if(S&&(r.lastCombine=N),!D&&!j&&!S)return;const T={...$o(x,r.mode),combine:N,destination:v};n.add(()=>{Da("onDragUpdate",()=>Jc(e().onDragUpdate,T,t,el.onDragUpdate))})},h=()=>{r||ze(),n.flush()},f=x=>{r||ze(),r=null,Da("onDragEnd",()=>Jc(e().onDragEnd,x,t,el.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:l,update:u,flush:h,drop:f,abort:()=>{if(!r)return;const x={...$o(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};f(x)}}},M5=(e,t)=>{const n=E5(e,t);return r=>i=>a=>{if(en(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(en(a,"INITIAL_PUBLISH")){const u=a.payload.critical;n.beforeStart(u,a.payload.movementMode),i(a),n.start(u,a.payload.movementMode);return}if(en(a,"DROP_COMPLETE")){const u=a.payload.completed.result;n.flush(),i(a),n.drop(u);return}if(i(a),en(a,"FLUSH")){n.abort();return}const l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}};const D5=e=>t=>n=>{if(!en(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&ze(),e.dispatch(N0({completed:r.completed}))},O5=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return i=>a=>{if((en(a,"FLUSH")||en(a,"DROP_COMPLETE")||en(a,"DROP_ANIMATION_FINISHED"))&&r(),i(a),!en(a,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Lm())}};n=requestAnimationFrame(()=>{n=null,t=Zr(window,[l])})}};var R5=e=>()=>t=>n=>{(en(n,"DROP_COMPLETE")||en(n,"FLUSH")||en(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},V5=e=>{let t=!1;return()=>n=>r=>{if(en(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(en(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(en(r,"DROP_COMPLETE")){t=!1;const i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const z5=e=>en(e,"DROP_COMPLETE")||en(e,"DROP_ANIMATE")||en(e,"FLUSH");var P5=e=>t=>n=>r=>{if(z5(r)){e.stop(),n(r);return}if(en(r,"INITIAL_PUBLISH")){n(r);const i=t.getState();i.phase!=="DRAGGING"&&ze(),e.start(i);return}n(r),e.scroll(t.getState())};const B5=e=>t=>n=>{if(t(n),!en(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Bm({reason:r.reason})))},L5=om;var F5=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>am(X3,L5(Pb(m5(n),R5(e),p5(e),w5,D5,O5,B5,P5(a),C5,V5(t),M5(r,i))));const Xc=()=>({additions:{},removals:{},modified:{}});function $5({registry:e,callbacks:t}){let n=Xc(),r=null;const i=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:h,removals:f,modified:m}=n,x=Object.keys(h).map(N=>e.draggable.getById(N).getDimension(Xn)).sort((N,D)=>N.descriptor.index-D.descriptor.index),g=Object.keys(m).map(N=>{const j=e.droppable.getById(N).callbacks.getScrollWhileDragging();return{droppableId:N,scroll:j}}),v={additions:x,removals:Object.keys(f),modified:g};n=Xc(),t.publish(v)}))};return{add:h=>{const f=h.descriptor.id;n.additions[f]=h,n.modified[h.descriptor.droppableId]=!0,n.removals[f]&&delete n.removals[f],i()},remove:h=>{const f=h.descriptor;n.removals[f.id]=!0,n.modified[f.droppableId]=!0,n.additions[f.id]&&delete n.additions[f.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Xc())}}}var qm=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const i=Nr({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Hm=()=>{const e=document.documentElement;return e||ze(),e},Wm=()=>{const e=Hm();return qm({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},G5=()=>{const e=Gm(),t=Wm(),n=e.y,r=e.x,i=Hm(),a=i.clientWidth,l=i.clientHeight,u=r+a,h=n+l;return{frame:_i({top:n,left:r,right:u,bottom:h}),scroll:{initial:e,current:e,max:t,diff:{value:Xn,displacement:Xn}}}},q5=({critical:e,scrollOptions:t,registry:n})=>{const r=G5(),i=r.scroll.current,a=e.droppable,l=n.droppable.getAllByType(a.type).map(m=>m.callbacks.getDimensionAndWatchScroll(i,t)),u=n.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(i));return{dimensions:{draggables:vm(u),droppables:bm(l)},critical:e,viewport:r}};function mf(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var H5=(e,t)=>{let n=null;const r=$5({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(g,v)=>{e.droppable.exists(g)||ze(),n&&t.updateDroppableIsEnabled({id:g,isEnabled:v})},a=(g,v)=>{n&&(e.droppable.exists(g)||ze(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:v}))},l=(g,v)=>{n&&(e.droppable.exists(g)||ze(),t.updateDroppableScroll({id:g,newScroll:v}))},u=(g,v)=>{n&&e.droppable.getById(g).callbacks.scroll(v)},h=()=>{if(!n)return;r.stop();const g=n.critical.droppable;e.droppable.getAllByType(g.type).forEach(v=>v.callbacks.dragStopped()),n.unsubscribe(),n=null},f=g=>{n||ze();const v=n.critical.draggable;g.type==="ADDITION"&&mf(e,v,g.value)&&r.add(g.value),g.type==="REMOVAL"&&mf(e,v,g.value)&&r.remove(g.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:u,updateDroppableScroll:l,startPublishing:g=>{n&&ze();const v=e.draggable.getById(g.draggableId),N=e.droppable.getById(v.descriptor.droppableId),D={draggable:v.descriptor,droppable:N.descriptor},j=e.subscribe(f);return n={critical:D,unsubscribe:j},q5({critical:D,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:h}},Um=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",W5=e=>{window.scrollBy(e.x,e.y)};const U5=Yn(e=>ql(e).filter(t=>!(!t.isEnabled||!t.frame))),Z5=(e,t)=>U5(t).find(r=>(r.frame||ze(),_m(r.frame.pageMarginBox)(e)))||null;var Y5=({center:e,destination:t,droppables:n})=>{if(t){const i=n[t];return i.frame?i:null}return Z5(e,n)};const ro={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var J5=(e,t,n=()=>ro)=>{const r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},Zm=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},E0=1,X5=(e,t,n=()=>ro)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return E0;const a=1-Zm({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),l=r.maxPixelScroll*r.ease(a);return Math.ceil(l)},K5=(e,t,n)=>{const r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,l=t,u=a,f=Date.now()-l;if(f>=a)return e;if(f<i)return E0;const m=Zm({startOfRange:i,endOfRange:u,current:f}),x=e*r.ease(m);return Math.ceil(x)},gf=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=X5(e,t,i);return a===0?0:r?Math.max(K5(a,n,i),E0):a},xf=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const l=J5(e,r,a);return t[r.end]<t[r.start]?gf({distanceToEdge:t[r.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*gf({distanceToEdge:t[r.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},Q5=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const e6=ym(e=>e===0?0:e);var Ym=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const l={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},u=xf({container:t,distanceToEdges:l,dragStartTime:e,axis:k0,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),h=xf({container:t,distanceToEdges:l,dragStartTime:e,axis:km,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),f=e6({x:h,y:u});if(si(f,Xn))return null;const m=Q5({container:t,subject:n,proposedScroll:f});return m?si(m,Xn)?null:m:null};const t6=ym(e=>e===0?0:e>0?1:-1),M0=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const i=er(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return si(a,Xn)?null:a}})(),Jm=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=t6(n),a=M0({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},D0=(e,t)=>Jm({current:e.scroll.current,max:e.scroll.max,change:t}),n6=(e,t)=>{if(!D0(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return M0({current:r,max:n,change:t})},O0=(e,t)=>{const n=e.frame;return n?Jm({current:n.scroll.current,max:n.scroll.max,change:t}):!1},r6=(e,t)=>{const n=e.frame;return!n||!O0(e,t)?null:M0({current:n.scroll.current,max:n.scroll.max,change:t})};var s6=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const l=Ym({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return l&&D0(e,l)?l:null},i6=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{const l=e.frame;if(!l)return null;const u=Ym({dragStartTime:r,container:l.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return u&&O0(e,u)?u:null},yf=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{const l=e.current.page.borderBoxCenter,h=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const x=e.viewport,g=s6({dragStartTime:t,viewport:x,subject:h,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(g){r(g);return}}const f=Y5({center:l,destination:_r(e.impact),droppables:e.dimensions.droppables});if(!f)return;const m=i6({dragStartTime:t,droppable:f,subject:h,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:a});m&&i(f.descriptor.id,m)},a6=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>ro})=>{const r=Ka(e),i=Ka(t);let a=null;const l=f=>{a||ze();const{shouldUseTimeDampening:m,dragStartTime:x}=a;yf({state:f,scrollWindow:r,scrollDroppable:i,dragStartTime:x,shouldUseTimeDampening:m,getAutoScrollerOptions:n})};return{start:f=>{a&&ze();const m=Date.now();let x=!1;const g=()=>{x=!0};yf({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:n}),a={dragStartTime:m,shouldUseTimeDampening:x},x&&l(f)},stop:()=>{a&&(r.cancel(),i.cancel(),a=null)},scroll:l}},o6=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(u,h)=>{const f=er(u.current.client.selection,h);e({client:f})},i=(u,h)=>{if(!O0(u,h))return h;const f=r6(u,h);if(!f)return t(u.descriptor.id,h),null;const m=Nr(h,f);return t(u.descriptor.id,m),Nr(h,m)},a=(u,h,f)=>{if(!u||!D0(h,f))return f;const m=n6(h,f);if(!m)return n(f),null;const x=Nr(f,m);return n(x),Nr(f,x)};return u=>{const h=u.scrollJumpRequest;if(!h)return;const f=_r(u.impact);f||ze();const m=i(u.dimensions.droppables[f],h);if(!m)return;const x=u.viewport,g=a(u.isWindowScrollAllowed,x,m);g&&r(u,g)}},l6=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const i=a6({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=o6({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:h=>{if(!(r().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){i.scroll(h);return}h.scrollJumpRequest&&a(h)}},start:i.start,stop:i.stop}};const ca="data-rfd",ua=(()=>{const e=`${ca}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Wu=(()=>{const e=`${ca}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),c6=(()=>{const e=`${ca}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),bf={contextId:`${ca}-scroll-container-context-id`},u6=e=>t=>`[${t}="${e}"]`,Oa=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),d6="pointer-events: none;";var h6=e=>{const t=u6(e),n=(()=>{const u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ua.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:d6,dropAnimating:u}}})(),r=(()=>{const u=`
      transition: ${Wa.outOfTheWay};
    `;return{selector:t(Wu.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}})(),i={selector:t(c6.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Oa(l,"always"),resting:Oa(l,"resting"),dragging:Oa(l,"dragging"),dropAnimating:Oa(l,"dropAnimating"),userCancel:Oa(l,"userCancel")}};const Er=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?P.useLayoutEffect:P.useEffect,Kc=()=>{const e=document.querySelector("head");return e||ze(),e},vf=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function f6(e,t){const n=Lt(()=>h6(e),[e]),r=P.useRef(null),i=P.useRef(null),a=lt(Yn(x=>{const g=i.current;g||ze(),g.textContent=x}),[]),l=lt(x=>{const g=r.current;g||ze(),g.textContent=x},[]);Er(()=>{!r.current&&!i.current||ze();const x=vf(t),g=vf(t);return r.current=x,i.current=g,x.setAttribute(`${ca}-always`,e),g.setAttribute(`${ca}-dynamic`,e),Kc().appendChild(x),Kc().appendChild(g),l(n.always),a(n.resting),()=>{const v=N=>{const D=N.current;D||ze(),Kc().removeChild(D),N.current=null};v(r),v(i)}},[t,l,a,n.always,n.resting,e]);const u=lt(()=>a(n.dragging),[a,n.dragging]),h=lt(x=>{if(x==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),f=lt(()=>{i.current&&a(n.resting)},[a,n.resting]);return Lt(()=>({dragging:u,dropping:h,resting:f}),[u,h,f])}function Xm(e,t){return Array.from(e.querySelectorAll(t))}var Km=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Zl(e){return e instanceof Km(e).HTMLElement}function p6(e,t){const n=`[${ua.contextId}="${e}"]`,r=Xm(document,n);if(!r.length)return null;const i=r.find(a=>a.getAttribute(ua.draggableId)===t);return!i||!Zl(i)?null:i}function m6(e){const t=P.useRef({}),n=P.useRef(null),r=P.useRef(null),i=P.useRef(!1),a=lt(function(g,v){const N={id:g,focus:v};return t.current[g]=N,function(){const j=t.current;j[g]!==N&&delete j[g]}},[]),l=lt(function(g){const v=p6(e,g);v&&v!==document.activeElement&&v.focus()},[e]),u=lt(function(g,v){n.current===g&&(n.current=v)},[]),h=lt(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const g=n.current;g&&l(g)}))},[l]),f=lt(function(g){n.current=null;const v=document.activeElement;v&&v.getAttribute(ua.draggableId)===g&&(n.current=g)},[]);return Er(()=>(i.current=!0,function(){i.current=!1;const g=r.current;g&&cancelAnimationFrame(g)}),[]),Lt(()=>({register:a,tryRecordFocus:f,tryRestoreFocusRecorded:h,tryShiftRecord:u}),[a,f,h,u])}function g6(){const e={draggables:{},droppables:{}},t=[];function n(x){return t.push(x),function(){const v=t.indexOf(x);v!==-1&&t.splice(v,1)}}function r(x){t.length&&t.forEach(g=>g(x))}function i(x){return e.draggables[x]||null}function a(x){const g=i(x);return g||ze(),g}const l={register:x=>{e.draggables[x.descriptor.id]=x,r({type:"ADDITION",value:x})},update:(x,g)=>{const v=e.draggables[g.descriptor.id];v&&v.uniqueId===x.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[x.descriptor.id]=x)},unregister:x=>{const g=x.descriptor.id,v=i(g);v&&x.uniqueId===v.uniqueId&&(delete e.draggables[g],e.droppables[x.descriptor.droppableId]&&r({type:"REMOVAL",value:x}))},getById:a,findById:i,exists:x=>!!i(x),getAllByType:x=>Object.values(e.draggables).filter(g=>g.descriptor.type===x)};function u(x){return e.droppables[x]||null}function h(x){const g=u(x);return g||ze(),g}const f={register:x=>{e.droppables[x.descriptor.id]=x},unregister:x=>{const g=u(x.descriptor.id);g&&x.uniqueId===g.uniqueId&&delete e.droppables[x.descriptor.id]},getById:h,findById:u,exists:x=>!!u(x),getAllByType:x=>Object.values(e.droppables).filter(g=>g.descriptor.type===x)};function m(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:f,subscribe:n,clean:m}}function x6(){const e=Lt(g6,[]);return P.useEffect(()=>function(){e.clean()},[e]),e}var R0=St.createContext(null),Tl=()=>{const e=document.body;return e||ze(),e};const y6={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},b6=e=>`rfd-announcement-${e}`;function v6(e){const t=Lt(()=>b6(e),[e]),n=P.useRef(null);return P.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),h0(a.style,y6),Tl().appendChild(a),function(){setTimeout(function(){const h=Tl();h.contains(a)&&h.removeChild(a),a===n.current&&(n.current=null)})}},[t]),lt(i=>{const a=n.current;if(a){a.textContent=i;return}},[])}const w6={separator:"::"};function V0(e,t=w6){const n=St.useId();return Lt(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function S6({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function k6({contextId:e,text:t}){const n=V0("hidden-text",{separator:"-"}),r=Lt(()=>S6({contextId:e,uniqueId:n}),[n,e]);return P.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",Tl().appendChild(a),function(){const u=Tl();u.contains(a)&&u.removeChild(a)}},[r,t]),r}var Yl=St.createContext(null);function Qm(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),t}function j6(){let e=null;function t(){return!!e}function n(l){return l===e}function r(l){e&&ze();const u={abandon:l};return e=u,u}function i(){e||ze(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function so(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const C6=9,T6=13,z0=27,e1=32,I6=33,A6=34,N6=35,_6=36,E6=37,M6=38,D6=39,O6=40,R6={[T6]:!0,[C6]:!0};var t1=e=>{R6[e.keyCode]&&e.preventDefault()};const Jl=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),n1=0,wf=5;function V6(e,t){return Math.abs(t.x-e.x)>=wf||Math.abs(t.y-e.y)>=wf}const Sf={type:"IDLE"};function z6({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:a,clientX:l,clientY:u}=i;if(a!==n1)return;const h={x:l,y:u},f=n();if(f.type==="DRAGGING"){i.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&ze();const m=f.point;if(!V6(m,h))return;i.preventDefault();const x=f.actions.fluidLift(h);r({type:"DRAGGING",actions:x})}},{eventName:"mouseup",fn:i=>{const a=n();if(a.type!=="DRAGGING"){e();return}i.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),e()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){e();return}if(i.keyCode===z0){i.preventDefault(),e();return}t1(i)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:i=>{const a=n();if(a.type==="IDLE"&&ze(),a.actions.shouldRespectForcePress()){e();return}i.preventDefault()}},{eventName:Jl,fn:e}]}function P6(e){const t=P.useRef(Sf),n=P.useRef(ri),r=Lt(()=>({eventName:"mousedown",fn:function(x){if(x.defaultPrevented||x.button!==n1||x.ctrlKey||x.metaKey||x.shiftKey||x.altKey)return;const g=e.findClosestDraggableId(x);if(!g)return;const v=e.tryGetLock(g,l,{sourceEvent:x});if(!v)return;x.preventDefault();const N={x:x.clientX,y:x.clientY};n.current(),f(v,N)}}),[e]),i=Lt(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const x=e.findClosestDraggableId(m);if(!x)return;const g=e.findOptionsForDraggable(x);g&&(g.shouldRespectForcePress||e.canGetLock(x)&&m.preventDefault())}}),[e]),a=lt(function(){const x={passive:!1,capture:!0};n.current=Zr(window,[i,r],x)},[i,r]),l=lt(()=>{t.current.type!=="IDLE"&&(t.current=Sf,n.current(),a())},[a]),u=lt(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),h=lt(function(){const x={capture:!0,passive:!1},g=z6({cancel:u,completed:l,getPhase:()=>t.current,setPhase:v=>{t.current=v}});n.current=Zr(window,g,x)},[u,l]),f=lt(function(x,g){t.current.type!=="IDLE"&&ze(),t.current={type:"PENDING",point:g,actions:x},h()},[h]);Er(function(){return a(),function(){n.current()}},[a])}function B6(){}const L6={[A6]:!0,[I6]:!0,[_6]:!0,[N6]:!0};function F6(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===z0){i.preventDefault(),n();return}if(i.keyCode===e1){i.preventDefault(),r();return}if(i.keyCode===O6){i.preventDefault(),e.moveDown();return}if(i.keyCode===M6){i.preventDefault(),e.moveUp();return}if(i.keyCode===D6){i.preventDefault(),e.moveRight();return}if(i.keyCode===E6){i.preventDefault(),e.moveLeft();return}if(L6[i.keyCode]){i.preventDefault();return}t1(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Jl,fn:n}]}function $6(e){const t=P.useRef(B6),n=Lt(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==e1)return;const l=e.findClosestDraggableId(a);if(!l)return;const u=e.tryGetLock(l,m,{sourceEvent:a});if(!u)return;a.preventDefault();let h=!0;const f=u.snapLift();t.current();function m(){h||ze(),h=!1,t.current(),r()}t.current=Zr(window,F6(f,m),{capture:!0,passive:!1})}}),[e]),r=lt(function(){const a={passive:!1,capture:!0};t.current=Zr(window,[n],a)},[n]);Er(function(){return r(),function(){t.current()}},[r])}const Qc={type:"IDLE"},G6=120,q6=.15;function H6({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===z0&&n.preventDefault(),e()}},{eventName:Jl,fn:e}]}function W6({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}i.hasMoved=!0;const{clientX:a,clientY:l}=r.touches[0],u={x:a,y:l};r.preventDefault(),i.actions.move(u)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&ze();const a=r.touches[0];if(!a||!(a.force>=q6))return;const u=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){u&&e();return}if(u){if(i.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Jl,fn:e}]}function U6(e){const t=P.useRef(Qc),n=P.useRef(ri),r=lt(function(){return t.current},[]),i=lt(function(v){t.current=v},[]),a=Lt(()=>({eventName:"touchstart",fn:function(v){if(v.defaultPrevented)return;const N=e.findClosestDraggableId(v);if(!N)return;const D=e.tryGetLock(N,u,{sourceEvent:v});if(!D)return;const j=v.touches[0],{clientX:S,clientY:T}=j,E={x:S,y:T};n.current(),x(D,E)}}),[e]),l=lt(function(){const v={capture:!0,passive:!1};n.current=Zr(window,[a],v)},[a]),u=lt(()=>{const g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),i(Qc),n.current(),l())},[l,i]),h=lt(()=>{const g=t.current;u(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[u]),f=lt(function(){const v={capture:!0,passive:!1},N={cancel:h,completed:u,getPhase:r},D=Zr(window,W6(N),v),j=Zr(window,H6(N),v);n.current=function(){D(),j()}},[h,r,u]),m=lt(function(){const v=r();v.type!=="PENDING"&&ze();const N=v.actions.fluidLift(v.point);i({type:"DRAGGING",actions:N,hasMoved:!1})},[r,i]),x=lt(function(v,N){r().type!=="IDLE"&&ze();const D=setTimeout(m,G6);i({type:"PENDING",point:N,actions:v,longPressTimerId:D}),f()},[f,r,i,m]);Er(function(){return l(),function(){n.current();const N=r();N.type==="PENDING"&&(clearTimeout(N.longPressTimerId),i(Qc))}},[r,l,i]),Er(function(){return Zr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Z6=["input","button","textarea","select","option","optgroup","video","audio"];function r1(e,t){if(t==null)return!1;if(Z6.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:r1(e,t.parentElement)}function Y6(e,t){const n=t.target;return Zl(n)?r1(e,n):!1}var J6=e=>_i(e.getBoundingClientRect()).center;function X6(e){return e instanceof Km(e).Element}const K6=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function s1(e,t){return e==null?null:e[K6](t)?e:s1(e.parentElement,t)}function Q6(e,t){return e.closest?e.closest(t):s1(e,t)}function e7(e){return`[${ua.contextId}="${e}"]`}function t7(e,t){const n=t.target;if(!X6(n))return null;const r=e7(e),i=Q6(n,r);return!i||!Zl(i)?null:i}function n7(e,t){const n=t7(e,t);return n?n.getAttribute(ua.draggableId):null}function r7(e,t){const n=`[${Wu.contextId}="${e}"]`,i=Xm(document,n).find(a=>a.getAttribute(Wu.id)===t);return!i||!Zl(i)?null:i}function s7(e){e.preventDefault()}function Go({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function i1({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!Um(t.getState(),r))}function i7({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:l}){if(!i1({lockAPI:e,store:n,registry:r,draggableId:i}))return null;const h=r.draggable.getById(i),f=r7(t,h.descriptor.id);if(!f||l&&!h.options.canDragInteractiveElements&&Y6(f,l))return null;const m=e.claim(a||ri);let x="PRE_DRAG";function g(){return h.options.shouldRespectForcePress}function v(){return e.isActive(m)}function N(A,I){Go({expected:A,phase:x,isLockActive:v,shouldWarn:!0})&&n.dispatch(I())}const D=N.bind(null,"DRAGGING");function j(A){function I(){e.release(),x="COMPLETED"}x!=="PRE_DRAG"&&(I(),ze()),n.dispatch(Q3(A.liftActionArgs)),x="DRAGGING";function W(J,le={shouldBlockNextClick:!1}){if(A.cleanup(),le.shouldBlockNextClick){const ce=Zr(window,[{eventName:"click",fn:s7,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ce)}I(),n.dispatch(Bm({reason:J}))}return{isActive:()=>Go({expected:"DRAGGING",phase:x,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:g,drop:J=>W("DROP",J),cancel:J=>W("CANCEL",J),...A.actions}}function S(A){const I=Ka(J=>{D(()=>Pm({client:J}))});return{...j({liftActionArgs:{id:i,clientSelection:A,movementMode:"FLUID"},cleanup:()=>I.cancel(),actions:{move:I}}),move:I}}function T(){const A={moveUp:()=>D(l5),moveRight:()=>D(u5),moveDown:()=>D(c5),moveLeft:()=>D(d5)};return j({liftActionArgs:{id:i,clientSelection:J6(f),movementMode:"SNAP"},cleanup:ri,actions:A})}function E(){Go({expected:"PRE_DRAG",phase:x,isLockActive:v,shouldWarn:!0})&&e.release()}return{isActive:()=>Go({expected:"PRE_DRAG",phase:x,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:S,snapLift:T,abort:E}}const a7=[P6,$6,U6];function o7({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){const a=[...i?a7:[],...r||[]],l=P.useState(()=>j6())[0],u=lt(function(j,S){so(j)&&!so(S)&&l.tryAbandon()},[l]);Er(function(){let j=t.getState();return t.subscribe(()=>{const T=t.getState();u(j,T),j=T})},[l,t,u]),Er(()=>l.tryAbandon,[l.tryAbandon]);const h=lt(D=>i1({lockAPI:l,registry:n,store:t,draggableId:D}),[l,n,t]),f=lt((D,j,S)=>i7({lockAPI:l,registry:n,contextId:e,store:t,draggableId:D,forceSensorStop:j||null,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null}),[e,l,n,t]),m=lt(D=>n7(e,D),[e]),x=lt(D=>{const j=n.draggable.findById(D);return j?j.options:null},[n.draggable]),g=lt(function(){l.isClaimed()&&(l.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(A0()))},[l,t]),v=lt(()=>l.isClaimed(),[l]),N=Lt(()=>({canGetLock:h,tryGetLock:f,findClosestDraggableId:m,findOptionsForDraggable:x,tryReleaseLock:g,isLockClaimed:v}),[h,f,m,x,g,v]);for(let D=0;D<a.length;D++)a[D](N)}const l7=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};f0.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),c7=e=>({...ro,...e.autoScrollerOptions,durationDampening:{...ro.durationDampening,...e.autoScrollerOptions}});function Ra(e){return e.current||ze(),e.current}function u7(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,l=P.useRef(null),u=Qm(e),h=lt(()=>l7(u.current),[u]),f=lt(()=>c7(u.current),[u]),m=v6(t),x=k6({contextId:t,text:a}),g=f6(t,i),v=lt(ce=>{Ra(l).dispatch(ce)},[]),N=Lt(()=>Jh({publishWhileDragging:t5,updateDroppableScroll:r5,updateDroppableIsEnabled:s5,updateDroppableIsCombineEnabled:i5,collectionStarting:n5},v),[v]),D=x6(),j=Lt(()=>H5(D,N),[D,N]),S=Lt(()=>l6({scrollWindow:W5,scrollDroppable:j.scrollDroppable,getAutoScrollerOptions:f,...Jh({move:Pm},v)}),[j.scrollDroppable,v,f]),T=m6(t),E=Lt(()=>F5({announce:m,autoScroller:S,dimensionMarshal:j,focusMarshal:T,getResponders:h,styleMarshal:g}),[m,S,j,T,h,g]);l.current=E;const M=lt(()=>{const ce=Ra(l);ce.getState().phase!=="IDLE"&&ce.dispatch(A0())},[]),A=lt(()=>{const ce=Ra(l).getState();return ce.phase==="DROP_ANIMATING"?!0:ce.phase==="IDLE"?!1:ce.isDragging},[]),I=Lt(()=>({isDragging:A,tryAbort:M}),[A,M]);n(I);const W=lt(ce=>Um(Ra(l).getState(),ce),[]),J=lt(()=>vi(Ra(l).getState()),[]),le=Lt(()=>({marshal:j,focus:T,contextId:t,canLift:W,isMovementAllowed:J,dragHandleUsageInstructionsId:x,registry:D}),[t,j,x,T,W,J,D]);return o7({contextId:t,store:E,registry:D,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),P.useEffect(()=>M,[M]),St.createElement(Yl.Provider,{value:le},St.createElement(Bv,{context:R0,store:E},e.children))}function d7(){return St.useId()}function Xl(e){const t=d7(),n=e.dragHandleUsageInstructions||el.dragHandleUsageInstructions;return St.createElement($v,null,r=>St.createElement(u7,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const kf={dragging:5e3,dropAnimating:4500},h7=(e,t)=>t?Wa.drop(t.duration):e?Wa.snap:Wa.fluid,f7=(e,t)=>{if(e)return t?no.opacity.drop:no.opacity.combining},p7=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function m7(e){const n=e.dimension.client,{offset:r,combineWith:i,dropping:a}=e,l=!!i,u=p7(e),h=!!a,f=h?qu.drop(r,l):qu.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:h7(u,a),transform:f,opacity:f7(l,h),zIndex:h?kf.dropAnimating:kf.dragging,pointerEvents:"none"}}function g7(e){return{transform:qu.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function x7(e){return e.type==="DRAGGING"?m7(e):g7(e)}function y7(e,t,n=Xn){const r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=Kx(i,r),l=dl(a,n),u={client:a,tagName:t.tagName.toLowerCase(),display:r.display},h={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:u,displaceBy:h,client:a,page:l}}function b7(e){const t=V0("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:u}=e,h=Lt(()=>({canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:u}),[a,u,l]),f=lt(v=>{const N=i();return N||ze(),y7(n,N,v)},[n,i]),m=Lt(()=>({uniqueId:t,descriptor:n,options:h,getDimension:f}),[n,f,h,t]),x=P.useRef(m),g=P.useRef(!0);Er(()=>(r.draggable.register(x.current),()=>r.draggable.unregister(x.current)),[r.draggable]),Er(()=>{if(g.current){g.current=!1;return}const v=x.current;x.current=m,r.draggable.update(m,v)},[m,r.draggable])}var P0=St.createContext(null);function Il(e){const t=P.useContext(e);return t||ze(),t}function v7(e){e.preventDefault()}const w7=e=>{const t=P.useRef(null),n=lt((I=null)=>{t.current=I},[]),r=lt(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:l}=Il(Yl),{type:u,droppableId:h}=Il(P0),f=Lt(()=>({id:e.draggableId,index:e.index,type:u,droppableId:h}),[e.draggableId,e.index,u,h]),{children:m,draggableId:x,isEnabled:g,shouldRespectForcePress:v,canDragInteractiveElements:N,isClone:D,mapped:j,dropAnimationFinished:S}=e;if(!D){const I=Lt(()=>({descriptor:f,registry:l,getDraggableRef:r,canDragInteractiveElements:N,shouldRespectForcePress:v,isEnabled:g}),[f,l,r,N,v,g]);b7(I)}const T=Lt(()=>g?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":x,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:v7}:null,[i,a,x,g]),E=lt(I=>{j.type==="DRAGGING"&&j.dropping&&I.propertyName==="transform"&&f0.flushSync(S)},[S,j]),M=Lt(()=>{const I=x7(j),W=j.type==="DRAGGING"&&j.dropping?E:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":x,style:I,onTransitionEnd:W},dragHandleProps:T}},[i,T,x,j,E,n]),A=Lt(()=>({draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}),[f.droppableId,f.id,f.index,f.type]);return St.createElement(St.Fragment,null,m(M,j.snapshot,A))};var a1=(e,t)=>e===t,o1=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const S7=e=>e.combine?e.combine.draggableId:null,k7=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function j7(){const e=Yn((i,a)=>({x:i,y:a})),t=Yn((i,a,l=null,u=null,h=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!h,dropAnimation:h,mode:i,draggingOver:l,combineWith:u,combineTargetFor:null})),n=Yn((i,a,l,u,h=null,f=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:f,mode:a,offset:i,dimension:l,forceShouldAnimate:m,snapshot:t(a,u,h,f,null)}}));return(i,a)=>{if(so(i)){if(i.critical.draggable.id!==a.draggableId)return null;const l=i.current.client.offset,u=i.dimensions.draggables[a.draggableId],h=_r(i.impact),f=k7(i.impact),m=i.forceShouldAnimate;return n(e(l.x,l.y),i.movementMode,u,a.isClone,h,f,m)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==a.draggableId)return null;const u=a.isClone,h=i.dimensions.draggables[a.draggableId],f=l.result,m=f.mode,x=o1(f),g=S7(f),N={duration:i.dropDuration,curve:_0.drop,moveTo:i.newHomeClientOffset,opacity:g?no.opacity.drop:null,scale:g?no.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:N,draggingOver:x,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,u,x,g,N)}}}return null}}function l1(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const C7={mapped:{type:"SECONDARY",offset:Xn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:l1(null)}};function T7(){const e=Yn((l,u)=>({x:l,y:u})),t=Yn(l1),n=Yn((l,u=null,h)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:u,shouldAnimateDisplacement:h,snapshot:t(u)}})),r=l=>l?n(Xn,l,!0):null,i=(l,u,h,f)=>{const m=h.displaced.visible[l],x=!!(f.inVirtualList&&f.effected[l]),g=Hl(h),v=g&&g.draggableId===l?u:null;if(!m){if(!x)return r(v);if(h.displaced.invisible[l])return null;const j=xa(f.displacedBy.point),S=e(j.x,j.y);return n(S,v,!0)}if(x)return r(v);const N=h.displacedBy.point,D=e(N.x,N.y);return n(D,v,m.shouldAnimate)};return(l,u)=>{if(so(l))return l.critical.draggable.id===u.draggableId?null:i(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const h=l.completed;return h.result.draggableId===u.draggableId?null:i(u.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const I7=()=>{const e=j7(),t=T7();return(r,i)=>e(r,i)||t(r,i)||C7},A7={dropAnimationFinished:Lm},N7=fm(I7,A7,null,{context:R0,areStatePropsEqual:a1})(w7);function c1(e){return Il(P0).isUsingCloneFor===e.draggableId&&!e.isClone?null:St.createElement(N7,e)}function io(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return St.createElement(c1,h0({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const u1=e=>t=>e===t,_7=u1("scroll"),E7=u1("auto"),jf=(e,t)=>t(e.overflowX)||t(e.overflowY),M7=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return jf(n,_7)||jf(n,E7)},D7=()=>!1,d1=e=>e==null?null:e===document.body?D7()?e:null:e===document.documentElement?null:M7(e)?e:d1(e.parentElement);var Uu=e=>({x:e.scrollLeft,y:e.scrollTop});const h1=e=>e?window.getComputedStyle(e).position==="fixed"?!0:h1(e.parentElement):!1;var O7=e=>{const t=d1(e),n=h1(e);return{closestScrollable:t,isFixedOnPage:n}},R7=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:l,closest:u})=>{const h=(()=>{if(!u)return null;const{scrollSize:g,client:v}=u,N=qm({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:v,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:N,diff:{value:Xn,displacement:Xn}}}})(),f=i==="vertical"?k0:km,m=la({page:l,withPlaceholder:null,axis:f,frame:h});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:f,isEnabled:t,client:a,page:l,frame:h,subject:m}};const V7=(e,t)=>{const n=Cp(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,l=i+t.scrollWidth,h=Tp({top:r,right:l,bottom:a,left:i},n.border);return Xx({borderBox:h,margin:n.margin,border:n.border,padding:n.padding})};var z7=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:l,shouldClipSubject:u})=>{const h=n.closestScrollable,f=V7(e,h),m=dl(f,r),x=(()=>{if(!h)return null;const v=Cp(h),N={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:v,page:dl(v,r),scroll:Uu(h),scrollSize:N,shouldClipSubject:u}})();return R7({descriptor:t,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:i,client:f,page:m,closest:x})};const P7={passive:!1},B7={passive:!0};var Cf=e=>e.shouldPublishImmediately?P7:B7;const qo=e=>e&&e.env.closestScrollable||null;function L7(e){const t=P.useRef(null),n=Il(Yl),r=V0("droppable"),{registry:i,marshal:a}=n,l=Qm(e),u=Lt(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),h=P.useRef(u),f=Lt(()=>Yn((M,A)=>{t.current||ze();const I={x:M,y:A};a.updateDroppableScroll(u.id,I)}),[u.id,a]),m=lt(()=>{const M=t.current;return!M||!M.env.closestScrollable?Xn:Uu(M.env.closestScrollable)},[]),x=lt(()=>{const M=m();f(M.x,M.y)},[m,f]),g=Lt(()=>Ka(x),[x]),v=lt(()=>{const M=t.current,A=qo(M);if(M&&A||ze(),M.scrollOptions.shouldPublishImmediately){x();return}g()},[g,x]),N=lt((M,A)=>{t.current&&ze();const I=l.current,W=I.getDroppableRef();W||ze();const J=O7(W),le={ref:W,descriptor:u,env:J,scrollOptions:A};t.current=le;const ce=z7({ref:W,descriptor:u,env:J,windowScroll:M,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),F=J.closestScrollable;return F&&(F.setAttribute(bf.contextId,n.contextId),F.addEventListener("scroll",v,Cf(le.scrollOptions))),ce},[n.contextId,u,v,l]),D=lt(()=>{const M=t.current,A=qo(M);return M&&A||ze(),Uu(A)},[]),j=lt(()=>{const M=t.current;M||ze();const A=qo(M);t.current=null,A&&(g.cancel(),A.removeAttribute(bf.contextId),A.removeEventListener("scroll",v,Cf(M.scrollOptions)))},[v,g]),S=lt(M=>{const A=t.current;A||ze();const I=qo(A);I||ze(),I.scrollTop+=M.y,I.scrollLeft+=M.x},[]),T=Lt(()=>({getDimensionAndWatchScroll:N,getScrollWhileDragging:D,dragStopped:j,scroll:S}),[j,N,D,S]),E=Lt(()=>({uniqueId:r,descriptor:u,callbacks:T}),[T,u,r]);Er(()=>(h.current=E.descriptor,i.droppable.register(E),()=>{t.current&&j(),i.droppable.unregister(E)}),[T,u,j,E,a,i.droppable]),Er(()=>{t.current&&a.updateDroppableIsEnabled(h.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Er(()=>{t.current&&a.updateDroppableIsCombineEnabled(h.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function eu(){}const Tf={width:0,height:0,margin:Yv},F7=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Tf:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},$7=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=F7({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Wa.placeholder:null}},G7=e=>{const t=P.useRef(null),n=lt(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:l}=e,[u,h]=P.useState(e.animate==="open");P.useEffect(()=>u?r!=="open"?(n(),h(!1),eu):t.current?eu:(t.current=setTimeout(()=>{t.current=null,h(!1)}),n):eu,[r,u,n]);const f=lt(x=>{x.propertyName==="height"&&(i(),r==="close"&&a())},[r,a,i]),m=$7({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return St.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":l,onTransitionEnd:f,ref:e.innerRef})};var q7=St.memo(G7);class H7 extends St.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const W7=e=>{const t=P.useContext(Yl);t||ze();const{contextId:n,isMovementAllowed:r}=t,i=P.useRef(null),a=P.useRef(null),{children:l,droppableId:u,type:h,mode:f,direction:m,ignoreContainerClipping:x,isDropDisabled:g,isCombineEnabled:v,snapshot:N,useClone:D,updateViewportMaxScroll:j,getContainerForClone:S}=e,T=lt(()=>i.current,[]),E=lt((F=null)=>{i.current=F},[]);lt(()=>a.current,[]);const M=lt((F=null)=>{a.current=F},[]),A=lt(()=>{r()&&j({maxScroll:Wm()})},[r,j]);L7({droppableId:u,type:h,mode:f,direction:m,isDropDisabled:g,isCombineEnabled:v,ignoreContainerClipping:x,getDroppableRef:T});const I=Lt(()=>St.createElement(H7,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:Q,animate:de})=>St.createElement(q7,{placeholder:Q,onClose:F,innerRef:M,animate:de,contextId:n,onTransitionEnd:A})),[n,A,e.placeholder,e.shouldAnimatePlaceholder,M]),W=Lt(()=>({innerRef:E,placeholder:I,droppableProps:{"data-rfd-droppable-id":u,"data-rfd-droppable-context-id":n}}),[n,u,I,E]),J=D?D.dragging.draggableId:null,le=Lt(()=>({droppableId:u,type:h,isUsingCloneFor:J}),[u,J,h]);function ce(){if(!D)return null;const{dragging:F,render:Q}=D,de=St.createElement(c1,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(q,pe)=>Q(q,pe,F));return ly.createPortal(de,S())}return St.createElement(P0.Provider,{value:le},l(W,N),ce())};function U7(){return document.body||ze(),document.body}const If={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:U7},f1=e=>{let t={...e},n;for(n in If)e[n]===void 0&&(t={...t,[n]:If[n]});return t},tu=(e,t)=>e===t.droppable.type,Af=(e,t)=>t.draggables[e.draggable.id],Z7=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Yn(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=Yn((a,l,u,h,f,m)=>{const x=f.descriptor.id;if(f.descriptor.droppableId===a){const N=m?{render:m,dragging:n(f.descriptor)}:null,D={isDraggingOver:u,draggingOverWith:u?x:null,draggingFromThisWith:x,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:N}}if(!l)return t;if(!h)return e;const v={isDraggingOver:u,draggingOverWith:x,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}});return(a,l)=>{const u=f1(l),h=u.droppableId,f=u.type,m=!u.isDropDisabled,x=u.renderClone;if(so(a)){const g=a.critical;if(!tu(f,g))return t;const v=Af(g,a.dimensions),N=_r(a.impact)===h;return r(h,m,N,N,v,x)}if(a.phase==="DROP_ANIMATING"){const g=a.completed;if(!tu(f,g.critical))return t;const v=Af(g.critical,a.dimensions);return r(h,m,o1(g.result)===h,_r(g.impact)===h,v,x)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const g=a.completed;if(!tu(f,g.critical))return t;const v=_r(g.impact)===h,N=!!(g.impact.at&&g.impact.at.type==="COMBINE"),D=g.critical.droppable.id===h;return v?N?e:t:D?e:t}return t}},Y7={updateViewportMaxScroll:o5},Kl=fm(Z7,Y7,(e,t,n)=>({...f1(n),...e,...t}),{context:R0,areStatePropsEqual:a1})(W7);var J7=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],p1=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],X7="-----------------------------------------------------------------------------------------------------------------------------------------------------",m1="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",nu={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ru="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",K7={5:ru,"5module":ru+" export import",6:ru+" const class extends export import super"},Q7=/^in(stanceof)?$/,e8=new RegExp("["+m1+"]"),t8=new RegExp("["+m1+X7+"]");function Zu(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function gs(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&e8.test(String.fromCharCode(e)):t===!1?!1:Zu(e,p1)}function oi(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&t8.test(String.fromCharCode(e)):t===!1?!1:Zu(e,p1)||Zu(e,J7)}var Ht=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Lr(e,t){return new Ht(e,{beforeExpr:!0,binop:t})}var Fr={beforeExpr:!0},vr={startsExpr:!0},B0={};function Rt(e,t){return t===void 0&&(t={}),t.keyword=e,B0[e]=new Ht(e,t)}var R={num:new Ht("num",vr),regexp:new Ht("regexp",vr),string:new Ht("string",vr),name:new Ht("name",vr),privateId:new Ht("privateId",vr),eof:new Ht("eof"),bracketL:new Ht("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ht("]"),braceL:new Ht("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ht("}"),parenL:new Ht("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ht(")"),comma:new Ht(",",Fr),semi:new Ht(";",Fr),colon:new Ht(":",Fr),dot:new Ht("."),question:new Ht("?",Fr),questionDot:new Ht("?."),arrow:new Ht("=>",Fr),template:new Ht("template"),invalidTemplate:new Ht("invalidTemplate"),ellipsis:new Ht("...",Fr),backQuote:new Ht("`",vr),dollarBraceL:new Ht("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ht("=",{beforeExpr:!0,isAssign:!0}),assign:new Ht("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ht("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ht("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Lr("||",1),logicalAND:Lr("&&",2),bitwiseOR:Lr("|",3),bitwiseXOR:Lr("^",4),bitwiseAND:Lr("&",5),equality:Lr("==/!=/===/!==",6),relational:Lr("</>/<=/>=",7),bitShift:Lr("<</>>/>>>",8),plusMin:new Ht("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Lr("%",10),star:Lr("*",10),slash:Lr("/",10),starstar:new Ht("**",{beforeExpr:!0}),coalesce:Lr("??",1),_break:Rt("break"),_case:Rt("case",Fr),_catch:Rt("catch"),_continue:Rt("continue"),_debugger:Rt("debugger"),_default:Rt("default",Fr),_do:Rt("do",{isLoop:!0,beforeExpr:!0}),_else:Rt("else",Fr),_finally:Rt("finally"),_for:Rt("for",{isLoop:!0}),_function:Rt("function",vr),_if:Rt("if"),_return:Rt("return",Fr),_switch:Rt("switch"),_throw:Rt("throw",Fr),_try:Rt("try"),_var:Rt("var"),_const:Rt("const"),_while:Rt("while",{isLoop:!0}),_with:Rt("with"),_new:Rt("new",{beforeExpr:!0,startsExpr:!0}),_this:Rt("this",vr),_super:Rt("super",vr),_class:Rt("class",vr),_extends:Rt("extends",Fr),_export:Rt("export"),_import:Rt("import",vr),_null:Rt("null",vr),_true:Rt("true",vr),_false:Rt("false",vr),_in:Rt("in",{beforeExpr:!0,binop:7}),_instanceof:Rt("instanceof",{beforeExpr:!0,binop:7}),_typeof:Rt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Rt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Rt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},jr=/\r\n?|\n|\u2028|\u2029/,n8=new RegExp(jr.source,"g");function va(e){return e===10||e===13||e===8232||e===8233}function g1(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(va(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var x1=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,rr=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,y1=Object.prototype,r8=y1.hasOwnProperty,s8=y1.toString,wa=Object.hasOwn||function(e,t){return r8.call(e,t)},Nf=Array.isArray||function(e){return s8.call(e)==="[object Array]"},_f=Object.create(null);function Js(e){return _f[e]||(_f[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Rs(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var i8=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ao=function(t,n){this.line=t,this.column=n};ao.prototype.offset=function(t){return new ao(this.line,this.column+t)};var Ql=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function b1(e,t){for(var n=1,r=0;;){var i=g1(e,r,t);if(i<0)return new ao(n,t-r);++n,r=i}}var Yu={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ef=!1;function a8(e){var t={};for(var n in Yu)t[n]=e&&wa(e,n)?e[n]:Yu[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Ef&&typeof console=="object"&&console.warn&&(Ef=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Nf(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Nf(t.onComment)&&(t.onComment=o8(t,t.onComment)),t}function o8(e,t){return function(n,r,i,a,l,u){var h={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(h.loc=new Ql(this,l,u)),e.ranges&&(h.range=[i,a]),t.push(h)}}var oo=1,Sa=2,L0=4,v1=8,F0=16,w1=32,ec=64,S1=128,Mi=256,yo=512,tc=oo|Sa|Mi;function $0(e,t){return Sa|(e?L0:0)|(t?v1:0)}var Al=0,G0=1,Ps=2,k1=3,j1=4,C1=5,Un=function(t,n,r){this.options=t=a8(t),this.sourceFile=t.sourceFile,this.keywords=Js(K7[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=nu[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Js(i);var a=(i?i+" ":"")+nu.strict;this.reservedWordsStrict=Js(a),this.reservedWordsStrictBind=Js(a+" "+nu.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(jr).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=R.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(oo),this.regexpState=null,this.privateNameStack=[]},ys={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Un.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ys.inFunction.get=function(){return(this.currentVarScope().flags&Sa)>0};ys.inGenerator.get=function(){return(this.currentVarScope().flags&v1)>0};ys.inAsync.get=function(){return(this.currentVarScope().flags&L0)>0};ys.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],n=t.flags;if(n&(Mi|yo))return!1;if(n&Sa)return(n&L0)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ys.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags;return(t&ec)>0||this.options.allowSuperOutsideMethod};ys.allowDirectSuper.get=function(){return(this.currentThisScope().flags&S1)>0};ys.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ys.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],n=t.flags;if(n&(Mi|yo)||n&Sa&&!(n&F0))return!0}return!1};ys.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Mi)>0};Un.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Un.parse=function(t,n){return new this(n,t).parse()};Un.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Un.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Un.prototype,ys);var gr=Un.prototype,l8=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;gr.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){rr.lastIndex=e,e+=rr.exec(this.input)[0].length;var t=l8.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){rr.lastIndex=e+t[0].length;var n=rr.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||jr.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,rr.lastIndex=e,e+=rr.exec(this.input)[0].length,this.input[e]===";"&&e++}};gr.eat=function(e){return this.type===e?(this.next(),!0):!1};gr.isContextual=function(e){return this.type===R.name&&this.value===e&&!this.containsEsc};gr.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};gr.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};gr.canInsertSemicolon=function(){return this.type===R.eof||this.type===R.braceR||jr.test(this.input.slice(this.lastTokEnd,this.start))};gr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};gr.semicolon=function(){!this.eat(R.semi)&&!this.insertSemicolon()&&this.unexpected()};gr.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};gr.expect=function(e){this.eat(e)||this.unexpected()};gr.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var nc=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};gr.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};gr.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};gr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};gr.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var st=Un.prototype;st.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==R.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var q0={kind:"loop"},c8={kind:"switch"};st.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;rr.lastIndex=this.pos;var t=rr.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(gs(r,!0)){for(var i=n+1;oi(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var a=this.input.slice(n,i);if(!Q7.test(a))return!0}return!1};st.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;rr.lastIndex=this.pos;var e=rr.exec(this.input),t=this.pos+e[0].length,n;return!jr.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(oi(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};st.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;rr.lastIndex=this.pos;var n=rr.exec(this.input),r=this.pos+n[0].length;if(jr.test(this.input.slice(this.pos,r)))return!1;if(e){var i=r+5,a;if(this.input.slice(r,i)!=="using"||i===this.input.length||oi(a=this.input.charCodeAt(i))||a>55295&&a<56320)return!1;rr.lastIndex=i;var l=rr.exec(this.input);if(l&&jr.test(this.input.slice(i,i+l[0].length)))return!1}if(t){var u=r+2,h;if(this.input.slice(r,u)==="of"&&(u===this.input.length||!oi(h=this.input.charCodeAt(u))&&!(h>55295&&h<56320)))return!1}var f=this.input.charCodeAt(r);return gs(f,!0)||f===92};st.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)};st.isUsing=function(e){return this.isUsingKeyword(!1,e)};st.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),a;switch(this.isLet(e)&&(r=R._var,a="let"),r){case R._break:case R._continue:return this.parseBreakContinueStatement(i,r.keyword);case R._debugger:return this.parseDebuggerStatement(i);case R._do:return this.parseDoStatement(i);case R._for:return this.parseForStatement(i);case R._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case R._class:return e&&this.unexpected(),this.parseClass(i,!0);case R._if:return this.parseIfStatement(i);case R._return:return this.parseReturnStatement(i);case R._switch:return this.parseSwitchStatement(i);case R._throw:return this.parseThrowStatement(i);case R._try:return this.parseTryStatement(i);case R._const:case R._var:return a=a||this.value,e&&a!=="var"&&this.unexpected(),this.parseVarStatement(i,a);case R._while:return this.parseWhileStatement(i);case R._with:return this.parseWithStatement(i);case R.braceL:return this.parseBlock(!0,i);case R.semi:return this.parseEmptyStatement(i);case R._export:case R._import:if(this.options.ecmaVersion>10&&r===R._import){rr.lastIndex=this.pos;var l=rr.exec(this.input),u=this.pos+l[0].length,h=this.input.charCodeAt(u);if(h===40||h===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===R._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var f=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(f)return t&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),f==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(i,!1,f),this.semicolon(),this.finishNode(i,"VariableDeclaration");var m=this.value,x=this.parseExpression();return r===R.name&&x.type==="Identifier"&&this.eat(R.colon)?this.parseLabeledStatement(i,m,x,e):this.parseExpressionStatement(i,x)}};st.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(R.semi)||this.insertSemicolon()?e.label=null:this.type!==R.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};st.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};st.parseDoStatement=function(e){return this.next(),this.labels.push(q0),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(R._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(R.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};st.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(q0),this.enterScope(0),this.expect(R.parenL),this.type===R.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===R._var||this.type===R._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),this.parseForAfterInit(e,r,t)}var a=this.isContextual("let"),l=!1,u=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(u){var h=this.startNode();return this.next(),u==="await using"&&this.next(),this.parseVar(h,!0,u),this.finishNode(h,"VariableDeclaration"),this.parseForAfterInit(e,h,t)}var f=this.containsEsc,m=new nc,x=this.start,g=t>-1?this.parseExprSubscripts(m,"await"):this.parseExpression(!0,m);return this.type===R._in||(l=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===R._in&&this.unexpected(t),e.await=!0):l&&this.options.ecmaVersion>=8&&(g.start===x&&!f&&g.type==="Identifier"&&g.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),a&&l&&this.raise(g.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(g,!1,m),this.checkLValPattern(g),this.parseForIn(e,g)):(this.checkExpressionErrors(m,!0),t>-1&&this.unexpected(t),this.parseFor(e,g))};st.parseForAfterInit=function(e,t,n){return(this.type===R._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&t.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===R._in?n>-1&&this.unexpected(n):e.await=n>-1),this.parseForIn(e,t)):(n>-1&&this.unexpected(n),this.parseFor(e,t))};st.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ua|(n?0:Ju),!1,t)};st.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(R._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};st.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(R.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};st.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(R.braceL),this.labels.push(c8),this.enterScope(0);for(var t,n=!1;this.type!==R.braceR;)if(this.type===R._case||this.type===R._default){var r=this.type===R._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(R.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};st.parseThrowStatement=function(e){return this.next(),jr.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var u8=[];st.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?w1:0),this.checkLValPattern(e,t?j1:Ps),this.expect(R.parenR),e};st.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===R._catch){var t=this.startNode();this.next(),this.eat(R.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(R._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};st.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};st.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(q0),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};st.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};st.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};st.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){var l=a[i];l.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var u=this.type.isLoop?"loop":this.type===R._switch?"switch":null,h=this.labels.length-1;h>=0;h--){var f=this.labels[h];if(f.statementStart===e.start)f.statementStart=this.start,f.kind=u;else break}return this.labels.push({name:t,kind:u,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};st.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};st.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(R.braceL),e&&this.enterScope(0);this.type!==R.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};st.parseFor=function(e,t){return e.init=t,this.expect(R.semi),e.test=this.type===R.semi?null:this.parseExpression(),this.expect(R.semi),e.update=this.type===R.parenR?null:this.parseExpression(),this.expect(R.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};st.parseForIn=function(e,t){var n=this.type===R._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(R.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};st.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(R.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===R._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&(n==="using"||n==="await using")&&this.options.ecmaVersion>=17&&this.type!==R._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+n+" declaration"):!r&&i.id.type!=="Identifier"&&!(t&&(this.type===R._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(R.comma))break}return e};st.parseVarId=function(e,t){e.id=t==="using"||t==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?G0:Ps,!1)};var Ua=1,Ju=2,T1=4;st.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===R.star&&t&Ju&&this.unexpected(),e.generator=this.eat(R.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ua&&(e.id=t&T1&&this.type!==R.name?null:this.parseIdent(),e.id&&!(t&Ju)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?G0:Ps:k1));var a=this.yieldPos,l=this.awaitPos,u=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope($0(e.async,e.generator)),t&Ua||(e.id=this.type===R.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=a,this.awaitPos=l,this.awaitIdentPos=u,this.finishNode(e,t&Ua?"FunctionDeclaration":"FunctionExpression")};st.parseFunctionParams=function(e){this.expect(R.parenL),e.params=this.parseBindingList(R.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};st.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),a=!1;for(i.body=[],this.expect(R.braceL);this.type!==R.braceR;){var l=this.parseClassElement(e.superClass!==null);l&&(i.body.push(l),l.type==="MethodDefinition"&&l.kind==="constructor"?(a&&this.raiseRecoverable(l.start,"Duplicate constructor in the same class"),a=!0):l.key&&l.key.type==="PrivateIdentifier"&&d8(r,l)&&this.raiseRecoverable(l.key.start,"Identifier '#"+l.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};st.parseClassElement=function(e){if(this.eat(R.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,a=!1,l="method",u=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(R.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===R.star?u=!0:r="static"}if(n.static=u,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===R.star)&&!this.canInsertSemicolon()?a=!0:r="async"),!r&&(t>=9||!a)&&this.eat(R.star)&&(i=!0),!r&&!a&&!i){var h=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?l=h:r=h)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===R.parenL||l!=="method"||i||a){var f=!n.static&&Nl(n,"constructor"),m=f&&e;f&&l!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=f?"constructor":l,this.parseClassMethod(n,i,a,m)}else this.parseClassField(n);return n};st.isClassElementNameStart=function(){return this.type===R.name||this.type===R.privateId||this.type===R.num||this.type===R.string||this.type===R.bracketL||this.type.keyword};st.parseClassElementName=function(e){this.type===R.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};st.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&Nl(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var a=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&a.params.length!==0&&this.raiseRecoverable(a.start,"getter should have no params"),e.kind==="set"&&a.params.length!==1&&this.raiseRecoverable(a.start,"setter should have exactly one param"),e.kind==="set"&&a.params[0].type==="RestElement"&&this.raiseRecoverable(a.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};st.parseClassField=function(e){return Nl(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Nl(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(R.eq)?(this.enterScope(yo|ec),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")};st.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Mi|ec);this.type!==R.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};st.parseClassId=function(e,t){this.type===R.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Ps,!1)):(t===!0&&this.unexpected(),e.id=null)};st.parseClassSuper=function(e){e.superClass=this.eat(R._extends)?this.parseExprSubscripts(null,!1):null};st.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};st.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],a=0;a<n.length;++a){var l=n[a];wa(t,l.name)||(i?i.used.push(l):this.raiseRecoverable(l.start,"Private field '#"+l.name+"' must be declared in an enclosing class"))}};function d8(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function Nl(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}st.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==R.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};st.parseExport=function(e,t){if(this.next(),this.eat(R.star))return this.parseExportAllDeclaration(e,t);if(this.eat(R._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==R.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};st.parseExportDeclaration=function(e){return this.parseStatement(null)};st.parseExportDefaultDeclaration=function(){var e;if(this.type===R._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Ua|T1,!1,e)}else if(this.type===R._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};st.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),wa(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};st.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if(n==="ArrayPattern")for(var l=0,u=t.elements;l<u.length;l+=1){var h=u[l];h&&this.checkPatternExport(e,h)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};st.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};st.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};st.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};st.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(R.braceL);!this.eat(R.braceR);){if(n)n=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;t.push(this.parseExportSpecifier(e))}return t};st.parseImport=function(e){return this.next(),this.type===R.string?(e.specifiers=u8,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===R.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};st.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Ps),this.finishNode(e,"ImportSpecifier")};st.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Ps),this.finishNode(e,"ImportDefaultSpecifier")};st.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Ps),this.finishNode(e,"ImportNamespaceSpecifier")};st.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===R.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(R.comma)))return e;if(this.type===R.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(R.braceL);!this.eat(R.braceR);){if(t)t=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;e.push(this.parseImportSpecifier())}return e};st.parseWithClause=function(){var e=[];if(!this.eat(R._with))return e;this.expect(R.braceL);for(var t={},n=!0;!this.eat(R.braceR);){if(n)n=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;var r=this.parseImportAttribute(),i=r.key.type==="Identifier"?r.key.name:r.key.value;wa(t,i)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+i+"'"),t[i]=!0,e.push(r)}return e};st.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===R.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(R.colon),this.type!==R.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};st.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===R.string){var e=this.parseLiteral(this.value);return i8.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};st.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};st.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Xr=Un.prototype;Xr.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),a.type==="RestElement"&&(a.argument.type==="ArrayPattern"||a.argument.type==="ObjectPattern")&&this.raise(a.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Xr.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];this.options.ecmaVersion===6&&t&&a&&a.type==="RestElement"&&a.argument.type!=="Identifier"&&this.unexpected(a.argument.start)}return e};Xr.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Xr.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==R.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Xr.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case R.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(R.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case R.braceL:return this.parseObj(!0)}return this.parseIdent()};Xr.parseBindingList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);)if(a?a=!1:this.expect(R.comma),t&&this.type===R.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===R.ellipsis){var l=this.parseRestBinding();this.parseBindingListItem(l),i.push(l),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Xr.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Xr.parseBindingListItem=function(e){return e};Xr.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(R.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Xr.checkLValSimple=function(e,t,n){t===void 0&&(t=Al);var r=t!==Al;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Ps&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(wa(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==C1&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Xr.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Al),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,t,n)}break;case"ArrayPattern":for(var l=0,u=e.elements;l<u.length;l+=1){var h=u[l];h&&this.checkLValInnerPattern(h,t,n)}break;default:this.checkLValSimple(e,t,n)}};Xr.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Al),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Kr=function(t,n,r,i,a){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!a},Cn={b_stat:new Kr("{",!1),b_expr:new Kr("{",!0),b_tmpl:new Kr("${",!1),p_stat:new Kr("(",!1),p_expr:new Kr("(",!0),q_tmpl:new Kr("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Kr("function",!1),f_expr:new Kr("function",!0),f_expr_gen:new Kr("function",!0,!1,null,!0),f_gen:new Kr("function",!1,!1,null,!0)},ka=Un.prototype;ka.initialContext=function(){return[Cn.b_stat]};ka.curContext=function(){return this.context[this.context.length-1]};ka.braceIsBlock=function(e){var t=this.curContext();return t===Cn.f_expr||t===Cn.f_stat?!0:e===R.colon&&(t===Cn.b_stat||t===Cn.b_expr)?!t.isExpr:e===R._return||e===R.name&&this.exprAllowed?jr.test(this.input.slice(this.lastTokEnd,this.start)):e===R._else||e===R.semi||e===R.eof||e===R.parenR||e===R.arrow?!0:e===R.braceL?t===Cn.b_stat:e===R._var||e===R._const||e===R.name?!1:!this.exprAllowed};ka.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ka.updateContext=function(e){var t,n=this.type;n.keyword&&e===R.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ka.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};R.parenR.updateContext=R.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Cn.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};R.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Cn.b_stat:Cn.b_expr),this.exprAllowed=!0};R.dollarBraceL.updateContext=function(){this.context.push(Cn.b_tmpl),this.exprAllowed=!0};R.parenL.updateContext=function(e){var t=e===R._if||e===R._for||e===R._with||e===R._while;this.context.push(t?Cn.p_stat:Cn.p_expr),this.exprAllowed=!0};R.incDec.updateContext=function(){};R._function.updateContext=R._class.updateContext=function(e){e.beforeExpr&&e!==R._else&&!(e===R.semi&&this.curContext()!==Cn.p_stat)&&!(e===R._return&&jr.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===R.colon||e===R.braceL)&&this.curContext()===Cn.b_stat)?this.context.push(Cn.f_expr):this.context.push(Cn.f_stat),this.exprAllowed=!1};R.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};R.backQuote.updateContext=function(){this.curContext()===Cn.q_tmpl?this.context.pop():this.context.push(Cn.q_tmpl),this.exprAllowed=!1};R.star.updateContext=function(e){if(e===R._function){var t=this.context.length-1;this.context[t]===Cn.f_expr?this.context[t]=Cn.f_expr_gen:this.context[t]=Cn.f_gen}this.exprAllowed=!0};R.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==R.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var yt=Un.prototype;yt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&a==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var l=t[i];if(l){var u;a==="init"?u=this.strict&&l.init||l.get||l.set:u=l.init||l[a],u&&this.raiseRecoverable(r.start,"Redefinition of property")}else l=t[i]={init:!1,get:!1,set:!1};l[a]=!0}};yt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===R.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(R.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i};yt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1,l=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,l=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new nc,r=!0);var u=this.start,h=this.startLoc;(this.type===R.parenL||this.type===R.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var f=this.parseMaybeConditional(e,t);if(n&&(f=n.call(this,f,u,h)),this.type.isAssign){var m=this.startNodeAt(u,h);return m.operator=this.value,this.type===R.eq&&(f=this.toAssignable(f,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=f.start&&(t.shorthandAssign=-1),this.type===R.eq?this.checkLValPattern(f):this.checkLValSimple(f),m.left=f,this.next(),m.right=this.parseMaybeAssign(e),l>-1&&(t.doubleProto=l),this.finishNode(m,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),f};yt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(R.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(R.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i};yt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};yt.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(a!=null&&(!i||this.type!==R._in)&&a>r){var l=this.type===R.logicalOR||this.type===R.logicalAND,u=this.type===R.coalesce;u&&(a=R.logicalAND.binop);var h=this.value;this.next();var f=this.start,m=this.startLoc,x=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),f,m,a,i),g=this.buildBinary(t,n,e,x,h,l||u);return(l&&this.type===R.coalesce||u&&(this.type===R.logicalOR||this.type===R.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(g,t,n,r,i)}return e};yt.buildBinary=function(e,t,n,r,i,a){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var l=this.startNodeAt(e,t);return l.left=n,l.operator=i,l.right=r,this.finishNode(l,a?"LogicalExpression":"BinaryExpression")};yt.parseMaybeUnary=function(e,t,n,r){var i=this.start,a=this.startLoc,l;if(this.isContextual("await")&&this.canAwait)l=this.parseAwait(r),t=!0;else if(this.type.prefix){var u=this.startNode(),h=this.type===R.incDec;u.operator=this.value,u.prefix=!0,this.next(),u.argument=this.parseMaybeUnary(null,!0,h,r),this.checkExpressionErrors(e,!0),h?this.checkLValSimple(u.argument):this.strict&&u.operator==="delete"&&I1(u.argument)?this.raiseRecoverable(u.start,"Deleting local variable in strict mode"):u.operator==="delete"&&Xu(u.argument)?this.raiseRecoverable(u.start,"Private fields can not be deleted"):t=!0,l=this.finishNode(u,h?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===R.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),l=this.parsePrivateIdent(),this.type!==R._in&&this.unexpected();else{if(l=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return l;for(;this.type.postfix&&!this.canInsertSemicolon();){var f=this.startNodeAt(i,a);f.operator=this.value,f.prefix=!1,f.argument=l,this.checkLValSimple(l),this.next(),l=this.finishNode(f,"UpdateExpression")}}if(!n&&this.eat(R.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,a,l,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return l};function I1(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&I1(e.expression)}function Xu(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Xu(e.expression)||e.type==="ParenthesizedExpression"&&Xu(e.expression)}yt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var a=this.parseSubscripts(i,n,r,!1,t);return e&&a.type==="MemberExpression"&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1),e.trailingComma>=a.start&&(e.trailingComma=-1)),a};yt.parseSubscripts=function(e,t,n,r,i){for(var a=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,l=!1;;){var u=this.parseSubscript(e,t,n,r,a,l,i);if(u.optional&&(l=!0),u===e||u.type==="ArrowFunctionExpression"){if(l){var h=this.startNodeAt(t,n);h.expression=u,u=this.finishNode(h,"ChainExpression")}return u}e=u}};yt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(R.arrow)};yt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};yt.parseSubscript=function(e,t,n,r,i,a,l){var u=this.options.ecmaVersion>=11,h=u&&this.eat(R.questionDot);r&&h&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var f=this.eat(R.bracketL);if(f||h&&this.type!==R.parenL&&this.type!==R.backQuote||this.eat(R.dot)){var m=this.startNodeAt(t,n);m.object=e,f?(m.property=this.parseExpression(),this.expect(R.bracketR)):this.type===R.privateId&&e.type!=="Super"?m.property=this.parsePrivateIdent():m.property=this.parseIdent(this.options.allowReserved!=="never"),m.computed=!!f,u&&(m.optional=h),e=this.finishNode(m,"MemberExpression")}else if(!r&&this.eat(R.parenL)){var x=new nc,g=this.yieldPos,v=this.awaitPos,N=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var D=this.parseExprList(R.parenR,this.options.ecmaVersion>=8,!1,x);if(i&&!h&&this.shouldParseAsyncArrow())return this.checkPatternErrors(x,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=g,this.awaitPos=v,this.awaitIdentPos=N,this.parseSubscriptAsyncArrow(t,n,D,l);this.checkExpressionErrors(x,!0),this.yieldPos=g||this.yieldPos,this.awaitPos=v||this.awaitPos,this.awaitIdentPos=N||this.awaitIdentPos;var j=this.startNodeAt(t,n);j.callee=e,j.arguments=D,u&&(j.optional=h),e=this.finishNode(j,"CallExpression")}else if(this.type===R.backQuote){(h||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var S=this.startNodeAt(t,n);S.tag=e,S.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(S,"TaggedTemplateExpression")}return e};yt.parseExprAtom=function(e,t,n){this.type===R.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case R._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===R.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==R.dot&&this.type!==R.bracketL&&this.type!==R.parenL&&this.unexpected(),this.finishNode(r,"Super");case R._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case R.name:var a=this.start,l=this.startLoc,u=this.containsEsc,h=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!u&&h.name==="async"&&!this.canInsertSemicolon()&&this.eat(R._function))return this.overrideContext(Cn.f_expr),this.parseFunction(this.startNodeAt(a,l),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(R.arrow))return this.parseArrowExpression(this.startNodeAt(a,l),[h],!1,t);if(this.options.ecmaVersion>=8&&h.name==="async"&&this.type===R.name&&!u&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return h=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(R.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(a,l),[h],!0,t)}return h;case R.regexp:var f=this.value;return r=this.parseLiteral(f.value),r.regex={pattern:f.pattern,flags:f.flags},r;case R.num:case R.string:return this.parseLiteral(this.value);case R._null:case R._true:case R._false:return r=this.startNode(),r.value=this.type===R._null?null:this.type===R._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case R.parenL:var m=this.start,x=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(x)&&(e.parenthesizedAssign=m),e.parenthesizedBind<0&&(e.parenthesizedBind=m)),x;case R.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(R.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case R.braceL:return this.overrideContext(Cn.b_expr),this.parseObj(!1,e);case R._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case R._class:return this.parseClass(this.startNode(),!1);case R._new:return this.parseNew();case R.backQuote:return this.parseTemplate();case R._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};yt.parseExprAtomDefault=function(){this.unexpected()};yt.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===R.parenL&&!e)return this.parseDynamicImport(t);if(this.type===R.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};yt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(R.parenR)?e.options=null:(this.expect(R.comma),this.afterTrailingComma(R.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(R.parenR)||(this.expect(R.comma),this.afterTrailingComma(R.parenR)||this.unexpected())));else if(!this.eat(R.parenR)){var t=this.start;this.eat(R.comma)&&this.eat(R.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};yt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};yt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.value!=null?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};yt.parseParenExpression=function(){this.expect(R.parenL);var e=this.parseExpression();return this.expect(R.parenR),e};yt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};yt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var l=this.start,u=this.startLoc,h=[],f=!0,m=!1,x=new nc,g=this.yieldPos,v=this.awaitPos,N;for(this.yieldPos=0,this.awaitPos=0;this.type!==R.parenR;)if(f?f=!1:this.expect(R.comma),a&&this.afterTrailingComma(R.parenR,!0)){m=!0;break}else if(this.type===R.ellipsis){N=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else h.push(this.parseMaybeAssign(!1,x,this.parseParenItem));var D=this.lastTokEnd,j=this.lastTokEndLoc;if(this.expect(R.parenR),e&&this.shouldParseArrow(h)&&this.eat(R.arrow))return this.checkPatternErrors(x,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=g,this.awaitPos=v,this.parseParenArrowList(n,r,h,t);(!h.length||m)&&this.unexpected(this.lastTokStart),N&&this.unexpected(N),this.checkExpressionErrors(x,!0),this.yieldPos=g||this.yieldPos,this.awaitPos=v||this.awaitPos,h.length>1?(i=this.startNodeAt(l,u),i.expressions=h,this.finishNodeAt(i,"SequenceExpression",D,j)):i=h[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var S=this.startNodeAt(n,r);return S.expression=i,this.finishNode(S,"ParenthesizedExpression")}else return i};yt.parseParenItem=function(e){return e};yt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var h8=[];yt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===R.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(R.parenL)?e.arguments=this.parseExprList(R.parenR,this.options.ecmaVersion>=8,!1):e.arguments=h8,this.finishNode(e,"NewExpression")};yt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===R.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===R.backQuote,this.finishNode(n,"TemplateElement")};yt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===R.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(R.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(R.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};yt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===R.name||this.type===R.num||this.type===R.string||this.type===R.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===R.star)&&!jr.test(this.input.slice(this.lastTokEnd,this.start))};yt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(R.braceR);){if(r)r=!1;else if(this.expect(R.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(R.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};yt.parseProperty=function(e,t){var n=this.startNode(),r,i,a,l;if(this.options.ecmaVersion>=9&&this.eat(R.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===R.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(a=this.start,l=this.startLoc),e||(r=this.eat(R.star)));var u=this.containsEsc;return this.parsePropertyName(n),!e&&!u&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(R.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,a,l,t,u),this.finishNode(n,"Property")};yt.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var n=e.kind==="get"?0:1;if(e.value.params.length!==n){var r=e.value.start;e.kind==="get"?this.raiseRecoverable(r,"getter should have no params"):this.raiseRecoverable(r,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};yt.parsePropertyValue=function(e,t,n,r,i,a,l,u){(n||r)&&this.type===R.colon&&this.unexpected(),this.eat(R.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,l),e.kind="init"):this.options.ecmaVersion>=6&&this.type===R.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(n,r),e.kind="init"):!t&&!u&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==R.comma&&this.type!==R.braceR&&this.type!==R.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),t?e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key)):this.type===R.eq&&l?(l.shorthandAssign<0&&(l.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()};yt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(R.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(R.bracketR),e.key;e.computed=!1}return e.key=this.type===R.num||this.type===R.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};yt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};yt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,l=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope($0(t,r.generator)|ec|(n?S1:0)),this.expect(R.parenL),r.params=this.parseBindingList(R.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=l,this.finishNode(r,"FunctionExpression")};yt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,a=this.awaitPos,l=this.awaitIdentPos;return this.enterScope($0(n,!1)|F0),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=l,this.finishNode(e,"ArrowFunctionExpression")};yt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==R.braceL,a=this.strict,l=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var u=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!a||u)&&(l=this.strictDirective(this.end),l&&u&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var h=this.labels;this.labels=[],l&&(this.strict=!0),this.checkParams(e,!a&&!l&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,C1),e.body=this.parseBlock(!1,void 0,l&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=h}this.exitScope()};yt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};yt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,G0,t?null:n)}};yt.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(R.comma),t&&this.afterTrailingComma(e))break;var l=void 0;n&&this.type===R.comma?l=null:this.type===R.ellipsis?(l=this.parseSpread(r),r&&this.type===R.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):l=this.parseMaybeAssign(!1,r),i.push(l)}return i};yt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&tc)&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};yt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};yt.parseIdentNode=function(){var e=this.startNode();return this.type===R.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=R.name):this.unexpected(),e};yt.parsePrivateIdent=function(){var e=this.startNode();return this.type===R.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};yt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===R.semi||this.canInsertSemicolon()||this.type!==R.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(R.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};yt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var _l=Un.prototype;_l.raise=function(e,t){var n=b1(this.input,e);t+=" ("+n.line+":"+n.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};_l.raiseRecoverable=_l.raise;_l.curPosition=function(){if(this.options.locations)return new ao(this.curLine,this.pos-this.lineStart)};var ui=Un.prototype,f8=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};ui.enterScope=function(e){this.scopeStack.push(new f8(e))};ui.exitScope=function(){this.scopeStack.pop()};ui.treatFunctionsAsVarInScope=function(e){return e.flags&Sa||!this.inModule&&e.flags&oo};ui.declareName=function(e,t,n){var r=!1;if(t===Ps){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&oo&&delete this.undefinedExports[e]}else if(t===j1){var a=this.currentScope();a.lexical.push(e)}else if(t===k1){var l=this.currentScope();this.treatFunctionsAsVar?r=l.lexical.indexOf(e)>-1:r=l.lexical.indexOf(e)>-1||l.var.indexOf(e)>-1,l.functions.push(e)}else for(var u=this.scopeStack.length-1;u>=0;--u){var h=this.scopeStack[u];if(h.lexical.indexOf(e)>-1&&!(h.flags&w1&&h.lexical[0]===e)||!this.treatFunctionsAsVarInScope(h)&&h.functions.indexOf(e)>-1){r=!0;break}if(h.var.push(e),this.inModule&&h.flags&oo&&delete this.undefinedExports[e],h.flags&tc)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};ui.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};ui.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};ui.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(tc|yo|Mi))return t}};ui.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(tc|yo|Mi)&&!(t.flags&F0))return t}};var rc=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new Ql(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},bo=Un.prototype;bo.startNode=function(){return new rc(this,this.start,this.startLoc)};bo.startNodeAt=function(e,t){return new rc(this,e,t)};function A1(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}bo.finishNode=function(e,t){return A1.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};bo.finishNodeAt=function(e,t,n,r){return A1.call(this,e,t,n,r)};bo.copyNode=function(e){var t=new rc(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var p8="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",N1="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",_1=N1+" Extended_Pictographic",E1=_1,M1=E1+" EBase EComp EMod EPres ExtPict",D1=M1,m8=D1,g8={9:N1,10:_1,11:E1,12:M1,13:D1,14:m8},x8="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",y8={9:"",10:"",11:"",12:"",13:"",14:x8},Mf="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",O1="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",R1=O1+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",V1=R1+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",z1=V1+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",P1=z1+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",b8=P1+" "+p8,v8={9:O1,10:R1,11:V1,12:z1,13:P1,14:b8},B1={};function w8(e){var t=B1[e]={binary:Js(g8[e]+" "+Mf),binaryOfStrings:Js(y8[e]),nonBinary:{General_Category:Js(Mf),Script:Js(v8[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var su=0,Df=[9,10,11,12,13,14];su<Df.length;su+=1){var S8=Df[su];w8(S8)}var et=Un.prototype,El=function(t,n){this.parent=t,this.base=n||this};El.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};El.prototype.sibling=function(){return new El(this.parent,this.base)};var bs=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=B1[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};bs.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,a=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=a&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=a&&this.parser.options.ecmaVersion>=9)};bs.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};bs.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var a=r.charCodeAt(t);if(!(n||this.switchU)||a<=55295||a>=57344||t+1>=i)return a;var l=r.charCodeAt(t+1);return l>=56320&&l<=57343?(a<<10)+l-56613888:a};bs.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var a=r.charCodeAt(t),l;return!(n||this.switchU)||a<=55295||a>=57344||t+1>=i||(l=r.charCodeAt(t+1))<56320||l>57343?t+1:t+2};bs.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};bs.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};bs.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};bs.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};bs.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,a=t;i<a.length;i+=1){var l=a[i],u=this.at(r,n);if(u===-1||u!==l)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};et.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,a=0;a<n.length;a++){var l=n.charAt(a);t.indexOf(l)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(l,a+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),l==="u"&&(r=!0),l==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function k8(e){for(var t in e)return!0;return!1}et.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&k8(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};et.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};et.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new El(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};et.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};et.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};et.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};et.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};et.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};et.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};et.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};et.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};et.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),r=e.eat(45);if(n||r){for(var i=0;i<n.length;i++){var a=n.charAt(i);n.indexOf(a,i+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var l=this.regexp_eatModifiers(e);!n&&!l&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var u=0;u<l.length;u++){var h=l.charAt(u);(l.indexOf(h,u+1)>-1||n.indexOf(h)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};et.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};et.regexp_eatModifiers=function(e){for(var t="",n=0;(n=e.current())!==-1&&j8(n);)t+=Rs(n),e.advance();return t};function j8(e){return e===105||e===109||e===115}et.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};et.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};et.regexp_eatSyntaxCharacter=function(e){var t=e.current();return L1(t)?(e.lastIntValue=t,e.advance(),!0):!1};function L1(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}et.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!L1(n);)e.advance();return e.pos!==t};et.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};et.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var a=i[r];a.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};et.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};et.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Rs(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Rs(e.lastIntValue);return!0}return!1};et.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),C8(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function C8(e){return gs(e,!0)||e===36||e===95}et.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),T8(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function T8(e){return oi(e,!0)||e===36||e===95||e===8204||e===8205}et.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};et.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};et.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};et.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};et.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};et.regexp_eatZero=function(e){return e.current()===48&&!sc(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};et.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};et.regexp_eatControlLetter=function(e){var t=e.current();return F1(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function F1(e){return e>=65&&e<=90||e>=97&&e<=122}et.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var l=e.lastIntValue;if(l>=56320&&l<=57343)return e.lastIntValue=(i-55296)*1024+(l-56320)+65536,!0}e.pos=a,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&I8(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function I8(e){return e>=0&&e<=1114111}et.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};et.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var $1=0,Vs=1,Wr=2;et.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(A8(t))return e.lastIntValue=-1,e.advance(),Vs;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Wr&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return $1};function A8(e){return e===100||e===68||e===115||e===83||e===119||e===87}et.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Vs}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return $1};et.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){wa(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};et.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Vs;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Wr;e.raise("Invalid property name")};et.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";G1(t=e.current());)e.lastStringValue+=Rs(t),e.advance();return e.lastStringValue!==""};function G1(e){return F1(e)||e===95}et.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";N8(t=e.current());)e.lastStringValue+=Rs(t),e.advance();return e.lastStringValue!==""};function N8(e){return G1(e)||sc(e)}et.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};et.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Wr&&e.raise("Negated character class may contain strings"),!0}return!1};et.regexp_classContents=function(e){return e.current()===93?Vs:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Vs)};et.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};et.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||W1(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};et.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};et.regexp_classSetExpression=function(e){var t=Vs,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Wr&&(t=Wr);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Wr&&(t=Vs);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Wr&&(t=Wr)}};et.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};et.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Vs:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};et.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Wr&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};et.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};et.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Wr&&(t=Wr);return t};et.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Vs:Wr};et.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&_8(n)||E8(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function _8(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function E8(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}et.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return M8(t)?(e.lastIntValue=t,e.advance(),!0):!1};function M8(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}et.regexp_eatClassControlLetter=function(e){var t=e.current();return sc(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};et.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};et.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;sc(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function sc(e){return e>=48&&e<=57}et.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;q1(n=e.current());)e.lastIntValue=16*e.lastIntValue+H1(n),e.advance();return e.pos!==t};function q1(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function H1(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}et.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};et.regexp_eatOctalDigit=function(e){var t=e.current();return W1(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function W1(e){return e>=48&&e<=55}et.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!q1(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+H1(i),e.advance()}return!0};var H0=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Ql(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Mt=Un.prototype;Mt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new H0(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Mt.getToken=function(){return this.next(),new H0(this)};typeof Symbol<"u"&&(Mt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===R.eof,value:t}}}});Mt.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(R.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Mt.readToken=function(e){return gs(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Mt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Mt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=g1(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Mt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!va(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Mt.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&x1.test(String.fromCharCode(e)))++this.pos;else break e}}};Mt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Mt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(R.ellipsis)):(++this.pos,this.finishToken(R.dot))};Mt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(R.assign,2):this.finishOp(R.slash,1)};Mt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?R.star:R.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=R.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(R.assign,n+1):this.finishOp(r,n)};Mt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(R.assign,3)}return this.finishOp(e===124?R.logicalOR:R.logicalAND,2)}return t===61?this.finishOp(R.assign,2):this.finishOp(e===124?R.bitwiseOR:R.bitwiseAND,1)};Mt.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(R.assign,2):this.finishOp(R.bitwiseXOR,1)};Mt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||jr.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(R.incDec,2):t===61?this.finishOp(R.assign,2):this.finishOp(R.plusMin,1)};Mt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(R.assign,n+1):this.finishOp(R.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(R.relational,n))};Mt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(R.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(R.arrow)):this.finishOp(e===61?R.eq:R.prefix,1)};Mt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(R.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(R.assign,3)}return this.finishOp(R.coalesce,2)}}return this.finishOp(R.question,1)};Mt.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),gs(t,!0)||t===92))return this.finishToken(R.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Rs(t)+"'")};Mt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(R.parenL);case 41:return++this.pos,this.finishToken(R.parenR);case 59:return++this.pos,this.finishToken(R.semi);case 44:return++this.pos,this.finishToken(R.comma);case 91:return++this.pos,this.finishToken(R.bracketL);case 93:return++this.pos,this.finishToken(R.bracketR);case 123:return++this.pos,this.finishToken(R.braceL);case 125:return++this.pos,this.finishToken(R.braceR);case 58:return++this.pos,this.finishToken(R.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(R.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(R.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Rs(e)+"'")};Mt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Mt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(jr.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,l=this.readWord1();this.containsEsc&&this.unexpected(a);var u=this.regexpState||(this.regexpState=new bs(this));u.reset(n,i,l),this.validateRegExpFlags(u),this.validateRegExpPattern(u);var h=null;try{h=new RegExp(i,l)}catch{}return this.finishToken(R.regexp,{pattern:i,flags:l,value:h})};Mt.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,a=this.pos,l=0,u=0,h=0,f=t??1/0;h<f;++h,++this.pos){var m=this.input.charCodeAt(this.pos),x=void 0;if(r&&m===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),u===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),h===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),u=m;continue}if(m>=97?x=m-97+10:m>=65?x=m-65+10:m>=48&&m<=57?x=m-48:x=1/0,x>=e)break;u=m,l=l*e+x}return r&&u===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||t!=null&&this.pos-a!==t?null:l};function D8(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function U1(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Mt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=U1(this.input.slice(t,this.pos)),++this.pos):gs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(R.num,n)};Mt.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=U1(this.input.slice(t,this.pos));return++this.pos,gs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(R.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),gs(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=D8(this.input.slice(t,this.pos),n);return this.finishToken(R.num,a)};Mt.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Mt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(va(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(R.string,t)};var Z1={};Mt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===Z1)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Mt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Z1;this.raise(e,t)};Mt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===R.template||this.type===R.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(R.dollarBraceL)):(++this.pos,this.finishToken(R.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(R.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(va(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Mt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(R.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Mt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Rs(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return va(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Mt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Mt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(oi(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var l=this.readCodePoint();(t?gs:oi)(l,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=Rs(l),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Mt.readWord=function(){var e=this.readWord1(),t=R.name;return this.keywords.test(e)&&(t=B0[e]),this.finishToken(t,e)};var O8="8.15.0";Un.acorn={Parser:Un,version:O8,defaultOptions:Yu,Position:ao,SourceLocation:Ql,getLineInfo:b1,Node:rc,TokenType:Ht,tokTypes:R,keywordTypes:B0,TokContext:Kr,tokContexts:Cn,isIdentifierChar:oi,isIdentifierStart:gs,Token:H0,isNewLine:va,lineBreak:jr,lineBreakG:n8,nonASCIIwhitespace:x1};function R8(e,t){return Un.parse(e,t)}class Sr{static parseExpression(t){try{const n=R8(t,{ecmaVersion:2020,sourceType:"module",allowReturnOutsideFunction:!0,allowAwaitOutsideFunction:!0}),r=this.convertAcornNode(n.body[0]);return r.metadata={astVersion:this.AST_VERSION,validationErrors:[],complexity:this.calculateComplexity(r)},r}catch(n){return{type:"literal",value:t,metadata:{astVersion:this.AST_VERSION,validationErrors:[n instanceof Error?n.message:String(n)],complexity:"low"}}}}static generateJavaScript(t){var n;switch(t.type){case"binary":{if(!t.left||!t.right||!t.operator)throw new Error("Invalid binary operation: missing left, right, or operator");return`(${this.generateJavaScript(t.left)} ${t.operator} ${this.generateJavaScript(t.right)})`}case"unary":{if(!t.operand||!t.operator)throw new Error("Invalid unary operation: missing operand or operator");return`${t.operator}${this.generateJavaScript(t.operand)}`}case"variable":{if(!t.variableName)throw new Error("Invalid variable: missing variable name");return t.variableName}case"literal":{if(t.value===void 0)throw new Error("Invalid literal: missing value");return typeof t.value=="string"?`"${t.value}"`:String(t.value)}case"function":{if(!t.functionName)throw new Error("Invalid function call: missing function name");const r=((n=t.arguments)==null?void 0:n.map(i=>this.generateJavaScript(i)).join(", "))||"";return`${t.functionName}(${r})`}case"assignment":{if(!t.variableName||!t.expression)throw new Error("Invalid assignment: missing variable name or expression");return`${t.variableName} = ${this.generateJavaScript(t.expression)}`}case"group":{if(!t.body)throw new Error("Invalid group: missing body expression");return`(${this.generateJavaScript(t.body)})`}default:throw new Error(`Unsupported AST node type: ${t.type}`)}}static validateAST(t){const n=[];try{if(!t||typeof t!="object")return n.push("Invalid AST structure: AST must be an object"),n;t.type||n.push("Missing required field: type"),this.validateNode(t,n),this.checkCommonIssues(t,n)}catch(r){n.push(`Validation error: ${r instanceof Error?r.message:"Unknown error"}`)}return n}static validateNode(t,n){if(t)switch(t.type){case"binary":(!t.left||!t.right||!t.operator)&&n.push("Invalid binary expression: missing left, right, or operator"),this.validateNode(t.left,n),this.validateNode(t.right,n);break;case"unary":(!t.operand||!t.operator)&&n.push("Invalid unary expression: missing operand or operator"),this.validateNode(t.operand,n);break;case"function":t.functionName||n.push("Invalid function call: missing function name"),t.arguments&&t.arguments.forEach(r=>{this.validateNode(r,n)});break;case"variable":t.variableName||n.push("Invalid variable: missing variable name");break;case"literal":t.value===void 0&&n.push("Invalid literal: missing value");break;case"assignment":t.variableName||n.push("Invalid assignment: missing variable name"),t.expression||n.push("Invalid assignment: missing expression"),t.expression&&this.validateNode(t.expression,n);break;case"group":t.body||n.push("Invalid group: missing body expression"),t.body&&this.validateNode(t.body,n);break}}static checkCommonIssues(t,n){var r;if(t.type==="binary"&&t.operator==="/"&&((r=t.right)==null?void 0:r.type)==="literal"&&t.right.value===0&&n.push("Warning: Division by zero detected"),t.type==="variable"&&t.variableName&&!["n","base","exponent","value","value1","value2"].includes(t.variableName)&&!t.variableName.startsWith("system_")&&n.push(`Warning: Variable '${t.variableName}' may be undefined`),t.type==="binary"||t.type==="function"){const i=this.calculateComplexityScore(t);i>5&&n.push(`Warning: Complex expression detected (complexity: ${i}). Consider breaking into smaller parts.`)}t.left&&this.checkCommonIssues(t.left,n),t.right&&this.checkCommonIssues(t.right,n),t.operand&&this.checkCommonIssues(t.operand,n),t.expression&&this.checkCommonIssues(t.expression,n),t.body&&this.checkCommonIssues(t.body,n),t.arguments&&t.arguments.forEach(i=>{this.checkCommonIssues(i,n)})}static convertAcornNode(t){switch(t.type){case"ExpressionStatement":return this.convertAcornNode(t.expression);case"BinaryExpression":{const n=t;return{type:"binary",operator:n.operator,left:this.convertAcornNode(n.left),right:this.convertAcornNode(n.right)}}case"UnaryExpression":{const n=t;return{type:"unary",operator:n.operator,operand:this.convertAcornNode(n.argument)}}case"Identifier":return{type:"variable",variableName:t.name};case"Literal":{const n=t;return{type:"literal",value:n.value===null?void 0:n.value}}case"CallExpression":{const n=t;return{type:"function",functionName:this.getFunctionName(n.callee),arguments:n.arguments.map(r=>this.convertAcornNode(r))}}case"AssignmentExpression":{const n=t;return{type:"assignment",variableName:n.left.name,expression:this.convertAcornNode(n.right)}}case"ParenthesizedExpression":{const n=t;return{type:"group",body:this.convertAcornNode(n.expression)}}case"MemberExpression":{const n=t;return n.object.name==="Math"&&n.property.type==="Identifier"?{type:"function",functionName:`Math.${n.property.name}`,arguments:[]}:{type:"literal",value:this.generateMemberExpression(n)}}default:return{type:"literal",value:this.generateCodeFromNode(t)}}}static getFunctionName(t){if(t.type==="Identifier")return t.name;if(t.type==="MemberExpression"){const n=t;return`${this.getFunctionName(n.object)}.${n.property.name}`}return"unknown"}static generateMemberExpression(t){return t.object.type==="Identifier"&&t.property.type==="Identifier"?`${t.object.name}.${t.property.name}`:"unknown"}static generateCodeFromNode(t){return JSON.stringify(t)}static calculateComplexity(t){const n=this.calculateComplexityScore(t);return n<=3?"low":n<=8?"medium":"high"}static calculateComplexityScore(t){let n=1;switch(t.type){case"binary":n+=this.calculateComplexityScore(t.left),n+=this.calculateComplexityScore(t.right);break;case"unary":n+=this.calculateComplexityScore(t.operand);break;case"function":n+=2,t.arguments&&t.arguments.forEach(r=>{n+=this.calculateComplexityScore(r)});break;case"group":t.body&&(n+=this.calculateComplexityScore(t.body));break;case"assignment":t.expression&&(n+=this.calculateComplexityScore(t.expression));break}return n}static extractVariables(t){const n=[],r=i=>{switch(i.type==="variable"&&i.variableName&&n.push(i.variableName),i.type){case"binary":i.left&&r(i.left),i.right&&r(i.right);break;case"unary":i.operand&&r(i.operand);break;case"function":i.arguments&&i.arguments.forEach(a=>r(a));break;case"assignment":i.expression&&r(i.expression);break;case"group":i.body&&r(i.body);break}};return r(t),[...new Set(n)]}static optimizeExpression(t){if(!t)return t;try{const n=this.cloneAST(t);return this.constantFolding(n),this.removeRedundantOperations(n),this.simplifyExpressions(n),n}catch(n){return console.warn("Expression optimization failed:",n),t}}static constantFolding(t){var n;if(t)switch(t.type){case"binary":if(t.left&&t.right&&(this.constantFolding(t.left),this.constantFolding(t.right),t.left.type==="literal"&&t.right.type==="literal")){const r=Number(t.left.value),i=Number(t.right.value);if(!isNaN(r)&&!isNaN(i)){let a;switch(t.operator){case"+":a=r+i;break;case"-":a=r-i;break;case"*":a=r*i;break;case"/":a=i!==0?r/i:NaN;break;case"^":a=Math.pow(r,i);break;default:return}isNaN(a)||(t.type="literal",t.value=a,delete t.left,delete t.right,delete t.operator)}}break;case"unary":if(t.operand&&(this.constantFolding(t.operand),t.operand.type==="literal")){const r=Number(t.operand.value);if(!isNaN(r)){let i;switch(t.operator){case"-":i=-r;break;case"!":i=r?0:1;break;default:return}t.type="literal",t.value=i,delete t.operand,delete t.operator}}break;case"function":if(t.arguments&&(t.arguments.forEach(r=>this.constantFolding(r)),(n=t.functionName)!=null&&n.startsWith("Math.")&&t.arguments.length>0&&t.arguments.every(i=>i.type==="literal"))){const i=t.arguments.map(a=>Number(a.value));if(i.every(a=>!isNaN(a))){let a;switch(t.functionName){case"Math.abs":a=Math.abs(i[0]);break;case"Math.round":a=Math.round(i[0]);break;case"Math.floor":a=Math.floor(i[0]);break;case"Math.ceil":a=Math.ceil(i[0]);break;case"Math.sqrt":a=Math.sqrt(i[0]);break;case"Math.pow":a=Math.pow(i[0],i[1]);break;case"Math.min":a=Math.min(...i);break;case"Math.max":a=Math.max(...i);break;default:return}isNaN(a)||(t.type="literal",t.value=a,delete t.functionName,delete t.arguments)}}break;case"group":t.body&&this.constantFolding(t.body);break;case"assignment":t.expression&&this.constantFolding(t.expression);break}}static removeRedundantOperations(t){if(t)switch(t.type){case"binary":if(t.left&&t.right){if(this.removeRedundantOperations(t.left),this.removeRedundantOperations(t.right),t.operator==="+"&&t.right.type==="literal"&&t.right.value===0){this.replaceNode(t,t.left);return}if(t.operator==="+"&&t.left.type==="literal"&&t.left.value===0){this.replaceNode(t,t.right);return}if(t.operator==="*"&&t.right.type==="literal"&&t.right.value===1){this.replaceNode(t,t.left);return}if(t.operator==="*"&&t.left.type==="literal"&&t.left.value===1){this.replaceNode(t,t.right);return}if(t.operator==="^"&&t.right.type==="literal"&&t.right.value===1){this.replaceNode(t,t.left);return}if(t.operator==="^"&&t.right.type==="literal"&&t.right.value===0){t.type="literal",t.value=1,delete t.left,delete t.right,delete t.operator;return}}break;case"unary":if(t.operand&&(this.removeRedundantOperations(t.operand),t.operator==="-"&&t.operand.type==="unary"&&t.operand.operator==="-")){this.replaceNode(t,t.operand.operand);return}break;case"group":if(t.body&&(this.removeRedundantOperations(t.body),t.body.type==="literal"||t.body.type==="variable")){this.replaceNode(t,t.body);return}break;case"function":t.arguments&&t.arguments.forEach(n=>this.removeRedundantOperations(n));break;case"assignment":t.expression&&this.removeRedundantOperations(t.expression);break}}static simplifyExpressions(t){if(t)switch(t.type){case"binary":t.left&&t.right&&(this.simplifyExpressions(t.left),this.simplifyExpressions(t.right),t.operator==="+"&&t.left.type==="variable"&&t.right.type==="variable"&&t.left.variableName===t.right.variableName&&(t.operator="*",t.left={type:"literal",value:2}));break;case"unary":t.operand&&this.simplifyExpressions(t.operand);break;case"group":t.body&&this.simplifyExpressions(t.body);break;case"function":t.arguments&&t.arguments.forEach(n=>this.simplifyExpressions(n));break;case"assignment":t.expression&&this.simplifyExpressions(t.expression);break}}static cloneAST(t){if(!t)return t;const n={type:t.type};return t.operator&&(n.operator=t.operator),t.value!==void 0&&(n.value=t.value),t.variableName&&(n.variableName=t.variableName),t.functionName&&(n.functionName=t.functionName),t.expression&&(n.expression=this.cloneAST(t.expression)),t.body&&(n.body=this.cloneAST(t.body)),t.left&&(n.left=this.cloneAST(t.left)),t.right&&(n.right=this.cloneAST(t.right)),t.operand&&(n.operand=this.cloneAST(t.operand)),t.arguments&&(n.arguments=t.arguments.map(r=>this.cloneAST(r))),t.metadata&&(n.metadata={...t.metadata}),n}static replaceNode(t,n){Object.assign(t,n)}static generateCode(t){var n;if(!t)return"";try{switch(t.type){case"literal":return String(t.value);case"variable":return t.variableName||"";case"binary":{const r=this.generateCode(t.left),i=this.generateCode(t.right);return`${r} ${t.operator} ${i}`}case"unary":{const r=this.generateCode(t.operand);return`${t.operator}${r}`}case"function":{const r=((n=t.arguments)==null?void 0:n.map(i=>this.generateCode(i)).join(", "))||"";return`${t.functionName}(${r})`}case"group":return`(${this.generateCode(t.body)})`;case"assignment":{const r=this.generateCode(t.expression);return`${t.variableName} = ${r}`}default:return""}}catch(r){return console.warn("Code generation failed:",r),""}}}_a(Sr,"AST_VERSION","1.0.0");class Ws{static getAllVariableMappings(t){const n=Qn.getSystemVariables(),r=t.map(a=>({id:a.id,name:a.name,type:"algorithm"})),i=n.map(a=>({id:a.id,name:a.name,type:"system"}));return[...r,...i]}static getVariableNameById(t,n){const r=n.find(i=>i.id===t);return r?r.name:Qn.getVariableNameById(t)}static getVariableIdByName(t,n){const r=n.find(i=>i.name===t);return r?r.id:Qn.getVariableIdByName(t)}static convertFormulaToIds(t,n){const r=this.getAllVariableMappings(n);return t.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g,(i,a)=>{if(["Math","Array","Object","String","Number","Boolean","Date","RegExp","Function","undefined","null","true","false","NaN","Infinity"].includes(a)||/^\d+(\.\d+)?$/.test(a))return i;const u=r.find(h=>h.name===a);return u?u.id:i})}static convertFormulaToNames(t,n){const r=this.getAllVariableMappings(n);return t.replace(/\b([a-zA-Z0-9-_]+)\b/g,(i,a)=>{if(["Math","Array","Object","String","Number","Boolean","Date","RegExp","Function","undefined","null","true","false","NaN","Infinity"].includes(a)||/^\d+(\.\d+)?$/.test(a))return i;const u=r.find(h=>h.id===a);return u?u.name:i})}static convertLatexToIds(t,n){const r=this.getAllVariableMappings(n);return t.replace(/\{([a-zA-Z_][a-zA-Z0-9_]*)\}/g,(i,a)=>{const l=r.find(u=>u.name===a);return l?`{${l.id}}`:i})}static convertLatexToNames(t,n){const r=this.getAllVariableMappings(n);return t.replace(/\{([a-zA-Z0-9-_]+)\}/g,(i,a)=>{const l=r.find(u=>u.id===a);return l?`{${l.name}}`:i})}static convertASTToIds(t,n){if(!t||typeof t!="object")return t;const r=this.getAllVariableMappings(n);if(t.type==="variable"&&t.variableName){const a=r.find(l=>l.name===t.variableName);if(a)return{...t,variableName:a.id}}const i={...t};return i.left&&(i.left=this.convertASTToIds(i.left,n)),i.right&&(i.right=this.convertASTToIds(i.right,n)),i.operand&&(i.operand=this.convertASTToIds(i.operand,n)),i.arguments&&Array.isArray(i.arguments)&&(i.arguments=i.arguments.map(a=>this.convertASTToIds(a,n))),i.expression&&(i.expression=this.convertASTToIds(i.expression,n)),i.body&&(i.body=this.convertASTToIds(i.body,n)),i}static convertASTToNames(t,n){if(!t||typeof t!="object")return t;const r=this.getAllVariableMappings(n);if(t.type==="variable"&&t.variableName){const a=r.find(l=>l.id===t.variableName);if(a)return{...t,variableName:a.name}}const i={...t};return i.left&&(i.left=this.convertASTToNames(i.left,n)),i.right&&(i.right=this.convertASTToNames(i.right,n)),i.operand&&(i.operand=this.convertASTToNames(i.operand,n)),i.arguments&&Array.isArray(i.arguments)&&(i.arguments=i.arguments.map(a=>this.convertASTToNames(a,n))),i.expression&&(i.expression=this.convertASTToNames(i.expression,n)),i.body&&(i.body=this.convertASTToNames(i.body,n)),i}static createEvaluationContext(t,n=[]){const r={};return t.forEach(i=>{r[i.name]=this.parseVariableValue(i.defaultValue||"",i.type)}),n.forEach(i=>{r[i.name]=this.parseVariableValue(i.defaultValue||"",i.type)}),r}static parseVariableValue(t,n){switch(n){case"number":return parseFloat(t)||0;case"boolean":return t==="true"||t==="1";case"string":default:return t}}}const Of=[{id:"+",label:"Add (+)",symbol:"+",latex:"+"},{id:"-",label:"Subtract (-)",symbol:"-",latex:"-"},{id:"",label:"Multiply ()",symbol:"*",latex:"\\times"},{id:"/",label:"Divide ()",symbol:"/",latex:"\\div"},{id:"^",label:"Power (^)",symbol:"^",latex:"^"},{id:"%",label:"Modulo (%)",symbol:"%",latex:"\\bmod"},{id:"=",label:"Equals (=)",symbol:"=",latex:"="}],Rf=[{id:"=",label:"Equals (=)",symbol:"=",latex:"="},{id:">",label:"Greater Than (>)",symbol:">",latex:">"},{id:"<",label:"Less Than (<)",symbol:"<",latex:"<"},{id:">=",label:"Greater Than or Equal ()",symbol:">=",latex:"\\geq"},{id:"<=",label:"Less Than or Equal ()",symbol:"<=",latex:"\\leq"},{id:"!=",label:"Not Equal ()",symbol:"!=",latex:"\\neq"}];function iu(e){if(!e||e.trim()==="")return"";try{let t=e;return t=t.replace(/Math\.pow\(([^,]+),\s*([^)]+)\)/g,"$1^{$2}"),t=t.replace(/Math\.sqrt\(([^)]+)\)/g,"\\sqrt{$1}"),t=t.replace(/Math\.abs\(([^)]+)\)/g,"|$1|"),t=t.replace(/Math\.floor\(([^)]+)\)/g,"\\lfloor $1 \\rfloor"),t=t.replace(/Math\.ceil\(([^)]+)\)/g,"\\lceil $1 \\rceil"),t=t.replace(/Math\.round\(([^)]+)\)/g,"\\text{round}($1)"),t=t.replace(/Math\.min\(([^)]+)\)/g,"\\min($1)"),t=t.replace(/Math\.max\(([^)]+)\)/g,"\\max($1)"),t=t.replace(/\*/g,"\\cdot "),t=t.replace(/\//g,"\\div "),t=t.replace(/==/g,"="),t=t.replace(/!=/g,"\\neq "),t=t.replace(/>=/g,"\\geq "),t=t.replace(/<=/g,"\\leq "),t=t.replace(/&&/g,"\\land "),t=t.replace(/\|\|/g,"\\lor "),t=t.replace(/!/g,"\\neg "),t=t.replace(/\[([^\]]+)\]/g,"[$1]"),t=t.replace(/(\d+)\.\.(\d+)/g,"[$1, $1+1, ..., $2]"),t=t.replace(/\s+/g," ").trim(),t}catch(t){return console.warn("LaTeX conversion error:",t),e}}const V8=({block:e,index:t,onDelete:n,colorMode:r,isGroupDropTarget:i,onClick:a})=>{const l=(h,f)=>{const m=r==="dark";return h.startsWith("Math.")?{bg:m?"purple.800":"purple.100",color:m?"purple.200":"purple.800",border:m?"purple.600":"purple.300"}:["+","-","*","/","^","==","!=",">","<",">=","<=","&&","||","!"].includes(h)?{bg:m?"orange.800":"orange.100",color:m?"orange.200":"orange.800",border:m?"orange.600":"orange.300"}:/^\d+(\.\d+)?$/.test(h)?{bg:m?"green.800":"green.100",color:m?"green.200":"green.800",border:m?"green.600":"green.300"}:f==="variable"?{bg:m?"blue.800":"blue.100",color:m?"blue.200":"blue.800",border:m?"blue.600":"blue.300"}:f==="array"||f==="range"?{bg:m?"teal.800":"teal.100",color:m?"teal.200":"teal.800",border:m?"teal.600":"teal.300"}:{bg:m?"gray.700":"white",color:m?"gray.200":"gray.800",border:m?"gray.600":"gray.200"}},u=l(e.content,e.type);return e.type==="group"?s.jsx(io,{draggableId:e.id,index:t,children:(h,f)=>{var m;return s.jsxs(Z,{ref:h.innerRef,...h.draggableProps,p:2,bg:r==="dark"?"gray.700":"white",borderRadius:"md",boxShadow:f.isDragging?"md":"sm",borderWidth:1,borderColor:r==="dark"?"gray.600":"gray.200",children:[s.jsxs(xe,{spacing:2,mb:2,children:[s.jsx(Z,{...h.dragHandleProps,cursor:"grab",children:s.jsx(Ou,{size:16})}),s.jsx(ht,{colorScheme:"green",children:"Group"}),s.jsx(wt,{"aria-label":"Delete group",icon:s.jsx(cs,{size:16}),size:"xs",colorScheme:"red",onClick:x=>{x.stopPropagation(),n(e.id)}})]}),s.jsx(Z,{p:2,bg:i?"blue.100":r==="dark"?"gray.800":"gray.50",borderRadius:"md",minH:"50px",children:s.jsx(xe,{spacing:2,wrap:"wrap",children:(m=e.children)==null?void 0:m.map(x=>{const g=l(x.content,x.type);return s.jsx(Z,{p:1,bg:g.bg,color:g.color,borderRadius:"sm",borderWidth:1,borderColor:g.border,cursor:a&&(x.type==="variable"||x.type==="operator")?"pointer":"default",onClick:()=>a&&a(x),_hover:a&&(x.type==="variable"||x.type==="operator")?{opacity:.8,transform:"scale(1.05)"}:{},children:s.jsx(ht,{size:"sm",colorScheme:x.type==="variable"?"blue":x.type==="operator"?"purple":x.type==="value"?"gray":"green",bg:"transparent",color:"inherit",children:x.content})},x.id)})})})]})}}):s.jsx(io,{draggableId:e.id,index:t,children:(h,f)=>s.jsxs(xe,{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,p:2,bg:u.bg,color:u.color,borderRadius:"md",boxShadow:f.isDragging?"md":"sm",borderWidth:1,borderColor:u.border,cursor:a&&(e.type==="variable"||e.type==="operator")?"pointer":"default",onClick:()=>a&&a(e),_hover:a&&(e.type==="variable"||e.type==="operator")?{opacity:.8,transform:"scale(1.02)"}:{},children:[s.jsx(Z,{cursor:"grab",children:s.jsx(Ou,{size:16})}),s.jsx(ht,{colorScheme:e.type==="variable"?"blue":e.type==="operator"?"purple":e.type==="value"?"gray":e.type==="array"?"orange":e.type==="range"?"teal":"green",children:e.type==="array"&&e.arrayValues?`[${e.arrayValues.join(", ")}]`:e.type==="range"&&e.rangeStart!==void 0?`${e.rangeStart}..${e.rangeEnd} (${e.rangeStep})`:e.content}),s.jsx(wt,{"aria-label":"Delete block",icon:s.jsx(cs,{size:16}),size:"xs",colorScheme:"red",onClick:m=>{m.stopPropagation(),n(e.id)}})]})})},Vf=({variables:e,value:t,onChange:n,mode:r="formula"})=>{const{colorMode:i}=nn(),[a,l]=P.useState(()=>{if(!t)return[];const ae=Ws.convertFormulaToNames(t,e),we=au(ae);return console.log("FormulaEditor: Parsed blocks for expression:",ae,we),we}),{isOpen:u,onOpen:h,onClose:f}=Ki(),{isOpen:m,onOpen:x,onClose:g}=Ki(),{isOpen:v,onOpen:N,onClose:D}=Ki(),[j,S]=P.useState(null),[T,E]=P.useState(""),[M,A]=P.useState(""),[I,W]=P.useState(""),[J,le]=P.useState("0"),[ce,F]=P.useState("10"),[Q,de]=P.useState("1"),[q,pe]=P.useState([]),[H,L]=P.useState(null),[X,he]=P.useState(null),[ge,oe]=P.useState([]),[Se,ne]=P.useState("low"),[be,De]=P.useState(!1),[Pe,Ve]=P.useState([]),[ct,Dt]=P.useState(0),[Qt,pn]=P.useState(null),_e=[...e,...q];P.useEffect(()=>{const ae=()=>{const Je=Qn.getSystemVariables(),Xe=[{id:"system_n",name:"n",type:"number",defaultValue:"0"},...Je];pe(Xe)};ae();const we=()=>{ae()};return window.addEventListener("focus",we),()=>{window.removeEventListener("focus",we)}},[]);const pt=r==="formula"?Of:Rf,Ft=pt.map(ae=>s.jsx(Pr,{onClick:()=>fe(ae.id),children:ae.label},ae.id)),mn=ae=>{if(ae.length===0)return"Formula is empty. Add variables, values, or operators.";const we=ae.some(_t=>_t.type==="operator"),Je=ae.filter(_t=>_t.type==="variable"||_t.type==="value").length,Xe=ae.filter(_t=>_t.type==="operator").length;if(we&&Xe>Je)return`Formula has ${Xe} operators but only ${Je} values. Consider adding more values or variables.`;if(we&&Je<2)return"Formula has operators but needs at least 2 values or variables to be valid.";const mt=ae.filter(_t=>_t.type==="variable").map(_t=>_t.content),At=q.map(_t=>_t.name),gn=e.map(_t=>_t.name),rn=mt.filter(_t=>!At.includes(_t)&&!gn.includes(_t));if(rn.length>0)return`Undefined variables detected: ${rn.join(", ")}. Make sure all variables are defined in the Variables tab.`;const Xt=mt.filter(_t=>At.includes(_t));return Xt.length>0?`Using system variables: ${Xt.join(", ")}. These will be automatically available during execution.`:""},Wt=ae=>{if(!ae.destination){A("");return}const{source:we,destination:Je}=ae,Xe=Array.from(a),[mt]=Xe.splice(we.index,1),At=Xe[Je.index];if(At&&At.type==="group"){At.children=At.children||[],At.children.push(mt),l(Xe),A("");return}Xe.splice(Je.index,0,mt),l(Xe),A("")},ln=()=>{A("")},Ut=ae=>{if(!ae.destination){A("");return}const we=a[ae.destination.index];we&&we.type==="group"?A(we.id):A("")},$t=ae=>{const we={id:`var_${Date.now()}`,type:"variable",content:ae.name};l(Je=>[...Je,we])},fe=ae=>{const Je=(r==="formula"?Of:Rf).find(mt=>mt.id===ae);if(!Je)return;const Xe={id:`op_${Date.now()}`,type:"operator",content:Je.symbol};l(mt=>[...mt,Xe])},Ee=()=>{const ae={id:`group_${Date.now()}`,type:"group",content:"()",children:[]};l(we=>[...we,ae])},ye=()=>{S({id:`value_${Date.now()}`,type:"value",content:"",value:""}),h()},Ue=()=>{W(""),x()},Fe=()=>{le("0"),F("10"),de("1"),N()},Ge=ae=>{if(!j)return;const we={...j,content:String(ae),value:ae};l(Je=>[...Je,we]),f()},Et=()=>{const ae=I.split(",").map(we=>we.trim()).filter(we=>we!=="").map(we=>Number(we)).filter(we=>!isNaN(we));if(ae.length>0){const we={id:`array_${Date.now()}`,type:"array",content:`[${ae.join(", ")}]`,arrayValues:ae};l(Je=>[...Je,we]),g()}},Zt=()=>{const ae=Number(J),we=Number(ce),Je=Number(Q);if(!isNaN(ae)&&!isNaN(we)&&!isNaN(Je)&&Je>0){const Xe={id:`range_${Date.now()}`,type:"range",content:`${ae}..${we} (step ${Je})`,rangeStart:ae,rangeEnd:we,rangeStep:Je};l(mt=>[...mt,Xe]),D()}},cn=ae=>{const we=Je=>Je.filter(Xe=>Xe.id===ae?!1:(Xe.children&&(Xe.children=we(Xe.children)),!0));l(Je=>we(Je))},ft=ae=>{ae.type==="variable"?(L(ae.id),he("variable")):ae.type==="operator"&&(L(ae.id),he("operator"))},Re=ae=>{H&&(l(we=>we.map(Je=>Je.id===H?{...Je,content:ae.name}:Je)),L(null),he(null))},Ye=ae=>{if(H){const we=a.map(Je=>Je.id===H?{...Je,content:ae}:Je);l(we),L(null),he(null)}},ot=ae=>{const we=[];return _e.forEach(mt=>{mt.name.toLowerCase().includes(ae.toLowerCase())&&we.push({id:mt.id,label:mt.name,type:"variable"})}),[{id:"+",label:"Addition (+)",type:"operator"},{id:"-",label:"Subtraction (-)",type:"operator"},{id:"*",label:"Multiplication (*)",type:"operator"},{id:"/",label:"Division (/)",type:"operator"},{id:"^",label:"Power (^)",type:"operator"},{id:"Math.sqrt",label:"Square Root (Math.sqrt)",type:"operator"},{id:"Math.abs",label:"Absolute Value (Math.abs)",type:"operator"},{id:"Math.round",label:"Round (Math.round)",type:"operator"},{id:"Math.min",label:"Minimum (Math.min)",type:"operator"},{id:"Math.max",label:"Maximum (Math.max)",type:"operator"}].forEach(mt=>{mt.label.toLowerCase().includes(ae.toLowerCase())&&we.push(mt)}),[{id:"pow",label:"Power (a^b)",type:"template"},{id:"sqrt",label:"Square Root",type:"template"},{id:"abs",label:"Absolute Value",type:"template"},{id:"round",label:"Round to Integer",type:"template"},{id:"min",label:"Minimum of Values",type:"template"},{id:"max",label:"Maximum of Values",type:"template"}].forEach(mt=>{mt.label.toLowerCase().includes(ae.toLowerCase())&&we.push(mt)}),we.slice(0,8)},It=ae=>{if(ae.length>=2){const we=ot(ae);Ve(we),De(we.length>0),Dt(0)}else De(!1)},tt=ae=>{if(ae.type==="variable"){const we=_e.find(Je=>Je.id===ae.id);we&&$t(we)}else ae.type==="operator"?fe(ae.id):ae.type==="template"&&Ce(ae.id);De(!1)},Ce=ae=>{const we=[];switch(ae){case"pow":we.push({id:`var_${Date.now()}_1`,type:"variable",content:"base"},{id:`op_${Date.now()}_1`,type:"operator",content:"^"},{id:`var_${Date.now()}_2`,type:"variable",content:"exponent"});break;case"sqrt":we.push({id:`op_${Date.now()}_1`,type:"operator",content:"Math.sqrt"},{id:`group_${Date.now()}_1`,type:"group",content:"()",children:[{id:`var_${Date.now()}_1`,type:"variable",content:"value"}]});break;case"abs":we.push({id:`op_${Date.now()}_1`,type:"operator",content:"Math.abs"},{id:`group_${Date.now()}_1`,type:"group",content:"()",children:[{id:`var_${Date.now()}_1`,type:"variable",content:"value"}]});break;case"round":we.push({id:`op_${Date.now()}_1`,type:"operator",content:"Math.round"},{id:`group_${Date.now()}_1`,type:"group",content:"()",children:[{id:`var_${Date.now()}_1`,type:"variable",content:"value"}]});break;case"min":we.push({id:`op_${Date.now()}_1`,type:"operator",content:"Math.min"},{id:`group_${Date.now()}_1`,type:"group",content:"()",children:[{id:`var_${Date.now()}_1`,type:"variable",content:"value1"},{id:`op_${Date.now()}_2`,type:"operator",content:","},{id:`var_${Date.now()}_2`,type:"variable",content:"value2"}]});break;case"max":we.push({id:`op_${Date.now()}_1`,type:"operator",content:"Math.max"},{id:`group_${Date.now()}_1`,type:"group",content:"()",children:[{id:`var_${Date.now()}_1`,type:"variable",content:"value1"},{id:`op_${Date.now()}_2`,type:"operator",content:","},{id:`var_${Date.now()}_2`,type:"variable",content:"value2"}]});break}l([...a,...we])};P.useEffect(()=>{const ae=At=>{let gn="",rn=0;for(;rn<At.length;){const Xt=At[rn];switch(Xt.type){case"variable":gn+=Xt.content;break;case"operator":if(Xt.content==="^"){const _t=gn.trim();if(rn++,rn<At.length){const yr=ae([At[rn]]),fi=/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(_t),Oi=/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(yr);fi||Oi?gn=`Math.pow(${_t}, ${yr})`:gn+=` ^ ${yr}`}}else gn+=` ${Xt.content} `;break;case"group":gn+=`(${Xt.children?ae(Xt.children):""})`;break;case"value":gn+=Xt.content;break;case"array":Xt.arrayValues&&(gn+=`[${Xt.arrayValues.join(", ")}]`);break;case"range":if(Xt.rangeStart!==void 0&&Xt.rangeEnd!==void 0&&Xt.rangeStep!==void 0){const _t=[];for(let yr=Xt.rangeStart;yr<=Xt.rangeEnd;yr+=Xt.rangeStep)_t.push(yr);gn+=`[${_t.join(", ")}]`}break;default:gn+=""}rn++}return gn.trim()};if(a.length===0){if(t&&t.trim()!==""){const At=iu(t),gn=Sr.parseExpression(t);console.log("FormulaEditor: Converting JavaScript to LaTeX for empty blocks:",{javascript:t,latex:At,ast:gn}),n(t,At,gn)}E("");return}const we=ae(a),Je=iu(we);let Xe;try{Xe=Sr.parseExpression(we),oe([]),ne(Sr.calculateComplexity(Xe))}catch(At){console.error("AST generation error:",At),Xe={type:"literal",value:we,metadata:{astVersion:"1.0.0",validationErrors:[At instanceof Error?At.message:"Unknown error"],complexity:"low"}},oe([At instanceof Error?At.message:"Unknown error"]),ne("low")}const mt=mn(a);E(mt),we!==t&&n(we,Je,Xe)},[a,n,e,r,t]);const Tn=ae=>{let we="",Je=0;for(;Je<ae.length;){const Xe=ae[Je];switch(Xe.type){case"variable":we+=Xe.content;break;case"operator":if(Xe.content==="^"){const mt=we.trim();if(Je++,Je<ae.length){const At=Tn([ae[Je]]),gn=/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(mt),rn=/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(At);gn||rn?we=`Math.pow(${mt}, ${At})`:we+=` ^ ${At}`}}else we+=` ${Xe.content} `;break;case"group":we+=`(${Xe.children?Tn(Xe.children):""})`;break;case"value":we+=Xe.content;break;case"array":Xe.arrayValues&&(we+=`[${Xe.arrayValues.join(", ")}]`);break;case"range":if(Xe.rangeStart!==void 0&&Xe.rangeEnd!==void 0&&Xe.rangeStep!==void 0){const mt=[];for(let At=Xe.rangeStart;At<=Xe.rangeEnd;At+=Xe.rangeStep)mt.push(At);we+=`[${mt.join(", ")}]`}break;default:we+=""}Je++}return we.trim()};P.useEffect(()=>{if(t){const ae=Ws.convertFormulaToNames(t,e),we=au(ae);l(we)}else l([])},[t,e]),P.useEffect(()=>{if(a.length>0){const ae=Tn(a),we=iu(ae);let Je;try{Je=Sr.parseExpression(ae),oe([]),ne(Sr.calculateComplexity(Je))}catch(Xe){console.error("AST generation error:",Xe),Je={type:"literal",value:ae,metadata:{astVersion:"1.0.0",validationErrors:[Xe instanceof Error?Xe.message:"Unknown error"],complexity:"low"}},oe([Xe instanceof Error?Xe.message:"Unknown error"]),ne("low")}n(ae,we,Je)}else n("","",{type:"literal",value:"",metadata:{astVersion:"1.0.0",validationErrors:[],complexity:"low"}})},[a,n,e]);const Cr=()=>{if(a.length!==0)try{const ae=Tn(a),we=Sr.parseExpression(ae),Je=Sr.optimizeExpression(we),Xe=Sr.generateCode(Je),mt=[],At=Sr.calculateComplexity(we),gn=Sr.calculateComplexity(Je);if(gn!==At&&mt.push(`Complexity reduced from ${At} to ${gn}`),ae!==Xe&&mt.push("Expression simplified"),Je.type==="literal"&&we.type!=="literal"&&mt.push("Constant expression evaluated"),pn({original:ae,optimized:Xe,improvements:mt}),mt.length>0){const rn=au(Xe);l(rn)}}catch(ae){console.warn("Optimization failed:",ae),pn({original:Tn(a),optimized:Tn(a),improvements:["No optimizations found"]})}};return s.jsxs(Z,{children:[s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{spacing:2,wrap:"wrap",children:[s.jsxs(Z,{position:"relative",flex:"1",maxW:"300px",children:[s.jsx(dt,{placeholder:"Type to search variables, operators, or templates...",size:"sm",onChange:ae=>It(ae.target.value),onKeyDown:ae=>{ae.key==="ArrowDown"?(ae.preventDefault(),Dt(we=>we<Pe.length-1?we+1:0)):ae.key==="ArrowUp"?(ae.preventDefault(),Dt(we=>we>0?we-1:Pe.length-1)):ae.key==="Enter"&&be&&Pe.length>0?(ae.preventDefault(),tt(Pe[ct])):ae.key==="Escape"&&De(!1)}}),be&&Pe.length>0&&s.jsx(Z,{position:"absolute",top:"100%",left:0,right:0,bg:i==="dark"?"gray.800":"white",border:"1px solid",borderColor:i==="dark"?"gray.600":"gray.200",borderRadius:"md",boxShadow:"lg",zIndex:1e3,maxH:"200px",overflowY:"auto",children:Pe.map((ae,we)=>s.jsx(Z,{px:3,py:2,cursor:"pointer",bg:we===ct?i==="dark"?"blue.600":"blue.100":"transparent",_hover:{bg:i==="dark"?"blue.600":"blue.100"},onClick:()=>tt(ae),children:s.jsxs(xe,{spacing:2,children:[s.jsx(Z,{fontSize:"sm",fontWeight:"medium",children:ae.label}),s.jsx(ht,{size:"sm",colorScheme:ae.type==="variable"?"green":ae.type==="operator"?"blue":"purple",children:ae.type})]})},ae.id))})]}),s.jsxs(Ea,{children:[s.jsxs($c,{as:Ne,size:"sm",rightIcon:s.jsx(Qo,{size:16}),leftIcon:s.jsx(wl,{size:16}),children:["Variable (",_e.length,")"]}),s.jsxs(Ma,{children:[q.length>0&&s.jsxs(s.Fragment,{children:[q.map(ae=>s.jsxs(Pr,{onClick:()=>$t(ae),icon:s.jsx(Ur,{size:16}),children:[ae.name,ae.id==="system_n"&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"green",children:"Built-in"}),ae.id!=="system_n"&&ae.id.startsWith("system-")&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"blue",children:"System"})]},ae.id)),e.length>0&&s.jsx(us,{})]}),e.map(ae=>s.jsx(Pr,{onClick:()=>$t(ae),icon:s.jsx(Ur,{size:16}),children:ae.name},ae.id))]})]}),s.jsxs(Ea,{children:[s.jsx($c,{as:Ne,rightIcon:s.jsx(Qo,{size:16}),leftIcon:r==="formula"?s.jsx(Zs,{size:16}):s.jsx($4,{size:16}),size:"sm",children:r==="formula"?"Math Operator":"Condition"}),s.jsx(Ma,{children:Ft})]}),s.jsx(Ne,{"aria-label":"Add parentheses group",leftIcon:s.jsx(T4,{size:16}),size:"sm",onClick:Ee,children:"Parentheses"}),s.jsx(Ne,{"aria-label":"Add value",leftIcon:s.jsx(Q4,{size:16}),size:"sm",onClick:ye,children:"Value"}),s.jsx(Ne,{"aria-label":"Add array",leftIcon:s.jsx(Zs,{size:16}),size:"sm",onClick:Ue,children:"Array"}),s.jsx(Ne,{"aria-label":"Add range",leftIcon:s.jsx(Zs,{size:16}),size:"sm",onClick:Fe,children:"Range"}),s.jsxs(Ea,{children:[s.jsx($c,{as:Ne,rightIcon:s.jsx(Qo,{size:16}),leftIcon:s.jsx(Zs,{size:16}),size:"sm",children:"Templates"}),s.jsxs(Ma,{children:[s.jsx(Pr,{onClick:()=>Ce("pow"),children:"Power (a^b)"}),s.jsx(Pr,{onClick:()=>Ce("sqrt"),children:"Square Root"}),s.jsx(Pr,{onClick:()=>Ce("abs"),children:"Absolute Value"}),s.jsx(Pr,{onClick:()=>Ce("round"),children:"Round to Integer"}),s.jsx(Pr,{onClick:()=>Ce("min"),children:"Minimum of Values"}),s.jsx(Pr,{onClick:()=>Ce("max"),children:"Maximum of Values"})]})]}),s.jsx(Ne,{"aria-label":"Optimize expression",leftIcon:s.jsx(Zs,{size:16}),size:"sm",onClick:Cr,colorScheme:"green",children:"Optimize"})]}),s.jsx(Z,{p:4,bg:i==="dark"?"gray.800":"gray.50",borderRadius:"md",minH:"100px",children:s.jsx(Xl,{onDragEnd:Wt,onDragStart:ln,onDragUpdate:Ut,children:s.jsx(Kl,{droppableId:"formula-blocks",direction:"horizontal",children:ae=>s.jsxs(xe,{ref:ae.innerRef,...ae.droppableProps,spacing:2,wrap:"wrap",minH:"60px",align:"start",children:[a.map((we,Je)=>s.jsx(V8,{block:we,index:Je,onDelete:cn,colorMode:i,isGroupDropTarget:M===we.id,onClick:ft},we.id)),ae.placeholder]})})})}),T&&s.jsxs(Gn,{status:"warning",borderRadius:"md",children:[s.jsx(qn,{}),s.jsx(ls,{fontSize:"sm",children:T})]}),ge.length>0&&s.jsxs(Gn,{status:"error",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(yh,{fontSize:"sm",children:"Syntax Errors"}),s.jsx(ls,{fontSize:"sm",children:ge.map((ae,we)=>s.jsxs(Z,{color:"red.200",children:[" ",ae]},we))})]})]}),Se!=="low"&&s.jsxs(Gn,{status:Se==="high"?"warning":"info",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(ls,{fontSize:"sm",children:["Formula complexity: ",s.jsx(ht,{colorScheme:Se==="high"?"orange":"blue",children:Se}),Se==="high"&&" - Consider breaking into smaller expressions"]})]}),Qt&&s.jsxs(Gn,{status:"success",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(me,{align:"start",spacing:2,children:[s.jsx(yh,{fontSize:"sm",children:"Optimization Applied"}),s.jsx(ls,{fontSize:"sm",children:s.jsxs(me,{align:"start",spacing:1,children:[s.jsxs(Z,{children:[s.jsx("strong",{children:"Original:"})," ",s.jsx("code",{children:Qt.original})]}),s.jsxs(Z,{children:[s.jsx("strong",{children:"Optimized:"})," ",s.jsx("code",{children:Qt.optimized})]}),Qt.improvements.length>0&&s.jsxs(Z,{children:[s.jsx("strong",{children:"Improvements:"}),Qt.improvements.map((ae,we)=>s.jsxs(Z,{ml:2,color:"green.200",children:[" ",ae]},we))]})]})})]})]})]}),s.jsxs(Hn,{isOpen:u,onClose:f,children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:"Enter Value"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,pb:4,children:[s.jsx(dt,{placeholder:"Enter a value",onChange:ae=>{j&&S({...j,content:ae.target.value,value:ae.target.value})}}),s.jsx(Ne,{leftIcon:s.jsx(qc,{size:16}),colorScheme:"blue",onClick:()=>j&&Ge(j.value||""),children:"Add Value"})]})})]})]}),s.jsxs(Hn,{isOpen:m,onClose:g,children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:"Create Array"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,pb:4,children:[s.jsx(dt,{placeholder:"Enter numbers separated by commas (e.g., 1, 2, 3, 4, 5)",value:I,onChange:ae=>W(ae.target.value)}),s.jsx(Ne,{leftIcon:s.jsx(qc,{size:16}),colorScheme:"blue",onClick:Et,children:"Create Array"})]})})]})]}),s.jsxs(Hn,{isOpen:v,onClose:D,children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:"Create Range"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,pb:4,children:[s.jsxs(xe,{spacing:2,children:[s.jsx(dt,{placeholder:"Start",value:J,onChange:ae=>le(ae.target.value)}),s.jsx(dt,{placeholder:"End",value:ce,onChange:ae=>F(ae.target.value)}),s.jsx(dt,{placeholder:"Step",value:Q,onChange:ae=>de(ae.target.value)})]}),s.jsx(Ne,{leftIcon:s.jsx(qc,{size:16}),colorScheme:"blue",onClick:Zt,children:"Create Range"})]})})]})]}),s.jsx(Ea,{isOpen:X==="variable",onClose:()=>he(null),children:s.jsxs(Ma,{children:[q.length>0&&s.jsxs(s.Fragment,{children:[q.map(ae=>s.jsxs(Pr,{onClick:()=>Re(ae),icon:s.jsx(Ur,{size:16}),children:[ae.name,ae.id==="system_n"&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"green",children:"Built-in"}),ae.id!=="system_n"&&ae.id.startsWith("system-")&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"blue",children:"System"})]},ae.id)),e.length>0&&s.jsx(us,{})]}),e.map(ae=>s.jsx(Pr,{onClick:()=>Re(ae),icon:s.jsx(Ur,{size:16}),children:ae.name},ae.id))]})}),s.jsx(Ea,{isOpen:X==="operator",onClose:()=>he(null),children:s.jsx(Ma,{children:pt.map(ae=>s.jsx(Pr,{onClick:()=>Ye(ae.id),children:ae.label},ae.id))})})]})};function au(e){if(!e||e.trim()==="")return[];if(e.includes("Math.pow(")){let n=e;const r=e.match(/Math\.pow\(([^,]+),\s*([^)]+)\)/g);return r&&r.forEach(i=>{const a=i.match(/Math\.pow\(([^,]+),\s*([^)]+)\)/);if(a){const l=a[1].trim(),u=a[2].trim(),h=`${l} ^ ${u}`;n=n.replace(i,h)}}),tl(n)}if(/\[.*\]|\d+\.\.\d+/.test(e)){const n=P8(e);return[...tl(e),...n]}return tl(e)}function z8(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(/\s/.test(r)){n++;continue}if(/\d/.test(r)){let i="";for(;n<e.length&&/\d|\./.test(e[n]);)i+=e[n],n++;t.push({type:"number",value:i,position:n-i.length});continue}if(/[+\-*/^=<>!&|]/.test(r)){let i=r;if(n++,n<e.length){const a=e[n];(r==="="&&a==="="||r==="!"&&a==="="||r==="<"&&a==="="||r===">"&&a==="="||r==="&"&&a==="&"||r==="|"&&a==="|")&&(i+=a,n++)}t.push({type:"operator",value:i,position:n-i.length});continue}if(r==="("||r===")"){t.push({type:"parenthesis",value:r,position:n}),n++;continue}if(/[a-zA-Z_]/.test(r)){let i="";for(;n<e.length&&/[a-zA-Z0-9_]/.test(e[n]);)i+=e[n],n++;t.push({type:"variable",value:i,position:n-i.length});continue}n++}return t}function tl(e){const t=z8(e),n=[];let r=0;for(;r<t.length;){const i=t[r];switch(i.type){case"variable":if(i.value==="Math"&&r+2<t.length&&t[r+1].value==="."&&t[r+2].type==="variable"){const a=t[r+2].value;n.push({id:`op_${Date.now()}_${Math.random()}`,type:"operator",content:`Math.${a}`}),r+=2}else n.push({id:`var_${Date.now()}_${Math.random()}`,type:"variable",content:i.value});break;case"number":n.push({id:`value_${Date.now()}_${Math.random()}`,type:"value",content:i.value,value:parseFloat(i.value)});break;case"operator":i.value==="^"?n.push({id:`op_${Date.now()}_${Math.random()}`,type:"operator",content:"^"}):n.push({id:`op_${Date.now()}_${Math.random()}`,type:"operator",content:i.value});break;case"parenthesis":if(i.value==="("){let a=1,l=r+1,u="";for(;l<t.length&&a>0;)t[l].value==="("&&a++,t[l].value===")"&&a--,a>0&&(u+=t[l].value),l++;if(a===0){const h=tl(u);n.push({id:`group_${Date.now()}_${Math.random()}`,type:"group",content:"()",children:h}),r=l-1}else n.push({id:`var_${Date.now()}_${Math.random()}`,type:"variable",content:i.value})}break}r++}return n}function P8(e){const t=[],n=/\[([^\]]+)\]/g;let r;for(;(r=n.exec(e))!==null;){const u=r[1].split(",").map(h=>h.trim()).map(h=>Number(h)).filter(h=>!isNaN(h));u.length>0&&t.push({id:`array_${Date.now()}_${Math.random()}`,type:"array",content:r[0],arrayValues:u})}const i=/(\d+)\.\.(\d+)(?::(\d+))?/g;let a;for(;(a=i.exec(e))!==null;){const l=Number(a[1]),u=Number(a[2]),h=a[3]?Number(a[3]):1;!isNaN(l)&&!isNaN(u)&&!isNaN(h)&&t.push({id:`range_${Date.now()}_${Math.random()}`,type:"range",content:`${l}..${u} (step ${h})`,rangeStart:l,rangeEnd:u,rangeStep:h})}return t}var Ku={exports:{}},ou={exports:{}},zf;function B8(){return zf||(zf=1,function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:Np,function(){return function(){var n={};(function(){n.d=function(c,o){for(var d in o)n.o(o,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:o[d]})}})(),function(){n.o=function(c,o){return Object.prototype.hasOwnProperty.call(c,o)}}();var r={};n.d(r,{default:function(){return zx}});class i{constructor(o,d){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let p="KaTeX parse error: "+o,y,w;const C=d&&d.loc;if(C&&C.start<=C.end){const z=C.lexer.input;y=C.start,w=C.end,y===z.length?p+=" at end of input: ":p+=" at position "+(y+1)+": ";const U=z.slice(y,w).replace(/[^]/g,"$&");let te;y>15?te=""+z.slice(y-15,y):te=z.slice(0,y);let re;w+15<z.length?re=z.slice(w,w+15)+"":re=z.slice(w),p+=te+U+re}const O=new Error(p);return O.name="ParseError",O.__proto__=i.prototype,O.position=y,y!=null&&w!=null&&(O.length=w-y),O.rawMessage=o,O}}i.prototype.__proto__=Error.prototype;var a=i;const l=function(c,o){return c.indexOf(o)!==-1},u=function(c,o){return c===void 0?o:c},h=/([A-Z])/g,f=function(c){return c.replace(h,"-$1").toLowerCase()},m={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},x=/[&><"']/g;function g(c){return String(c).replace(x,o=>m[o])}const v=function(c){return c.type==="ordgroup"||c.type==="color"?c.body.length===1?v(c.body[0]):c:c.type==="font"?v(c.body):c},N=function(c){const o=v(c);return o.type==="mathord"||o.type==="textord"||o.type==="atom"},D=function(c){if(!c)throw new Error("Expected non-null, but got "+String(c));return c};var S={contains:l,deflt:u,escape:g,hyphenate:f,getBaseElem:v,isCharacterBox:N,protocolFromUrl:function(c){const o=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(c);return o?o[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(o[1])?null:o[1].toLowerCase():"_relative"}};const T={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:c=>"#"+c},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(c,o)=>(o.push(c),o)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:c=>Math.max(0,c),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:c=>Math.max(0,c),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:c=>Math.max(0,c),cli:"-e, --max-expand <n>",cliProcessor:c=>c==="Infinity"?1/0:parseInt(c)},globalGroup:{type:"boolean",cli:!1}};function E(c){if(c.default)return c.default;const o=c.type,d=Array.isArray(o)?o[0]:o;if(typeof d!="string")return d.enum[0];switch(d){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class M{constructor(o){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,o=o||{};for(const d in T)if(T.hasOwnProperty(d)){const p=T[d];this[d]=o[d]!==void 0?p.processor?p.processor(o[d]):o[d]:E(p)}}reportNonstrict(o,d,p){let y=this.strict;if(typeof y=="function"&&(y=y(o,d,p)),!(!y||y==="ignore")){if(y===!0||y==="error")throw new a("LaTeX-incompatible input and strict mode is set to 'error': "+(d+" ["+o+"]"),p);y==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(d+" ["+o+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+y+"': "+d+" ["+o+"]"))}}useStrictBehavior(o,d,p){let y=this.strict;if(typeof y=="function")try{y=y(o,d,p)}catch{y="error"}return!y||y==="ignore"?!1:y===!0||y==="error"?!0:y==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(d+" ["+o+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+y+"': "+d+" ["+o+"]")),!1)}isTrusted(o){if(o.url&&!o.protocol){const p=S.protocolFromUrl(o.url);if(p==null)return!1;o.protocol=p}return!!(typeof this.trust=="function"?this.trust(o):this.trust)}}class A{constructor(o,d,p){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=o,this.size=d,this.cramped=p}sup(){return q[pe[this.id]]}sub(){return q[H[this.id]]}fracNum(){return q[L[this.id]]}fracDen(){return q[X[this.id]]}cramp(){return q[he[this.id]]}text(){return q[ge[this.id]]}isTight(){return this.size>=2}}const I=0,W=1,J=2,le=3,ce=4,F=5,Q=6,de=7,q=[new A(I,0,!1),new A(W,0,!0),new A(J,1,!1),new A(le,1,!0),new A(ce,2,!1),new A(F,2,!0),new A(Q,3,!1),new A(de,3,!0)],pe=[ce,F,ce,F,Q,de,Q,de],H=[F,F,F,F,de,de,de,de],L=[J,le,ce,F,Q,de,Q,de],X=[le,le,F,F,de,de,de,de],he=[W,W,le,le,F,F,de,de],ge=[I,W,J,le,J,le,J,le];var oe={DISPLAY:q[I],TEXT:q[J],SCRIPT:q[ce],SCRIPTSCRIPT:q[Q]};const Se=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function ne(c){for(let o=0;o<Se.length;o++){const d=Se[o];for(let p=0;p<d.blocks.length;p++){const y=d.blocks[p];if(c>=y[0]&&c<=y[1])return d.name}}return null}const be=[];Se.forEach(c=>c.blocks.forEach(o=>be.push(...o)));function De(c){for(let o=0;o<be.length;o+=2)if(c>=be[o]&&c<=be[o+1])return!0;return!1}const Pe=80,Ve=function(c,o){return"M95,"+(622+c+o)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+c/2.075+" -"+c+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+c)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+c)+" "+o+"h400000v"+(40+c)+"h-400000z"},ct=function(c,o){return"M263,"+(601+c+o)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+c/2.084+" -"+c+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+c)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+c)+" "+o+"h400000v"+(40+c)+"h-400000z"},Dt=function(c,o){return"M983 "+(10+c+o)+`
l`+c/3.13+" -"+c+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+c)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+c)+" "+o+"h400000v"+(40+c)+"h-400000z"},Qt=function(c,o){return"M424,"+(2398+c+o)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+c/4.223+" -"+c+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+c)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+c)+" "+o+`
h400000v`+(40+c)+"h-400000z"},pn=function(c,o){return"M473,"+(2713+c+o)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+c/5.298+" -"+c+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+c)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+c)+" "+o+"h400000v"+(40+c)+"H1017.7z"},_e=function(c){const o=c/2;return"M400000 "+c+" H0 L"+o+" 0 l65 45 L145 "+(c-80)+" H400000z"},pt=function(c,o,d){const p=d-54-o-c;return"M702 "+(c+o)+"H400000"+(40+c)+`
H742v`+p+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+o+"H400000v"+(40+c)+"H742z"},Ft=function(c,o,d){o=1e3*o;let p="";switch(c){case"sqrtMain":p=Ve(o,Pe);break;case"sqrtSize1":p=ct(o,Pe);break;case"sqrtSize2":p=Dt(o,Pe);break;case"sqrtSize3":p=Qt(o,Pe);break;case"sqrtSize4":p=pn(o,Pe);break;case"sqrtTall":p=pt(o,Pe,d)}return p},mn=function(c,o){switch(c){case"":return"M291 0 H417 V"+o+" H291z M291 0 H417 V"+o+" H291z";case"":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z";case"":return"M145 0 H188 V"+o+" H145z M145 0 H188 V"+o+" H145z"+("M367 0 H410 V"+o+" H367z M367 0 H410 V"+o+" H367z");case"":return"M457 0 H583 V"+o+" H457z M457 0 H583 V"+o+" H457z";case"":return"M319 0 H403 V"+o+" H319z M319 0 H403 V"+o+" H319z";case"":return"M263 0 H347 V"+o+" H263z M263 0 H347 V"+o+" H263z";case"":return"M384 0 H504 V"+o+" H384z M384 0 H504 V"+o+" H384z";case"":return"M312 0 H355 V"+o+" H312z M312 0 H355 V"+o+" H312z";case"":return"M257 0 H300 V"+o+" H257z M257 0 H300 V"+o+" H257z"+("M478 0 H521 V"+o+" H478z M478 0 H521 V"+o+" H478z");default:return""}},Wt={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},ln=function(c,o){switch(c){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+o+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+o+" v1759 h84z";case"vert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+" v585 h43z";case"doublevert":return"M145 15 v585 v"+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+o+` v585 h43z
M367 15 v585 v`+o+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-o+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+o+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+o+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+o+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+o+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+o+` v602 h84z
M403 1759 V0 H319 V1759 v`+o+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+o+` v602 h84z
M347 1759 V0 h-84 V1759 v`+o+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(o+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(o+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(o+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(o+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ut{constructor(o){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=o,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(o){return S.contains(this.classes,o)}toNode(){const o=document.createDocumentFragment();for(let d=0;d<this.children.length;d++)o.appendChild(this.children[d].toNode());return o}toMarkup(){let o="";for(let d=0;d<this.children.length;d++)o+=this.children[d].toMarkup();return o}toText(){const o=d=>d.toText();return this.children.map(o).join("")}}var $t={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const fe={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Ee={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function ye(c,o){$t[c]=o}function Ue(c,o,d){if(!$t[o])throw new Error("Font metrics not found for font: "+o+".");let p=c.charCodeAt(0),y=$t[o][p];if(!y&&c[0]in Ee&&(p=Ee[c[0]].charCodeAt(0),y=$t[o][p]),!y&&d==="text"&&De(p)&&(y=$t[o][77]),y)return{depth:y[0],height:y[1],italic:y[2],skew:y[3],width:y[4]}}const Fe={};function Ge(c){let o;if(c>=5?o=0:c>=3?o=1:o=2,!Fe[o]){const d=Fe[o]={cssEmPerMu:fe.quad[o]/18};for(const p in fe)fe.hasOwnProperty(p)&&(d[p]=fe[p][o])}return Fe[o]}const Et=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Zt=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],cn=function(c,o){return o.size<2?c:Et[c-1][o.size-1]};class ft{constructor(o){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=o.style,this.color=o.color,this.size=o.size||ft.BASESIZE,this.textSize=o.textSize||this.size,this.phantom=!!o.phantom,this.font=o.font||"",this.fontFamily=o.fontFamily||"",this.fontWeight=o.fontWeight||"",this.fontShape=o.fontShape||"",this.sizeMultiplier=Zt[this.size-1],this.maxSize=o.maxSize,this.minRuleThickness=o.minRuleThickness,this._fontMetrics=void 0}extend(o){const d={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const p in o)o.hasOwnProperty(p)&&(d[p]=o[p]);return new ft(d)}havingStyle(o){return this.style===o?this:this.extend({style:o,size:cn(this.textSize,o)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(o){return this.size===o&&this.textSize===o?this:this.extend({style:this.style.text(),size:o,textSize:o,sizeMultiplier:Zt[o-1]})}havingBaseStyle(o){o=o||this.style.text();const d=cn(ft.BASESIZE,o);return this.size===d&&this.textSize===ft.BASESIZE&&this.style===o?this:this.extend({style:o,size:d})}havingBaseSizing(){let o;switch(this.style.id){case 4:case 5:o=3;break;case 6:case 7:o=1;break;default:o=6}return this.extend({style:this.style.text(),size:o})}withColor(o){return this.extend({color:o})}withPhantom(){return this.extend({phantom:!0})}withFont(o){return this.extend({font:o})}withTextFontFamily(o){return this.extend({fontFamily:o,font:""})}withTextFontWeight(o){return this.extend({fontWeight:o,font:""})}withTextFontShape(o){return this.extend({fontShape:o,font:""})}sizingClasses(o){return o.size!==this.size?["sizing","reset-size"+o.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ft.BASESIZE?["sizing","reset-size"+this.size,"size"+ft.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ge(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ft.BASESIZE=6;var Re=ft;const Ye={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},ot={ex:!0,em:!0,mu:!0},It=function(c){return typeof c!="string"&&(c=c.unit),c in Ye||c in ot||c==="ex"},tt=function(c,o){let d;if(c.unit in Ye)d=Ye[c.unit]/o.fontMetrics().ptPerEm/o.sizeMultiplier;else if(c.unit==="mu")d=o.fontMetrics().cssEmPerMu;else{let p;if(o.style.isTight()?p=o.havingStyle(o.style.text()):p=o,c.unit==="ex")d=p.fontMetrics().xHeight;else if(c.unit==="em")d=p.fontMetrics().quad;else throw new a("Invalid unit: '"+c.unit+"'");p!==o&&(d*=p.sizeMultiplier/o.sizeMultiplier)}return Math.min(c.number*d,o.maxSize)},Ce=function(c){return+c.toFixed(4)+"em"},Tn=function(c){return c.filter(o=>o).join(" ")},Cr=function(c,o,d){if(this.classes=c||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=d||{},o){o.style.isTight()&&this.classes.push("mtight");const p=o.getColor();p&&(this.style.color=p)}},ae=function(c){const o=document.createElement(c);o.className=Tn(this.classes);for(const d in this.style)this.style.hasOwnProperty(d)&&(o.style[d]=this.style[d]);for(const d in this.attributes)this.attributes.hasOwnProperty(d)&&o.setAttribute(d,this.attributes[d]);for(let d=0;d<this.children.length;d++)o.appendChild(this.children[d].toNode());return o},we=/[\s"'>/=\x00-\x1f]/,Je=function(c){let o="<"+c;this.classes.length&&(o+=' class="'+S.escape(Tn(this.classes))+'"');let d="";for(const p in this.style)this.style.hasOwnProperty(p)&&(d+=S.hyphenate(p)+":"+this.style[p]+";");d&&(o+=' style="'+S.escape(d)+'"');for(const p in this.attributes)if(this.attributes.hasOwnProperty(p)){if(we.test(p))throw new a("Invalid attribute name '"+p+"'");o+=" "+p+'="'+S.escape(this.attributes[p])+'"'}o+=">";for(let p=0;p<this.children.length;p++)o+=this.children[p].toMarkup();return o+="</"+c+">",o};class Xe{constructor(o,d,p,y){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Cr.call(this,o,p,y),this.children=d||[]}setAttribute(o,d){this.attributes[o]=d}hasClass(o){return S.contains(this.classes,o)}toNode(){return ae.call(this,"span")}toMarkup(){return Je.call(this,"span")}}class mt{constructor(o,d,p,y){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Cr.call(this,d,y),this.children=p||[],this.setAttribute("href",o)}setAttribute(o,d){this.attributes[o]=d}hasClass(o){return S.contains(this.classes,o)}toNode(){return ae.call(this,"a")}toMarkup(){return Je.call(this,"a")}}class At{constructor(o,d,p){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=d,this.src=o,this.classes=["mord"],this.style=p}hasClass(o){return S.contains(this.classes,o)}toNode(){const o=document.createElement("img");o.src=this.src,o.alt=this.alt,o.className="mord";for(const d in this.style)this.style.hasOwnProperty(d)&&(o.style[d]=this.style[d]);return o}toMarkup(){let o='<img src="'+S.escape(this.src)+'"'+(' alt="'+S.escape(this.alt)+'"'),d="";for(const p in this.style)this.style.hasOwnProperty(p)&&(d+=S.hyphenate(p)+":"+this.style[p]+";");return d&&(o+=' style="'+S.escape(d)+'"'),o+="'/>",o}}const gn={:"",:"",:"",:""};class rn{constructor(o,d,p,y,w,C,O,z){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=o,this.height=d||0,this.depth=p||0,this.italic=y||0,this.skew=w||0,this.width=C||0,this.classes=O||[],this.style=z||{},this.maxFontSize=0;const U=ne(this.text.charCodeAt(0));U&&this.classes.push(U+"_fallback"),/[]/.test(this.text)&&(this.text=gn[this.text])}hasClass(o){return S.contains(this.classes,o)}toNode(){const o=document.createTextNode(this.text);let d=null;this.italic>0&&(d=document.createElement("span"),d.style.marginRight=Ce(this.italic)),this.classes.length>0&&(d=d||document.createElement("span"),d.className=Tn(this.classes));for(const p in this.style)this.style.hasOwnProperty(p)&&(d=d||document.createElement("span"),d.style[p]=this.style[p]);return d?(d.appendChild(o),d):o}toMarkup(){let o=!1,d="<span";this.classes.length&&(o=!0,d+=' class="',d+=S.escape(Tn(this.classes)),d+='"');let p="";this.italic>0&&(p+="margin-right:"+this.italic+"em;");for(const w in this.style)this.style.hasOwnProperty(w)&&(p+=S.hyphenate(w)+":"+this.style[w]+";");p&&(o=!0,d+=' style="'+S.escape(p)+'"');const y=S.escape(this.text);return o?(d+=">",d+=y,d+="</span>",d):y}}class Xt{constructor(o,d){this.children=void 0,this.attributes=void 0,this.children=o||[],this.attributes=d||{}}toNode(){const d=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const p in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,p)&&d.setAttribute(p,this.attributes[p]);for(let p=0;p<this.children.length;p++)d.appendChild(this.children[p].toNode());return d}toMarkup(){let o='<svg xmlns="http://www.w3.org/2000/svg"';for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(o+=" "+d+'="'+S.escape(this.attributes[d])+'"');o+=">";for(let d=0;d<this.children.length;d++)o+=this.children[d].toMarkup();return o+="</svg>",o}}class _t{constructor(o,d){this.pathName=void 0,this.alternate=void 0,this.pathName=o,this.alternate=d}toNode(){const d=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?d.setAttribute("d",this.alternate):d.setAttribute("d",Wt[this.pathName]),d}toMarkup(){return this.alternate?'<path d="'+S.escape(this.alternate)+'"/>':'<path d="'+S.escape(Wt[this.pathName])+'"/>'}}class yr{constructor(o){this.attributes=void 0,this.attributes=o||{}}toNode(){const d=document.createElementNS("http://www.w3.org/2000/svg","line");for(const p in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,p)&&d.setAttribute(p,this.attributes[p]);return d}toMarkup(){let o="<line";for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(o+=" "+d+'="'+S.escape(this.attributes[d])+'"');return o+="/>",o}}function fi(c){if(c instanceof rn)return c;throw new Error("Expected symbolNode but got "+String(c)+".")}function Oi(c){if(c instanceof Xe)return c;throw new Error("Expected span<HtmlDomNode> but got "+String(c)+".")}const ko={bin:1,close:1,inner:1,open:1,punct:1,rel:1},jo={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pi={math:{},text:{}};var xn=pi;function b(c,o,d,p,y,w){pi[c][y]={font:o,group:d,replace:p},w&&p&&(pi[c][p]=pi[c][y])}const k="math",ke="text",_="main",$="ams",un="accent-token",qe="bin",Zn="close",ws="inner",ut="mathord",In="op-token",tr="open",mi="punct",G="rel",Dr="spacing",K="textord";b(k,_,G,"","\\equiv",!0),b(k,_,G,"","\\prec",!0),b(k,_,G,"","\\succ",!0),b(k,_,G,"","\\sim",!0),b(k,_,G,"","\\perp"),b(k,_,G,"","\\preceq",!0),b(k,_,G,"","\\succeq",!0),b(k,_,G,"","\\simeq",!0),b(k,_,G,"","\\mid",!0),b(k,_,G,"","\\ll",!0),b(k,_,G,"","\\gg",!0),b(k,_,G,"","\\asymp",!0),b(k,_,G,"","\\parallel"),b(k,_,G,"","\\bowtie",!0),b(k,_,G,"","\\smile",!0),b(k,_,G,"","\\sqsubseteq",!0),b(k,_,G,"","\\sqsupseteq",!0),b(k,_,G,"","\\doteq",!0),b(k,_,G,"","\\frown",!0),b(k,_,G,"","\\ni",!0),b(k,_,G,"","\\propto",!0),b(k,_,G,"","\\vdash",!0),b(k,_,G,"","\\dashv",!0),b(k,_,G,"","\\owns"),b(k,_,mi,".","\\ldotp"),b(k,_,mi,"","\\cdotp"),b(k,_,K,"#","\\#"),b(ke,_,K,"#","\\#"),b(k,_,K,"&","\\&"),b(ke,_,K,"&","\\&"),b(k,_,K,"","\\aleph",!0),b(k,_,K,"","\\forall",!0),b(k,_,K,"","\\hbar",!0),b(k,_,K,"","\\exists",!0),b(k,_,K,"","\\nabla",!0),b(k,_,K,"","\\flat",!0),b(k,_,K,"","\\ell",!0),b(k,_,K,"","\\natural",!0),b(k,_,K,"","\\clubsuit",!0),b(k,_,K,"","\\wp",!0),b(k,_,K,"","\\sharp",!0),b(k,_,K,"","\\diamondsuit",!0),b(k,_,K,"","\\Re",!0),b(k,_,K,"","\\heartsuit",!0),b(k,_,K,"","\\Im",!0),b(k,_,K,"","\\spadesuit",!0),b(k,_,K,"","\\S",!0),b(ke,_,K,"","\\S"),b(k,_,K,"","\\P",!0),b(ke,_,K,"","\\P"),b(k,_,K,"","\\dag"),b(ke,_,K,"","\\dag"),b(ke,_,K,"","\\textdagger"),b(k,_,K,"","\\ddag"),b(ke,_,K,"","\\ddag"),b(ke,_,K,"","\\textdaggerdbl"),b(k,_,Zn,"","\\rmoustache",!0),b(k,_,tr,"","\\lmoustache",!0),b(k,_,Zn,"","\\rgroup",!0),b(k,_,tr,"","\\lgroup",!0),b(k,_,qe,"","\\mp",!0),b(k,_,qe,"","\\ominus",!0),b(k,_,qe,"","\\uplus",!0),b(k,_,qe,"","\\sqcap",!0),b(k,_,qe,"","\\ast"),b(k,_,qe,"","\\sqcup",!0),b(k,_,qe,"","\\bigcirc",!0),b(k,_,qe,"","\\bullet",!0),b(k,_,qe,"","\\ddagger"),b(k,_,qe,"","\\wr",!0),b(k,_,qe,"","\\amalg"),b(k,_,qe,"&","\\And"),b(k,_,G,"","\\longleftarrow",!0),b(k,_,G,"","\\Leftarrow",!0),b(k,_,G,"","\\Longleftarrow",!0),b(k,_,G,"","\\longrightarrow",!0),b(k,_,G,"","\\Rightarrow",!0),b(k,_,G,"","\\Longrightarrow",!0),b(k,_,G,"","\\leftrightarrow",!0),b(k,_,G,"","\\longleftrightarrow",!0),b(k,_,G,"","\\Leftrightarrow",!0),b(k,_,G,"","\\Longleftrightarrow",!0),b(k,_,G,"","\\mapsto",!0),b(k,_,G,"","\\longmapsto",!0),b(k,_,G,"","\\nearrow",!0),b(k,_,G,"","\\hookleftarrow",!0),b(k,_,G,"","\\hookrightarrow",!0),b(k,_,G,"","\\searrow",!0),b(k,_,G,"","\\leftharpoonup",!0),b(k,_,G,"","\\rightharpoonup",!0),b(k,_,G,"","\\swarrow",!0),b(k,_,G,"","\\leftharpoondown",!0),b(k,_,G,"","\\rightharpoondown",!0),b(k,_,G,"","\\nwarrow",!0),b(k,_,G,"","\\rightleftharpoons",!0),b(k,$,G,"","\\nless",!0),b(k,$,G,"","\\@nleqslant"),b(k,$,G,"","\\@nleqq"),b(k,$,G,"","\\lneq",!0),b(k,$,G,"","\\lneqq",!0),b(k,$,G,"","\\@lvertneqq"),b(k,$,G,"","\\lnsim",!0),b(k,$,G,"","\\lnapprox",!0),b(k,$,G,"","\\nprec",!0),b(k,$,G,"","\\npreceq",!0),b(k,$,G,"","\\precnsim",!0),b(k,$,G,"","\\precnapprox",!0),b(k,$,G,"","\\nsim",!0),b(k,$,G,"","\\@nshortmid"),b(k,$,G,"","\\nmid",!0),b(k,$,G,"","\\nvdash",!0),b(k,$,G,"","\\nvDash",!0),b(k,$,G,"","\\ntriangleleft"),b(k,$,G,"","\\ntrianglelefteq",!0),b(k,$,G,"","\\subsetneq",!0),b(k,$,G,"","\\@varsubsetneq"),b(k,$,G,"","\\subsetneqq",!0),b(k,$,G,"","\\@varsubsetneqq"),b(k,$,G,"","\\ngtr",!0),b(k,$,G,"","\\@ngeqslant"),b(k,$,G,"","\\@ngeqq"),b(k,$,G,"","\\gneq",!0),b(k,$,G,"","\\gneqq",!0),b(k,$,G,"","\\@gvertneqq"),b(k,$,G,"","\\gnsim",!0),b(k,$,G,"","\\gnapprox",!0),b(k,$,G,"","\\nsucc",!0),b(k,$,G,"","\\nsucceq",!0),b(k,$,G,"","\\succnsim",!0),b(k,$,G,"","\\succnapprox",!0),b(k,$,G,"","\\ncong",!0),b(k,$,G,"","\\@nshortparallel"),b(k,$,G,"","\\nparallel",!0),b(k,$,G,"","\\nVDash",!0),b(k,$,G,"","\\ntriangleright"),b(k,$,G,"","\\ntrianglerighteq",!0),b(k,$,G,"","\\@nsupseteqq"),b(k,$,G,"","\\supsetneq",!0),b(k,$,G,"","\\@varsupsetneq"),b(k,$,G,"","\\supsetneqq",!0),b(k,$,G,"","\\@varsupsetneqq"),b(k,$,G,"","\\nVdash",!0),b(k,$,G,"","\\precneqq",!0),b(k,$,G,"","\\succneqq",!0),b(k,$,G,"","\\@nsubseteqq"),b(k,$,qe,"","\\unlhd"),b(k,$,qe,"","\\unrhd"),b(k,$,G,"","\\nleftarrow",!0),b(k,$,G,"","\\nrightarrow",!0),b(k,$,G,"","\\nLeftarrow",!0),b(k,$,G,"","\\nRightarrow",!0),b(k,$,G,"","\\nleftrightarrow",!0),b(k,$,G,"","\\nLeftrightarrow",!0),b(k,$,G,"","\\vartriangle"),b(k,$,K,"","\\hslash"),b(k,$,K,"","\\triangledown"),b(k,$,K,"","\\lozenge"),b(k,$,K,"","\\circledS"),b(k,$,K,"","\\circledR"),b(ke,$,K,"","\\circledR"),b(k,$,K,"","\\measuredangle",!0),b(k,$,K,"","\\nexists"),b(k,$,K,"","\\mho"),b(k,$,K,"","\\Finv",!0),b(k,$,K,"","\\Game",!0),b(k,$,K,"","\\backprime"),b(k,$,K,"","\\blacktriangle"),b(k,$,K,"","\\blacktriangledown"),b(k,$,K,"","\\blacksquare"),b(k,$,K,"","\\blacklozenge"),b(k,$,K,"","\\bigstar"),b(k,$,K,"","\\sphericalangle",!0),b(k,$,K,"","\\complement",!0),b(k,$,K,"","\\eth",!0),b(ke,_,K,"",""),b(k,$,K,"","\\diagup"),b(k,$,K,"","\\diagdown"),b(k,$,K,"","\\square"),b(k,$,K,"","\\Box"),b(k,$,K,"","\\Diamond"),b(k,$,K,"","\\yen",!0),b(ke,$,K,"","\\yen",!0),b(k,$,K,"","\\checkmark",!0),b(ke,$,K,"","\\checkmark"),b(k,$,K,"","\\beth",!0),b(k,$,K,"","\\daleth",!0),b(k,$,K,"","\\gimel",!0),b(k,$,K,"","\\digamma",!0),b(k,$,K,"","\\varkappa"),b(k,$,tr,"","\\@ulcorner",!0),b(k,$,Zn,"","\\@urcorner",!0),b(k,$,tr,"","\\@llcorner",!0),b(k,$,Zn,"","\\@lrcorner",!0),b(k,$,G,"","\\leqq",!0),b(k,$,G,"","\\leqslant",!0),b(k,$,G,"","\\eqslantless",!0),b(k,$,G,"","\\lesssim",!0),b(k,$,G,"","\\lessapprox",!0),b(k,$,G,"","\\approxeq",!0),b(k,$,qe,"","\\lessdot"),b(k,$,G,"","\\lll",!0),b(k,$,G,"","\\lessgtr",!0),b(k,$,G,"","\\lesseqgtr",!0),b(k,$,G,"","\\lesseqqgtr",!0),b(k,$,G,"","\\doteqdot"),b(k,$,G,"","\\risingdotseq",!0),b(k,$,G,"","\\fallingdotseq",!0),b(k,$,G,"","\\backsim",!0),b(k,$,G,"","\\backsimeq",!0),b(k,$,G,"","\\subseteqq",!0),b(k,$,G,"","\\Subset",!0),b(k,$,G,"","\\sqsubset",!0),b(k,$,G,"","\\preccurlyeq",!0),b(k,$,G,"","\\curlyeqprec",!0),b(k,$,G,"","\\precsim",!0),b(k,$,G,"","\\precapprox",!0),b(k,$,G,"","\\vartriangleleft"),b(k,$,G,"","\\trianglelefteq"),b(k,$,G,"","\\vDash",!0),b(k,$,G,"","\\Vvdash",!0),b(k,$,G,"","\\smallsmile"),b(k,$,G,"","\\smallfrown"),b(k,$,G,"","\\bumpeq",!0),b(k,$,G,"","\\Bumpeq",!0),b(k,$,G,"","\\geqq",!0),b(k,$,G,"","\\geqslant",!0),b(k,$,G,"","\\eqslantgtr",!0),b(k,$,G,"","\\gtrsim",!0),b(k,$,G,"","\\gtrapprox",!0),b(k,$,qe,"","\\gtrdot"),b(k,$,G,"","\\ggg",!0),b(k,$,G,"","\\gtrless",!0),b(k,$,G,"","\\gtreqless",!0),b(k,$,G,"","\\gtreqqless",!0),b(k,$,G,"","\\eqcirc",!0),b(k,$,G,"","\\circeq",!0),b(k,$,G,"","\\triangleq",!0),b(k,$,G,"","\\thicksim"),b(k,$,G,"","\\thickapprox"),b(k,$,G,"","\\supseteqq",!0),b(k,$,G,"","\\Supset",!0),b(k,$,G,"","\\sqsupset",!0),b(k,$,G,"","\\succcurlyeq",!0),b(k,$,G,"","\\curlyeqsucc",!0),b(k,$,G,"","\\succsim",!0),b(k,$,G,"","\\succapprox",!0),b(k,$,G,"","\\vartriangleright"),b(k,$,G,"","\\trianglerighteq"),b(k,$,G,"","\\Vdash",!0),b(k,$,G,"","\\shortmid"),b(k,$,G,"","\\shortparallel"),b(k,$,G,"","\\between",!0),b(k,$,G,"","\\pitchfork",!0),b(k,$,G,"","\\varpropto"),b(k,$,G,"","\\blacktriangleleft"),b(k,$,G,"","\\therefore",!0),b(k,$,G,"","\\backepsilon"),b(k,$,G,"","\\blacktriangleright"),b(k,$,G,"","\\because",!0),b(k,$,G,"","\\llless"),b(k,$,G,"","\\gggtr"),b(k,$,qe,"","\\lhd"),b(k,$,qe,"","\\rhd"),b(k,$,G,"","\\eqsim",!0),b(k,_,G,"","\\Join"),b(k,$,G,"","\\Doteq",!0),b(k,$,qe,"","\\dotplus",!0),b(k,$,qe,"","\\smallsetminus"),b(k,$,qe,"","\\Cap",!0),b(k,$,qe,"","\\Cup",!0),b(k,$,qe,"","\\doublebarwedge",!0),b(k,$,qe,"","\\boxminus",!0),b(k,$,qe,"","\\boxplus",!0),b(k,$,qe,"","\\divideontimes",!0),b(k,$,qe,"","\\ltimes",!0),b(k,$,qe,"","\\rtimes",!0),b(k,$,qe,"","\\leftthreetimes",!0),b(k,$,qe,"","\\rightthreetimes",!0),b(k,$,qe,"","\\curlywedge",!0),b(k,$,qe,"","\\curlyvee",!0),b(k,$,qe,"","\\circleddash",!0),b(k,$,qe,"","\\circledast",!0),b(k,$,qe,"","\\centerdot"),b(k,$,qe,"","\\intercal",!0),b(k,$,qe,"","\\doublecap"),b(k,$,qe,"","\\doublecup"),b(k,$,qe,"","\\boxtimes",!0),b(k,$,G,"","\\dashrightarrow",!0),b(k,$,G,"","\\dashleftarrow",!0),b(k,$,G,"","\\leftleftarrows",!0),b(k,$,G,"","\\leftrightarrows",!0),b(k,$,G,"","\\Lleftarrow",!0),b(k,$,G,"","\\twoheadleftarrow",!0),b(k,$,G,"","\\leftarrowtail",!0),b(k,$,G,"","\\looparrowleft",!0),b(k,$,G,"","\\leftrightharpoons",!0),b(k,$,G,"","\\curvearrowleft",!0),b(k,$,G,"","\\circlearrowleft",!0),b(k,$,G,"","\\Lsh",!0),b(k,$,G,"","\\upuparrows",!0),b(k,$,G,"","\\upharpoonleft",!0),b(k,$,G,"","\\downharpoonleft",!0),b(k,_,G,"","\\origof",!0),b(k,_,G,"","\\imageof",!0),b(k,$,G,"","\\multimap",!0),b(k,$,G,"","\\leftrightsquigarrow",!0),b(k,$,G,"","\\rightrightarrows",!0),b(k,$,G,"","\\rightleftarrows",!0),b(k,$,G,"","\\twoheadrightarrow",!0),b(k,$,G,"","\\rightarrowtail",!0),b(k,$,G,"","\\looparrowright",!0),b(k,$,G,"","\\curvearrowright",!0),b(k,$,G,"","\\circlearrowright",!0),b(k,$,G,"","\\Rsh",!0),b(k,$,G,"","\\downdownarrows",!0),b(k,$,G,"","\\upharpoonright",!0),b(k,$,G,"","\\downharpoonright",!0),b(k,$,G,"","\\rightsquigarrow",!0),b(k,$,G,"","\\leadsto"),b(k,$,G,"","\\Rrightarrow",!0),b(k,$,G,"","\\restriction"),b(k,_,K,"","`"),b(k,_,K,"$","\\$"),b(ke,_,K,"$","\\$"),b(ke,_,K,"$","\\textdollar"),b(k,_,K,"%","\\%"),b(ke,_,K,"%","\\%"),b(k,_,K,"_","\\_"),b(ke,_,K,"_","\\_"),b(ke,_,K,"_","\\textunderscore"),b(k,_,K,"","\\angle",!0),b(k,_,K,"","\\infty",!0),b(k,_,K,"","\\prime"),b(k,_,K,"","\\triangle"),b(k,_,K,"","\\Gamma",!0),b(k,_,K,"","\\Delta",!0),b(k,_,K,"","\\Theta",!0),b(k,_,K,"","\\Lambda",!0),b(k,_,K,"","\\Xi",!0),b(k,_,K,"","\\Pi",!0),b(k,_,K,"","\\Sigma",!0),b(k,_,K,"","\\Upsilon",!0),b(k,_,K,"","\\Phi",!0),b(k,_,K,"","\\Psi",!0),b(k,_,K,"","\\Omega",!0),b(k,_,K,"A",""),b(k,_,K,"B",""),b(k,_,K,"E",""),b(k,_,K,"Z",""),b(k,_,K,"H",""),b(k,_,K,"I",""),b(k,_,K,"K",""),b(k,_,K,"M",""),b(k,_,K,"N",""),b(k,_,K,"O",""),b(k,_,K,"P",""),b(k,_,K,"T",""),b(k,_,K,"X",""),b(k,_,K,"","\\neg",!0),b(k,_,K,"","\\lnot"),b(k,_,K,"","\\top"),b(k,_,K,"","\\bot"),b(k,_,K,"","\\emptyset"),b(k,$,K,"","\\varnothing"),b(k,_,ut,"","\\alpha",!0),b(k,_,ut,"","\\beta",!0),b(k,_,ut,"","\\gamma",!0),b(k,_,ut,"","\\delta",!0),b(k,_,ut,"","\\epsilon",!0),b(k,_,ut,"","\\zeta",!0),b(k,_,ut,"","\\eta",!0),b(k,_,ut,"","\\theta",!0),b(k,_,ut,"","\\iota",!0),b(k,_,ut,"","\\kappa",!0),b(k,_,ut,"","\\lambda",!0),b(k,_,ut,"","\\mu",!0),b(k,_,ut,"","\\nu",!0),b(k,_,ut,"","\\xi",!0),b(k,_,ut,"","\\omicron",!0),b(k,_,ut,"","\\pi",!0),b(k,_,ut,"","\\rho",!0),b(k,_,ut,"","\\sigma",!0),b(k,_,ut,"","\\tau",!0),b(k,_,ut,"","\\upsilon",!0),b(k,_,ut,"","\\phi",!0),b(k,_,ut,"","\\chi",!0),b(k,_,ut,"","\\psi",!0),b(k,_,ut,"","\\omega",!0),b(k,_,ut,"","\\varepsilon",!0),b(k,_,ut,"","\\vartheta",!0),b(k,_,ut,"","\\varpi",!0),b(k,_,ut,"","\\varrho",!0),b(k,_,ut,"","\\varsigma",!0),b(k,_,ut,"","\\varphi",!0),b(k,_,qe,"","*",!0),b(k,_,qe,"+","+"),b(k,_,qe,"","-",!0),b(k,_,qe,"","\\cdot",!0),b(k,_,qe,"","\\circ",!0),b(k,_,qe,"","\\div",!0),b(k,_,qe,"","\\pm",!0),b(k,_,qe,"","\\times",!0),b(k,_,qe,"","\\cap",!0),b(k,_,qe,"","\\cup",!0),b(k,_,qe,"","\\setminus",!0),b(k,_,qe,"","\\land"),b(k,_,qe,"","\\lor"),b(k,_,qe,"","\\wedge",!0),b(k,_,qe,"","\\vee",!0),b(k,_,K,"","\\surd"),b(k,_,tr,"","\\langle",!0),b(k,_,tr,"","\\lvert"),b(k,_,tr,"","\\lVert"),b(k,_,Zn,"?","?"),b(k,_,Zn,"!","!"),b(k,_,Zn,"","\\rangle",!0),b(k,_,Zn,"","\\rvert"),b(k,_,Zn,"","\\rVert"),b(k,_,G,"=","="),b(k,_,G,":",":"),b(k,_,G,"","\\approx",!0),b(k,_,G,"","\\cong",!0),b(k,_,G,"","\\ge"),b(k,_,G,"","\\geq",!0),b(k,_,G,"","\\gets"),b(k,_,G,">","\\gt",!0),b(k,_,G,"","\\in",!0),b(k,_,G,"","\\@not"),b(k,_,G,"","\\subset",!0),b(k,_,G,"","\\supset",!0),b(k,_,G,"","\\subseteq",!0),b(k,_,G,"","\\supseteq",!0),b(k,$,G,"","\\nsubseteq",!0),b(k,$,G,"","\\nsupseteq",!0),b(k,_,G,"","\\models"),b(k,_,G,"","\\leftarrow",!0),b(k,_,G,"","\\le"),b(k,_,G,"","\\leq",!0),b(k,_,G,"<","\\lt",!0),b(k,_,G,"","\\rightarrow",!0),b(k,_,G,"","\\to"),b(k,$,G,"","\\ngeq",!0),b(k,$,G,"","\\nleq",!0),b(k,_,Dr,"","\\ "),b(k,_,Dr,"","\\space"),b(k,_,Dr,"","\\nobreakspace"),b(ke,_,Dr,"","\\ "),b(ke,_,Dr,""," "),b(ke,_,Dr,"","\\space"),b(ke,_,Dr,"","\\nobreakspace"),b(k,_,Dr,null,"\\nobreak"),b(k,_,Dr,null,"\\allowbreak"),b(k,_,mi,",",","),b(k,_,mi,";",";"),b(k,$,qe,"","\\barwedge",!0),b(k,$,qe,"","\\veebar",!0),b(k,_,qe,"","\\odot",!0),b(k,_,qe,"","\\oplus",!0),b(k,_,qe,"","\\otimes",!0),b(k,_,K,"","\\partial",!0),b(k,_,qe,"","\\oslash",!0),b(k,$,qe,"","\\circledcirc",!0),b(k,$,qe,"","\\boxdot",!0),b(k,_,qe,"","\\bigtriangleup"),b(k,_,qe,"","\\bigtriangledown"),b(k,_,qe,"","\\dagger"),b(k,_,qe,"","\\diamond"),b(k,_,qe,"","\\star"),b(k,_,qe,"","\\triangleleft"),b(k,_,qe,"","\\triangleright"),b(k,_,tr,"{","\\{"),b(ke,_,K,"{","\\{"),b(ke,_,K,"{","\\textbraceleft"),b(k,_,Zn,"}","\\}"),b(ke,_,K,"}","\\}"),b(ke,_,K,"}","\\textbraceright"),b(k,_,tr,"{","\\lbrace"),b(k,_,Zn,"}","\\rbrace"),b(k,_,tr,"[","\\lbrack",!0),b(ke,_,K,"[","\\lbrack",!0),b(k,_,Zn,"]","\\rbrack",!0),b(ke,_,K,"]","\\rbrack",!0),b(k,_,tr,"(","\\lparen",!0),b(k,_,Zn,")","\\rparen",!0),b(ke,_,K,"<","\\textless",!0),b(ke,_,K,">","\\textgreater",!0),b(k,_,tr,"","\\lfloor",!0),b(k,_,Zn,"","\\rfloor",!0),b(k,_,tr,"","\\lceil",!0),b(k,_,Zn,"","\\rceil",!0),b(k,_,K,"\\","\\backslash"),b(k,_,K,"","|"),b(k,_,K,"","\\vert"),b(ke,_,K,"|","\\textbar",!0),b(k,_,K,"","\\|"),b(k,_,K,"","\\Vert"),b(ke,_,K,"","\\textbardbl"),b(ke,_,K,"~","\\textasciitilde"),b(ke,_,K,"\\","\\textbackslash"),b(ke,_,K,"^","\\textasciicircum"),b(k,_,G,"","\\uparrow",!0),b(k,_,G,"","\\Uparrow",!0),b(k,_,G,"","\\downarrow",!0),b(k,_,G,"","\\Downarrow",!0),b(k,_,G,"","\\updownarrow",!0),b(k,_,G,"","\\Updownarrow",!0),b(k,_,In,"","\\coprod"),b(k,_,In,"","\\bigvee"),b(k,_,In,"","\\bigwedge"),b(k,_,In,"","\\biguplus"),b(k,_,In,"","\\bigcap"),b(k,_,In,"","\\bigcup"),b(k,_,In,"","\\int"),b(k,_,In,"","\\intop"),b(k,_,In,"","\\iint"),b(k,_,In,"","\\iiint"),b(k,_,In,"","\\prod"),b(k,_,In,"","\\sum"),b(k,_,In,"","\\bigotimes"),b(k,_,In,"","\\bigoplus"),b(k,_,In,"","\\bigodot"),b(k,_,In,"","\\oint"),b(k,_,In,"","\\oiint"),b(k,_,In,"","\\oiiint"),b(k,_,In,"","\\bigsqcup"),b(k,_,In,"","\\smallint"),b(ke,_,ws,"","\\textellipsis"),b(k,_,ws,"","\\mathellipsis"),b(ke,_,ws,"","\\ldots",!0),b(k,_,ws,"","\\ldots",!0),b(k,_,ws,"","\\@cdots",!0),b(k,_,ws,"","\\ddots",!0),b(k,_,K,"","\\varvdots"),b(ke,_,K,"","\\varvdots"),b(k,_,un,"","\\acute"),b(k,_,un,"","\\grave"),b(k,_,un,"","\\ddot"),b(k,_,un,"~","\\tilde"),b(k,_,un,"","\\bar"),b(k,_,un,"","\\breve"),b(k,_,un,"","\\check"),b(k,_,un,"^","\\hat"),b(k,_,un,"","\\vec"),b(k,_,un,"","\\dot"),b(k,_,un,"","\\mathring"),b(k,_,ut,"","\\@imath"),b(k,_,ut,"","\\@jmath"),b(k,_,K,"",""),b(k,_,K,"",""),b(ke,_,K,"","\\i",!0),b(ke,_,K,"","\\j",!0),b(ke,_,K,"","\\ss",!0),b(ke,_,K,"","\\ae",!0),b(ke,_,K,"","\\oe",!0),b(ke,_,K,"","\\o",!0),b(ke,_,K,"","\\AE",!0),b(ke,_,K,"","\\OE",!0),b(ke,_,K,"","\\O",!0),b(ke,_,un,"","\\'"),b(ke,_,un,"","\\`"),b(ke,_,un,"","\\^"),b(ke,_,un,"","\\~"),b(ke,_,un,"","\\="),b(ke,_,un,"","\\u"),b(ke,_,un,"","\\."),b(ke,_,un,"","\\c"),b(ke,_,un,"","\\r"),b(ke,_,un,"","\\v"),b(ke,_,un,"",'\\"'),b(ke,_,un,"","\\H"),b(ke,_,un,"","\\textcircled");const Y={"--":!0,"---":!0,"``":!0,"''":!0};b(ke,_,K,"","--",!0),b(ke,_,K,"","\\textendash"),b(ke,_,K,"","---",!0),b(ke,_,K,"","\\textemdash"),b(ke,_,K,"","`",!0),b(ke,_,K,"","\\textquoteleft"),b(ke,_,K,"","'",!0),b(ke,_,K,"","\\textquoteright"),b(ke,_,K,"","``",!0),b(ke,_,K,"","\\textquotedblleft"),b(ke,_,K,"","''",!0),b(ke,_,K,"","\\textquotedblright"),b(k,_,K,"","\\degree",!0),b(ke,_,K,"","\\degree"),b(ke,_,K,"","\\textdegree",!0),b(k,_,K,"","\\pounds"),b(k,_,K,"","\\mathsterling",!0),b(ke,_,K,"","\\pounds"),b(ke,_,K,"","\\textsterling",!0),b(k,$,K,"","\\maltese"),b(ke,$,K,"","\\maltese");const ee='0123456789/@."';for(let c=0;c<ee.length;c++){const o=ee.charAt(c);b(k,_,K,o,o)}const Ie='0123456789!@*()-=+";:?/.,';for(let c=0;c<Ie.length;c++){const o=Ie.charAt(c);b(ke,_,K,o,o)}const Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let c=0;c<Oe.length;c++){const o=Oe.charAt(c);b(k,_,ut,o,o),b(ke,_,K,o,o)}b(k,$,K,"C",""),b(ke,$,K,"C",""),b(k,$,K,"H",""),b(ke,$,K,"H",""),b(k,$,K,"N",""),b(ke,$,K,"N",""),b(k,$,K,"P",""),b(ke,$,K,"P",""),b(k,$,K,"Q",""),b(ke,$,K,"Q",""),b(k,$,K,"R",""),b(ke,$,K,"R",""),b(k,$,K,"Z",""),b(ke,$,K,"Z",""),b(k,_,ut,"h",""),b(ke,_,ut,"h","");let Te="";for(let c=0;c<Oe.length;c++){const o=Oe.charAt(c);Te=String.fromCharCode(55349,56320+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56372+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56424+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56580+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56684+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56736+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56788+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56840+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56944+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),c<26&&(Te=String.fromCharCode(55349,56632+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,56476+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te))}Te="",b(k,_,ut,"k",Te),b(ke,_,K,"k",Te);for(let c=0;c<10;c++){const o=c.toString();Te=String.fromCharCode(55349,57294+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,57314+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,57324+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te),Te=String.fromCharCode(55349,57334+c),b(k,_,ut,o,Te),b(ke,_,K,o,Te)}const kt="";for(let c=0;c<kt.length;c++){const o=kt.charAt(c);b(k,_,ut,o,o),b(ke,_,K,o,o)}const zt=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],vt=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Pn=function(c,o){const d=c.charCodeAt(0),p=c.charCodeAt(1),y=(d-55296)*1024+(p-56320)+65536,w=o==="math"?0:1;if(119808<=y&&y<120484){const C=Math.floor((y-119808)/26);return[zt[C][2],zt[C][w]]}else if(120782<=y&&y<=120831){const C=Math.floor((y-120782)/10);return[vt[C][2],vt[C][w]]}else{if(y===120485||y===120486)return[zt[0][2],zt[0][w]];if(120486<y&&y<120782)return["",""];throw new a("Unsupported character: "+c)}},bn=function(c,o,d){return xn[d][c]&&xn[d][c].replace&&(c=xn[d][c].replace),{value:c,metrics:Ue(c,o,d)}},jt=function(c,o,d,p,y){const w=bn(c,o,d),C=w.metrics;c=w.value;let O;if(C){let z=C.italic;(d==="text"||p&&p.font==="mathit")&&(z=0),O=new rn(c,C.height,C.depth,z,C.skew,C.width,y)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+c+"' in style '"+o+"' and mode '"+d+"'")),O=new rn(c,0,0,0,0,0,y);if(p){O.maxFontSize=p.sizeMultiplier,p.style.isTight()&&O.classes.push("mtight");const z=p.getColor();z&&(O.style.color=z)}return O},Bn=function(c,o,d,p){return p===void 0&&(p=[]),d.font==="boldsymbol"&&bn(c,"Main-Bold",o).metrics?jt(c,"Main-Bold",o,d,p.concat(["mathbf"])):c==="\\"||xn[o][c].font==="main"?jt(c,"Main-Regular",o,d,p):jt(c,"AMS-Regular",o,d,p.concat(["amsrm"]))},Ri=function(c,o,d,p,y){return y!=="textord"&&bn(c,"Math-BoldItalic",o).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Vi=function(c,o,d){const p=c.mode,y=c.text,w=["mord"],C=p==="math"||p==="text"&&o.font,O=C?o.font:o.fontFamily;let z="",U="";if(y.charCodeAt(0)===55349&&([z,U]=Pn(y,p)),z.length>0)return jt(y,z,p,o,w.concat(U));if(O){let te,re;if(O==="boldsymbol"){const ue=Ri(y,p,o,w,d);te=ue.fontName,re=[ue.fontClass]}else C?(te=od[O].fontName,re=[O]):(te=To(O,o.fontWeight,o.fontShape),re=[O,o.fontWeight,o.fontShape]);if(bn(y,te,p).metrics)return jt(y,te,p,o,w.concat(re));if(Y.hasOwnProperty(y)&&te.slice(0,10)==="Typewriter"){const ue=[];for(let je=0;je<y.length;je++)ue.push(jt(y[je],te,p,o,w.concat(re)));return Ls(ue)}}if(d==="mathord")return jt(y,"Math-Italic",p,o,w.concat(["mathnormal"]));if(d==="textord"){const te=xn[p][y]&&xn[p][y].font;if(te==="ams"){const re=To("amsrm",o.fontWeight,o.fontShape);return jt(y,re,p,o,w.concat("amsrm",o.fontWeight,o.fontShape))}else if(te==="main"||!te){const re=To("textrm",o.fontWeight,o.fontShape);return jt(y,re,p,o,w.concat(o.fontWeight,o.fontShape))}else{const re=To(te,o.fontWeight,o.fontShape);return jt(y,re,p,o,w.concat(re,o.fontWeight,o.fontShape))}}else throw new Error("unexpected type: "+d+" in makeOrd")},gi=(c,o)=>{if(Tn(c.classes)!==Tn(o.classes)||c.skew!==o.skew||c.maxFontSize!==o.maxFontSize)return!1;if(c.classes.length===1){const d=c.classes[0];if(d==="mbin"||d==="mord")return!1}for(const d in c.style)if(c.style.hasOwnProperty(d)&&c.style[d]!==o.style[d])return!1;for(const d in o.style)if(o.style.hasOwnProperty(d)&&c.style[d]!==o.style[d])return!1;return!0},ja=c=>{for(let o=0;o<c.length-1;o++){const d=c[o],p=c[o+1];d instanceof rn&&p instanceof rn&&gi(d,p)&&(d.text+=p.text,d.height=Math.max(d.height,p.height),d.depth=Math.max(d.depth,p.depth),d.italic=p.italic,c.splice(o+1,1),o--)}return c},zi=function(c){let o=0,d=0,p=0;for(let y=0;y<c.children.length;y++){const w=c.children[y];w.height>o&&(o=w.height),w.depth>d&&(d=w.depth),w.maxFontSize>p&&(p=w.maxFontSize)}c.height=o,c.depth=d,c.maxFontSize=p},_n=function(c,o,d,p){const y=new Xe(c,o,d,p);return zi(y),y},Ca=(c,o,d,p)=>new Xe(c,o,d,p),Co=function(c,o,d){const p=_n([c],[],o);return p.height=Math.max(d||o.fontMetrics().defaultRuleThickness,o.minRuleThickness),p.style.borderBottomWidth=Ce(p.height),p.maxFontSize=1,p},Ss=function(c,o,d,p){const y=new mt(c,o,d,p);return zi(y),y},Ls=function(c){const o=new Ut(c);return zi(o),o},Pi=function(c,o){return c instanceof Ut?_n([],[c],o):c},cc=function(c){if(c.positionType==="individualShift"){const d=c.children,p=[d[0]],y=-d[0].shift-d[0].elem.depth;let w=y;for(let C=1;C<d.length;C++){const O=-d[C].shift-w-d[C].elem.depth,z=O-(d[C-1].elem.height+d[C-1].elem.depth);w=w+O,p.push({type:"kern",size:z}),p.push(d[C])}return{children:p,depth:y}}let o;if(c.positionType==="top"){let d=c.positionData;for(let p=0;p<c.children.length;p++){const y=c.children[p];d-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}o=d}else if(c.positionType==="bottom")o=-c.positionData;else{const d=c.children[0];if(d.type!=="elem")throw new Error('First child must have type "elem".');if(c.positionType==="shift")o=-d.elem.depth-c.positionData;else if(c.positionType==="firstBaseline")o=-d.elem.depth;else throw new Error("Invalid positionType "+c.positionType+".")}return{children:c.children,depth:o}},Fg=function(c,o){const{children:d,depth:p}=cc(c);let y=0;for(let je=0;je<d.length;je++){const Ze=d[je];if(Ze.type==="elem"){const it=Ze.elem;y=Math.max(y,it.maxFontSize,it.height)}}y+=2;const w=_n(["pstrut"],[]);w.style.height=Ce(y);const C=[];let O=p,z=p,U=p;for(let je=0;je<d.length;je++){const Ze=d[je];if(Ze.type==="kern")U+=Ze.size;else{const it=Ze.elem,Ot=Ze.wrapperClasses||[],Nt=Ze.wrapperStyle||{},Pt=_n(Ot,[w,it],void 0,Nt);Pt.style.top=Ce(-y-U-it.depth),Ze.marginLeft&&(Pt.style.marginLeft=Ze.marginLeft),Ze.marginRight&&(Pt.style.marginRight=Ze.marginRight),C.push(Pt),U+=it.height+it.depth}O=Math.min(O,U),z=Math.max(z,U)}const te=_n(["vlist"],C);te.style.height=Ce(z);let re;if(O<0){const je=_n([],[]),Ze=_n(["vlist"],[je]);Ze.style.height=Ce(-O);const it=_n(["vlist-s"],[new rn("")]);re=[_n(["vlist-r"],[te,it]),_n(["vlist-r"],[Ze])]}else re=[_n(["vlist-r"],[te])];const ue=_n(["vlist-t"],re);return re.length===2&&ue.classes.push("vlist-t2"),ue.height=z,ue.depth=-O,ue},$g=(c,o)=>{const d=_n(["mspace"],[],o),p=tt(c,o);return d.style.marginRight=Ce(p),d},To=function(c,o,d){let p="";switch(c){case"amsrm":p="AMS";break;case"textrm":p="Main";break;case"textsf":p="SansSerif";break;case"texttt":p="Typewriter";break;default:p=c}let y;return o==="textbf"&&d==="textit"?y="BoldItalic":o==="textbf"?y="Bold":o==="textit"?y="Italic":y="Regular",p+"-"+y},od={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},ld={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var ie={fontMap:od,makeSymbol:jt,mathsym:Bn,makeSpan:_n,makeSvgSpan:Ca,makeLineSpan:Co,makeAnchor:Ss,makeFragment:Ls,wrapFragment:Pi,makeVList:Fg,makeOrd:Vi,makeGlue:$g,staticSvg:function(c,o){const[d,p,y]=ld[c],w=new _t(d),C=new Xt([w],{width:Ce(p),height:Ce(y),style:"width:"+Ce(p),viewBox:"0 0 "+1e3*p+" "+1e3*y,preserveAspectRatio:"xMinYMin"}),O=Ca(["overlay"],[C],o);return O.height=y,O.style.height=Ce(y),O.style.width=Ce(p),O},svgData:ld,tryCombineChars:ja};const An={number:3,unit:"mu"},xi={number:4,unit:"mu"},ks={number:5,unit:"mu"},Gg={mord:{mop:An,mbin:xi,mrel:ks,minner:An},mop:{mord:An,mop:An,mrel:ks,minner:An},mbin:{mord:xi,mop:xi,mopen:xi,minner:xi},mrel:{mord:ks,mop:ks,mopen:ks,minner:ks},mopen:{},mclose:{mop:An,mbin:xi,mrel:ks,minner:An},mpunct:{mord:An,mop:An,mrel:ks,mopen:An,mclose:An,mpunct:An,minner:An},minner:{mord:An,mop:An,mbin:xi,mrel:ks,mopen:An,mpunct:An,minner:An}},qg={mord:{mop:An},mop:{mord:An,mop:An},mbin:{},mrel:{},mopen:{},mclose:{mop:An},mpunct:{},minner:{mop:An}},cd={},Io={},Ao={};function $e(c){let{type:o,names:d,props:p,handler:y,htmlBuilder:w,mathmlBuilder:C}=c;const O={type:o,numArgs:p.numArgs,argTypes:p.argTypes,allowedInArgument:!!p.allowedInArgument,allowedInText:!!p.allowedInText,allowedInMath:p.allowedInMath===void 0?!0:p.allowedInMath,numOptionalArgs:p.numOptionalArgs||0,infix:!!p.infix,primitive:!!p.primitive,handler:y};for(let z=0;z<d.length;++z)cd[d[z]]=O;o&&(w&&(Io[o]=w),C&&(Ao[o]=C))}function yi(c){let{type:o,htmlBuilder:d,mathmlBuilder:p}=c;$e({type:o,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:d,mathmlBuilder:p})}const No=function(c){return c.type==="ordgroup"&&c.body.length===1?c.body[0]:c},Vn=function(c){return c.type==="ordgroup"?c.body:[c]},js=ie.makeSpan,Hg=["leftmost","mbin","mopen","mrel","mop","mpunct"],Wg=["rightmost","mrel","mclose","mpunct"],Ug={display:oe.DISPLAY,text:oe.TEXT,script:oe.SCRIPT,scriptscript:oe.SCRIPTSCRIPT},Zg={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ln=function(c,o,d,p){p===void 0&&(p=[null,null]);const y=[];for(let U=0;U<c.length;U++){const te=Gt(c[U],o);if(te instanceof Ut){const re=te.children;y.push(...re)}else y.push(te)}if(ie.tryCombineChars(y),!d)return y;let w=o;if(c.length===1){const U=c[0];U.type==="sizing"?w=o.havingSize(U.size):U.type==="styling"&&(w=o.havingStyle(Ug[U.style]))}const C=js([p[0]||"leftmost"],[],o),O=js([p[1]||"rightmost"],[],o),z=d==="root";return uc(y,(U,te)=>{const re=te.classes[0],ue=U.classes[0];re==="mbin"&&S.contains(Wg,ue)?te.classes[0]="mord":ue==="mbin"&&S.contains(Hg,re)&&(U.classes[0]="mord")},{node:C},O,z),uc(y,(U,te)=>{const re=hc(te),ue=hc(U),je=re&&ue?U.hasClass("mtight")?qg[re][ue]:Gg[re][ue]:null;if(je)return ie.makeGlue(je,w)},{node:C},O,z),y},uc=function(c,o,d,p,y){p&&c.push(p);let w=0;for(;w<c.length;w++){const C=c[w],O=ud(C);if(O){uc(O.children,o,d,null,y);continue}const z=!C.hasClass("mspace");if(z){const U=o(C,d.node);U&&(d.insertAfter?d.insertAfter(U):(c.unshift(U),w++))}z?d.node=C:y&&C.hasClass("newline")&&(d.node=js(["leftmost"])),d.insertAfter=(U=>te=>{c.splice(U+1,0,te),w++})(w)}p&&c.pop()},ud=function(c){return c instanceof Ut||c instanceof mt||c instanceof Xe&&c.hasClass("enclosing")?c:null},dc=function(c,o){const d=ud(c);if(d){const p=d.children;if(p.length){if(o==="right")return dc(p[p.length-1],"right");if(o==="left")return dc(p[0],"left")}}return c},hc=function(c,o){return c?(o&&(c=dc(c,o)),Zg[c.classes[0]]||null):null},Ta=function(c,o){const d=["nulldelimiter"].concat(c.baseSizingClasses());return js(o.concat(d))},Gt=function(c,o,d){if(!c)return js();if(Io[c.type]){let p=Io[c.type](c,o);if(d&&o.size!==d.size){p=js(o.sizingClasses(d),[p],o);const y=o.sizeMultiplier/d.sizeMultiplier;p.height*=y,p.depth*=y}return p}else throw new a("Got group of unknown type: '"+c.type+"'")};function _o(c,o){const d=js(["base"],c,o),p=js(["strut"]);return p.style.height=Ce(d.height+d.depth),d.depth&&(p.style.verticalAlign=Ce(-d.depth)),d.children.unshift(p),d}function fc(c,o){let d=null;c.length===1&&c[0].type==="tag"&&(d=c[0].tag,c=c[0].body);const p=Ln(c,o,"root");let y;p.length===2&&p[1].hasClass("tag")&&(y=p.pop());const w=[];let C=[];for(let U=0;U<p.length;U++)if(C.push(p[U]),p[U].hasClass("mbin")||p[U].hasClass("mrel")||p[U].hasClass("allowbreak")){let te=!1;for(;U<p.length-1&&p[U+1].hasClass("mspace")&&!p[U+1].hasClass("newline");)U++,C.push(p[U]),p[U].hasClass("nobreak")&&(te=!0);te||(w.push(_o(C,o)),C=[])}else p[U].hasClass("newline")&&(C.pop(),C.length>0&&(w.push(_o(C,o)),C=[]),w.push(p[U]));C.length>0&&w.push(_o(C,o));let O;d?(O=_o(Ln(d,o,!0)),O.classes=["tag"],w.push(O)):y&&w.push(y);const z=js(["katex-html"],w);if(z.setAttribute("aria-hidden","true"),O){const U=O.children[0];U.style.height=Ce(z.height+z.depth),z.depth&&(U.style.verticalAlign=Ce(-z.depth))}return z}function dd(c){return new Ut(c)}class Tr{constructor(o,d,p){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=o,this.attributes={},this.children=d||[],this.classes=p||[]}setAttribute(o,d){this.attributes[o]=d}getAttribute(o){return this.attributes[o]}toNode(){const o=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&o.setAttribute(d,this.attributes[d]);this.classes.length>0&&(o.className=Tn(this.classes));for(let d=0;d<this.children.length;d++)if(this.children[d]instanceof rs&&this.children[d+1]instanceof rs){let p=this.children[d].toText()+this.children[++d].toText();for(;this.children[d+1]instanceof rs;)p+=this.children[++d].toText();o.appendChild(new rs(p).toNode())}else o.appendChild(this.children[d].toNode());return o}toMarkup(){let o="<"+this.type;for(const d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&(o+=" "+d+'="',o+=S.escape(this.attributes[d]),o+='"');this.classes.length>0&&(o+=' class ="'+S.escape(Tn(this.classes))+'"'),o+=">";for(let d=0;d<this.children.length;d++)o+=this.children[d].toMarkup();return o+="</"+this.type+">",o}toText(){return this.children.map(o=>o.toText()).join("")}}class rs{constructor(o){this.text=void 0,this.text=o}toNode(){return document.createTextNode(this.text)}toMarkup(){return S.escape(this.toText())}toText(){return this.text}}class Yg{constructor(o){this.width=void 0,this.character=void 0,this.width=o,o>=.05555&&o<=.05556?this.character="":o>=.1666&&o<=.1667?this.character="":o>=.2222&&o<=.2223?this.character="":o>=.2777&&o<=.2778?this.character="":o>=-.05556&&o<=-.05555?this.character="":o>=-.1667&&o<=-.1666?this.character="":o>=-.2223&&o<=-.2222?this.character="":o>=-.2778&&o<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const o=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return o.setAttribute("width",Ce(this.width)),o}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ce(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ae={MathNode:Tr,TextNode:rs,SpaceNode:Yg,newDocumentFragment:dd};const Or=function(c,o,d){return xn[o][c]&&xn[o][c].replace&&c.charCodeAt(0)!==55349&&!(Y.hasOwnProperty(c)&&d&&(d.fontFamily&&d.fontFamily.slice(4,6)==="tt"||d.font&&d.font.slice(4,6)==="tt"))&&(c=xn[o][c].replace),new Ae.TextNode(c)},pc=function(c){return c.length===1?c[0]:new Ae.MathNode("mrow",c)},mc=function(c,o){if(o.fontFamily==="texttt")return"monospace";if(o.fontFamily==="textsf")return o.fontShape==="textit"&&o.fontWeight==="textbf"?"sans-serif-bold-italic":o.fontShape==="textit"?"sans-serif-italic":o.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(o.fontShape==="textit"&&o.fontWeight==="textbf")return"bold-italic";if(o.fontShape==="textit")return"italic";if(o.fontWeight==="textbf")return"bold";const d=o.font;if(!d||d==="mathnormal")return null;const p=c.mode;if(d==="mathit")return"italic";if(d==="boldsymbol")return c.type==="textord"?"bold":"bold-italic";if(d==="mathbf")return"bold";if(d==="mathbb")return"double-struck";if(d==="mathsfit")return"sans-serif-italic";if(d==="mathfrak")return"fraktur";if(d==="mathscr"||d==="mathcal")return"script";if(d==="mathsf")return"sans-serif";if(d==="mathtt")return"monospace";let y=c.text;if(S.contains(["\\imath","\\jmath"],y))return null;xn[p][y]&&xn[p][y].replace&&(y=xn[p][y].replace);const w=ie.fontMap[d].fontName;return Ue(y,w,p)?ie.fontMap[d].variant:null};function gc(c){if(!c)return!1;if(c.type==="mi"&&c.children.length===1){const o=c.children[0];return o instanceof rs&&o.text==="."}else if(c.type==="mo"&&c.children.length===1&&c.getAttribute("separator")==="true"&&c.getAttribute("lspace")==="0em"&&c.getAttribute("rspace")==="0em"){const o=c.children[0];return o instanceof rs&&o.text===","}else return!1}const br=function(c,o,d){if(c.length===1){const w=dn(c[0],o);return d&&w instanceof Tr&&w.type==="mo"&&(w.setAttribute("lspace","0em"),w.setAttribute("rspace","0em")),[w]}const p=[];let y;for(let w=0;w<c.length;w++){const C=dn(c[w],o);if(C instanceof Tr&&y instanceof Tr){if(C.type==="mtext"&&y.type==="mtext"&&C.getAttribute("mathvariant")===y.getAttribute("mathvariant")){y.children.push(...C.children);continue}else if(C.type==="mn"&&y.type==="mn"){y.children.push(...C.children);continue}else if(gc(C)&&y.type==="mn"){y.children.push(...C.children);continue}else if(C.type==="mn"&&gc(y))C.children=[...y.children,...C.children],p.pop();else if((C.type==="msup"||C.type==="msub")&&C.children.length>=1&&(y.type==="mn"||gc(y))){const O=C.children[0];O instanceof Tr&&O.type==="mn"&&(O.children=[...y.children,...O.children],p.pop())}else if(y.type==="mi"&&y.children.length===1){const O=y.children[0];if(O instanceof rs&&O.text===""&&(C.type==="mo"||C.type==="mi"||C.type==="mn")){const z=C.children[0];z instanceof rs&&z.text.length>0&&(z.text=z.text.slice(0,1)+""+z.text.slice(1),p.pop())}}}p.push(C),y=C}return p},Fs=function(c,o,d){return pc(br(c,o,d))},dn=function(c,o){if(!c)return new Ae.MathNode("mrow");if(Ao[c.type])return Ao[c.type](c,o);throw new a("Got group of unknown type: '"+c.type+"'")};function hd(c,o,d,p,y){const w=br(c,d);let C;w.length===1&&w[0]instanceof Tr&&S.contains(["mrow","mtable"],w[0].type)?C=w[0]:C=new Ae.MathNode("mrow",w);const O=new Ae.MathNode("annotation",[new Ae.TextNode(o)]);O.setAttribute("encoding","application/x-tex");const z=new Ae.MathNode("semantics",[C,O]),U=new Ae.MathNode("math",[z]);U.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),p&&U.setAttribute("display","block");const te=y?"katex":"katex-mathml";return ie.makeSpan([te],[U])}const fd=function(c){return new Re({style:c.displayMode?oe.DISPLAY:oe.TEXT,maxSize:c.maxSize,minRuleThickness:c.minRuleThickness})},pd=function(c,o){if(o.displayMode){const d=["katex-display"];o.leqno&&d.push("leqno"),o.fleqn&&d.push("fleqn"),c=ie.makeSpan(d,[c])}return c},Jg=function(c,o,d){const p=fd(d);let y;if(d.output==="mathml")return hd(c,o,p,d.displayMode,!0);if(d.output==="html"){const w=fc(c,p);y=ie.makeSpan(["katex"],[w])}else{const w=hd(c,o,p,d.displayMode,!1),C=fc(c,p);y=ie.makeSpan(["katex"],[w,C])}return pd(y,d)},Xg=function(c,o,d){const p=fd(d),y=fc(c,p),w=ie.makeSpan(["katex"],[y]);return pd(w,d)},Kg={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Qg=function(c){const o=new Ae.MathNode("mo",[new Ae.TextNode(Kg[c.replace(/^\\/,"")])]);return o.setAttribute("stretchy","true"),o},ex={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},tx=function(c){return c.type==="ordgroup"?c.body.length:1};var Cs={encloseSpan:function(c,o,d,p,y){let w;const C=c.height+c.depth+d+p;if(/fbox|color|angl/.test(o)){if(w=ie.makeSpan(["stretchy",o],[],y),o==="fbox"){const O=y.color&&y.getColor();O&&(w.style.borderColor=O)}}else{const O=[];/^[bx]cancel$/.test(o)&&O.push(new yr({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(o)&&O.push(new yr({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const z=new Xt(O,{width:"100%",height:Ce(C)});w=ie.makeSvgSpan([],[z],y)}return w.height=C,w.style.height=Ce(C),w},mathMLnode:Qg,svgSpan:function(c,o){function d(){let C=4e5;const O=c.label.slice(1);if(S.contains(["widehat","widecheck","widetilde","utilde"],O)){const U=tx(c.base);let te,re,ue;if(U>5)O==="widehat"||O==="widecheck"?(te=420,C=2364,ue=.42,re=O+"4"):(te=312,C=2340,ue=.34,re="tilde4");else{const it=[1,1,2,2,3,3][U];O==="widehat"||O==="widecheck"?(C=[0,1062,2364,2364,2364][it],te=[0,239,300,360,420][it],ue=[0,.24,.3,.3,.36,.42][it],re=O+it):(C=[0,600,1033,2339,2340][it],te=[0,260,286,306,312][it],ue=[0,.26,.286,.3,.306,.34][it],re="tilde"+it)}const je=new _t(re),Ze=new Xt([je],{width:"100%",height:Ce(ue),viewBox:"0 0 "+C+" "+te,preserveAspectRatio:"none"});return{span:ie.makeSvgSpan([],[Ze],o),minWidth:0,height:ue}}else{const z=[],U=ex[O],[te,re,ue]=U,je=ue/1e3,Ze=te.length;let it,Ot;if(Ze===1){const Nt=U[3];it=["hide-tail"],Ot=[Nt]}else if(Ze===2)it=["halfarrow-left","halfarrow-right"],Ot=["xMinYMin","xMaxYMin"];else if(Ze===3)it=["brace-left","brace-center","brace-right"],Ot=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Ze+" children.");for(let Nt=0;Nt<Ze;Nt++){const Pt=new _t(te[Nt]),Kt=new Xt([Pt],{width:"400em",height:Ce(je),viewBox:"0 0 "+C+" "+ue,preserveAspectRatio:Ot[Nt]+" slice"}),yn=ie.makeSvgSpan([it[Nt]],[Kt],o);if(Ze===1)return{span:yn,minWidth:re,height:je};yn.style.height=Ce(je),z.push(yn)}return{span:ie.makeSpan(["stretchy"],z,o),minWidth:re,height:je}}}const{span:p,minWidth:y,height:w}=d();return p.height=w,p.style.height=Ce(w),y>0&&(p.style.minWidth=Ce(y)),p}};function Ct(c,o){if(!c||c.type!==o)throw new Error("Expected node of type "+o+", but got "+(c?"node of type "+c.type:String(c)));return c}function xc(c){const o=Eo(c);if(!o)throw new Error("Expected node of symbol group type, but got "+(c?"node of type "+c.type:String(c)));return o}function Eo(c){return c&&(c.type==="atom"||jo.hasOwnProperty(c.type))?c:null}const yc=(c,o)=>{let d,p,y;c&&c.type==="supsub"?(p=Ct(c.base,"accent"),d=p.base,c.base=d,y=Oi(Gt(c,o)),c.base=p):(p=Ct(c,"accent"),d=p.base);const w=Gt(d,o.havingCrampedStyle()),C=p.isShifty&&S.isCharacterBox(d);let O=0;if(C){const ue=S.getBaseElem(d),je=Gt(ue,o.havingCrampedStyle());O=fi(je).skew}const z=p.label==="\\c";let U=z?w.height+w.depth:Math.min(w.height,o.fontMetrics().xHeight),te;if(p.isStretchy)te=Cs.svgSpan(p,o),te=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w},{type:"elem",elem:te,wrapperClasses:["svg-align"],wrapperStyle:O>0?{width:"calc(100% - "+Ce(2*O)+")",marginLeft:Ce(2*O)}:void 0}]},o);else{let ue,je;p.label==="\\vec"?(ue=ie.staticSvg("vec",o),je=ie.svgData.vec[1]):(ue=ie.makeOrd({mode:p.mode,text:p.label},o,"textord"),ue=fi(ue),ue.italic=0,je=ue.width,z&&(U+=ue.depth)),te=ie.makeSpan(["accent-body"],[ue]);const Ze=p.label==="\\textcircled";Ze&&(te.classes.push("accent-full"),U=w.height);let it=O;Ze||(it-=je/2),te.style.left=Ce(it),p.label==="\\textcircled"&&(te.style.top=".2em"),te=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w},{type:"kern",size:-U},{type:"elem",elem:te}]},o)}const re=ie.makeSpan(["mord","accent"],[te],o);return y?(y.children[0]=re,y.height=Math.max(re.height,y.height),y.classes[0]="mord",y):re},md=(c,o)=>{const d=c.isStretchy?Cs.mathMLnode(c.label):new Ae.MathNode("mo",[Or(c.label,c.mode)]),p=new Ae.MathNode("mover",[dn(c.base,o),d]);return p.setAttribute("accent","true"),p},nx=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(c=>"\\"+c).join("|"));$e({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(c,o)=>{const d=No(o[0]),p=!nx.test(c.funcName),y=!p||c.funcName==="\\widehat"||c.funcName==="\\widetilde"||c.funcName==="\\widecheck";return{type:"accent",mode:c.parser.mode,label:c.funcName,isStretchy:p,isShifty:y,base:d}},htmlBuilder:yc,mathmlBuilder:md}),$e({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(c,o)=>{const d=o[0];let p=c.parser.mode;return p==="math"&&(c.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+c.funcName+" works only in text mode"),p="text"),{type:"accent",mode:p,label:c.funcName,isStretchy:!1,isShifty:!0,base:d}},htmlBuilder:yc,mathmlBuilder:md}),$e({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0];return{type:"accentUnder",mode:d.mode,label:p,base:y}},htmlBuilder:(c,o)=>{const d=Gt(c.base,o),p=Cs.svgSpan(c,o),y=c.label==="\\utilde"?.12:0,w=ie.makeVList({positionType:"top",positionData:d.height,children:[{type:"elem",elem:p,wrapperClasses:["svg-align"]},{type:"kern",size:y},{type:"elem",elem:d}]},o);return ie.makeSpan(["mord","accentunder"],[w],o)},mathmlBuilder:(c,o)=>{const d=Cs.mathMLnode(c.label),p=new Ae.MathNode("munder",[dn(c.base,o),d]);return p.setAttribute("accentunder","true"),p}});const Mo=c=>{const o=new Ae.MathNode("mpadded",c?[c]:[]);return o.setAttribute("width","+0.6em"),o.setAttribute("lspace","0.3em"),o};$e({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(c,o,d){let{parser:p,funcName:y}=c;return{type:"xArrow",mode:p.mode,label:y,body:o[0],below:d[0]}},htmlBuilder(c,o){const d=o.style;let p=o.havingStyle(d.sup());const y=ie.wrapFragment(Gt(c.body,p,o),o),w=c.label.slice(0,2)==="\\x"?"x":"cd";y.classes.push(w+"-arrow-pad");let C;c.below&&(p=o.havingStyle(d.sub()),C=ie.wrapFragment(Gt(c.below,p,o),o),C.classes.push(w+"-arrow-pad"));const O=Cs.svgSpan(c,o),z=-o.fontMetrics().axisHeight+.5*O.height;let U=-o.fontMetrics().axisHeight-.5*O.height-.111;(y.depth>.25||c.label==="\\xleftequilibrium")&&(U-=y.depth);let te;if(C){const re=-o.fontMetrics().axisHeight+C.height+.5*O.height+.111;te=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:U},{type:"elem",elem:O,shift:z},{type:"elem",elem:C,shift:re}]},o)}else te=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:U},{type:"elem",elem:O,shift:z}]},o);return te.children[0].children[0].children[1].classes.push("svg-align"),ie.makeSpan(["mrel","x-arrow"],[te],o)},mathmlBuilder(c,o){const d=Cs.mathMLnode(c.label);d.setAttribute("minsize",c.label.charAt(0)==="x"?"1.75em":"3.0em");let p;if(c.body){const y=Mo(dn(c.body,o));if(c.below){const w=Mo(dn(c.below,o));p=new Ae.MathNode("munderover",[d,w,y])}else p=new Ae.MathNode("mover",[d,y])}else if(c.below){const y=Mo(dn(c.below,o));p=new Ae.MathNode("munder",[d,y])}else p=Mo(),p=new Ae.MathNode("mover",[d,p]);return p}});const rx=ie.makeSpan;function gd(c,o){const d=Ln(c.body,o,!0);return rx([c.mclass],d,o)}function xd(c,o){let d;const p=br(c.body,o);return c.mclass==="minner"?d=new Ae.MathNode("mpadded",p):c.mclass==="mord"?c.isCharacterBox?(d=p[0],d.type="mi"):d=new Ae.MathNode("mi",p):(c.isCharacterBox?(d=p[0],d.type="mo"):d=new Ae.MathNode("mo",p),c.mclass==="mbin"?(d.attributes.lspace="0.22em",d.attributes.rspace="0.22em"):c.mclass==="mpunct"?(d.attributes.lspace="0em",d.attributes.rspace="0.17em"):c.mclass==="mopen"||c.mclass==="mclose"?(d.attributes.lspace="0em",d.attributes.rspace="0em"):c.mclass==="minner"&&(d.attributes.lspace="0.0556em",d.attributes.width="+0.1111em")),d}$e({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(c,o){let{parser:d,funcName:p}=c;const y=o[0];return{type:"mclass",mode:d.mode,mclass:"m"+p.slice(5),body:Vn(y),isCharacterBox:S.isCharacterBox(y)}},htmlBuilder:gd,mathmlBuilder:xd});const Do=c=>{const o=c.type==="ordgroup"&&c.body.length?c.body[0]:c;return o.type==="atom"&&(o.family==="bin"||o.family==="rel")?"m"+o.family:"mord"};$e({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(c,o){let{parser:d}=c;return{type:"mclass",mode:d.mode,mclass:Do(o[0]),body:Vn(o[1]),isCharacterBox:S.isCharacterBox(o[1])}}}),$e({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(c,o){let{parser:d,funcName:p}=c;const y=o[1],w=o[0];let C;p!=="\\stackrel"?C=Do(y):C="mrel";const O={type:"op",mode:y.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:p!=="\\stackrel",body:Vn(y)},z={type:"supsub",mode:w.mode,base:O,sup:p==="\\underset"?null:w,sub:p==="\\underset"?w:null};return{type:"mclass",mode:d.mode,mclass:C,body:[z],isCharacterBox:S.isCharacterBox(z)}},htmlBuilder:gd,mathmlBuilder:xd}),$e({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(c,o){let{parser:d}=c;return{type:"pmb",mode:d.mode,mclass:Do(o[0]),body:Vn(o[0])}},htmlBuilder(c,o){const d=Ln(c.body,o,!0),p=ie.makeSpan([c.mclass],d,o);return p.style.textShadow="0.02em 0.01em 0.04px",p},mathmlBuilder(c,o){const d=br(c.body,o),p=new Ae.MathNode("mstyle",d);return p.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),p}});const sx={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},yd=()=>({type:"styling",body:[],mode:"math",style:"display"}),bd=c=>c.type==="textord"&&c.text==="@",ix=(c,o)=>(c.type==="mathord"||c.type==="atom")&&c.text===o;function ax(c,o,d){const p=sx[c];switch(p){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return d.callFunction(p,[o[0]],[o[1]]);case"\\uparrow":case"\\downarrow":{const y=d.callFunction("\\\\cdleft",[o[0]],[]),w={type:"atom",text:p,mode:"math",family:"rel"},C=d.callFunction("\\Big",[w],[]),O=d.callFunction("\\\\cdright",[o[1]],[]),z={type:"ordgroup",mode:"math",body:[y,C,O]};return d.callFunction("\\\\cdparent",[z],[])}case"\\\\cdlongequal":return d.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const y={type:"textord",text:"\\Vert",mode:"math"};return d.callFunction("\\Big",[y],[])}default:return{type:"textord",text:" ",mode:"math"}}}function ox(c){const o=[];for(c.gullet.beginGroup(),c.gullet.macros.set("\\cr","\\\\\\relax"),c.gullet.beginGroup();;){o.push(c.parseExpression(!1,"\\\\")),c.gullet.endGroup(),c.gullet.beginGroup();const w=c.fetch().text;if(w==="&"||w==="\\\\")c.consume();else if(w==="\\end"){o[o.length-1].length===0&&o.pop();break}else throw new a("Expected \\\\ or \\cr or \\end",c.nextToken)}let d=[];const p=[d];for(let w=0;w<o.length;w++){const C=o[w];let O=yd();for(let z=0;z<C.length;z++)if(!bd(C[z]))O.body.push(C[z]);else{d.push(O),z+=1;const U=xc(C[z]).text,te=new Array(2);if(te[0]={type:"ordgroup",mode:"math",body:[]},te[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(U)>-1))if("<>AV".indexOf(U)>-1)for(let je=0;je<2;je++){let Ze=!0;for(let it=z+1;it<C.length;it++){if(ix(C[it],U)){Ze=!1,z=it;break}if(bd(C[it]))throw new a("Missing a "+U+" character to complete a CD arrow.",C[it]);te[je].body.push(C[it])}if(Ze)throw new a("Missing a "+U+" character to complete a CD arrow.",C[z])}else throw new a('Expected one of "<>AV=|." after @',C[z]);const ue={type:"styling",body:[ax(U,te,c)],mode:"math",style:"display"};d.push(ue),O=yd()}w%2===0?d.push(O):d.shift(),d=[],p.push(d)}c.gullet.endGroup(),c.gullet.endGroup();const y=new Array(p[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:p,arraystretch:1,addJot:!0,rowGaps:[null],cols:y,colSeparationType:"CD",hLinesBeforeRow:new Array(p.length+1).fill([])}}$e({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(c,o){let{parser:d,funcName:p}=c;return{type:"cdlabel",mode:d.mode,side:p.slice(4),label:o[0]}},htmlBuilder(c,o){const d=o.havingStyle(o.style.sup()),p=ie.wrapFragment(Gt(c.label,d,o),o);return p.classes.push("cd-label-"+c.side),p.style.bottom=Ce(.8-p.depth),p.height=0,p.depth=0,p},mathmlBuilder(c,o){let d=new Ae.MathNode("mrow",[dn(c.label,o)]);return d=new Ae.MathNode("mpadded",[d]),d.setAttribute("width","0"),c.side==="left"&&d.setAttribute("lspace","-1width"),d.setAttribute("voffset","0.7em"),d=new Ae.MathNode("mstyle",[d]),d.setAttribute("displaystyle","false"),d.setAttribute("scriptlevel","1"),d}}),$e({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(c,o){let{parser:d}=c;return{type:"cdlabelparent",mode:d.mode,fragment:o[0]}},htmlBuilder(c,o){const d=ie.wrapFragment(Gt(c.fragment,o),o);return d.classes.push("cd-vert-arrow"),d},mathmlBuilder(c,o){return new Ae.MathNode("mrow",[dn(c.fragment,o)])}}),$e({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(c,o){let{parser:d}=c;const y=Ct(o[0],"ordgroup").body;let w="";for(let z=0;z<y.length;z++){const U=Ct(y[z],"textord");w+=U.text}let C=parseInt(w),O;if(isNaN(C))throw new a("\\@char has non-numeric argument "+w);if(C<0||C>=1114111)throw new a("\\@char with invalid code point "+w);return C<=65535?O=String.fromCharCode(C):(C-=65536,O=String.fromCharCode((C>>10)+55296,(C&1023)+56320)),{type:"textord",mode:d.mode,text:O}}});const vd=(c,o)=>{const d=Ln(c.body,o.withColor(c.color),!1);return ie.makeFragment(d)},wd=(c,o)=>{const d=br(c.body,o.withColor(c.color)),p=new Ae.MathNode("mstyle",d);return p.setAttribute("mathcolor",c.color),p};$e({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(c,o){let{parser:d}=c;const p=Ct(o[0],"color-token").color,y=o[1];return{type:"color",mode:d.mode,color:p,body:Vn(y)}},htmlBuilder:vd,mathmlBuilder:wd}),$e({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(c,o){let{parser:d,breakOnTokenText:p}=c;const y=Ct(o[0],"color-token").color;d.gullet.macros.set("\\current@color",y);const w=d.parseExpression(!0,p);return{type:"color",mode:d.mode,color:y,body:w}},htmlBuilder:vd,mathmlBuilder:wd}),$e({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(c,o,d){let{parser:p}=c;const y=p.gullet.future().text==="["?p.parseSizeGroup(!0):null,w=!p.settings.displayMode||!p.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:p.mode,newLine:w,size:y&&Ct(y,"size").value}},htmlBuilder(c,o){const d=ie.makeSpan(["mspace"],[],o);return c.newLine&&(d.classes.push("newline"),c.size&&(d.style.marginTop=Ce(tt(c.size,o)))),d},mathmlBuilder(c,o){const d=new Ae.MathNode("mspace");return c.newLine&&(d.setAttribute("linebreak","newline"),c.size&&d.setAttribute("height",Ce(tt(c.size,o)))),d}});const bc={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Sd=c=>{const o=c.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(o))throw new a("Expected a control sequence",c);return o},lx=c=>{let o=c.gullet.popToken();return o.text==="="&&(o=c.gullet.popToken(),o.text===" "&&(o=c.gullet.popToken())),o},kd=(c,o,d,p)=>{let y=c.gullet.macros.get(d.text);y==null&&(d.noexpand=!0,y={tokens:[d],numArgs:0,unexpandable:!c.gullet.isExpandable(d.text)}),c.gullet.macros.set(o,y,p)};$e({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(c){let{parser:o,funcName:d}=c;o.consumeSpaces();const p=o.fetch();if(bc[p.text])return(d==="\\global"||d==="\\\\globallong")&&(p.text=bc[p.text]),Ct(o.parseFunction(),"internal");throw new a("Invalid token after macro prefix",p)}}),$e({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(c){let{parser:o,funcName:d}=c,p=o.gullet.popToken();const y=p.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(y))throw new a("Expected a control sequence",p);let w=0,C;const O=[[]];for(;o.gullet.future().text!=="{";)if(p=o.gullet.popToken(),p.text==="#"){if(o.gullet.future().text==="{"){C=o.gullet.future(),O[w].push("{");break}if(p=o.gullet.popToken(),!/^[1-9]$/.test(p.text))throw new a('Invalid argument number "'+p.text+'"');if(parseInt(p.text)!==w+1)throw new a('Argument number "'+p.text+'" out of order');w++,O.push([])}else{if(p.text==="EOF")throw new a("Expected a macro definition");O[w].push(p.text)}let{tokens:z}=o.gullet.consumeArg();return C&&z.unshift(C),(d==="\\edef"||d==="\\xdef")&&(z=o.gullet.expandTokens(z),z.reverse()),o.gullet.macros.set(y,{tokens:z,numArgs:w,delimiters:O},d===bc[d]),{type:"internal",mode:o.mode}}}),$e({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(c){let{parser:o,funcName:d}=c;const p=Sd(o.gullet.popToken());o.gullet.consumeSpaces();const y=lx(o);return kd(o,p,y,d==="\\\\globallet"),{type:"internal",mode:o.mode}}}),$e({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(c){let{parser:o,funcName:d}=c;const p=Sd(o.gullet.popToken()),y=o.gullet.popToken(),w=o.gullet.popToken();return kd(o,p,w,d==="\\\\globalfuture"),o.gullet.pushToken(w),o.gullet.pushToken(y),{type:"internal",mode:o.mode}}});const Ia=function(c,o,d){const p=xn.math[c]&&xn.math[c].replace,y=Ue(p||c,o,d);if(!y)throw new Error("Unsupported symbol "+c+" and font size "+o+".");return y},vc=function(c,o,d,p){const y=d.havingBaseStyle(o),w=ie.makeSpan(p.concat(y.sizingClasses(d)),[c],d),C=y.sizeMultiplier/d.sizeMultiplier;return w.height*=C,w.depth*=C,w.maxFontSize=y.sizeMultiplier,w},jd=function(c,o,d){const p=o.havingBaseStyle(d),y=(1-o.sizeMultiplier/p.sizeMultiplier)*o.fontMetrics().axisHeight;c.classes.push("delimcenter"),c.style.top=Ce(y),c.height-=y,c.depth+=y},cx=function(c,o,d,p,y,w){const C=ie.makeSymbol(c,"Main-Regular",y,p),O=vc(C,o,p,w);return d&&jd(O,p,o),O},ux=function(c,o,d,p){return ie.makeSymbol(c,"Size"+o+"-Regular",d,p)},Cd=function(c,o,d,p,y,w){const C=ux(c,o,y,p),O=vc(ie.makeSpan(["delimsizing","size"+o],[C],p),oe.TEXT,p,w);return d&&jd(O,p,oe.TEXT),O},wc=function(c,o,d){let p;return o==="Size1-Regular"?p="delim-size1":p="delim-size4",{type:"elem",elem:ie.makeSpan(["delimsizinginner",p],[ie.makeSpan([],[ie.makeSymbol(c,o,d)])])}},Sc=function(c,o,d){const p=$t["Size4-Regular"][c.charCodeAt(0)]?$t["Size4-Regular"][c.charCodeAt(0)][4]:$t["Size1-Regular"][c.charCodeAt(0)][4],y=new _t("inner",mn(c,Math.round(1e3*o))),w=new Xt([y],{width:Ce(p),height:Ce(o),style:"width:"+Ce(p),viewBox:"0 0 "+1e3*p+" "+Math.round(1e3*o),preserveAspectRatio:"xMinYMin"}),C=ie.makeSvgSpan([],[w],d);return C.height=o,C.style.height=Ce(o),C.style.width=Ce(p),{type:"elem",elem:C}},kc=.008,Oo={type:"kern",size:-1*kc},dx=["|","\\lvert","\\rvert","\\vert"],hx=["\\|","\\lVert","\\rVert","\\Vert"],Td=function(c,o,d,p,y,w){let C,O,z,U,te="",re=0;C=z=U=c,O=null;let ue="Size1-Regular";c==="\\uparrow"?z=U="":c==="\\Uparrow"?z=U="":c==="\\downarrow"?C=z="":c==="\\Downarrow"?C=z="":c==="\\updownarrow"?(C="\\uparrow",z="",U="\\downarrow"):c==="\\Updownarrow"?(C="\\Uparrow",z="",U="\\Downarrow"):S.contains(dx,c)?(z="",te="vert",re=333):S.contains(hx,c)?(z="",te="doublevert",re=556):c==="["||c==="\\lbrack"?(C="",z="",U="",ue="Size4-Regular",te="lbrack",re=667):c==="]"||c==="\\rbrack"?(C="",z="",U="",ue="Size4-Regular",te="rbrack",re=667):c==="\\lfloor"||c===""?(z=C="",U="",ue="Size4-Regular",te="lfloor",re=667):c==="\\lceil"||c===""?(C="",z=U="",ue="Size4-Regular",te="lceil",re=667):c==="\\rfloor"||c===""?(z=C="",U="",ue="Size4-Regular",te="rfloor",re=667):c==="\\rceil"||c===""?(C="",z=U="",ue="Size4-Regular",te="rceil",re=667):c==="("||c==="\\lparen"?(C="",z="",U="",ue="Size4-Regular",te="lparen",re=875):c===")"||c==="\\rparen"?(C="",z="",U="",ue="Size4-Regular",te="rparen",re=875):c==="\\{"||c==="\\lbrace"?(C="",O="",U="",z="",ue="Size4-Regular"):c==="\\}"||c==="\\rbrace"?(C="",O="",U="",z="",ue="Size4-Regular"):c==="\\lgroup"||c===""?(C="",U="",z="",ue="Size4-Regular"):c==="\\rgroup"||c===""?(C="",U="",z="",ue="Size4-Regular"):c==="\\lmoustache"||c===""?(C="",U="",z="",ue="Size4-Regular"):(c==="\\rmoustache"||c==="")&&(C="",U="",z="",ue="Size4-Regular");const je=Ia(C,ue,y),Ze=je.height+je.depth,it=Ia(z,ue,y),Ot=it.height+it.depth,Nt=Ia(U,ue,y),Pt=Nt.height+Nt.depth;let Kt=0,yn=1;if(O!==null){const En=Ia(O,ue,y);Kt=En.height+En.depth,yn=2}const lr=Ze+Pt+Kt,Fn=Math.max(0,Math.ceil((o-lr)/(yn*Ot))),Vr=lr+Fn*yn*Ot;let Li=p.fontMetrics().axisHeight;d&&(Li*=p.sizeMultiplier);const qt=Vr/2-Li,sn=[];if(te.length>0){const En=Vr-Ze-Pt,Nn=Math.round(Vr*1e3),zr=ln(te,Math.round(En*1e3)),Px=new _t(te,zr),gh=(re/1e3).toFixed(3)+"em",xh=(Nn/1e3).toFixed(3)+"em",Bx=new Xt([Px],{width:gh,height:xh,viewBox:"0 0 "+re+" "+Nn}),Bo=ie.makeSvgSpan([],[Bx],p);Bo.height=Nn/1e3,Bo.style.width=gh,Bo.style.height=xh,sn.push({type:"elem",elem:Bo})}else{if(sn.push(wc(U,ue,y)),sn.push(Oo),O===null){const En=Vr-Ze-Pt+2*kc;sn.push(Sc(z,En,p))}else{const En=(Vr-Ze-Pt-Kt)/2+2*kc;sn.push(Sc(z,En,p)),sn.push(Oo),sn.push(wc(O,ue,y)),sn.push(Oo),sn.push(Sc(z,En,p))}sn.push(Oo),sn.push(wc(C,ue,y))}const vn=p.havingBaseStyle(oe.TEXT),jn=ie.makeVList({positionType:"bottom",positionData:qt,children:sn},vn);return vc(ie.makeSpan(["delimsizing","mult"],[jn],vn),oe.TEXT,p,w)},jc=80,Cc=.08,Tc=function(c,o,d,p,y){const w=Ft(c,p,d),C=new _t(c,w),O=new Xt([C],{width:"400em",height:Ce(o),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});return ie.makeSvgSpan(["hide-tail"],[O],y)},fx=function(c,o){const d=o.havingBaseSizing(),p=_d("\\surd",c*d.sizeMultiplier,Nd,d);let y=d.sizeMultiplier;const w=Math.max(0,o.minRuleThickness-o.fontMetrics().sqrtRuleThickness);let C,O=0,z=0,U=0,te;return p.type==="small"?(U=1e3+1e3*w+jc,c<1?y=1:c<1.4&&(y=.7),O=(1+w+Cc)/y,z=(1+w)/y,C=Tc("sqrtMain",O,U,w,o),C.style.minWidth="0.853em",te=.833/y):p.type==="large"?(U=(1e3+jc)*Aa[p.size],z=(Aa[p.size]+w)/y,O=(Aa[p.size]+w+Cc)/y,C=Tc("sqrtSize"+p.size,O,U,w,o),C.style.minWidth="1.02em",te=1/y):(O=c+w+Cc,z=c+w,U=Math.floor(1e3*c+w)+jc,C=Tc("sqrtTall",O,U,w,o),C.style.minWidth="0.742em",te=1.056),C.height=z,C.style.height=Ce(O),{span:C,advanceWidth:te,ruleWidth:(o.fontMetrics().sqrtRuleThickness+w)*y}},Id=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],px=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Ad=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Aa=[0,1.2,1.8,2.4,3],mx=function(c,o,d,p,y){if(c==="<"||c==="\\lt"||c===""?c="\\langle":(c===">"||c==="\\gt"||c==="")&&(c="\\rangle"),S.contains(Id,c)||S.contains(Ad,c))return Cd(c,o,!1,d,p,y);if(S.contains(px,c))return Td(c,Aa[o],!1,d,p,y);throw new a("Illegal delimiter: '"+c+"'")},gx=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],xx=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"stack"}],Nd=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],yx=function(c){if(c.type==="small")return"Main-Regular";if(c.type==="large")return"Size"+c.size+"-Regular";if(c.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+c.type+"' here.")},_d=function(c,o,d,p){const y=Math.min(2,3-p.style.size);for(let w=y;w<d.length&&d[w].type!=="stack";w++){const C=Ia(c,yx(d[w]),"math");let O=C.height+C.depth;if(d[w].type==="small"){const z=p.havingBaseStyle(d[w].style);O*=z.sizeMultiplier}if(O>o)return d[w]}return d[d.length-1]},Ed=function(c,o,d,p,y,w){c==="<"||c==="\\lt"||c===""?c="\\langle":(c===">"||c==="\\gt"||c==="")&&(c="\\rangle");let C;S.contains(Ad,c)?C=gx:S.contains(Id,c)?C=Nd:C=xx;const O=_d(c,o,C,p);return O.type==="small"?cx(c,O.style,d,p,y,w):O.type==="large"?Cd(c,O.size,d,p,y,w):Td(c,o,d,p,y,w)};var Ts={sqrtImage:fx,sizedDelim:mx,sizeToMaxHeight:Aa,customSizedDelim:Ed,leftRightDelim:function(c,o,d,p,y,w){const C=p.fontMetrics().axisHeight*p.sizeMultiplier,O=901,z=5/p.fontMetrics().ptPerEm,U=Math.max(o-C,d+C),te=Math.max(U/500*O,2*U-z);return Ed(c,te,!0,p,y,w)}};const Md={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},bx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Ro(c,o){const d=Eo(c);if(d&&S.contains(bx,d.text))return d;throw d?new a("Invalid delimiter '"+d.text+"' after '"+o.funcName+"'",c):new a("Invalid delimiter type '"+c.type+"'",c)}$e({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(c,o)=>{const d=Ro(o[0],c);return{type:"delimsizing",mode:c.parser.mode,size:Md[c.funcName].size,mclass:Md[c.funcName].mclass,delim:d.text}},htmlBuilder:(c,o)=>c.delim==="."?ie.makeSpan([c.mclass]):Ts.sizedDelim(c.delim,c.size,o,c.mode,[c.mclass]),mathmlBuilder:c=>{const o=[];c.delim!=="."&&o.push(Or(c.delim,c.mode));const d=new Ae.MathNode("mo",o);c.mclass==="mopen"||c.mclass==="mclose"?d.setAttribute("fence","true"):d.setAttribute("fence","false"),d.setAttribute("stretchy","true");const p=Ce(Ts.sizeToMaxHeight[c.size]);return d.setAttribute("minsize",p),d.setAttribute("maxsize",p),d}});function Dd(c){if(!c.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}$e({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(c,o)=>{const d=c.parser.gullet.macros.get("\\current@color");if(d&&typeof d!="string")throw new a("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:c.parser.mode,delim:Ro(o[0],c).text,color:d}}}),$e({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(c,o)=>{const d=Ro(o[0],c),p=c.parser;++p.leftrightDepth;const y=p.parseExpression(!1);--p.leftrightDepth,p.expect("\\right",!1);const w=Ct(p.parseFunction(),"leftright-right");return{type:"leftright",mode:p.mode,body:y,left:d.text,right:w.delim,rightColor:w.color}},htmlBuilder:(c,o)=>{Dd(c);const d=Ln(c.body,o,!0,["mopen","mclose"]);let p=0,y=0,w=!1;for(let z=0;z<d.length;z++)d[z].isMiddle?w=!0:(p=Math.max(d[z].height,p),y=Math.max(d[z].depth,y));p*=o.sizeMultiplier,y*=o.sizeMultiplier;let C;if(c.left==="."?C=Ta(o,["mopen"]):C=Ts.leftRightDelim(c.left,p,y,o,c.mode,["mopen"]),d.unshift(C),w)for(let z=1;z<d.length;z++){const te=d[z].isMiddle;te&&(d[z]=Ts.leftRightDelim(te.delim,p,y,te.options,c.mode,[]))}let O;if(c.right===".")O=Ta(o,["mclose"]);else{const z=c.rightColor?o.withColor(c.rightColor):o;O=Ts.leftRightDelim(c.right,p,y,z,c.mode,["mclose"])}return d.push(O),ie.makeSpan(["minner"],d,o)},mathmlBuilder:(c,o)=>{Dd(c);const d=br(c.body,o);if(c.left!=="."){const p=new Ae.MathNode("mo",[Or(c.left,c.mode)]);p.setAttribute("fence","true"),d.unshift(p)}if(c.right!=="."){const p=new Ae.MathNode("mo",[Or(c.right,c.mode)]);p.setAttribute("fence","true"),c.rightColor&&p.setAttribute("mathcolor",c.rightColor),d.push(p)}return pc(d)}}),$e({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(c,o)=>{const d=Ro(o[0],c);if(!c.parser.leftrightDepth)throw new a("\\middle without preceding \\left",d);return{type:"middle",mode:c.parser.mode,delim:d.text}},htmlBuilder:(c,o)=>{let d;if(c.delim===".")d=Ta(o,[]);else{d=Ts.sizedDelim(c.delim,1,o,c.mode,[]);const p={delim:c.delim,options:o};d.isMiddle=p}return d},mathmlBuilder:(c,o)=>{const d=c.delim==="\\vert"||c.delim==="|"?Or("|","text"):Or(c.delim,c.mode),p=new Ae.MathNode("mo",[d]);return p.setAttribute("fence","true"),p.setAttribute("lspace","0.05em"),p.setAttribute("rspace","0.05em"),p}});const Ic=(c,o)=>{const d=ie.wrapFragment(Gt(c.body,o),o),p=c.label.slice(1);let y=o.sizeMultiplier,w,C=0;const O=S.isCharacterBox(c.body);if(p==="sout")w=ie.makeSpan(["stretchy","sout"]),w.height=o.fontMetrics().defaultRuleThickness/y,C=-.5*o.fontMetrics().xHeight;else if(p==="phase"){const U=tt({number:.6,unit:"pt"},o),te=tt({number:.35,unit:"ex"},o),re=o.havingBaseSizing();y=y/re.sizeMultiplier;const ue=d.height+d.depth+U+te;d.style.paddingLeft=Ce(ue/2+U);const je=Math.floor(1e3*ue*y),Ze=_e(je),it=new Xt([new _t("phase",Ze)],{width:"400em",height:Ce(je/1e3),viewBox:"0 0 400000 "+je,preserveAspectRatio:"xMinYMin slice"});w=ie.makeSvgSpan(["hide-tail"],[it],o),w.style.height=Ce(ue),C=d.depth+U+te}else{/cancel/.test(p)?O||d.classes.push("cancel-pad"):p==="angl"?d.classes.push("anglpad"):d.classes.push("boxpad");let U=0,te=0,re=0;/box/.test(p)?(re=Math.max(o.fontMetrics().fboxrule,o.minRuleThickness),U=o.fontMetrics().fboxsep+(p==="colorbox"?0:re),te=U):p==="angl"?(re=Math.max(o.fontMetrics().defaultRuleThickness,o.minRuleThickness),U=4*re,te=Math.max(0,.25-d.depth)):(U=O?.2:0,te=U),w=Cs.encloseSpan(d,p,U,te,o),/fbox|boxed|fcolorbox/.test(p)?(w.style.borderStyle="solid",w.style.borderWidth=Ce(re)):p==="angl"&&re!==.049&&(w.style.borderTopWidth=Ce(re),w.style.borderRightWidth=Ce(re)),C=d.depth+te,c.backgroundColor&&(w.style.backgroundColor=c.backgroundColor,c.borderColor&&(w.style.borderColor=c.borderColor))}let z;if(c.backgroundColor)z=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:C},{type:"elem",elem:d,shift:0}]},o);else{const U=/cancel|phase/.test(p)?["svg-align"]:[];z=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:w,shift:C,wrapperClasses:U}]},o)}return/cancel/.test(p)&&(z.height=d.height,z.depth=d.depth),/cancel/.test(p)&&!O?ie.makeSpan(["mord","cancel-lap"],[z],o):ie.makeSpan(["mord"],[z],o)},Ac=(c,o)=>{let d=0;const p=new Ae.MathNode(c.label.indexOf("colorbox")>-1?"mpadded":"menclose",[dn(c.body,o)]);switch(c.label){case"\\cancel":p.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":p.setAttribute("notation","downdiagonalstrike");break;case"\\phase":p.setAttribute("notation","phasorangle");break;case"\\sout":p.setAttribute("notation","horizontalstrike");break;case"\\fbox":p.setAttribute("notation","box");break;case"\\angl":p.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(d=o.fontMetrics().fboxsep*o.fontMetrics().ptPerEm,p.setAttribute("width","+"+2*d+"pt"),p.setAttribute("height","+"+2*d+"pt"),p.setAttribute("lspace",d+"pt"),p.setAttribute("voffset",d+"pt"),c.label==="\\fcolorbox"){const y=Math.max(o.fontMetrics().fboxrule,o.minRuleThickness);p.setAttribute("style","border: "+y+"em solid "+String(c.borderColor))}break;case"\\xcancel":p.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return c.backgroundColor&&p.setAttribute("mathbackground",c.backgroundColor),p};$e({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(c,o,d){let{parser:p,funcName:y}=c;const w=Ct(o[0],"color-token").color,C=o[1];return{type:"enclose",mode:p.mode,label:y,backgroundColor:w,body:C}},htmlBuilder:Ic,mathmlBuilder:Ac}),$e({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(c,o,d){let{parser:p,funcName:y}=c;const w=Ct(o[0],"color-token").color,C=Ct(o[1],"color-token").color,O=o[2];return{type:"enclose",mode:p.mode,label:y,backgroundColor:C,borderColor:w,body:O}},htmlBuilder:Ic,mathmlBuilder:Ac}),$e({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(c,o){let{parser:d}=c;return{type:"enclose",mode:d.mode,label:"\\fbox",body:o[0]}}}),$e({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(c,o){let{parser:d,funcName:p}=c;const y=o[0];return{type:"enclose",mode:d.mode,label:p,body:y}},htmlBuilder:Ic,mathmlBuilder:Ac}),$e({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(c,o){let{parser:d}=c;return{type:"enclose",mode:d.mode,label:"\\angl",body:o[0]}}});const Od={};function ss(c){let{type:o,names:d,props:p,handler:y,htmlBuilder:w,mathmlBuilder:C}=c;const O={type:o,numArgs:p.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:y};for(let z=0;z<d.length;++z)Od[d[z]]=O;w&&(Io[o]=w),C&&(Ao[o]=C)}const Rd={};function V(c,o){Rd[c]=o}class Ir{constructor(o,d,p){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=o,this.start=d,this.end=p}static range(o,d){return d?!o||!o.loc||!d.loc||o.loc.lexer!==d.loc.lexer?null:new Ir(o.loc.lexer,o.loc.start,d.loc.end):o&&o.loc}}class Rr{constructor(o,d){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=o,this.loc=d}range(o,d){return new Rr(d,Ir.range(this,o))}}function Vd(c){const o=[];c.consumeSpaces();let d=c.fetch().text;for(d==="\\relax"&&(c.consume(),c.consumeSpaces(),d=c.fetch().text);d==="\\hline"||d==="\\hdashline";)c.consume(),o.push(d==="\\hdashline"),c.consumeSpaces(),d=c.fetch().text;return o}const Vo=c=>{if(!c.parser.settings.displayMode)throw new a("{"+c.envName+"} can be used only in display mode.")};function Nc(c){if(c.indexOf("ed")===-1)return c.indexOf("*")===-1}function $s(c,o,d){let{hskipBeforeAndAfter:p,addJot:y,cols:w,arraystretch:C,colSeparationType:O,autoTag:z,singleRow:U,emptySingleRow:te,maxNumCols:re,leqno:ue}=o;if(c.gullet.beginGroup(),U||c.gullet.macros.set("\\cr","\\\\\\relax"),!C){const yn=c.gullet.expandMacroAsText("\\arraystretch");if(yn==null)C=1;else if(C=parseFloat(yn),!C||C<0)throw new a("Invalid \\arraystretch: "+yn)}c.gullet.beginGroup();let je=[];const Ze=[je],it=[],Ot=[],Nt=z!=null?[]:void 0;function Pt(){z&&c.gullet.macros.set("\\@eqnsw","1",!0)}function Kt(){Nt&&(c.gullet.macros.get("\\df@tag")?(Nt.push(c.subparse([new Rr("\\df@tag")])),c.gullet.macros.set("\\df@tag",void 0,!0)):Nt.push(!!z&&c.gullet.macros.get("\\@eqnsw")==="1"))}for(Pt(),Ot.push(Vd(c));;){let yn=c.parseExpression(!1,U?"\\end":"\\\\");c.gullet.endGroup(),c.gullet.beginGroup(),yn={type:"ordgroup",mode:c.mode,body:yn},d&&(yn={type:"styling",mode:c.mode,style:d,body:[yn]}),je.push(yn);const lr=c.fetch().text;if(lr==="&"){if(re&&je.length===re){if(U||O)throw new a("Too many tab characters: &",c.nextToken);c.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}c.consume()}else if(lr==="\\end"){Kt(),je.length===1&&yn.type==="styling"&&yn.body[0].body.length===0&&(Ze.length>1||!te)&&Ze.pop(),Ot.length<Ze.length+1&&Ot.push([]);break}else if(lr==="\\\\"){c.consume();let Fn;c.gullet.future().text!==" "&&(Fn=c.parseSizeGroup(!0)),it.push(Fn?Fn.value:null),Kt(),Ot.push(Vd(c)),je=[],Ze.push(je),Pt()}else throw new a("Expected & or \\\\ or \\cr or \\end",c.nextToken)}return c.gullet.endGroup(),c.gullet.endGroup(),{type:"array",mode:c.mode,addJot:y,arraystretch:C,body:Ze,cols:w,rowGaps:it,hskipBeforeAndAfter:p,hLinesBeforeRow:Ot,colSeparationType:O,tags:Nt,leqno:ue}}function _c(c){return c.slice(0,1)==="d"?"display":"text"}const is=function(c,o){let d,p;const y=c.body.length,w=c.hLinesBeforeRow;let C=0,O=new Array(y);const z=[],U=Math.max(o.fontMetrics().arrayRuleWidth,o.minRuleThickness),te=1/o.fontMetrics().ptPerEm;let re=5*te;c.colSeparationType&&c.colSeparationType==="small"&&(re=.2778*(o.havingStyle(oe.SCRIPT).sizeMultiplier/o.sizeMultiplier));const ue=c.colSeparationType==="CD"?tt({number:3,unit:"ex"},o):12*te,je=3*te,Ze=c.arraystretch*ue,it=.7*Ze,Ot=.3*Ze;let Nt=0;function Pt(qt){for(let sn=0;sn<qt.length;++sn)sn>0&&(Nt+=.25),z.push({pos:Nt,isDashed:qt[sn]})}for(Pt(w[0]),d=0;d<c.body.length;++d){const qt=c.body[d];let sn=it,vn=Ot;C<qt.length&&(C=qt.length);const jn=new Array(qt.length);for(p=0;p<qt.length;++p){const zr=Gt(qt[p],o);vn<zr.depth&&(vn=zr.depth),sn<zr.height&&(sn=zr.height),jn[p]=zr}const En=c.rowGaps[d];let Nn=0;En&&(Nn=tt(En,o),Nn>0&&(Nn+=Ot,vn<Nn&&(vn=Nn),Nn=0)),c.addJot&&(vn+=je),jn.height=sn,jn.depth=vn,Nt+=sn,jn.pos=Nt,Nt+=vn+Nn,O[d]=jn,Pt(w[d+1])}const Kt=Nt/2+o.fontMetrics().axisHeight,yn=c.cols||[],lr=[];let Fn,Vr;const Li=[];if(c.tags&&c.tags.some(qt=>qt))for(d=0;d<y;++d){const qt=O[d],sn=qt.pos-Kt,vn=c.tags[d];let jn;vn===!0?jn=ie.makeSpan(["eqn-num"],[],o):vn===!1?jn=ie.makeSpan([],[],o):jn=ie.makeSpan([],Ln(vn,o,!0),o),jn.depth=qt.depth,jn.height=qt.height,Li.push({type:"elem",elem:jn,shift:sn})}for(p=0,Vr=0;p<C||Vr<yn.length;++p,++Vr){let qt=yn[Vr]||{},sn=!0;for(;qt.type==="separator";){if(sn||(Fn=ie.makeSpan(["arraycolsep"],[]),Fn.style.width=Ce(o.fontMetrics().doubleRuleSep),lr.push(Fn)),qt.separator==="|"||qt.separator===":"){const En=qt.separator==="|"?"solid":"dashed",Nn=ie.makeSpan(["vertical-separator"],[],o);Nn.style.height=Ce(Nt),Nn.style.borderRightWidth=Ce(U),Nn.style.borderRightStyle=En,Nn.style.margin="0 "+Ce(-U/2);const zr=Nt-Kt;zr&&(Nn.style.verticalAlign=Ce(-zr)),lr.push(Nn)}else throw new a("Invalid separator type: "+qt.separator);Vr++,qt=yn[Vr]||{},sn=!1}if(p>=C)continue;let vn;(p>0||c.hskipBeforeAndAfter)&&(vn=S.deflt(qt.pregap,re),vn!==0&&(Fn=ie.makeSpan(["arraycolsep"],[]),Fn.style.width=Ce(vn),lr.push(Fn)));let jn=[];for(d=0;d<y;++d){const En=O[d],Nn=En[p];if(!Nn)continue;const zr=En.pos-Kt;Nn.depth=En.depth,Nn.height=En.height,jn.push({type:"elem",elem:Nn,shift:zr})}jn=ie.makeVList({positionType:"individualShift",children:jn},o),jn=ie.makeSpan(["col-align-"+(qt.align||"c")],[jn]),lr.push(jn),(p<C-1||c.hskipBeforeAndAfter)&&(vn=S.deflt(qt.postgap,re),vn!==0&&(Fn=ie.makeSpan(["arraycolsep"],[]),Fn.style.width=Ce(vn),lr.push(Fn)))}if(O=ie.makeSpan(["mtable"],lr),z.length>0){const qt=ie.makeLineSpan("hline",o,U),sn=ie.makeLineSpan("hdashline",o,U),vn=[{type:"elem",elem:O,shift:0}];for(;z.length>0;){const jn=z.pop(),En=jn.pos-Kt;jn.isDashed?vn.push({type:"elem",elem:sn,shift:En}):vn.push({type:"elem",elem:qt,shift:En})}O=ie.makeVList({positionType:"individualShift",children:vn},o)}if(Li.length===0)return ie.makeSpan(["mord"],[O],o);{let qt=ie.makeVList({positionType:"individualShift",children:Li},o);return qt=ie.makeSpan(["tag"],[qt],o),ie.makeFragment([O,qt])}},vx={c:"center ",l:"left ",r:"right "},as=function(c,o){const d=[],p=new Ae.MathNode("mtd",[],["mtr-glue"]),y=new Ae.MathNode("mtd",[],["mml-eqn-num"]);for(let re=0;re<c.body.length;re++){const ue=c.body[re],je=[];for(let Ze=0;Ze<ue.length;Ze++)je.push(new Ae.MathNode("mtd",[dn(ue[Ze],o)]));c.tags&&c.tags[re]&&(je.unshift(p),je.push(p),c.leqno?je.unshift(y):je.push(y)),d.push(new Ae.MathNode("mtr",je))}let w=new Ae.MathNode("mtable",d);const C=c.arraystretch===.5?.1:.16+c.arraystretch-1+(c.addJot?.09:0);w.setAttribute("rowspacing",Ce(C));let O="",z="";if(c.cols&&c.cols.length>0){const re=c.cols;let ue="",je=!1,Ze=0,it=re.length;re[0].type==="separator"&&(O+="top ",Ze=1),re[re.length-1].type==="separator"&&(O+="bottom ",it-=1);for(let Ot=Ze;Ot<it;Ot++)re[Ot].type==="align"?(z+=vx[re[Ot].align],je&&(ue+="none "),je=!0):re[Ot].type==="separator"&&je&&(ue+=re[Ot].separator==="|"?"solid ":"dashed ",je=!1);w.setAttribute("columnalign",z.trim()),/[sd]/.test(ue)&&w.setAttribute("columnlines",ue.trim())}if(c.colSeparationType==="align"){const re=c.cols||[];let ue="";for(let je=1;je<re.length;je++)ue+=je%2?"0em ":"1em ";w.setAttribute("columnspacing",ue.trim())}else c.colSeparationType==="alignat"||c.colSeparationType==="gather"?w.setAttribute("columnspacing","0em"):c.colSeparationType==="small"?w.setAttribute("columnspacing","0.2778em"):c.colSeparationType==="CD"?w.setAttribute("columnspacing","0.5em"):w.setAttribute("columnspacing","1em");let U="";const te=c.hLinesBeforeRow;O+=te[0].length>0?"left ":"",O+=te[te.length-1].length>0?"right ":"";for(let re=1;re<te.length-1;re++)U+=te[re].length===0?"none ":te[re][0]?"dashed ":"solid ";return/[sd]/.test(U)&&w.setAttribute("rowlines",U.trim()),O!==""&&(w=new Ae.MathNode("menclose",[w]),w.setAttribute("notation",O.trim())),c.arraystretch&&c.arraystretch<1&&(w=new Ae.MathNode("mstyle",[w]),w.setAttribute("scriptlevel","1")),w},zd=function(c,o){c.envName.indexOf("ed")===-1&&Vo(c);const d=[],p=c.envName.indexOf("at")>-1?"alignat":"align",y=c.envName==="split",w=$s(c.parser,{cols:d,addJot:!0,autoTag:y?void 0:Nc(c.envName),emptySingleRow:!0,colSeparationType:p,maxNumCols:y?2:void 0,leqno:c.parser.settings.leqno},"display");let C,O=0;const z={type:"ordgroup",mode:c.mode,body:[]};if(o[0]&&o[0].type==="ordgroup"){let te="";for(let re=0;re<o[0].body.length;re++){const ue=Ct(o[0].body[re],"textord");te+=ue.text}C=Number(te),O=C*2}const U=!O;w.body.forEach(function(te){for(let re=1;re<te.length;re+=2){const ue=Ct(te[re],"styling");Ct(ue.body[0],"ordgroup").body.unshift(z)}if(U)O<te.length&&(O=te.length);else{const re=te.length/2;if(C<re)throw new a("Too many math in a row: "+("expected "+C+", but got "+re),te[0])}});for(let te=0;te<O;++te){let re="r",ue=0;te%2===1?re="l":te>0&&U&&(ue=1),d[te]={type:"align",align:re,pregap:ue,postgap:0}}return w.colSeparationType=U?"align":"alignat",w};ss({type:"array",names:["array","darray"],props:{numArgs:1},handler(c,o){const y=(Eo(o[0])?[o[0]]:Ct(o[0],"ordgroup").body).map(function(C){const z=xc(C).text;if("lcr".indexOf(z)!==-1)return{type:"align",align:z};if(z==="|")return{type:"separator",separator:"|"};if(z===":")return{type:"separator",separator:":"};throw new a("Unknown column alignment: "+z,C)}),w={cols:y,hskipBeforeAndAfter:!0,maxNumCols:y.length};return $s(c.parser,w,_c(c.envName))},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(c){const o={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[c.envName.replace("*","")];let d="c";const p={hskipBeforeAndAfter:!1,cols:[{type:"align",align:d}]};if(c.envName.charAt(c.envName.length-1)==="*"){const C=c.parser;if(C.consumeSpaces(),C.fetch().text==="["){if(C.consume(),C.consumeSpaces(),d=C.fetch().text,"lcr".indexOf(d)===-1)throw new a("Expected l or c or r",C.nextToken);C.consume(),C.consumeSpaces(),C.expect("]"),C.consume(),p.cols=[{type:"align",align:d}]}}const y=$s(c.parser,p,_c(c.envName)),w=Math.max(0,...y.body.map(C=>C.length));return y.cols=new Array(w).fill({type:"align",align:d}),o?{type:"leftright",mode:c.mode,body:[y],left:o[0],right:o[1],rightColor:void 0}:y},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(c){const o={arraystretch:.5},d=$s(c.parser,o,"script");return d.colSeparationType="small",d},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["subarray"],props:{numArgs:1},handler(c,o){const y=(Eo(o[0])?[o[0]]:Ct(o[0],"ordgroup").body).map(function(C){const z=xc(C).text;if("lc".indexOf(z)!==-1)return{type:"align",align:z};throw new a("Unknown column alignment: "+z,C)});if(y.length>1)throw new a("{subarray} can contain only one column");let w={cols:y,hskipBeforeAndAfter:!1,arraystretch:.5};if(w=$s(c.parser,w,"script"),w.body.length>0&&w.body[0].length>1)throw new a("{subarray} can contain only one column");return w},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(c){const o={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},d=$s(c.parser,o,_c(c.envName));return{type:"leftright",mode:c.mode,body:[d],left:c.envName.indexOf("r")>-1?".":"\\{",right:c.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:zd,htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(c){S.contains(["gather","gather*"],c.envName)&&Vo(c);const o={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Nc(c.envName),emptySingleRow:!0,leqno:c.parser.settings.leqno};return $s(c.parser,o,"display")},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:zd,htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(c){Vo(c);const o={autoTag:Nc(c.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:c.parser.settings.leqno};return $s(c.parser,o,"display")},htmlBuilder:is,mathmlBuilder:as}),ss({type:"array",names:["CD"],props:{numArgs:0},handler(c){return Vo(c),ox(c.parser)},htmlBuilder:is,mathmlBuilder:as}),V("\\nonumber","\\gdef\\@eqnsw{0}"),V("\\notag","\\nonumber"),$e({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(c,o){throw new a(c.funcName+" valid only within array environment")}});var Pd=Od;$e({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(c,o){let{parser:d,funcName:p}=c;const y=o[0];if(y.type!=="ordgroup")throw new a("Invalid environment name",y);let w="";for(let C=0;C<y.body.length;++C)w+=Ct(y.body[C],"textord").text;if(p==="\\begin"){if(!Pd.hasOwnProperty(w))throw new a("No such environment: "+w,y);const C=Pd[w],{args:O,optArgs:z}=d.parseArguments("\\begin{"+w+"}",C),U={mode:d.mode,envName:w,parser:d},te=C.handler(U,O,z);d.expect("\\end",!1);const re=d.nextToken,ue=Ct(d.parseFunction(),"environment");if(ue.name!==w)throw new a("Mismatch: \\begin{"+w+"} matched by \\end{"+ue.name+"}",re);return te}return{type:"environment",mode:d.mode,name:w,nameGroup:y}}});const Bd=(c,o)=>{const d=c.font,p=o.withFont(d);return Gt(c.body,p)},Ld=(c,o)=>{const d=c.font,p=o.withFont(d);return dn(c.body,p)},Fd={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};$e({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=No(o[0]);let w=p;return w in Fd&&(w=Fd[w]),{type:"font",mode:d.mode,font:w.slice(1),body:y}},htmlBuilder:Bd,mathmlBuilder:Ld}),$e({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(c,o)=>{let{parser:d}=c;const p=o[0],y=S.isCharacterBox(p);return{type:"mclass",mode:d.mode,mclass:Do(p),body:[{type:"font",mode:d.mode,font:"boldsymbol",body:p}],isCharacterBox:y}}}),$e({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(c,o)=>{let{parser:d,funcName:p,breakOnTokenText:y}=c;const{mode:w}=d,C=d.parseExpression(!0,y),O="math"+p.slice(1);return{type:"font",mode:w,font:O,body:{type:"ordgroup",mode:d.mode,body:C}}},htmlBuilder:Bd,mathmlBuilder:Ld});const $d=(c,o)=>{let d=o;return c==="display"?d=d.id>=oe.SCRIPT.id?d.text():oe.DISPLAY:c==="text"&&d.size===oe.DISPLAY.size?d=oe.TEXT:c==="script"?d=oe.SCRIPT:c==="scriptscript"&&(d=oe.SCRIPTSCRIPT),d},Ec=(c,o)=>{const d=$d(c.size,o.style),p=d.fracNum(),y=d.fracDen();let w;w=o.havingStyle(p);const C=Gt(c.numer,w,o);if(c.continued){const Pt=8.5/o.fontMetrics().ptPerEm,Kt=3.5/o.fontMetrics().ptPerEm;C.height=C.height<Pt?Pt:C.height,C.depth=C.depth<Kt?Kt:C.depth}w=o.havingStyle(y);const O=Gt(c.denom,w,o);let z,U,te;c.hasBarLine?(c.barSize?(U=tt(c.barSize,o),z=ie.makeLineSpan("frac-line",o,U)):z=ie.makeLineSpan("frac-line",o),U=z.height,te=z.height):(z=null,U=0,te=o.fontMetrics().defaultRuleThickness);let re,ue,je;d.size===oe.DISPLAY.size||c.size==="display"?(re=o.fontMetrics().num1,U>0?ue=3*te:ue=7*te,je=o.fontMetrics().denom1):(U>0?(re=o.fontMetrics().num2,ue=te):(re=o.fontMetrics().num3,ue=3*te),je=o.fontMetrics().denom2);let Ze;if(z){const Pt=o.fontMetrics().axisHeight;re-C.depth-(Pt+.5*U)<ue&&(re+=ue-(re-C.depth-(Pt+.5*U))),Pt-.5*U-(O.height-je)<ue&&(je+=ue-(Pt-.5*U-(O.height-je)));const Kt=-(Pt-.5*U);Ze=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:O,shift:je},{type:"elem",elem:z,shift:Kt},{type:"elem",elem:C,shift:-re}]},o)}else{const Pt=re-C.depth-(O.height-je);Pt<ue&&(re+=.5*(ue-Pt),je+=.5*(ue-Pt)),Ze=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:O,shift:je},{type:"elem",elem:C,shift:-re}]},o)}w=o.havingStyle(d),Ze.height*=w.sizeMultiplier/o.sizeMultiplier,Ze.depth*=w.sizeMultiplier/o.sizeMultiplier;let it;d.size===oe.DISPLAY.size?it=o.fontMetrics().delim1:d.size===oe.SCRIPTSCRIPT.size?it=o.havingStyle(oe.SCRIPT).fontMetrics().delim2:it=o.fontMetrics().delim2;let Ot,Nt;return c.leftDelim==null?Ot=Ta(o,["mopen"]):Ot=Ts.customSizedDelim(c.leftDelim,it,!0,o.havingStyle(d),c.mode,["mopen"]),c.continued?Nt=ie.makeSpan([]):c.rightDelim==null?Nt=Ta(o,["mclose"]):Nt=Ts.customSizedDelim(c.rightDelim,it,!0,o.havingStyle(d),c.mode,["mclose"]),ie.makeSpan(["mord"].concat(w.sizingClasses(o)),[Ot,ie.makeSpan(["mfrac"],[Ze]),Nt],o)},Mc=(c,o)=>{let d=new Ae.MathNode("mfrac",[dn(c.numer,o),dn(c.denom,o)]);if(!c.hasBarLine)d.setAttribute("linethickness","0px");else if(c.barSize){const y=tt(c.barSize,o);d.setAttribute("linethickness",Ce(y))}const p=$d(c.size,o.style);if(p.size!==o.style.size){d=new Ae.MathNode("mstyle",[d]);const y=p.size===oe.DISPLAY.size?"true":"false";d.setAttribute("displaystyle",y),d.setAttribute("scriptlevel","0")}if(c.leftDelim!=null||c.rightDelim!=null){const y=[];if(c.leftDelim!=null){const w=new Ae.MathNode("mo",[new Ae.TextNode(c.leftDelim.replace("\\",""))]);w.setAttribute("fence","true"),y.push(w)}if(y.push(d),c.rightDelim!=null){const w=new Ae.MathNode("mo",[new Ae.TextNode(c.rightDelim.replace("\\",""))]);w.setAttribute("fence","true"),y.push(w)}return pc(y)}return d};$e({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0],w=o[1];let C,O=null,z=null,U="auto";switch(p){case"\\dfrac":case"\\frac":case"\\tfrac":C=!0;break;case"\\\\atopfrac":C=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":C=!1,O="(",z=")";break;case"\\\\bracefrac":C=!1,O="\\{",z="\\}";break;case"\\\\brackfrac":C=!1,O="[",z="]";break;default:throw new Error("Unrecognized genfrac command")}switch(p){case"\\dfrac":case"\\dbinom":U="display";break;case"\\tfrac":case"\\tbinom":U="text";break}return{type:"genfrac",mode:d.mode,continued:!1,numer:y,denom:w,hasBarLine:C,leftDelim:O,rightDelim:z,size:U,barSize:null}},htmlBuilder:Ec,mathmlBuilder:Mc}),$e({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0],w=o[1];return{type:"genfrac",mode:d.mode,continued:!0,numer:y,denom:w,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),$e({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(c){let{parser:o,funcName:d,token:p}=c,y;switch(d){case"\\over":y="\\frac";break;case"\\choose":y="\\binom";break;case"\\atop":y="\\\\atopfrac";break;case"\\brace":y="\\\\bracefrac";break;case"\\brack":y="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:o.mode,replaceWith:y,token:p}}});const Gd=["display","text","script","scriptscript"],qd=function(c){let o=null;return c.length>0&&(o=c,o=o==="."?null:o),o};$e({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(c,o){let{parser:d}=c;const p=o[4],y=o[5],w=No(o[0]),C=w.type==="atom"&&w.family==="open"?qd(w.text):null,O=No(o[1]),z=O.type==="atom"&&O.family==="close"?qd(O.text):null,U=Ct(o[2],"size");let te,re=null;U.isBlank?te=!0:(re=U.value,te=re.number>0);let ue="auto",je=o[3];if(je.type==="ordgroup"){if(je.body.length>0){const Ze=Ct(je.body[0],"textord");ue=Gd[Number(Ze.text)]}}else je=Ct(je,"textord"),ue=Gd[Number(je.text)];return{type:"genfrac",mode:d.mode,numer:p,denom:y,continued:!1,hasBarLine:te,barSize:re,leftDelim:C,rightDelim:z,size:ue}},htmlBuilder:Ec,mathmlBuilder:Mc}),$e({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(c,o){let{parser:d,funcName:p,token:y}=c;return{type:"infix",mode:d.mode,replaceWith:"\\\\abovefrac",size:Ct(o[0],"size").value,token:y}}}),$e({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0],w=D(Ct(o[1],"infix").size),C=o[2],O=w.number>0;return{type:"genfrac",mode:d.mode,numer:y,denom:C,continued:!1,hasBarLine:O,barSize:w,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Ec,mathmlBuilder:Mc});const Hd=(c,o)=>{const d=o.style;let p,y;c.type==="supsub"?(p=c.sup?Gt(c.sup,o.havingStyle(d.sup()),o):Gt(c.sub,o.havingStyle(d.sub()),o),y=Ct(c.base,"horizBrace")):y=Ct(c,"horizBrace");const w=Gt(y.base,o.havingBaseStyle(oe.DISPLAY)),C=Cs.svgSpan(y,o);let O;if(y.isOver?(O=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w},{type:"kern",size:.1},{type:"elem",elem:C}]},o),O.children[0].children[0].children[1].classes.push("svg-align")):(O=ie.makeVList({positionType:"bottom",positionData:w.depth+.1+C.height,children:[{type:"elem",elem:C},{type:"kern",size:.1},{type:"elem",elem:w}]},o),O.children[0].children[0].children[0].classes.push("svg-align")),p){const z=ie.makeSpan(["mord",y.isOver?"mover":"munder"],[O],o);y.isOver?O=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:z},{type:"kern",size:.2},{type:"elem",elem:p}]},o):O=ie.makeVList({positionType:"bottom",positionData:z.depth+.2+p.height+p.depth,children:[{type:"elem",elem:p},{type:"kern",size:.2},{type:"elem",elem:z}]},o)}return ie.makeSpan(["mord",y.isOver?"mover":"munder"],[O],o)};$e({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(c,o){let{parser:d,funcName:p}=c;return{type:"horizBrace",mode:d.mode,label:p,isOver:/^\\over/.test(p),base:o[0]}},htmlBuilder:Hd,mathmlBuilder:(c,o)=>{const d=Cs.mathMLnode(c.label);return new Ae.MathNode(c.isOver?"mover":"munder",[dn(c.base,o),d])}}),$e({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;const p=o[1],y=Ct(o[0],"url").url;return d.settings.isTrusted({command:"\\href",url:y})?{type:"href",mode:d.mode,href:y,body:Vn(p)}:d.formatUnsupportedCmd("\\href")},htmlBuilder:(c,o)=>{const d=Ln(c.body,o,!1);return ie.makeAnchor(c.href,[],d,o)},mathmlBuilder:(c,o)=>{let d=Fs(c.body,o);return d instanceof Tr||(d=new Tr("mrow",[d])),d.setAttribute("href",c.href),d}}),$e({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;const p=Ct(o[0],"url").url;if(!d.settings.isTrusted({command:"\\url",url:p}))return d.formatUnsupportedCmd("\\url");const y=[];for(let C=0;C<p.length;C++){let O=p[C];O==="~"&&(O="\\textasciitilde"),y.push({type:"textord",mode:"text",text:O})}const w={type:"text",mode:d.mode,font:"\\texttt",body:y};return{type:"href",mode:d.mode,href:p,body:Vn(w)}}}),$e({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(c,o){let{parser:d}=c;return{type:"hbox",mode:d.mode,body:Vn(o[0])}},htmlBuilder(c,o){const d=Ln(c.body,o,!1);return ie.makeFragment(d)},mathmlBuilder(c,o){return new Ae.MathNode("mrow",br(c.body,o))}}),$e({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(c,o)=>{let{parser:d,funcName:p,token:y}=c;const w=Ct(o[0],"raw").string,C=o[1];d.settings.strict&&d.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let O;const z={};switch(p){case"\\htmlClass":z.class=w,O={command:"\\htmlClass",class:w};break;case"\\htmlId":z.id=w,O={command:"\\htmlId",id:w};break;case"\\htmlStyle":z.style=w,O={command:"\\htmlStyle",style:w};break;case"\\htmlData":{const U=w.split(",");for(let te=0;te<U.length;te++){const re=U[te].split("=");if(re.length!==2)throw new a("Error parsing key-value for \\htmlData");z["data-"+re[0].trim()]=re[1].trim()}O={command:"\\htmlData",attributes:z};break}default:throw new Error("Unrecognized html command")}return d.settings.isTrusted(O)?{type:"html",mode:d.mode,attributes:z,body:Vn(C)}:d.formatUnsupportedCmd(p)},htmlBuilder:(c,o)=>{const d=Ln(c.body,o,!1),p=["enclosing"];c.attributes.class&&p.push(...c.attributes.class.trim().split(/\s+/));const y=ie.makeSpan(p,d,o);for(const w in c.attributes)w!=="class"&&c.attributes.hasOwnProperty(w)&&y.setAttribute(w,c.attributes[w]);return y},mathmlBuilder:(c,o)=>Fs(c.body,o)}),$e({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;return{type:"htmlmathml",mode:d.mode,html:Vn(o[0]),mathml:Vn(o[1])}},htmlBuilder:(c,o)=>{const d=Ln(c.html,o,!1);return ie.makeFragment(d)},mathmlBuilder:(c,o)=>Fs(c.mathml,o)});const Dc=function(c){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(c))return{number:+c,unit:"bp"};{const o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(c);if(!o)throw new a("Invalid size: '"+c+"' in \\includegraphics");const d={number:+(o[1]+o[2]),unit:o[3]};if(!It(d))throw new a("Invalid unit: '"+d.unit+"' in \\includegraphics.");return d}};$e({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(c,o,d)=>{let{parser:p}=c,y={number:0,unit:"em"},w={number:.9,unit:"em"},C={number:0,unit:"em"},O="";if(d[0]){const te=Ct(d[0],"raw").string.split(",");for(let re=0;re<te.length;re++){const ue=te[re].split("=");if(ue.length===2){const je=ue[1].trim();switch(ue[0].trim()){case"alt":O=je;break;case"width":y=Dc(je);break;case"height":w=Dc(je);break;case"totalheight":C=Dc(je);break;default:throw new a("Invalid key: '"+ue[0]+"' in \\includegraphics.")}}}}const z=Ct(o[0],"url").url;return O===""&&(O=z,O=O.replace(/^.*[\\/]/,""),O=O.substring(0,O.lastIndexOf("."))),p.settings.isTrusted({command:"\\includegraphics",url:z})?{type:"includegraphics",mode:p.mode,alt:O,width:y,height:w,totalheight:C,src:z}:p.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(c,o)=>{const d=tt(c.height,o);let p=0;c.totalheight.number>0&&(p=tt(c.totalheight,o)-d);let y=0;c.width.number>0&&(y=tt(c.width,o));const w={height:Ce(d+p)};y>0&&(w.width=Ce(y)),p>0&&(w.verticalAlign=Ce(-p));const C=new At(c.src,c.alt,w);return C.height=d,C.depth=p,C},mathmlBuilder:(c,o)=>{const d=new Ae.MathNode("mglyph",[]);d.setAttribute("alt",c.alt);const p=tt(c.height,o);let y=0;if(c.totalheight.number>0&&(y=tt(c.totalheight,o)-p,d.setAttribute("valign",Ce(-y))),d.setAttribute("height",Ce(p+y)),c.width.number>0){const w=tt(c.width,o);d.setAttribute("width",Ce(w))}return d.setAttribute("src",c.src),d}}),$e({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(c,o){let{parser:d,funcName:p}=c;const y=Ct(o[0],"size");if(d.settings.strict){const w=p[1]==="m",C=y.value.unit==="mu";w?(C||d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+p+" supports only mu units, "+("not "+y.value.unit+" units")),d.mode!=="math"&&d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+p+" works only in math mode")):C&&d.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+p+" doesn't support mu units")}return{type:"kern",mode:d.mode,dimension:y.value}},htmlBuilder(c,o){return ie.makeGlue(c.dimension,o)},mathmlBuilder(c,o){const d=tt(c.dimension,o);return new Ae.SpaceNode(d)}}),$e({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0];return{type:"lap",mode:d.mode,alignment:p.slice(5),body:y}},htmlBuilder:(c,o)=>{let d;c.alignment==="clap"?(d=ie.makeSpan([],[Gt(c.body,o)]),d=ie.makeSpan(["inner"],[d],o)):d=ie.makeSpan(["inner"],[Gt(c.body,o)]);const p=ie.makeSpan(["fix"],[]);let y=ie.makeSpan([c.alignment],[d,p],o);const w=ie.makeSpan(["strut"]);return w.style.height=Ce(y.height+y.depth),y.depth&&(w.style.verticalAlign=Ce(-y.depth)),y.children.unshift(w),y=ie.makeSpan(["thinbox"],[y],o),ie.makeSpan(["mord","vbox"],[y],o)},mathmlBuilder:(c,o)=>{const d=new Ae.MathNode("mpadded",[dn(c.body,o)]);if(c.alignment!=="rlap"){const p=c.alignment==="llap"?"-1":"-0.5";d.setAttribute("lspace",p+"width")}return d.setAttribute("width","0px"),d}}),$e({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(c,o){let{funcName:d,parser:p}=c;const y=p.mode;p.switchMode("math");const w=d==="\\("?"\\)":"$",C=p.parseExpression(!1,w);return p.expect(w),p.switchMode(y),{type:"styling",mode:p.mode,style:"text",body:C}}}),$e({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(c,o){throw new a("Mismatched "+c.funcName)}});const Wd=(c,o)=>{switch(o.style.size){case oe.DISPLAY.size:return c.display;case oe.TEXT.size:return c.text;case oe.SCRIPT.size:return c.script;case oe.SCRIPTSCRIPT.size:return c.scriptscript;default:return c.text}};$e({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(c,o)=>{let{parser:d}=c;return{type:"mathchoice",mode:d.mode,display:Vn(o[0]),text:Vn(o[1]),script:Vn(o[2]),scriptscript:Vn(o[3])}},htmlBuilder:(c,o)=>{const d=Wd(c,o),p=Ln(d,o,!1);return ie.makeFragment(p)},mathmlBuilder:(c,o)=>{const d=Wd(c,o);return Fs(d,o)}});const Ud=(c,o,d,p,y,w,C)=>{c=ie.makeSpan([],[c]);const O=d&&S.isCharacterBox(d);let z,U;if(o){const ue=Gt(o,p.havingStyle(y.sup()),p);U={elem:ue,kern:Math.max(p.fontMetrics().bigOpSpacing1,p.fontMetrics().bigOpSpacing3-ue.depth)}}if(d){const ue=Gt(d,p.havingStyle(y.sub()),p);z={elem:ue,kern:Math.max(p.fontMetrics().bigOpSpacing2,p.fontMetrics().bigOpSpacing4-ue.height)}}let te;if(U&&z){const ue=p.fontMetrics().bigOpSpacing5+z.elem.height+z.elem.depth+z.kern+c.depth+C;te=ie.makeVList({positionType:"bottom",positionData:ue,children:[{type:"kern",size:p.fontMetrics().bigOpSpacing5},{type:"elem",elem:z.elem,marginLeft:Ce(-w)},{type:"kern",size:z.kern},{type:"elem",elem:c},{type:"kern",size:U.kern},{type:"elem",elem:U.elem,marginLeft:Ce(w)},{type:"kern",size:p.fontMetrics().bigOpSpacing5}]},p)}else if(z){const ue=c.height-C;te=ie.makeVList({positionType:"top",positionData:ue,children:[{type:"kern",size:p.fontMetrics().bigOpSpacing5},{type:"elem",elem:z.elem,marginLeft:Ce(-w)},{type:"kern",size:z.kern},{type:"elem",elem:c}]},p)}else if(U){const ue=c.depth+C;te=ie.makeVList({positionType:"bottom",positionData:ue,children:[{type:"elem",elem:c},{type:"kern",size:U.kern},{type:"elem",elem:U.elem,marginLeft:Ce(w)},{type:"kern",size:p.fontMetrics().bigOpSpacing5}]},p)}else return c;const re=[te];if(z&&w!==0&&!O){const ue=ie.makeSpan(["mspace"],[],p);ue.style.marginRight=Ce(w),re.unshift(ue)}return ie.makeSpan(["mop","op-limits"],re,p)},Zd=["\\smallint"],Bi=(c,o)=>{let d,p,y=!1,w;c.type==="supsub"?(d=c.sup,p=c.sub,w=Ct(c.base,"op"),y=!0):w=Ct(c,"op");const C=o.style;let O=!1;C.size===oe.DISPLAY.size&&w.symbol&&!S.contains(Zd,w.name)&&(O=!0);let z;if(w.symbol){const re=O?"Size2-Regular":"Size1-Regular";let ue="";if((w.name==="\\oiint"||w.name==="\\oiiint")&&(ue=w.name.slice(1),w.name=ue==="oiint"?"\\iint":"\\iiint"),z=ie.makeSymbol(w.name,re,"math",o,["mop","op-symbol",O?"large-op":"small-op"]),ue.length>0){const je=z.italic,Ze=ie.staticSvg(ue+"Size"+(O?"2":"1"),o);z=ie.makeVList({positionType:"individualShift",children:[{type:"elem",elem:z,shift:0},{type:"elem",elem:Ze,shift:O?.08:0}]},o),w.name="\\"+ue,z.classes.unshift("mop"),z.italic=je}}else if(w.body){const re=Ln(w.body,o,!0);re.length===1&&re[0]instanceof rn?(z=re[0],z.classes[0]="mop"):z=ie.makeSpan(["mop"],re,o)}else{const re=[];for(let ue=1;ue<w.name.length;ue++)re.push(ie.mathsym(w.name[ue],w.mode,o));z=ie.makeSpan(["mop"],re,o)}let U=0,te=0;return(z instanceof rn||w.name==="\\oiint"||w.name==="\\oiiint")&&!w.suppressBaseShift&&(U=(z.height-z.depth)/2-o.fontMetrics().axisHeight,te=z.italic),y?Ud(z,d,p,o,C,te,U):(U&&(z.style.position="relative",z.style.top=Ce(U)),z)},Na=(c,o)=>{let d;if(c.symbol)d=new Tr("mo",[Or(c.name,c.mode)]),S.contains(Zd,c.name)&&d.setAttribute("largeop","false");else if(c.body)d=new Tr("mo",br(c.body,o));else{d=new Tr("mi",[new rs(c.name.slice(1))]);const p=new Tr("mo",[Or("","text")]);c.parentIsSupSub?d=new Tr("mrow",[d,p]):d=dd([d,p])}return d},wx={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};$e({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(c,o)=>{let{parser:d,funcName:p}=c,y=p;return y.length===1&&(y=wx[y]),{type:"op",mode:d.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:y}},htmlBuilder:Bi,mathmlBuilder:Na}),$e({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(c,o)=>{let{parser:d}=c;const p=o[0];return{type:"op",mode:d.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Vn(p)}},htmlBuilder:Bi,mathmlBuilder:Na});const Sx={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};$e({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(c){let{parser:o,funcName:d}=c;return{type:"op",mode:o.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:d}},htmlBuilder:Bi,mathmlBuilder:Na}),$e({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(c){let{parser:o,funcName:d}=c;return{type:"op",mode:o.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:d}},htmlBuilder:Bi,mathmlBuilder:Na}),$e({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(c){let{parser:o,funcName:d}=c,p=d;return p.length===1&&(p=Sx[p]),{type:"op",mode:o.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:p}},htmlBuilder:Bi,mathmlBuilder:Na});const Yd=(c,o)=>{let d,p,y=!1,w;c.type==="supsub"?(d=c.sup,p=c.sub,w=Ct(c.base,"operatorname"),y=!0):w=Ct(c,"operatorname");let C;if(w.body.length>0){const O=w.body.map(U=>{const te=U.text;return typeof te=="string"?{type:"textord",mode:U.mode,text:te}:U}),z=Ln(O,o.withFont("mathrm"),!0);for(let U=0;U<z.length;U++){const te=z[U];te instanceof rn&&(te.text=te.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}C=ie.makeSpan(["mop"],z,o)}else C=ie.makeSpan(["mop"],[],o);return y?Ud(C,d,p,o,o.style,0,0):C};$e({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(c,o)=>{let{parser:d,funcName:p}=c;const y=o[0];return{type:"operatorname",mode:d.mode,body:Vn(y),alwaysHandleSupSub:p==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Yd,mathmlBuilder:(c,o)=>{let d=br(c.body,o.withFont("mathrm")),p=!0;for(let C=0;C<d.length;C++){const O=d[C];if(!(O instanceof Ae.SpaceNode))if(O instanceof Ae.MathNode)switch(O.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const z=O.children[0];O.children.length===1&&z instanceof Ae.TextNode?z.text=z.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):p=!1;break}default:p=!1}else p=!1}if(p){const C=d.map(O=>O.toText()).join("");d=[new Ae.TextNode(C)]}const y=new Ae.MathNode("mi",d);y.setAttribute("mathvariant","normal");const w=new Ae.MathNode("mo",[Or("","text")]);return c.parentIsSupSub?new Ae.MathNode("mrow",[y,w]):Ae.newDocumentFragment([y,w])}}),V("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),yi({type:"ordgroup",htmlBuilder(c,o){return c.semisimple?ie.makeFragment(Ln(c.body,o,!1)):ie.makeSpan(["mord"],Ln(c.body,o,!0),o)},mathmlBuilder(c,o){return Fs(c.body,o,!0)}}),$e({type:"overline",names:["\\overline"],props:{numArgs:1},handler(c,o){let{parser:d}=c;const p=o[0];return{type:"overline",mode:d.mode,body:p}},htmlBuilder(c,o){const d=Gt(c.body,o.havingCrampedStyle()),p=ie.makeLineSpan("overline-line",o),y=o.fontMetrics().defaultRuleThickness,w=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:3*y},{type:"elem",elem:p},{type:"kern",size:y}]},o);return ie.makeSpan(["mord","overline"],[w],o)},mathmlBuilder(c,o){const d=new Ae.MathNode("mo",[new Ae.TextNode("")]);d.setAttribute("stretchy","true");const p=new Ae.MathNode("mover",[dn(c.body,o),d]);return p.setAttribute("accent","true"),p}}),$e({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;const p=o[0];return{type:"phantom",mode:d.mode,body:Vn(p)}},htmlBuilder:(c,o)=>{const d=Ln(c.body,o.withPhantom(),!1);return ie.makeFragment(d)},mathmlBuilder:(c,o)=>{const d=br(c.body,o);return new Ae.MathNode("mphantom",d)}}),$e({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;const p=o[0];return{type:"hphantom",mode:d.mode,body:p}},htmlBuilder:(c,o)=>{let d=ie.makeSpan([],[Gt(c.body,o.withPhantom())]);if(d.height=0,d.depth=0,d.children)for(let p=0;p<d.children.length;p++)d.children[p].height=0,d.children[p].depth=0;return d=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d}]},o),ie.makeSpan(["mord"],[d],o)},mathmlBuilder:(c,o)=>{const d=br(Vn(c.body),o),p=new Ae.MathNode("mphantom",d),y=new Ae.MathNode("mpadded",[p]);return y.setAttribute("height","0px"),y.setAttribute("depth","0px"),y}}),$e({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(c,o)=>{let{parser:d}=c;const p=o[0];return{type:"vphantom",mode:d.mode,body:p}},htmlBuilder:(c,o)=>{const d=ie.makeSpan(["inner"],[Gt(c.body,o.withPhantom())]),p=ie.makeSpan(["fix"],[]);return ie.makeSpan(["mord","rlap"],[d,p],o)},mathmlBuilder:(c,o)=>{const d=br(Vn(c.body),o),p=new Ae.MathNode("mphantom",d),y=new Ae.MathNode("mpadded",[p]);return y.setAttribute("width","0px"),y}}),$e({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(c,o){let{parser:d}=c;const p=Ct(o[0],"size").value,y=o[1];return{type:"raisebox",mode:d.mode,dy:p,body:y}},htmlBuilder(c,o){const d=Gt(c.body,o),p=tt(c.dy,o);return ie.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:d}]},o)},mathmlBuilder(c,o){const d=new Ae.MathNode("mpadded",[dn(c.body,o)]),p=c.dy.number+c.dy.unit;return d.setAttribute("voffset",p),d}}),$e({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(c){let{parser:o}=c;return{type:"internal",mode:o.mode}}}),$e({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(c,o,d){let{parser:p}=c;const y=d[0],w=Ct(o[0],"size"),C=Ct(o[1],"size");return{type:"rule",mode:p.mode,shift:y&&Ct(y,"size").value,width:w.value,height:C.value}},htmlBuilder(c,o){const d=ie.makeSpan(["mord","rule"],[],o),p=tt(c.width,o),y=tt(c.height,o),w=c.shift?tt(c.shift,o):0;return d.style.borderRightWidth=Ce(p),d.style.borderTopWidth=Ce(y),d.style.bottom=Ce(w),d.width=p,d.height=y+w,d.depth=-w,d.maxFontSize=y*1.125*o.sizeMultiplier,d},mathmlBuilder(c,o){const d=tt(c.width,o),p=tt(c.height,o),y=c.shift?tt(c.shift,o):0,w=o.color&&o.getColor()||"black",C=new Ae.MathNode("mspace");C.setAttribute("mathbackground",w),C.setAttribute("width",Ce(d)),C.setAttribute("height",Ce(p));const O=new Ae.MathNode("mpadded",[C]);return y>=0?O.setAttribute("height",Ce(y)):(O.setAttribute("height",Ce(y)),O.setAttribute("depth",Ce(-y))),O.setAttribute("voffset",Ce(y)),O}});function Jd(c,o,d){const p=Ln(c,o,!1),y=o.sizeMultiplier/d.sizeMultiplier;for(let w=0;w<p.length;w++){const C=p[w].classes.indexOf("sizing");C<0?Array.prototype.push.apply(p[w].classes,o.sizingClasses(d)):p[w].classes[C+1]==="reset-size"+o.size&&(p[w].classes[C+1]="reset-size"+d.size),p[w].height*=y,p[w].depth*=y}return ie.makeFragment(p)}const Xd=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];$e({type:"sizing",names:Xd,props:{numArgs:0,allowedInText:!0},handler:(c,o)=>{let{breakOnTokenText:d,funcName:p,parser:y}=c;const w=y.parseExpression(!1,d);return{type:"sizing",mode:y.mode,size:Xd.indexOf(p)+1,body:w}},htmlBuilder:(c,o)=>{const d=o.havingSize(c.size);return Jd(c.body,d,o)},mathmlBuilder:(c,o)=>{const d=o.havingSize(c.size),p=br(c.body,d),y=new Ae.MathNode("mstyle",p);return y.setAttribute("mathsize",Ce(d.sizeMultiplier)),y}}),$e({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(c,o,d)=>{let{parser:p}=c,y=!1,w=!1;const C=d[0]&&Ct(d[0],"ordgroup");if(C){let z="";for(let U=0;U<C.body.length;++U)if(z=C.body[U].text,z==="t")y=!0;else if(z==="b")w=!0;else{y=!1,w=!1;break}}else y=!0,w=!0;const O=o[0];return{type:"smash",mode:p.mode,body:O,smashHeight:y,smashDepth:w}},htmlBuilder:(c,o)=>{const d=ie.makeSpan([],[Gt(c.body,o)]);if(!c.smashHeight&&!c.smashDepth)return d;if(c.smashHeight&&(d.height=0,d.children))for(let y=0;y<d.children.length;y++)d.children[y].height=0;if(c.smashDepth&&(d.depth=0,d.children))for(let y=0;y<d.children.length;y++)d.children[y].depth=0;const p=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d}]},o);return ie.makeSpan(["mord"],[p],o)},mathmlBuilder:(c,o)=>{const d=new Ae.MathNode("mpadded",[dn(c.body,o)]);return c.smashHeight&&d.setAttribute("height","0px"),c.smashDepth&&d.setAttribute("depth","0px"),d}}),$e({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(c,o,d){let{parser:p}=c;const y=d[0],w=o[0];return{type:"sqrt",mode:p.mode,body:w,index:y}},htmlBuilder(c,o){let d=Gt(c.body,o.havingCrampedStyle());d.height===0&&(d.height=o.fontMetrics().xHeight),d=ie.wrapFragment(d,o);const y=o.fontMetrics().defaultRuleThickness;let w=y;o.style.id<oe.TEXT.id&&(w=o.fontMetrics().xHeight);let C=y+w/4;const O=d.height+d.depth+C+y,{span:z,ruleWidth:U,advanceWidth:te}=Ts.sqrtImage(O,o),re=z.height-U;re>d.height+d.depth+C&&(C=(C+re-d.height-d.depth)/2);const ue=z.height-d.height-C-U;d.style.paddingLeft=Ce(te);const je=ie.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d,wrapperClasses:["svg-align"]},{type:"kern",size:-(d.height+ue)},{type:"elem",elem:z},{type:"kern",size:U}]},o);if(c.index){const Ze=o.havingStyle(oe.SCRIPTSCRIPT),it=Gt(c.index,Ze,o),Ot=.6*(je.height-je.depth),Nt=ie.makeVList({positionType:"shift",positionData:-Ot,children:[{type:"elem",elem:it}]},o),Pt=ie.makeSpan(["root"],[Nt]);return ie.makeSpan(["mord","sqrt"],[Pt,je],o)}else return ie.makeSpan(["mord","sqrt"],[je],o)},mathmlBuilder(c,o){const{body:d,index:p}=c;return p?new Ae.MathNode("mroot",[dn(d,o),dn(p,o)]):new Ae.MathNode("msqrt",[dn(d,o)])}});const Kd={display:oe.DISPLAY,text:oe.TEXT,script:oe.SCRIPT,scriptscript:oe.SCRIPTSCRIPT};$e({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(c,o){let{breakOnTokenText:d,funcName:p,parser:y}=c;const w=y.parseExpression(!0,d),C=p.slice(1,p.length-5);return{type:"styling",mode:y.mode,style:C,body:w}},htmlBuilder(c,o){const d=Kd[c.style],p=o.havingStyle(d).withFont("");return Jd(c.body,p,o)},mathmlBuilder(c,o){const d=Kd[c.style],p=o.havingStyle(d),y=br(c.body,p),w=new Ae.MathNode("mstyle",y),O={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[c.style];return w.setAttribute("scriptlevel",O[0]),w.setAttribute("displaystyle",O[1]),w}});const kx=function(c,o){const d=c.base;return d?d.type==="op"?d.limits&&(o.style.size===oe.DISPLAY.size||d.alwaysHandleSupSub)?Bi:null:d.type==="operatorname"?d.alwaysHandleSupSub&&(o.style.size===oe.DISPLAY.size||d.limits)?Yd:null:d.type==="accent"?S.isCharacterBox(d.base)?yc:null:d.type==="horizBrace"&&!c.sub===d.isOver?Hd:null:null};yi({type:"supsub",htmlBuilder(c,o){const d=kx(c,o);if(d)return d(c,o);const{base:p,sup:y,sub:w}=c,C=Gt(p,o);let O,z;const U=o.fontMetrics();let te=0,re=0;const ue=p&&S.isCharacterBox(p);if(y){const Kt=o.havingStyle(o.style.sup());O=Gt(y,Kt,o),ue||(te=C.height-Kt.fontMetrics().supDrop*Kt.sizeMultiplier/o.sizeMultiplier)}if(w){const Kt=o.havingStyle(o.style.sub());z=Gt(w,Kt,o),ue||(re=C.depth+Kt.fontMetrics().subDrop*Kt.sizeMultiplier/o.sizeMultiplier)}let je;o.style===oe.DISPLAY?je=U.sup1:o.style.cramped?je=U.sup3:je=U.sup2;const Ze=o.sizeMultiplier,it=Ce(.5/U.ptPerEm/Ze);let Ot=null;if(z){const Kt=c.base&&c.base.type==="op"&&c.base.name&&(c.base.name==="\\oiint"||c.base.name==="\\oiiint");(C instanceof rn||Kt)&&(Ot=Ce(-C.italic))}let Nt;if(O&&z){te=Math.max(te,je,O.depth+.25*U.xHeight),re=Math.max(re,U.sub2);const yn=4*U.defaultRuleThickness;if(te-O.depth-(z.height-re)<yn){re=yn-(te-O.depth)+z.height;const Fn=.8*U.xHeight-(te-O.depth);Fn>0&&(te+=Fn,re-=Fn)}const lr=[{type:"elem",elem:z,shift:re,marginRight:it,marginLeft:Ot},{type:"elem",elem:O,shift:-te,marginRight:it}];Nt=ie.makeVList({positionType:"individualShift",children:lr},o)}else if(z){re=Math.max(re,U.sub1,z.height-.8*U.xHeight);const Kt=[{type:"elem",elem:z,marginLeft:Ot,marginRight:it}];Nt=ie.makeVList({positionType:"shift",positionData:re,children:Kt},o)}else if(O)te=Math.max(te,je,O.depth+.25*U.xHeight),Nt=ie.makeVList({positionType:"shift",positionData:-te,children:[{type:"elem",elem:O,marginRight:it}]},o);else throw new Error("supsub must have either sup or sub.");const Pt=hc(C,"right")||"mord";return ie.makeSpan([Pt],[C,ie.makeSpan(["msupsub"],[Nt])],o)},mathmlBuilder(c,o){let d=!1,p,y;c.base&&c.base.type==="horizBrace"&&(y=!!c.sup,y===c.base.isOver&&(d=!0,p=c.base.isOver)),c.base&&(c.base.type==="op"||c.base.type==="operatorname")&&(c.base.parentIsSupSub=!0);const w=[dn(c.base,o)];c.sub&&w.push(dn(c.sub,o)),c.sup&&w.push(dn(c.sup,o));let C;if(d)C=p?"mover":"munder";else if(c.sub)if(c.sup){const O=c.base;O&&O.type==="op"&&O.limits&&o.style===oe.DISPLAY||O&&O.type==="operatorname"&&O.alwaysHandleSupSub&&(o.style===oe.DISPLAY||O.limits)?C="munderover":C="msubsup"}else{const O=c.base;O&&O.type==="op"&&O.limits&&(o.style===oe.DISPLAY||O.alwaysHandleSupSub)||O&&O.type==="operatorname"&&O.alwaysHandleSupSub&&(O.limits||o.style===oe.DISPLAY)?C="munder":C="msub"}else{const O=c.base;O&&O.type==="op"&&O.limits&&(o.style===oe.DISPLAY||O.alwaysHandleSupSub)||O&&O.type==="operatorname"&&O.alwaysHandleSupSub&&(O.limits||o.style===oe.DISPLAY)?C="mover":C="msup"}return new Ae.MathNode(C,w)}}),yi({type:"atom",htmlBuilder(c,o){return ie.mathsym(c.text,c.mode,o,["m"+c.family])},mathmlBuilder(c,o){const d=new Ae.MathNode("mo",[Or(c.text,c.mode)]);if(c.family==="bin"){const p=mc(c,o);p==="bold-italic"&&d.setAttribute("mathvariant",p)}else c.family==="punct"?d.setAttribute("separator","true"):(c.family==="open"||c.family==="close")&&d.setAttribute("stretchy","false");return d}});const Qd={mi:"italic",mn:"normal",mtext:"normal"};yi({type:"mathord",htmlBuilder(c,o){return ie.makeOrd(c,o,"mathord")},mathmlBuilder(c,o){const d=new Ae.MathNode("mi",[Or(c.text,c.mode,o)]),p=mc(c,o)||"italic";return p!==Qd[d.type]&&d.setAttribute("mathvariant",p),d}}),yi({type:"textord",htmlBuilder(c,o){return ie.makeOrd(c,o,"textord")},mathmlBuilder(c,o){const d=Or(c.text,c.mode,o),p=mc(c,o)||"normal";let y;return c.mode==="text"?y=new Ae.MathNode("mtext",[d]):/[0-9]/.test(c.text)?y=new Ae.MathNode("mn",[d]):c.text==="\\prime"?y=new Ae.MathNode("mo",[d]):y=new Ae.MathNode("mi",[d]),p!==Qd[y.type]&&y.setAttribute("mathvariant",p),y}});const Oc={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Rc={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};yi({type:"spacing",htmlBuilder(c,o){if(Rc.hasOwnProperty(c.text)){const d=Rc[c.text].className||"";if(c.mode==="text"){const p=ie.makeOrd(c,o,"textord");return p.classes.push(d),p}else return ie.makeSpan(["mspace",d],[ie.mathsym(c.text,c.mode,o)],o)}else{if(Oc.hasOwnProperty(c.text))return ie.makeSpan(["mspace",Oc[c.text]],[],o);throw new a('Unknown type of space "'+c.text+'"')}},mathmlBuilder(c,o){let d;if(Rc.hasOwnProperty(c.text))d=new Ae.MathNode("mtext",[new Ae.TextNode("")]);else{if(Oc.hasOwnProperty(c.text))return new Ae.MathNode("mspace");throw new a('Unknown type of space "'+c.text+'"')}return d}});const eh=()=>{const c=new Ae.MathNode("mtd",[]);return c.setAttribute("width","50%"),c};yi({type:"tag",mathmlBuilder(c,o){const d=new Ae.MathNode("mtable",[new Ae.MathNode("mtr",[eh(),new Ae.MathNode("mtd",[Fs(c.body,o)]),eh(),new Ae.MathNode("mtd",[Fs(c.tag,o)])])]);return d.setAttribute("width","100%"),d}});const th={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},nh={"\\textbf":"textbf","\\textmd":"textmd"},jx={"\\textit":"textit","\\textup":"textup"},rh=(c,o)=>{const d=c.font;if(d){if(th[d])return o.withTextFontFamily(th[d]);if(nh[d])return o.withTextFontWeight(nh[d]);if(d==="\\emph")return o.fontShape==="textit"?o.withTextFontShape("textup"):o.withTextFontShape("textit")}else return o;return o.withTextFontShape(jx[d])};$e({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(c,o){let{parser:d,funcName:p}=c;const y=o[0];return{type:"text",mode:d.mode,body:Vn(y),font:p}},htmlBuilder(c,o){const d=rh(c,o),p=Ln(c.body,d,!0);return ie.makeSpan(["mord","text"],p,d)},mathmlBuilder(c,o){const d=rh(c,o);return Fs(c.body,d)}}),$e({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(c,o){let{parser:d}=c;return{type:"underline",mode:d.mode,body:o[0]}},htmlBuilder(c,o){const d=Gt(c.body,o),p=ie.makeLineSpan("underline-line",o),y=o.fontMetrics().defaultRuleThickness,w=ie.makeVList({positionType:"top",positionData:d.height,children:[{type:"kern",size:y},{type:"elem",elem:p},{type:"kern",size:3*y},{type:"elem",elem:d}]},o);return ie.makeSpan(["mord","underline"],[w],o)},mathmlBuilder(c,o){const d=new Ae.MathNode("mo",[new Ae.TextNode("")]);d.setAttribute("stretchy","true");const p=new Ae.MathNode("munder",[dn(c.body,o),d]);return p.setAttribute("accentunder","true"),p}}),$e({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(c,o){let{parser:d}=c;return{type:"vcenter",mode:d.mode,body:o[0]}},htmlBuilder(c,o){const d=Gt(c.body,o),p=o.fontMetrics().axisHeight,y=.5*(d.height-p-(d.depth+p));return ie.makeVList({positionType:"shift",positionData:y,children:[{type:"elem",elem:d}]},o)},mathmlBuilder(c,o){return new Ae.MathNode("mpadded",[dn(c.body,o)],["vcenter"])}}),$e({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(c,o,d){throw new a("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(c,o){const d=sh(c),p=[],y=o.havingStyle(o.style.text());for(let w=0;w<d.length;w++){let C=d[w];C==="~"&&(C="\\textasciitilde"),p.push(ie.makeSymbol(C,"Typewriter-Regular",c.mode,y,["mord","texttt"]))}return ie.makeSpan(["mord","text"].concat(y.sizingClasses(o)),ie.tryCombineChars(p),y)},mathmlBuilder(c,o){const d=new Ae.TextNode(sh(c)),p=new Ae.MathNode("mtext",[d]);return p.setAttribute("mathvariant","monospace"),p}});const sh=c=>c.body.replace(/ /g,c.star?"":"");var Gs=cd;const ih=`[ \r
	]`,Cx="\\\\[a-zA-Z@]+",Tx="\\\\[^\uD800-\uDFFF]",Ix="("+Cx+")"+ih+"*",Ax=`\\\\(
|[ \r	]+
?)[ \r	]*`,Vc="[-]",Nx=new RegExp(Vc+"+$"),_x="("+ih+"+)|"+(Ax+"|")+"([!-\\[\\]---]"+(Vc+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Vc+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ix)+("|"+Tx+")");class ah{constructor(o,d){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=o,this.settings=d,this.tokenRegex=new RegExp(_x,"g"),this.catcodes={"%":14,"~":13}}setCatcode(o,d){this.catcodes[o]=d}lex(){const o=this.input,d=this.tokenRegex.lastIndex;if(d===o.length)return new Rr("EOF",new Ir(this,d,d));const p=this.tokenRegex.exec(o);if(p===null||p.index!==d)throw new a("Unexpected character: '"+o[d]+"'",new Rr(o[d],new Ir(this,d,d+1)));const y=p[6]||p[3]||(p[2]?"\\ ":" ");if(this.catcodes[y]===14){const w=o.indexOf(`
`,this.tokenRegex.lastIndex);return w===-1?(this.tokenRegex.lastIndex=o.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=w+1,this.lex()}return new Rr(y,new Ir(this,d,this.tokenRegex.lastIndex))}}class Ex{constructor(o,d){o===void 0&&(o={}),d===void 0&&(d={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=d,this.builtins=o,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new a("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const o=this.undefStack.pop();for(const d in o)o.hasOwnProperty(d)&&(o[d]==null?delete this.current[d]:this.current[d]=o[d])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(o){return this.current.hasOwnProperty(o)||this.builtins.hasOwnProperty(o)}get(o){return this.current.hasOwnProperty(o)?this.current[o]:this.builtins[o]}set(o,d,p){if(p===void 0&&(p=!1),p){for(let y=0;y<this.undefStack.length;y++)delete this.undefStack[y][o];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][o]=d)}else{const y=this.undefStack[this.undefStack.length-1];y&&!y.hasOwnProperty(o)&&(y[o]=this.current[o])}d==null?delete this.current[o]:this.current[o]=d}}var Mx=Rd;V("\\noexpand",function(c){const o=c.popToken();return c.isExpandable(o.text)&&(o.noexpand=!0,o.treatAsRelax=!0),{tokens:[o],numArgs:0}}),V("\\expandafter",function(c){const o=c.popToken();return c.expandOnce(!0),{tokens:[o],numArgs:0}}),V("\\@firstoftwo",function(c){return{tokens:c.consumeArgs(2)[0],numArgs:0}}),V("\\@secondoftwo",function(c){return{tokens:c.consumeArgs(2)[1],numArgs:0}}),V("\\@ifnextchar",function(c){const o=c.consumeArgs(3);c.consumeSpaces();const d=c.future();return o[0].length===1&&o[0][0].text===d.text?{tokens:o[1],numArgs:0}:{tokens:o[2],numArgs:0}}),V("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),V("\\TextOrMath",function(c){const o=c.consumeArgs(2);return c.mode==="text"?{tokens:o[0],numArgs:0}:{tokens:o[1],numArgs:0}});const oh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};V("\\char",function(c){let o=c.popToken(),d,p="";if(o.text==="'")d=8,o=c.popToken();else if(o.text==='"')d=16,o=c.popToken();else if(o.text==="`")if(o=c.popToken(),o.text[0]==="\\")p=o.text.charCodeAt(1);else{if(o.text==="EOF")throw new a("\\char` missing argument");p=o.text.charCodeAt(0)}else d=10;if(d){if(p=oh[o.text],p==null||p>=d)throw new a("Invalid base-"+d+" digit "+o.text);let y;for(;(y=oh[c.future().text])!=null&&y<d;)p*=d,p+=y,c.popToken()}return"\\@char{"+p+"}"});const zc=(c,o,d,p)=>{let y=c.consumeArg().tokens;if(y.length!==1)throw new a("\\newcommand's first argument must be a macro name");const w=y[0].text,C=c.isDefined(w);if(C&&!o)throw new a("\\newcommand{"+w+"} attempting to redefine "+(w+"; use \\renewcommand"));if(!C&&!d)throw new a("\\renewcommand{"+w+"} when command "+w+" does not yet exist; use \\newcommand");let O=0;if(y=c.consumeArg().tokens,y.length===1&&y[0].text==="["){let z="",U=c.expandNextToken();for(;U.text!=="]"&&U.text!=="EOF";)z+=U.text,U=c.expandNextToken();if(!z.match(/^\s*[0-9]+\s*$/))throw new a("Invalid number of arguments: "+z);O=parseInt(z),y=c.consumeArg().tokens}return C&&p||c.macros.set(w,{tokens:y,numArgs:O}),""};V("\\newcommand",c=>zc(c,!1,!0,!1)),V("\\renewcommand",c=>zc(c,!0,!1,!1)),V("\\providecommand",c=>zc(c,!0,!0,!0)),V("\\message",c=>{const o=c.consumeArgs(1)[0];return console.log(o.reverse().map(d=>d.text).join("")),""}),V("\\errmessage",c=>{const o=c.consumeArgs(1)[0];return console.error(o.reverse().map(d=>d.text).join("")),""}),V("\\show",c=>{const o=c.popToken(),d=o.text;return console.log(o,c.macros.get(d),Gs[d],xn.math[d],xn.text[d]),""}),V("\\bgroup","{"),V("\\egroup","}"),V("~","\\nobreakspace"),V("\\lq","`"),V("\\rq","'"),V("\\aa","\\r a"),V("\\AA","\\r A"),V("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),V("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),V("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),V("","\\mathscr{B}"),V("","\\mathscr{E}"),V("","\\mathscr{F}"),V("","\\mathscr{H}"),V("","\\mathscr{I}"),V("","\\mathscr{L}"),V("","\\mathscr{M}"),V("","\\mathscr{R}"),V("","\\mathfrak{C}"),V("","\\mathfrak{H}"),V("","\\mathfrak{Z}"),V("\\Bbbk","\\Bbb{k}"),V("","\\cdotp"),V("\\llap","\\mathllap{\\textrm{#1}}"),V("\\rlap","\\mathrlap{\\textrm{#1}}"),V("\\clap","\\mathclap{\\textrm{#1}}"),V("\\mathstrut","\\vphantom{(}"),V("\\underbar","\\underline{\\text{#1}}"),V("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),V("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),V("\\ne","\\neq"),V("","\\neq"),V("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),V("","\\notin"),V("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),V("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),V("","\\perp"),V("","\\mathclose{!\\mkern-0.8mu!}"),V("","\\notni"),V("","\\ulcorner"),V("","\\urcorner"),V("","\\llcorner"),V("","\\lrcorner"),V("","\\copyright"),V("","\\textregistered"),V("","\\textregistered"),V("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),V("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),V("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),V("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),V("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),V("","\\vdots"),V("\\varGamma","\\mathit{\\Gamma}"),V("\\varDelta","\\mathit{\\Delta}"),V("\\varTheta","\\mathit{\\Theta}"),V("\\varLambda","\\mathit{\\Lambda}"),V("\\varXi","\\mathit{\\Xi}"),V("\\varPi","\\mathit{\\Pi}"),V("\\varSigma","\\mathit{\\Sigma}"),V("\\varUpsilon","\\mathit{\\Upsilon}"),V("\\varPhi","\\mathit{\\Phi}"),V("\\varPsi","\\mathit{\\Psi}"),V("\\varOmega","\\mathit{\\Omega}"),V("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),V("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),V("\\boxed","\\fbox{$\\displaystyle{#1}$}"),V("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),V("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),V("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),V("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),V("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const lh={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};V("\\dots",function(c){let o="\\dotso";const d=c.expandAfterFuture().text;return d in lh?o=lh[d]:(d.slice(0,4)==="\\not"||d in xn.math&&S.contains(["bin","rel"],xn.math[d].group))&&(o="\\dotsb"),o});const Pc={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};V("\\dotso",function(c){return c.future().text in Pc?"\\ldots\\,":"\\ldots"}),V("\\dotsc",function(c){const o=c.future().text;return o in Pc&&o!==","?"\\ldots\\,":"\\ldots"}),V("\\cdots",function(c){return c.future().text in Pc?"\\@cdots\\,":"\\@cdots"}),V("\\dotsb","\\cdots"),V("\\dotsm","\\cdots"),V("\\dotsi","\\!\\cdots"),V("\\dotsx","\\ldots\\,"),V("\\DOTSI","\\relax"),V("\\DOTSB","\\relax"),V("\\DOTSX","\\relax"),V("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),V("\\,","\\tmspace+{3mu}{.1667em}"),V("\\thinspace","\\,"),V("\\>","\\mskip{4mu}"),V("\\:","\\tmspace+{4mu}{.2222em}"),V("\\medspace","\\:"),V("\\;","\\tmspace+{5mu}{.2777em}"),V("\\thickspace","\\;"),V("\\!","\\tmspace-{3mu}{.1667em}"),V("\\negthinspace","\\!"),V("\\negmedspace","\\tmspace-{4mu}{.2222em}"),V("\\negthickspace","\\tmspace-{5mu}{.277em}"),V("\\enspace","\\kern.5em "),V("\\enskip","\\hskip.5em\\relax"),V("\\quad","\\hskip1em\\relax"),V("\\qquad","\\hskip2em\\relax"),V("\\tag","\\@ifstar\\tag@literal\\tag@paren"),V("\\tag@paren","\\tag@literal{({#1})}"),V("\\tag@literal",c=>{if(c.macros.get("\\df@tag"))throw new a("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),V("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),V("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),V("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),V("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),V("\\newline","\\\\\\relax"),V("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const ch=Ce($t["Main-Regular"][84][1]-.7*$t["Main-Regular"][65][1]);V("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+ch+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),V("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+ch+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),V("\\hspace","\\@ifstar\\@hspacer\\@hspace"),V("\\@hspace","\\hskip #1\\relax"),V("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),V("\\ordinarycolon",":"),V("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),V("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),V("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),V("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),V("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),V("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),V("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),V("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),V("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),V("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),V("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),V("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),V("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),V("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),V("","\\dblcolon"),V("","\\eqcolon"),V("","\\coloneqq"),V("","\\eqqcolon"),V("","\\Coloneqq"),V("\\ratio","\\vcentcolon"),V("\\coloncolon","\\dblcolon"),V("\\colonequals","\\coloneqq"),V("\\coloncolonequals","\\Coloneqq"),V("\\equalscolon","\\eqqcolon"),V("\\equalscoloncolon","\\Eqqcolon"),V("\\colonminus","\\coloneq"),V("\\coloncolonminus","\\Coloneq"),V("\\minuscolon","\\eqcolon"),V("\\minuscoloncolon","\\Eqcolon"),V("\\coloncolonapprox","\\Colonapprox"),V("\\coloncolonsim","\\Colonsim"),V("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),V("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),V("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),V("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),V("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),V("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),V("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),V("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),V("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),V("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),V("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),V("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),V("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),V("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),V("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),V("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),V("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),V("\\nleqq","\\html@mathml{\\@nleqq}{}"),V("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),V("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),V("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),V("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),V("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),V("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),V("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),V("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),V("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),V("\\imath","\\html@mathml{\\@imath}{}"),V("\\jmath","\\html@mathml{\\@jmath}{}"),V("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),V("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),V("","\\llbracket"),V("","\\rrbracket"),V("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),V("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),V("","\\lBrace"),V("","\\rBrace"),V("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),V("","\\minuso"),V("\\darr","\\downarrow"),V("\\dArr","\\Downarrow"),V("\\Darr","\\Downarrow"),V("\\lang","\\langle"),V("\\rang","\\rangle"),V("\\uarr","\\uparrow"),V("\\uArr","\\Uparrow"),V("\\Uarr","\\Uparrow"),V("\\N","\\mathbb{N}"),V("\\R","\\mathbb{R}"),V("\\Z","\\mathbb{Z}"),V("\\alef","\\aleph"),V("\\alefsym","\\aleph"),V("\\Alpha","\\mathrm{A}"),V("\\Beta","\\mathrm{B}"),V("\\bull","\\bullet"),V("\\Chi","\\mathrm{X}"),V("\\clubs","\\clubsuit"),V("\\cnums","\\mathbb{C}"),V("\\Complex","\\mathbb{C}"),V("\\Dagger","\\ddagger"),V("\\diamonds","\\diamondsuit"),V("\\empty","\\emptyset"),V("\\Epsilon","\\mathrm{E}"),V("\\Eta","\\mathrm{H}"),V("\\exist","\\exists"),V("\\harr","\\leftrightarrow"),V("\\hArr","\\Leftrightarrow"),V("\\Harr","\\Leftrightarrow"),V("\\hearts","\\heartsuit"),V("\\image","\\Im"),V("\\infin","\\infty"),V("\\Iota","\\mathrm{I}"),V("\\isin","\\in"),V("\\Kappa","\\mathrm{K}"),V("\\larr","\\leftarrow"),V("\\lArr","\\Leftarrow"),V("\\Larr","\\Leftarrow"),V("\\lrarr","\\leftrightarrow"),V("\\lrArr","\\Leftrightarrow"),V("\\Lrarr","\\Leftrightarrow"),V("\\Mu","\\mathrm{M}"),V("\\natnums","\\mathbb{N}"),V("\\Nu","\\mathrm{N}"),V("\\Omicron","\\mathrm{O}"),V("\\plusmn","\\pm"),V("\\rarr","\\rightarrow"),V("\\rArr","\\Rightarrow"),V("\\Rarr","\\Rightarrow"),V("\\real","\\Re"),V("\\reals","\\mathbb{R}"),V("\\Reals","\\mathbb{R}"),V("\\Rho","\\mathrm{P}"),V("\\sdot","\\cdot"),V("\\sect","\\S"),V("\\spades","\\spadesuit"),V("\\sub","\\subset"),V("\\sube","\\subseteq"),V("\\supe","\\supseteq"),V("\\Tau","\\mathrm{T}"),V("\\thetasym","\\vartheta"),V("\\weierp","\\wp"),V("\\Zeta","\\mathrm{Z}"),V("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),V("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),V("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),V("\\bra","\\mathinner{\\langle{#1}|}"),V("\\ket","\\mathinner{|{#1}\\rangle}"),V("\\braket","\\mathinner{\\langle{#1}\\rangle}"),V("\\Bra","\\left\\langle#1\\right|"),V("\\Ket","\\left|#1\\right\\rangle");const uh=c=>o=>{const d=o.consumeArg().tokens,p=o.consumeArg().tokens,y=o.consumeArg().tokens,w=o.consumeArg().tokens,C=o.macros.get("|"),O=o.macros.get("\\|");o.macros.beginGroup();const z=re=>ue=>{c&&(ue.macros.set("|",C),y.length&&ue.macros.set("\\|",O));let je=re;return!re&&y.length&&ue.future().text==="|"&&(ue.popToken(),je=!0),{tokens:je?y:p,numArgs:0}};o.macros.set("|",z(!1)),y.length&&o.macros.set("\\|",z(!0));const U=o.consumeArg().tokens,te=o.expandTokens([...w,...U,...d]);return o.macros.endGroup(),{tokens:te.reverse(),numArgs:0}};V("\\bra@ket",uh(!1)),V("\\bra@set",uh(!0)),V("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),V("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),V("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),V("\\angln","{\\angl n}"),V("\\blue","\\textcolor{##6495ed}{#1}"),V("\\orange","\\textcolor{##ffa500}{#1}"),V("\\pink","\\textcolor{##ff00af}{#1}"),V("\\red","\\textcolor{##df0030}{#1}"),V("\\green","\\textcolor{##28ae7b}{#1}"),V("\\gray","\\textcolor{gray}{#1}"),V("\\purple","\\textcolor{##9d38bd}{#1}"),V("\\blueA","\\textcolor{##ccfaff}{#1}"),V("\\blueB","\\textcolor{##80f6ff}{#1}"),V("\\blueC","\\textcolor{##63d9ea}{#1}"),V("\\blueD","\\textcolor{##11accd}{#1}"),V("\\blueE","\\textcolor{##0c7f99}{#1}"),V("\\tealA","\\textcolor{##94fff5}{#1}"),V("\\tealB","\\textcolor{##26edd5}{#1}"),V("\\tealC","\\textcolor{##01d1c1}{#1}"),V("\\tealD","\\textcolor{##01a995}{#1}"),V("\\tealE","\\textcolor{##208170}{#1}"),V("\\greenA","\\textcolor{##b6ffb0}{#1}"),V("\\greenB","\\textcolor{##8af281}{#1}"),V("\\greenC","\\textcolor{##74cf70}{#1}"),V("\\greenD","\\textcolor{##1fab54}{#1}"),V("\\greenE","\\textcolor{##0d923f}{#1}"),V("\\goldA","\\textcolor{##ffd0a9}{#1}"),V("\\goldB","\\textcolor{##ffbb71}{#1}"),V("\\goldC","\\textcolor{##ff9c39}{#1}"),V("\\goldD","\\textcolor{##e07d10}{#1}"),V("\\goldE","\\textcolor{##a75a05}{#1}"),V("\\redA","\\textcolor{##fca9a9}{#1}"),V("\\redB","\\textcolor{##ff8482}{#1}"),V("\\redC","\\textcolor{##f9685d}{#1}"),V("\\redD","\\textcolor{##e84d39}{#1}"),V("\\redE","\\textcolor{##bc2612}{#1}"),V("\\maroonA","\\textcolor{##ffbde0}{#1}"),V("\\maroonB","\\textcolor{##ff92c6}{#1}"),V("\\maroonC","\\textcolor{##ed5fa6}{#1}"),V("\\maroonD","\\textcolor{##ca337c}{#1}"),V("\\maroonE","\\textcolor{##9e034e}{#1}"),V("\\purpleA","\\textcolor{##ddd7ff}{#1}"),V("\\purpleB","\\textcolor{##c6b9fc}{#1}"),V("\\purpleC","\\textcolor{##aa87ff}{#1}"),V("\\purpleD","\\textcolor{##7854ab}{#1}"),V("\\purpleE","\\textcolor{##543b78}{#1}"),V("\\mintA","\\textcolor{##f5f9e8}{#1}"),V("\\mintB","\\textcolor{##edf2df}{#1}"),V("\\mintC","\\textcolor{##e0e5cc}{#1}"),V("\\grayA","\\textcolor{##f6f7f7}{#1}"),V("\\grayB","\\textcolor{##f0f1f2}{#1}"),V("\\grayC","\\textcolor{##e3e5e6}{#1}"),V("\\grayD","\\textcolor{##d6d8da}{#1}"),V("\\grayE","\\textcolor{##babec2}{#1}"),V("\\grayF","\\textcolor{##888d93}{#1}"),V("\\grayG","\\textcolor{##626569}{#1}"),V("\\grayH","\\textcolor{##3b3e40}{#1}"),V("\\grayI","\\textcolor{##21242c}{#1}"),V("\\kaBlue","\\textcolor{##314453}{#1}"),V("\\kaGreen","\\textcolor{##71B307}{#1}");const dh={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Dx{constructor(o,d,p){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=d,this.expansionCount=0,this.feed(o),this.macros=new Ex(Mx,d.macros),this.mode=p,this.stack=[]}feed(o){this.lexer=new ah(o,this.settings)}switchMode(o){this.mode=o}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(o){this.stack.push(o)}pushTokens(o){this.stack.push(...o)}scanArgument(o){let d,p,y;if(o){if(this.consumeSpaces(),this.future().text!=="[")return null;d=this.popToken(),{tokens:y,end:p}=this.consumeArg(["]"])}else({tokens:y,start:d,end:p}=this.consumeArg());return this.pushToken(new Rr("EOF",p.loc)),this.pushTokens(y),d.range(p,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(o){const d=[],p=o&&o.length>0;p||this.consumeSpaces();const y=this.future();let w,C=0,O=0;do{if(w=this.popToken(),d.push(w),w.text==="{")++C;else if(w.text==="}"){if(--C,C===-1)throw new a("Extra }",w)}else if(w.text==="EOF")throw new a("Unexpected end of input in a macro argument, expected '"+(o&&p?o[O]:"}")+"'",w);if(o&&p)if((C===0||C===1&&o[O]==="{")&&w.text===o[O]){if(++O,O===o.length){d.splice(-O,O);break}}else O=0}while(C!==0||p);return y.text==="{"&&d[d.length-1].text==="}"&&(d.pop(),d.shift()),d.reverse(),{tokens:d,start:y,end:w}}consumeArgs(o,d){if(d){if(d.length!==o+1)throw new a("The length of delimiters doesn't match the number of args!");const y=d[0];for(let w=0;w<y.length;w++){const C=this.popToken();if(y[w]!==C.text)throw new a("Use of the macro doesn't match its definition",C)}}const p=[];for(let y=0;y<o;y++)p.push(this.consumeArg(d&&d[y+1]).tokens);return p}countExpansion(o){if(this.expansionCount+=o,this.expansionCount>this.settings.maxExpand)throw new a("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(o){const d=this.popToken(),p=d.text,y=d.noexpand?null:this._getExpansion(p);if(y==null||o&&y.unexpandable){if(o&&y==null&&p[0]==="\\"&&!this.isDefined(p))throw new a("Undefined control sequence: "+p);return this.pushToken(d),!1}this.countExpansion(1);let w=y.tokens;const C=this.consumeArgs(y.numArgs,y.delimiters);if(y.numArgs){w=w.slice();for(let O=w.length-1;O>=0;--O){let z=w[O];if(z.text==="#"){if(O===0)throw new a("Incomplete placeholder at end of macro body",z);if(z=w[--O],z.text==="#")w.splice(O+1,1);else if(/^[1-9]$/.test(z.text))w.splice(O,2,...C[+z.text-1]);else throw new a("Not a valid argument number",z)}}}return this.pushTokens(w),w.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const o=this.stack.pop();return o.treatAsRelax&&(o.text="\\relax"),o}throw new Error}expandMacro(o){return this.macros.has(o)?this.expandTokens([new Rr(o)]):void 0}expandTokens(o){const d=[],p=this.stack.length;for(this.pushTokens(o);this.stack.length>p;)if(this.expandOnce(!0)===!1){const y=this.stack.pop();y.treatAsRelax&&(y.noexpand=!1,y.treatAsRelax=!1),d.push(y)}return this.countExpansion(d.length),d}expandMacroAsText(o){const d=this.expandMacro(o);return d&&d.map(p=>p.text).join("")}_getExpansion(o){const d=this.macros.get(o);if(d==null)return d;if(o.length===1){const y=this.lexer.catcodes[o];if(y!=null&&y!==13)return}const p=typeof d=="function"?d(this):d;if(typeof p=="string"){let y=0;if(p.indexOf("#")!==-1){const U=p.replace(/##/g,"");for(;U.indexOf("#"+(y+1))!==-1;)++y}const w=new ah(p,this.settings),C=[];let O=w.lex();for(;O.text!=="EOF";)C.push(O),O=w.lex();return C.reverse(),{tokens:C,numArgs:y}}return p}isDefined(o){return this.macros.has(o)||Gs.hasOwnProperty(o)||xn.math.hasOwnProperty(o)||xn.text.hasOwnProperty(o)||dh.hasOwnProperty(o)}isExpandable(o){const d=this.macros.get(o);return d!=null?typeof d=="string"||typeof d=="function"||!d.unexpandable:Gs.hasOwnProperty(o)&&!Gs[o].primitive}}const hh=/^[]/,zo=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),Bc={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},fh={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Po{constructor(o,d){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Dx(o,d,this.mode),this.settings=d,this.leftrightDepth=0}expect(o,d){if(d===void 0&&(d=!0),this.fetch().text!==o)throw new a("Expected '"+o+"', got '"+this.fetch().text+"'",this.fetch());d&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(o){this.mode=o,this.gullet.switchMode(o)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const o=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),o}finally{this.gullet.endGroups()}}subparse(o){const d=this.nextToken;this.consume(),this.gullet.pushToken(new Rr("}")),this.gullet.pushTokens(o);const p=this.parseExpression(!1);return this.expect("}"),this.nextToken=d,p}parseExpression(o,d){const p=[];for(;;){this.mode==="math"&&this.consumeSpaces();const y=this.fetch();if(Po.endOfExpression.indexOf(y.text)!==-1||d&&y.text===d||o&&Gs[y.text]&&Gs[y.text].infix)break;const w=this.parseAtom(d);if(w){if(w.type==="internal")continue}else break;p.push(w)}return this.mode==="text"&&this.formLigatures(p),this.handleInfixNodes(p)}handleInfixNodes(o){let d=-1,p;for(let y=0;y<o.length;y++)if(o[y].type==="infix"){if(d!==-1)throw new a("only one infix operator per group",o[y].token);d=y,p=o[y].replaceWith}if(d!==-1&&p){let y,w;const C=o.slice(0,d),O=o.slice(d+1);C.length===1&&C[0].type==="ordgroup"?y=C[0]:y={type:"ordgroup",mode:this.mode,body:C},O.length===1&&O[0].type==="ordgroup"?w=O[0]:w={type:"ordgroup",mode:this.mode,body:O};let z;return p==="\\\\abovefrac"?z=this.callFunction(p,[y,o[d],w],[]):z=this.callFunction(p,[y,w],[]),[z]}else return o}handleSupSubscript(o){const d=this.fetch(),p=d.text;this.consume(),this.consumeSpaces();let y;do{var w;y=this.parseGroup(o)}while(((w=y)==null?void 0:w.type)==="internal");if(!y)throw new a("Expected group after '"+p+"'",d);return y}formatUnsupportedCmd(o){const d=[];for(let w=0;w<o.length;w++)d.push({type:"textord",mode:"text",text:o[w]});const p={type:"text",mode:this.mode,body:d};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[p]}}parseAtom(o){const d=this.parseGroup("atom",o);if((d==null?void 0:d.type)==="internal"||this.mode==="text")return d;let p,y;for(;;){this.consumeSpaces();const w=this.fetch();if(w.text==="\\limits"||w.text==="\\nolimits"){if(d&&d.type==="op"){const C=w.text==="\\limits";d.limits=C,d.alwaysHandleSupSub=!0}else if(d&&d.type==="operatorname")d.alwaysHandleSupSub&&(d.limits=w.text==="\\limits");else throw new a("Limit controls must follow a math operator",w);this.consume()}else if(w.text==="^"){if(p)throw new a("Double superscript",w);p=this.handleSupSubscript("superscript")}else if(w.text==="_"){if(y)throw new a("Double subscript",w);y=this.handleSupSubscript("subscript")}else if(w.text==="'"){if(p)throw new a("Double superscript",w);const C={type:"textord",mode:this.mode,text:"\\prime"},O=[C];for(this.consume();this.fetch().text==="'";)O.push(C),this.consume();this.fetch().text==="^"&&O.push(this.handleSupSubscript("superscript")),p={type:"ordgroup",mode:this.mode,body:O}}else if(zo[w.text]){const C=hh.test(w.text),O=[];for(O.push(new Rr(zo[w.text])),this.consume();;){const U=this.fetch().text;if(!zo[U]||hh.test(U)!==C)break;O.unshift(new Rr(zo[U])),this.consume()}const z=this.subparse(O);C?y={type:"ordgroup",mode:"math",body:z}:p={type:"ordgroup",mode:"math",body:z}}else break}return p||y?{type:"supsub",mode:this.mode,base:d,sup:p,sub:y}:d}parseFunction(o,d){const p=this.fetch(),y=p.text,w=Gs[y];if(!w)return null;if(this.consume(),d&&d!=="atom"&&!w.allowedInArgument)throw new a("Got function '"+y+"' with no arguments"+(d?" as "+d:""),p);if(this.mode==="text"&&!w.allowedInText)throw new a("Can't use function '"+y+"' in text mode",p);if(this.mode==="math"&&w.allowedInMath===!1)throw new a("Can't use function '"+y+"' in math mode",p);const{args:C,optArgs:O}=this.parseArguments(y,w);return this.callFunction(y,C,O,p,o)}callFunction(o,d,p,y,w){const C={funcName:o,parser:this,token:y,breakOnTokenText:w},O=Gs[o];if(O&&O.handler)return O.handler(C,d,p);throw new a("No function handler for "+o)}parseArguments(o,d){const p=d.numArgs+d.numOptionalArgs;if(p===0)return{args:[],optArgs:[]};const y=[],w=[];for(let C=0;C<p;C++){let O=d.argTypes&&d.argTypes[C];const z=C<d.numOptionalArgs;(d.primitive&&O==null||d.type==="sqrt"&&C===1&&w[0]==null)&&(O="primitive");const U=this.parseGroupOfType("argument to '"+o+"'",O,z);if(z)w.push(U);else if(U!=null)y.push(U);else throw new a("Null argument, please report this as a bug")}return{args:y,optArgs:w}}parseGroupOfType(o,d,p){switch(d){case"color":return this.parseColorGroup(p);case"size":return this.parseSizeGroup(p);case"url":return this.parseUrlGroup(p);case"math":case"text":return this.parseArgumentGroup(p,d);case"hbox":{const y=this.parseArgumentGroup(p,"text");return y!=null?{type:"styling",mode:y.mode,body:[y],style:"text"}:null}case"raw":{const y=this.parseStringGroup("raw",p);return y!=null?{type:"raw",mode:"text",string:y.text}:null}case"primitive":{if(p)throw new a("A primitive argument cannot be optional");const y=this.parseGroup(o);if(y==null)throw new a("Expected group as "+o,this.fetch());return y}case"original":case null:case void 0:return this.parseArgumentGroup(p);default:throw new a("Unknown group type as "+o,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(o,d){const p=this.gullet.scanArgument(d);if(p==null)return null;let y="",w;for(;(w=this.fetch()).text!=="EOF";)y+=w.text,this.consume();return this.consume(),p.text=y,p}parseRegexGroup(o,d){const p=this.fetch();let y=p,w="",C;for(;(C=this.fetch()).text!=="EOF"&&o.test(w+C.text);)y=C,w+=y.text,this.consume();if(w==="")throw new a("Invalid "+d+": '"+p.text+"'",p);return p.range(y,w)}parseColorGroup(o){const d=this.parseStringGroup("color",o);if(d==null)return null;const p=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(d.text);if(!p)throw new a("Invalid color: '"+d.text+"'",d);let y=p[0];return/^[0-9a-f]{6}$/i.test(y)&&(y="#"+y),{type:"color-token",mode:this.mode,color:y}}parseSizeGroup(o){let d,p=!1;if(this.gullet.consumeSpaces(),!o&&this.gullet.future().text!=="{"?d=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):d=this.parseStringGroup("size",o),!d)return null;!o&&d.text.length===0&&(d.text="0pt",p=!0);const y=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(d.text);if(!y)throw new a("Invalid size: '"+d.text+"'",d);const w={number:+(y[1]+y[2]),unit:y[3]};if(!It(w))throw new a("Invalid unit: '"+w.unit+"'",d);return{type:"size",mode:this.mode,value:w,isBlank:p}}parseUrlGroup(o){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const d=this.parseStringGroup("url",o);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),d==null)return null;const p=d.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:p}}parseArgumentGroup(o,d){const p=this.gullet.scanArgument(o);if(p==null)return null;const y=this.mode;d&&this.switchMode(d),this.gullet.beginGroup();const w=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const C={type:"ordgroup",mode:this.mode,loc:p.loc,body:w};return d&&this.switchMode(y),C}parseGroup(o,d){const p=this.fetch(),y=p.text;let w;if(y==="{"||y==="\\begingroup"){this.consume();const C=y==="{"?"}":"\\endgroup";this.gullet.beginGroup();const O=this.parseExpression(!1,C),z=this.fetch();this.expect(C),this.gullet.endGroup(),w={type:"ordgroup",mode:this.mode,loc:Ir.range(p,z),body:O,semisimple:y==="\\begingroup"||void 0}}else if(w=this.parseFunction(d,o)||this.parseSymbol(),w==null&&y[0]==="\\"&&!dh.hasOwnProperty(y)){if(this.settings.throwOnError)throw new a("Undefined control sequence: "+y,p);w=this.formatUnsupportedCmd(y),this.consume()}return w}formLigatures(o){let d=o.length-1;for(let p=0;p<d;++p){const y=o[p],w=y.text;w==="-"&&o[p+1].text==="-"&&(p+1<d&&o[p+2].text==="-"?(o.splice(p,3,{type:"textord",mode:"text",loc:Ir.range(y,o[p+2]),text:"---"}),d-=2):(o.splice(p,2,{type:"textord",mode:"text",loc:Ir.range(y,o[p+1]),text:"--"}),d-=1)),(w==="'"||w==="`")&&o[p+1].text===w&&(o.splice(p,2,{type:"textord",mode:"text",loc:Ir.range(y,o[p+1]),text:w+w}),d-=1)}}parseSymbol(){const o=this.fetch();let d=o.text;if(/^\\verb[^a-zA-Z]/.test(d)){this.consume();let w=d.slice(5);const C=w.charAt(0)==="*";if(C&&(w=w.slice(1)),w.length<2||w.charAt(0)!==w.slice(-1))throw new a(`\\verb assertion failed --
                    please report what input caused this bug`);return w=w.slice(1,-1),{type:"verb",mode:"text",body:w,star:C}}fh.hasOwnProperty(d[0])&&!xn[this.mode][d[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+d[0]+'" used in math mode',o),d=fh[d[0]]+d.slice(1));const p=Nx.exec(d);p&&(d=d.substring(0,p.index),d==="i"?d="":d==="j"&&(d=""));let y;if(xn[this.mode][d]){this.settings.strict&&this.mode==="math"&&kt.indexOf(d)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+d[0]+'" used in math mode',o);const w=xn[this.mode][d].group,C=Ir.range(o);let O;if(ko.hasOwnProperty(w)){const z=w;O={type:"atom",mode:this.mode,family:z,loc:C,text:d}}else O={type:w,mode:this.mode,loc:C,text:d};y=O}else if(d.charCodeAt(0)>=128)this.settings.strict&&(De(d.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+d[0]+'" used in math mode',o):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+d[0]+'"'+(" ("+d.charCodeAt(0)+")"),o)),y={type:"textord",mode:"text",loc:Ir.range(o),text:d};else return null;if(this.consume(),p)for(let w=0;w<p[0].length;w++){const C=p[0][w];if(!Bc[C])throw new a("Unknown accent ' "+C+"'",o);const O=Bc[C][this.mode]||Bc[C].text;if(!O)throw new a("Accent "+C+" unsupported in "+this.mode+" mode",o);y={type:"accent",mode:this.mode,loc:Ir.range(o),label:O,isStretchy:!1,isShifty:!0,base:y}}return y}}Po.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Lc=function(c,o){if(!(typeof c=="string"||c instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const d=new Po(c,o);delete d.gullet.macros.current["\\df@tag"];let p=d.parse();if(delete d.gullet.macros.current["\\current@color"],delete d.gullet.macros.current["\\color"],d.gullet.macros.get("\\df@tag")){if(!o.displayMode)throw new a("\\tag works only in display equations");p=[{type:"tag",mode:"text",body:p,tag:d.subparse([new Rr("\\df@tag")])}]}return p};let ph=function(c,o,d){o.textContent="";const p=Fc(c,d).toNode();o.appendChild(p)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ph=function(){throw new a("KaTeX doesn't work in quirks mode.")});const Ox=function(c,o){return Fc(c,o).toMarkup()},Rx=function(c,o){const d=new M(o);return Lc(c,d)},mh=function(c,o,d){if(d.throwOnError||!(c instanceof a))throw c;const p=ie.makeSpan(["katex-error"],[new rn(o)]);return p.setAttribute("title",c.toString()),p.setAttribute("style","color:"+d.errorColor),p},Fc=function(c,o){const d=new M(o);try{const p=Lc(c,d);return Jg(p,c,d)}catch(p){return mh(p,c,d)}};var Vx={version:"0.16.22",render:ph,renderToString:Ox,ParseError:a,SETTINGS_SCHEMA:T,__parse:Rx,__renderToDomTree:Fc,__renderToHTMLTree:function(c,o){const d=new M(o);try{const p=Lc(c,d);return Xg(p,c,d)}catch(p){return mh(p,c,d)}},__setFontMetrics:ye,__defineSymbol:b,__defineFunction:$e,__defineMacro:V,__domTree:{Span:Xe,Anchor:mt,SymbolNode:rn,SvgNode:Xt,PathNode:_t,LineNode:yr}},zx=Vx;return r=r.default,r}()})}(ou)),ou.exports}(function(e,t){(function(n,r){r(t,P,Qx(),B8())})(Np,function(n,r,i,a){Object.defineProperty(n,"__esModule",{value:!0});function l(j,S){for(var T in S)Object.defineProperty(j,T,{enumerable:!0,get:S[T]})}l(n,{BlockMath:()=>N,InlineMath:()=>D}),r=f(r),i=u(i),a=u(a);function u(j){return j&&j.__esModule?j:{default:j}}function h(j){if(typeof WeakMap!="function")return null;var S=new WeakMap,T=new WeakMap;return(h=function(E){return E?T:S})(j)}function f(j,S){if(j&&j.__esModule)return j;if(j===null||typeof j!="object"&&typeof j!="function")return{default:j};var T=h(S);if(T&&T.has(j))return T.get(j);var E={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in j)if(A!=="default"&&Object.prototype.hasOwnProperty.call(j,A)){var I=M?Object.getOwnPropertyDescriptor(j,A):null;I&&(I.get||I.set)?Object.defineProperty(E,A,I):E[A]=j[A]}return E.default=j,T&&T.set(j,E),E}const m=(j,{displayMode:S})=>{const T=({children:E,errorColor:M,math:A,renderError:I})=>{const W=A??E,{html:J,error:le}=(0,r.useMemo)(()=>{try{return{html:a.default.renderToString(W,{displayMode:S,errorColor:M,throwOnError:!!I}),error:void 0}}catch(ce){if(ce instanceof a.default.ParseError||ce instanceof TypeError)return{error:ce};throw ce}},[W,M,I]);return le?I?I(le):r.default.createElement(j,{html:`${le.message}`}):r.default.createElement(j,{html:J})};return T.propTypes={children:i.default.string,errorColor:i.default.string,math:i.default.string,renderError:i.default.func},T},x={html:i.default.string.isRequired},g=({html:j})=>r.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:j}});g.propTypes=x;const v=({html:j})=>r.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:j}});v.propTypes=x;const N=m(g,{displayMode:!0}),D=m(v,{displayMode:!1})})})(Ku,Ku.exports);var L8=Ku.exports;class wi{static getValidIdentifiers(t){const n={};return Object.keys(t).forEach(r=>{/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(r)&&(n[r]=t[r])}),n}static executeAlgorithm(t,n,r={},i){console.log(" AlgorithmExecutionService.executeAlgorithm: Starting algorithm execution",{algorithmId:t.id,algorithmName:t.name,iterationValue:n,context:r,modeContext:i,variablesCount:t.variables.length,stepsCount:t.steps.length});const a={variables:{},results:{},iterationValue:n,finalResult:null};try{return console.log(" AlgorithmExecutionService.executeAlgorithm: Initializing variables"),t.variables.forEach(l=>{console.log(` AlgorithmExecutionService.executeAlgorithm: Processing variable "${l.name}" (${l.id})`,{variableId:l.id,variableName:l.name,variableType:l.type,modeBased:l.modeBased,dimensionId:l.dimensionId,defaultValue:l.defaultValue,valuesByMode:l.valuesByMode});let u;if(l.modeBased&&l.dimensionId&&l.valuesByMode&&i){console.log(` AlgorithmExecutionService.executeAlgorithm: Processing mode-based variable "${l.name}"`,{variableId:l.id,dimensionId:l.dimensionId,modeContext:i,availableModeValues:Object.keys(l.valuesByMode)});const h=i[l.dimensionId];if(console.log(` AlgorithmExecutionService.executeAlgorithm: Current mode for dimension "${l.dimensionId}"`,{currentModeId:h,hasModeValue:h?!!l.valuesByMode[h]:!1}),h&&l.valuesByMode[h]){const f=l.valuesByMode[h];u=this.parseVariableValue(f,l.type),console.log(` AlgorithmExecutionService.executeAlgorithm: Using mode-specific value for "${l.name}"`,{modeId:h,modeValue:f,parsedValue:u,parsedValueType:typeof u})}else u=this.parseVariableValue(l.defaultValue||"",l.type),console.log(` AlgorithmExecutionService.executeAlgorithm: Mode-specific value not found for "${l.name}", using default`,{currentModeId:h,availableModeValues:Object.keys(l.valuesByMode),defaultValue:l.defaultValue,parsedValue:u,parsedValueType:typeof u})}else u=this.parseVariableValue(l.defaultValue||"",l.type),console.log(` AlgorithmExecutionService.executeAlgorithm: Using default value for "${l.name}"`,{defaultValue:l.defaultValue,parsedValue:u,parsedValueType:typeof u});a.variables[l.id]=u,console.log(` AlgorithmExecutionService.executeAlgorithm: Stored variable "${l.name}" in execution context`,{variableId:l.id,storedValue:u})}),a.variables.n=n,console.log(' AlgorithmExecutionService.executeAlgorithm: Added system variable "n"',{n}),Object.assign(a.variables,r),console.log(" AlgorithmExecutionService.executeAlgorithm: Added additional context",{context:r}),a.variables.Math={pow:Math.pow,max:Math.max,min:Math.min,abs:Math.abs,floor:Math.floor,ceil:Math.ceil,round:Math.round,sqrt:Math.sqrt,sin:Math.sin,cos:Math.cos,tan:Math.tan,log:Math.log,exp:Math.exp},a.variables.Array={isArray:Array.isArray},console.log(" AlgorithmExecutionService.executeAlgorithm: Added Math and Array utilities"),console.log(" AlgorithmExecutionService.executeAlgorithm: Final execution context variables",{variableCount:Object.keys(a.variables).length,variables:a.variables}),console.log(" AlgorithmExecutionService.executeAlgorithm: Starting step execution"),t.steps.forEach((l,u)=>{if(console.log(` AlgorithmExecutionService.executeAlgorithm: Executing step ${u+1}/${t.steps.length}`,{stepType:l.type,stepId:l.id,stepName:l.name}),l.type==="formula"){const h=t.formulas.find(f=>f.id===l.id);if(h){console.log(` AlgorithmExecutionService.executeAlgorithm: Evaluating formula "${h.name}"`,{formulaId:h.id,formulaName:h.name,expression:h.expressions.javascript.value});const f=this.evaluateFormula(h,a.variables);console.log(` AlgorithmExecutionService.executeAlgorithm: Formula "${h.name}" evaluated successfully`,{result:f,resultType:typeof f}),a.results[h.name]=f,a.finalResult=f}else console.error(" AlgorithmExecutionService.executeAlgorithm: Formula not found for step",{stepId:l.id,stepName:l.name})}else if(l.type==="condition"){const h=t.conditions.find(f=>f.id===l.id);if(h){console.log(` AlgorithmExecutionService.executeAlgorithm: Evaluating condition "${h.name}"`,{conditionId:h.id,conditionName:h.name,expression:h.expression});const f=this.evaluateCondition(h,a.variables);console.log(` AlgorithmExecutionService.executeAlgorithm: Condition "${h.name}" evaluated successfully`,{result:f,resultType:typeof f}),a.results[h.name]=f}else console.error(" AlgorithmExecutionService.executeAlgorithm: Condition not found for step",{stepId:l.id,stepName:l.name})}}),console.log(" AlgorithmExecutionService.executeAlgorithm: Algorithm execution completed successfully",{finalResult:a.finalResult,finalResultType:typeof a.finalResult,resultsCount:Object.keys(a.results).length,results:a.results}),a}catch(l){throw console.error(" AlgorithmExecutionService.executeAlgorithm: Algorithm execution failed",{error:l,stack:l instanceof Error?l.stack:void 0,algorithmId:t.id,iterationValue:n,modeContext:i}),new Error(`Algorithm execution failed: ${l}`)}}static evaluateFormula(t,n){try{if(t.expressions.ast){const r=Sr.validateAST(t.expressions.ast),i=r.filter(m=>m.startsWith("Warning:")),a=r.filter(m=>!m.startsWith("Warning:"));if(i.length>0&&console.warn(`AST validation warnings for formula "${t.name}":`,i),a.length>0)throw new Error(`AST validation failed: ${a.join(", ")}`);const l=Sr.generateJavaScript(t.expressions.ast),u={...n,Math:n.Math||Math,Array:n.Array||Array,console};if(l.includes("=")){const m=l.split("=").map(x=>x.trim());if(m.length===2){const x=m[0],g=m[1],N=new Function(...Object.keys(this.getValidIdentifiers(u)),`return ${g}`)(...Object.values(this.getValidIdentifiers(u)));return n[x]=N,u[x]=N,N}}return new Function(...Object.keys(this.getValidIdentifiers(u)),`return ${l}`)(...Object.values(this.getValidIdentifiers(u)))}else{const r=t.expressions.javascript.value,i={...n,Math:n.Math||Math,Array:n.Array||Array,console};if(r.includes("=")){const u=r.split("=").map(h=>h.trim());if(u.length===2){const h=u[0],f=u[1],x=new Function(...Object.keys(this.getValidIdentifiers(i)),`return ${f}`)(...Object.values(this.getValidIdentifiers(i)));n[h]=x,i[h]=x;for(const g of Object.keys(n))g!==h&&n[g]===x&&(n[g]=x,i[g]=x);return x}}return new Function(...Object.keys(this.getValidIdentifiers(i)),`return ${r}`)(...Object.values(this.getValidIdentifiers(i)))}}catch(r){throw console.error("Formula evaluation error:",r),console.error("Expression:",t.expressions.javascript.value),console.error("Variables:",n),new Error(`Formula evaluation failed for ${t.name}: ${r}`)}}static evaluateCondition(t,n){try{const r=t.expression,i={...n,Math:n.Math||Math,Array:n.Array||Array,console};return!!new Function(...Object.keys(this.getValidIdentifiers(i)),`return ${r}`)(...Object.values(this.getValidIdentifiers(i)))}catch(r){throw console.error("Condition evaluation error:",r),console.error("  Expression:",t.expression),console.error("  Variables:",n),new Error(`Condition evaluation failed for ${t.name}: ${r}`)}}static generateTokensForAlgorithm(t){var a;const n=[];if(!((a=t.tokenGeneration)!=null&&a.enabled))return n;const{iterationRange:r}=t.tokenGeneration,i=[];for(let l=r.start;l<=r.end;l+=r.step)i.push(l);return i.forEach(l=>{try{const u=this.executeAlgorithm(t,l),h=this.generateTokenDisplayName(t,l),f={value:this.formatValueForTokenType(u.finalResult,t.resolvedValueTypeId)},m=`${t.id}-${l}`;n.push({tokenId:m,displayName:h,value:f,iterationValue:l,formulaName:this.getLastExecutedFormulaName(t)})}catch(u){console.error(`Error generating token for iteration ${l}:`,u),n.push({tokenId:`${t.id}-${l}`,displayName:`Error-${l}`,value:{value:""},iterationValue:l,formulaName:"Error",error:String(u)})}}),n}static generateTokenDisplayName(t,n){const r=t.name.replace(/\s+/g,"-").toLowerCase();return n<0?`${r}-minus-${Math.abs(n)}`:`${r}-${n}`}static formatValueForTokenType(t,n){if(t==null)return"";switch(n){case"dimension":case"gap":case"font-size":{const r=Number(t);return isNaN(r)?String(t):r.toString()}case"color":{if(typeof t=="string"&&(t.startsWith("#")||t.startsWith("rgb")))return t;const r=Number(t);return isNaN(r)?String(t):`#${r.toString(16).padStart(6,"0")}`}default:return String(t)}}static getLastExecutedFormulaName(t){for(let n=t.steps.length-1;n>=0;n--){const r=t.steps[n];if(r.type==="formula")return r.name}return"Unknown"}static parseVariableValue(t,n){switch(n){case"number":return Number(t)||0;case"string":{if(t.trim().startsWith("[")&&t.trim().endsWith("]"))try{return JSON.parse(t)}catch{return String(t)}return String(t)}case"boolean":return t==="true"||t==="1";case"color":return String(t);default:return t}}static validateAlgorithm(t){const n=[];return t.id||n.push("Algorithm ID is required"),t.name||n.push("Algorithm name is required"),t.resolvedValueTypeId||n.push("Resolved value type ID is required"),t.variables.forEach((r,i)=>{r.id||n.push(`Variable ${i}: ID is required`),r.name||n.push(`Variable ${i}: Name is required`),r.type||n.push(`Variable ${i}: Type is required`)}),t.formulas.forEach((r,i)=>{var a,l;r.id||n.push(`Formula ${i}: ID is required`),r.name||n.push(`Formula ${i}: Name is required`),(l=(a=r.expressions)==null?void 0:a.javascript)!=null&&l.value||n.push(`Formula ${i}: JavaScript expression is required`)}),t.steps.forEach((r,i)=>{r.type||n.push(`Step ${i}: Type is required`),r.id||n.push(`Step ${i}: ID is required`),r.name||n.push(`Step ${i}: Name is required`),r.type==="formula"?t.formulas.find(l=>l.id===r.id)||n.push(`Step ${i}: Referenced formula '${r.id}' not found`):r.type==="condition"&&(t.conditions.find(l=>l.id===r.id)||n.push(`Step ${i}: Referenced condition '${r.id}' not found`))}),n}}class Qi{static generateCodeSyntax(t,n,r){var D;const i=(r.platforms||[]).find(j=>j.id===n),a=(i==null?void 0:i.syntaxPatterns)||{},l=((D=r.namingRules)==null?void 0:D.taxonomyOrder)||[],u=r.taxonomies||[],h=[],f=new Set;if(Array.isArray(t.taxonomies)&&t.taxonomies.length>0&&(l.forEach(j=>{const S=t.taxonomies.find(T=>T.taxonomyId===j);if(S){const T=u.find(M=>M.id===S.taxonomyId),E=T==null?void 0:T.terms.find(M=>M.id===S.termId);E&&(h.push(E.name),f.add(j))}}),t.taxonomies.forEach(j=>{if(!f.has(j.taxonomyId)){const S=u.find(E=>E.id===j.taxonomyId),T=S==null?void 0:S.terms.find(E=>E.id===j.termId);T&&h.push(T.name)}})),h.length===0)return"";let m=h;switch(a.capitalization){case"uppercase":m=h.map(j=>j.toUpperCase());break;case"lowercase":m=h.map(j=>j.toLowerCase());break;case"capitalize":m=h.map(j=>j.charAt(0).toUpperCase()+j.slice(1).toLowerCase());break}const x=m.join(a.delimiter??"");let g=a.prefix??"",v=a.suffix??"";switch(g&&a.delimiter&&(g=g.split(/\s+/).join(a.delimiter)),v&&a.delimiter&&(v=v.split(/\s+/).join(a.delimiter)),a.capitalization){case"uppercase":g=g.toUpperCase(),v=v.toUpperCase();break;case"lowercase":g=g.toLowerCase(),v=v.toLowerCase();break;case"capitalize":g=g.replace(/\b\w/g,j=>j.toUpperCase()),v=v.replace(/\b\w/g,j=>j.toUpperCase());break}let N="";if(a.formatString)N=a.formatString.replace("{prefix}",g).replace("{name}",x).replace("{suffix}",v);else{const j=a.delimiter??"";g&&x&&v?N=`${g}${j}${x}${j}${v}`:g&&x?N=`${g}${j}${x}`:x&&v?N=`${x}${j}${v}`:g&&v?N=`${g}${j}${v}`:g?N=g:x?N=x:v?N=v:N=""}return N}static generateAllCodeSyntaxes(t,n){return(n.platforms||[]).map(r=>({platformId:r.id,formattedName:this.generateCodeSyntax(t,r.id,n)||""}))}static updateCodeSyntax(t,n,r){return{...t,codeSyntax:{...t.codeSyntax,[n]:r}}}}function F8(e){return Object.entries(e).map(([t,n])=>({platformId:t,formattedName:n}))}function Pf(e){return Array.isArray(e)?e:typeof e=="object"&&e!==null?F8(e):[]}class Bf{static generateTokens(t,n,r,i,a=!1,l){var f,m,x,g;if(console.log(" TokenGenerationService.generateTokens: Starting token generation",{algorithmId:t.id,algorithmName:t.name,hasTokenGeneration:!!((f=t.tokenGeneration)!=null&&f.enabled),existingTokensCount:n.length,selectedModes:l,modifyTaxonomiesInPlace:a}),!((m=t.tokenGeneration)!=null&&m.enabled))return console.log(" TokenGenerationService.generateTokens: Token generation not enabled"),{tokens:[],errors:[]};const u=[],h=[];try{if(t.formulas.length===0){const I="Algorithm must have at least one formula for token generation";return console.error(" TokenGenerationService.generateTokens:",I),u.push(I),{tokens:[],errors:u}}const{logicalMapping:v}=t.tokenGeneration;if(!v.taxonomyId&&!v.newTaxonomyName){const I="Must select an existing taxonomy or provide a name for a new taxonomy";return console.error(" TokenGenerationService.generateTokens:",I),u.push(I),{tokens:[],errors:u}}console.log(" TokenGenerationService.generateTokens: Basic validation passed");const N=this.generateIterationValues(t.tokenGeneration.iterationRange);console.log(" TokenGenerationService.generateTokens: Generated iteration values",{iterationValues:N,range:t.tokenGeneration.iterationRange});const D=this.generateTermsFromLogicalMapping(N,v);console.log(" TokenGenerationService.generateTokens: Generated terms",{generatedTerms:D,logicalMapping:v});const{taxonomy:j,newTaxonomies:S}=this.handleTaxonomyCreation(v,D,i,t.tokenGeneration.bulkAssignments.resolvedValueTypeId);console.log(" TokenGenerationService.generateTokens: Taxonomy handling complete",{taxonomyId:j.id,taxonomyName:j.name,termCount:j.terms.length,newTaxonomiesCount:S.length});const T=a?{id:j.id,termCount:j.terms.length,termNames:j.terms.map(I=>I.name)}:null,E=this.matchOrCreateTerms(j,D,N,a);console.log(" TokenGenerationService.generateTokens: Term mappings created",{termMappingsCount:E.length,termMappings:E.slice(0,3)});const M=this.generateModeCombinations(t,l);console.log(" TokenGenerationService.generateTokens: Mode combinations generated",{modeCombinationsCount:M.length,modeCombinations:M,algorithmVariables:t.variables.map(I=>({id:I.id,name:I.name,modeBased:I.modeBased,dimensionId:I.dimensionId,hasModeValues:!!I.valuesByMode}))}),console.log(" TokenGenerationService.generateTokens: Starting token generation loop",{iterationValuesCount:N.length,modeCombinationsCount:M.length,totalExpectedTokens:N.length*M.length});for(let I=0;I<N.length;I++){const W=N[I];console.log(` TokenGenerationService.generateTokens: Processing iteration ${I+1}/${N.length}, n=${W}`);for(let J=0;J<M.length;J++){const le=M[J];console.log(` TokenGenerationService.generateTokens: Processing mode combination ${J+1}/${M.length}`,{modeContext:le,iterationValue:W,modeContextKeys:Object.keys(le),modeContextValues:Object.values(le)});try{console.log(" TokenGenerationService.generateTokens: Executing algorithm steps",{algorithmId:t.id,stepsCount:t.steps.length,modeContext:le,variables:t.variables.map(q=>{var pe,H;return{id:q.id,name:q.name,modeBased:q.modeBased,dimensionId:q.dimensionId,defaultValue:(H=(pe=q.valuesByMode)==null?void 0:pe[0])==null?void 0:H.value}})});const ce=this.executeAlgorithmSteps(t,W,le);console.log(" TokenGenerationService.generateTokens: Algorithm execution successful",{calculatedValue:ce,calculatedValueType:typeof ce,isNumber:typeof ce=="number",isNaN:typeof ce=="number"?isNaN(ce):"N/A"});const F=this.generateTokenId();if(console.log(" TokenGenerationService.generateTokens: Generated token ID",{tokenId:F}),n.some(q=>q.id===F)){const q=`Token ID "${F}" already exists`;console.error(" TokenGenerationService.generateTokens:",q),u.push(q);continue}const Q=E.find(q=>q.iterationValue===W);if(!Q){const q=`No term mapping found for iteration ${W}`;console.error(" TokenGenerationService.generateTokens:",q,{termMappings:E,iterationValue:W}),u.push(q);continue}console.log(" TokenGenerationService.generateTokens: Found term mapping",{termMapping:Q,iterationValue:W});const de=this.createTokenWithLogicalMappingAndModes(F,t,ce,W,j,Q.termId,i,le);console.log(" TokenGenerationService.generateTokens: Token created successfully",{tokenId:de.id,displayName:de.displayName,value:(x=de.valuesByMode[0])==null?void 0:x.value,modeIds:(g=de.valuesByMode[0])==null?void 0:g.modeIds,taxonomiesCount:de.taxonomies.length}),h.push(de),console.log(" TokenGenerationService.generateTokens: Token added to generated tokens array",{currentGeneratedTokensCount:h.length})}catch(ce){const F=Object.keys(le).length>0?` (modes: ${Object.entries(le).map(([de,q])=>`${de}:${q}`).join(", ")})`:"",Q=`Error generating token for iteration ${W}${F}: ${ce}`;console.error(" TokenGenerationService.generateTokens:",Q,{error:ce,stack:ce instanceof Error?ce.stack:void 0}),u.push(Q)}}}console.log(" TokenGenerationService.generateTokens: Token generation loop complete",{generatedTokensCount:h.length,errorsCount:u.length});let A;return v.taxonomyId&&a&&T&&(console.log(" TokenGenerationService.generateTokens: Checking for taxonomy updates:",{taxonomyId:j.id,taxonomyName:j.name,originalTermCount:T.termCount,currentTermCount:j.terms.length,originalTerms:T.termNames,currentTerms:j.terms.map(I=>I.name),modifyTaxonomiesInPlace:a}),j.terms.length>T.termCount?(A=[j],console.log(" TokenGenerationService.generateTokens: Returning updated taxonomy with new terms:",{taxonomyId:j.id,taxonomyName:j.name,originalTermCount:T.termCount,newTermCount:j.terms.length,newTerms:j.terms.slice(T.termCount).map(I=>I.name)})):console.log(" TokenGenerationService.generateTokens: No new terms added to taxonomy:",{taxonomyId:j.id,taxonomyName:j.name,termCount:j.terms.length})),console.log(" TokenGenerationService.generateTokens: Final results",{tokensCount:h.length,errorsCount:u.length,newTaxonomiesCount:(S==null?void 0:S.length)||0,updatedTaxonomiesCount:(A==null?void 0:A.length)||0}),{tokens:h,errors:u,newTaxonomies:S.length>0?S:void 0,updatedTaxonomies:A}}catch(v){const N=`Token generation failed: ${v}`;console.error(" TokenGenerationService.generateTokens: Critical error",N,{error:v,stack:v instanceof Error?v.stack:void 0}),u.push(N)}return{tokens:h,errors:u}}static generateModeCombinations(t,n){console.log(" TokenGenerationService.generateModeCombinations: Starting mode combination generation",{algorithmId:t.id,algorithmName:t.name,selectedModes:n,totalVariables:t.variables.length});const r=t.variables.filter(u=>u.modeBased&&u.dimensionId);if(console.log(" TokenGenerationService.generateModeCombinations: Found mode-based variables",{modeBasedVariablesCount:r.length,modeBasedVariables:r.map(u=>({id:u.id,name:u.name,dimensionId:u.dimensionId,modeValues:u.valuesByMode}))}),r.length===0)return console.log(" TokenGenerationService.generateModeCombinations: No mode-based variables found, returning empty context"),[{}];const i=ve.getDimensions();console.log(" TokenGenerationService.generateModeCombinations: Retrieved dimensions from storage",{totalDimensions:i.length,dimensions:i.map(u=>({id:u.id,displayName:u.displayName,modesCount:u.modes.length}))});const a=i.filter(u=>r.some(h=>h.dimensionId===u.id));console.log(" TokenGenerationService.generateModeCombinations: Filtered to used dimensions",{usedDimensionsCount:a.length,usedDimensions:a.map(u=>({id:u.id,displayName:u.displayName,modesCount:u.modes.length,modes:u.modes.map(h=>({id:h.id,name:h.name}))}))});const l=[{}];console.log(" TokenGenerationService.generateModeCombinations: Starting combination generation",{initialCombinationsCount:l.length});for(const u of a){console.log(` TokenGenerationService.generateModeCombinations: Processing dimension "${u.displayName}" (${u.id})`,{dimensionId:u.id,dimensionName:u.displayName,totalModes:u.modes.length});const h=[...l];l.length=0;let f=u.modes;n&&n[u.id]?(f=u.modes.filter(m=>n[u.id].includes(m.id)),console.log(` TokenGenerationService.generateModeCombinations: Filtered modes for dimension "${u.displayName}"`,{totalModes:u.modes.length,selectedModes:n[u.id],filteredModesCount:f.length,filteredModes:f.map(m=>({id:m.id,name:m.name}))})):console.log(` TokenGenerationService.generateModeCombinations: Using all modes for dimension "${u.displayName}"`,{modesCount:f.length,modes:f.map(m=>({id:m.id,name:m.name}))});for(const m of f){console.log(` TokenGenerationService.generateModeCombinations: Processing mode "${m.name}" (${m.id})`,{modeId:m.id,modeName:m.name,currentCombinationsCount:h.length});for(const x of h){const g={...x,[u.id]:m.id};l.push(g)}}console.log(` TokenGenerationService.generateModeCombinations: Completed dimension "${u.displayName}"`,{dimensionId:u.id,dimensionName:u.displayName,newCombinationsCount:l.length,sampleCombinations:l.slice(0,3)})}return console.log(" TokenGenerationService.generateModeCombinations: Mode combination generation complete",{finalCombinationsCount:l.length,combinations:l}),l}static generateIterationValues(t){console.log(" TokenGenerationService.generateIterationValues: Generating iteration values",{range:t,start:t.start,end:t.end,step:t.step});const n=[],{start:r,end:i,step:a}=t;for(let l=r;l<=i;l+=a)n.push(l);return console.log(" TokenGenerationService.generateIterationValues: Generated values",{values:n,count:n.length}),n}static generateTokenId(){return Ar("token")}static createToken(t,n,r,i,a,l){var x;const u=(x=n.tokenGeneration)==null?void 0:x.bulkAssignments;if(!u)throw new Error("Bulk assignments not configured");const h=this.createTaxonomiesArray(u.taxonomies||[],i,n.tokenGeneration.logicalMapping,l),f=this.generateDisplayNameFromTaxonomies(h,l,i,n.tokenGeneration.logicalMapping);return{id:t,displayName:f,resolvedValueTypeId:u.resolvedValueTypeId,tokenCollectionId:u.collectionId||void 0,description:`Generated by algorithm "${n.name}" with n=${i}`,private:u.private,status:u.status||"stable",themeable:u.themeable,tokenTier:u.tokenTier||"PRIMITIVE",generatedByAlgorithm:!0,algorithmId:n.id,taxonomies:h,propertyTypes:[],codeSyntax:[],valuesByMode:[{modeIds:[],value:{value:r.toString()}}]}}static generateDisplayNameFromTaxonomies(t,n,r,i){const a=[];for(const l of t){const u=n.find(h=>h.id===l.taxonomyId);if(u){const h=u.terms.find(f=>f.id===l.termId);h&&a.push(h.name)}}return a.length===0?this.generateFallbackDisplayName(r,i):a.join(" ")}static generateFallbackDisplayName(t,n){const{scaleType:r}=n;return r==="tshirt"?this.generateTshirtSizeName(t,n.defaultValue,n.extraPrefix||"X"):this.generateNumericSizeName(t,n.defaultValue,n.increasingStep||100,n.decreasingStep||25)}static generateTshirtSizeName(t,n,r){if(t===0)return n;if(t>0){if(t===1)return"Large";const i=t-1;return`${r.repeat(i)}-Large`}else{if(t===-1)return"Small";const i=Math.abs(t)-1;return`${r.repeat(i)}-Small`}}static generateNumericSizeName(t,n,r,i){const a=parseFloat(n)||100;return t===0?n:t>0?(a+t*r).toString():(a+t*i).toString()}static createTaxonomiesArray(t,n,r,i){return t.filter(a=>{const l=i.find(u=>u.id===a.taxonomyId);return l?l.terms.some(u=>u.id===a.termId):!1})}static findLogicalTerm(t,n,r){const{scaleType:i}=r;if(i==="tshirt"){const a=this.generateTshirtSizeName(n,r.defaultValue,r.extraPrefix||"X");return t.terms.find(l=>l.name.toLowerCase()===a.toLowerCase())||null}else{const a=this.generateNumericSizeName(n,r.defaultValue,r.increasingStep||100,r.decreasingStep||25);return t.terms.find(l=>l.name===a||l.name===n.toString())||null}}static generateTermsFromLogicalMapping(t,n){console.log(" TokenGenerationService.generateTermsFromLogicalMapping: Generating terms",{iterationValues:t,logicalMapping:n,scaleType:n.scaleType});const r=[];for(const i of t){let a;n.scaleType==="tshirt"?a=this.generateTshirtSizeName(i,n.defaultValue,n.extraPrefix||"X"):a=this.generateNumericSizeName(i,n.defaultValue,n.increasingStep||100,n.decreasingStep||25),r.push(a),console.log(` TokenGenerationService.generateTermsFromLogicalMapping: Generated term for n=${i}: "${a}"`)}return console.log(" TokenGenerationService.generateTermsFromLogicalMapping: All terms generated",{terms:r,count:r.length}),r}static handleTaxonomyCreation(t,n,r,i){const a=[];if(t.taxonomyId){const l=r.find(u=>u.id===t.taxonomyId);if(!l)throw new Error(`Selected taxonomy with ID "${t.taxonomyId}" not found`);return{taxonomy:l,newTaxonomies:a}}if(t.newTaxonomyName){const l={id:Ar("taxonomy"),name:t.newTaxonomyName,description:"Generated by algorithm for scale terms",terms:n.map(u=>({id:Ar("term"),name:u,description:`Generated term for scale: ${u}`})),resolvedValueTypeIds:[i]};return a.push(l),{taxonomy:l,newTaxonomies:a}}throw new Error("No taxonomy selected or new taxonomy name provided")}static matchOrCreateTerms(t,n,r,i=!1){console.log(" TokenGenerationService.matchOrCreateTerms: Starting term matching/creation",{taxonomyId:t.id,taxonomyName:t.name,existingTermsCount:t.terms.length,generatedTerms:n,iterationValues:r,modifyTaxonomiesInPlace:i});const a=[],l=i?t:{...t,terms:[...t.terms]};for(let u=0;u<r.length;u++){const h=r[u],f=n[u];console.log(` TokenGenerationService.matchOrCreateTerms: Processing iteration ${u+1}/${r.length}`,{iterationValue:h,termName:f,existingTerms:l.terms.map(x=>x.name)});let m=l.terms.find(x=>x.name===f);if(m)console.log(" TokenGenerationService.matchOrCreateTerms: Found existing term",{termId:m.id,termName:m.name});else{const x={id:Ar("term"),name:f,description:`Generated term for scale: ${f}`};l.terms.push(x),m=x,console.log(" TokenGenerationService.matchOrCreateTerms: Created new term",{termId:x.id,termName:x.name})}a.push({iterationValue:h,termId:m.id,termName:m.name})}return console.log(" TokenGenerationService.matchOrCreateTerms: Term mappings complete",{termMappingsCount:a.length,termMappings:a,finalTaxonomyTermsCount:l.terms.length}),a}static createTokenWithLogicalMappingAndModes(t,n,r,i,a,l,u,h){var I,W;console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Creating token with mode context",{tokenId:t,algorithmId:n.id,algorithmName:n.name,value:r,iterationValue:i,taxonomyId:a.id,taxonomyName:a.name,termId:l,modeContext:h,modeContextKeys:Object.keys(h),modeContextValues:Object.values(h)});const{tokenGeneration:f}=n,{bulkAssignments:m,logicalMapping:x}=f,g=[...m.taxonomies];console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Initial taxonomies array",{taxonomiesArray:g,bulkAssignmentsTaxonomies:m.taxonomies});const v={taxonomyId:a.id,termId:l};g.some(J=>J.taxonomyId===a.id)?console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Logical mapping taxonomy already included",{logicalMappingTaxonomy:v,existingTaxonomiesArray:g}):(g.push(v),console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Added logical mapping taxonomy",{logicalMappingTaxonomy:v,updatedTaxonomiesArray:g}));const D=this.generateDisplayNameFromTaxonomies(g,u,i,x);console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Generated display name",{displayName:D,taxonomiesArray:g,iterationValue:i});const j=Object.values(h).map(J=>J);console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Extracted mode IDs from context",{modeContext:h,modeIds:j,modeIdsCount:j.length});const S={id:t,displayName:D,resolvedValueTypeId:m.resolvedValueTypeId,tokenCollectionId:m.collectionId||void 0,description:`Generated by algorithm "${n.name}" with n=${i}`,private:m.private,status:m.status||"stable",themeable:m.themeable,tokenTier:m.tokenTier||"PRIMITIVE",generatedByAlgorithm:!0,algorithmId:n.id,taxonomies:g,propertyTypes:[],codeSyntax:[],valuesByMode:[{modeIds:j,value:{value:r.toString()}}]},T=ve.getPlatforms(),E=ve.getNamingRules(),M={platforms:T,taxonomies:u,namingRules:E},A=Qi.generateAllCodeSyntaxes(S,M);return S.codeSyntax=A,console.log(" TokenGenerationService.createTokenWithLogicalMappingAndModes: Token created successfully",{tokenId:S.id,displayName:S.displayName,resolvedValueTypeId:S.resolvedValueTypeId,modeIds:(I=S.valuesByMode[0])==null?void 0:I.modeIds,value:(W=S.valuesByMode[0])==null?void 0:W.value,taxonomiesCount:S.taxonomies.length,generatedByAlgorithm:S.generatedByAlgorithm,algorithmId:S.algorithmId,codeSyntaxCount:S.codeSyntax.length}),S}static executeAlgorithmSteps(t,n,r){console.log(" TokenGenerationService.executeAlgorithmSteps: Starting algorithm execution",{algorithmId:t.id,algorithmName:t.name,iterationValue:n,modeContext:r,stepsCount:t.steps.length,variablesCount:t.variables.length});try{console.log(" TokenGenerationService.executeAlgorithmSteps: Calling AlgorithmExecutionService.executeAlgorithm");const i=wi.executeAlgorithm(t,n,{},r);console.log(" TokenGenerationService.executeAlgorithmSteps: Algorithm execution completed",{finalResult:i.finalResult,finalResultType:typeof i.finalResult,variables:i.variables,results:i.results});const a=i.finalResult;if(typeof a=="number"&&!isNaN(a))return console.log(" TokenGenerationService.executeAlgorithmSteps: Valid numeric result",{result:a}),a;if(typeof a=="string"){const u=parseFloat(a);if(!isNaN(u))return console.log(" TokenGenerationService.executeAlgorithmSteps: Parsed string result to number",{originalResult:a,parsedResult:u}),u}const l=`Algorithm execution did not produce a valid number. Got: ${typeof a} ${a}`;throw console.error(" TokenGenerationService.executeAlgorithmSteps:",l,{result:a,resultType:typeof a,executionContext:i}),new Error(l)}catch(i){const a=`Algorithm execution failed: ${i}`;throw console.error(" TokenGenerationService.executeAlgorithmSteps:",a,{error:i,stack:i instanceof Error?i.stack:void 0,algorithmId:t.id,iterationValue:n,modeContext:r}),new Error(a)}}static evaluateFormulaWithContext(t,n){try{const r=wi.evaluateFormula(t,n);if(typeof r=="number"&&!isNaN(r))return r;if(typeof r=="string"){const i=parseFloat(r);if(!isNaN(i))return i}throw new Error(`Formula "${t.name}" must evaluate to a valid number`)}catch(r){throw new Error(`Formula "${t.name}" evaluation failed: ${r}`)}}static evaluateConditionWithContext(t,n){try{return wi.evaluateCondition(t,n)}catch(r){throw new Error(`Condition "${t.name}" evaluation failed: ${r}`)}}}class Va{static findTokensByAlgorithm(t,n){return n.filter(r=>r.generatedByAlgorithm===!0&&r.algorithmId===t)}static evaluateFormula(t,n,r,i={}){try{const a={n:r,...i,...n.reduce((l,u)=>(l[u.name]=this.parseVariableValue(u.defaultValue||"",u.type),l),{})};return wi.evaluateFormula(t,a)}catch(a){throw console.error("Formula evaluation error:",a),new Error(`Formula evaluation failed: ${a}`)}}static parseVariableValue(t,n){switch(n){case"number":return Number(t)||0;case"string":return String(t);case"boolean":return t==="true"||t==="1";default:return t}}static calculateTokenValues(t,n){var l;const r=new Map;if(!((l=t.tokenGeneration)!=null&&l.enabled))return r;const i=this.findTokensByAlgorithm(t.id,n),a=wi.generateTokensForAlgorithm(t);return i.forEach(u=>{var h,f,m;try{const x=a.find(g=>g.tokenId===u.id);if(x){const g=((h=u.valuesByMode[0])==null?void 0:h.value)||{value:""},v=this.valuesAreDifferent(g,x.value),N={tokenId:u.id,originalValue:g,calculatedValue:x.value,hasChanges:v,iterationValue:x.iterationValue,affectedFormulas:[x.formulaName]};r.set(u.id,N)}else r.set(u.id,{tokenId:u.id,originalValue:((f=u.valuesByMode[0])==null?void 0:f.value)||{value:""},calculatedValue:{value:""},hasChanges:!1,iterationValue:0,error:"Token not found in algorithm execution results"})}catch(x){console.error(`Error processing token ${u.id}:`,x),r.set(u.id,{tokenId:u.id,originalValue:((m=u.valuesByMode[0])==null?void 0:m.value)||{value:""},calculatedValue:{value:""},hasChanges:!1,iterationValue:0,error:`Calculation failed: ${x}`})}}),r}static executeAlgorithmSteps(t,n){return wi.executeAlgorithm(t,n).finalResult}static valuesAreDifferent(t,n){return"tokenId"in t&&"tokenId"in n?t.tokenId!==n.tokenId:"value"in t&&"value"in n?t.value!==n.value:!0}static calculateValueDifference(t,n){if("value"in t&&"value"in n){const r=Number(t.value)||0,i=Number(n.value)||0;return Math.abs(r-i)}return 1/0}static analyzeFormulaDependencies(t,n){const r=[],i=this.findTokensByAlgorithm(t.id,n);return t.formulas.forEach(a=>{const l=this.extractVariableDependencies(a.expressions.javascript.value),u=i.map(h=>h.id);r.push({formulaId:a.id,formulaName:a.name,affectedTokens:u,dependencies:l})}),r}static extractVariableDependencies(t){const n=[],r=/\b[a-zA-Z_$][a-zA-Z0-9_$]*\b/g,i=t.match(r)||[],a=["Math","sin","cos","tan","sqrt","pow","abs","round","floor","ceil","max","min"],l=["n"];return i.forEach(u=>{!a.includes(u)&&!l.includes(u)&&n.push(u)}),[...new Set(n)]}static getTokensForFormulaRecalculation(t,n,r){const a=this.analyzeFormulaDependencies(n,r).find(l=>l.formulaId===t);return(a==null?void 0:a.affectedTokens)||[]}static calculateTokenValuesSelective(t,n,r){var h;const i=new Map;if(!((h=t.tokenGeneration)!=null&&h.enabled))return i;const a=this.findTokensByAlgorithm(t.id,n),l=r?a.filter(f=>r.flatMap(x=>this.getTokensForFormulaRecalculation(x,t,n)).includes(f.id)):a,u=wi.generateTokensForAlgorithm(t);return l.forEach(f=>{var m,x,g;try{const v=u.find(N=>N.tokenId===f.id);if(v){const N=((m=f.valuesByMode[0])==null?void 0:m.value)||{value:""},D=this.valuesAreDifferent(N,v.value),j={tokenId:f.id,originalValue:N,calculatedValue:v.value,hasChanges:D,iterationValue:v.iterationValue,affectedFormulas:r||[v.formulaName]};i.set(f.id,j)}else i.set(f.id,{tokenId:f.id,originalValue:((x=f.valuesByMode[0])==null?void 0:x.value)||{value:""},calculatedValue:{value:""},hasChanges:!1,iterationValue:0,error:"Token not found in algorithm execution results",affectedFormulas:r||[]})}catch(v){console.error(`Error processing token ${f.id}:`,v),i.set(f.id,{tokenId:f.id,originalValue:((g=f.valuesByMode[0])==null?void 0:g.value)||{value:""},calculatedValue:{value:""},hasChanges:!1,iterationValue:0,error:`Calculation failed: ${v}`,affectedFormulas:r||[]})}}),i}}class Hr{static saveToHistory(t,n,r){try{const i=this.getHistory(),a={id:this.generateId(),timestamp:Date.now(),algorithm:JSON.parse(JSON.stringify(t)),description:n,type:r};i.unshift(a),i.length>this.MAX_HISTORY_SIZE&&i.splice(this.MAX_HISTORY_SIZE),this.saveHistory(i)}catch(i){console.error("Failed to save algorithm to history:",i)}}static getHistory(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to load algorithm history:",t),[]}}static getHistoryForAlgorithm(t){return this.getHistory().filter(n=>n.algorithm.id===t)}static getLatestEntry(t){const n=this.getHistoryForAlgorithm(t);return n.length>0?n[0]:null}static getPreviousEntry(t){const n=this.getHistoryForAlgorithm(t);return n.length>1?n[1]:null}static canUndo(t){return this.getHistoryForAlgorithm(t).length>1}static canRedo(t){return this.getRedoStack(t).length>0}static undo(t){try{const n=this.getHistoryForAlgorithm(t);if(n.length<=1)return null;const r=n[0],i=n[1];this.addToRedoStack(t,r);const l=this.getHistory().filter(u=>!(u.algorithm.id===t&&u.timestamp===r.timestamp));return this.saveHistory(l),i.algorithm}catch(n){return console.error("Failed to undo algorithm change:",n),null}}static redo(t){try{const n=this.getRedoStack(t);if(n.length===0)return null;const r=n.pop(),i=this.getHistory();return i.unshift(r),this.saveHistory(i),this.saveRedoStack(t,n),r.algorithm}catch(n){return console.error("Failed to redo algorithm change:",n),null}}static clearHistory(t){try{const r=this.getHistory().filter(i=>i.algorithm.id!==t);this.saveHistory(r),this.clearRedoStack(t)}catch(n){console.error("Failed to clear algorithm history:",n)}}static clearAllHistory(){try{localStorage.removeItem(this.STORAGE_KEY),Object.keys(localStorage).forEach(n=>{n.startsWith("algorithm_redo_")&&localStorage.removeItem(n)})}catch(t){console.error("Failed to clear all history:",t)}}static getRedoStack(t){try{const n=localStorage.getItem(`algorithm_redo_${t}`);return n?JSON.parse(n):[]}catch(n){return console.error("Failed to load redo stack:",n),[]}}static addToRedoStack(t,n){try{const r=this.getRedoStack(t);r.push(n),this.saveRedoStack(t,r)}catch(r){console.error("Failed to add to redo stack:",r)}}static saveRedoStack(t,n){try{localStorage.setItem(`algorithm_redo_${t}`,JSON.stringify(n))}catch(r){console.error("Failed to save redo stack:",r)}}static clearRedoStack(t){try{localStorage.removeItem(`algorithm_redo_${t}`)}catch(n){console.error("Failed to clear redo stack:",n)}}static saveHistory(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(n){console.error("Failed to save algorithm history:",n)}}static generateId(){return`history_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}_a(Hr,"MAX_HISTORY_SIZE",50),_a(Hr,"STORAGE_KEY","algorithm_history");function Y1({taxonomies:e,value:t,onChange:n,disabled:r=!1,onViewClassifications:i}){var D,j;const[a,l]=P.useState(!1),[u,h]=P.useState(""),[f,m]=P.useState(""),x=e.filter(S=>!t.some(T=>T.taxonomyId===S.id)),g=(S,T)=>{const E=e.find(A=>A.id===S);return!E||!E.terms.some(A=>A.id===T)?!1:e.some(A=>A.id===S)},v=()=>{if(u&&f){try{n([...t,{taxonomyId:u,termId:f}])}catch(S){console.error("[TaxonomyPicker] Error calling onChange:",S)}l(!1),h(""),m("")}},N=S=>{try{n(t.filter((T,E)=>E!==S))}catch(T){console.error("[TaxonomyPicker] Error calling onChange:",T)}};return e.length===0?s.jsx(Z,{p:2,color:"gray.500",fontStyle:"italic",children:"Must have at least one taxonomy term"}):s.jsxs(Z,{children:[!a&&s.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>l(!0),isDisabled:x.length===0||r,children:"Add Taxonomy"}),a?s.jsxs(xe,{spacing:2,align:"center",mb:2,children:[s.jsx(Le,{isDisabled:r,minW:"140px",children:s.jsx(fn,{value:u,placeholder:"Select taxonomy",onChange:S=>{h(S.target.value),m("")},isDisabled:r,size:"sm",children:x.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))})}),s.jsx(Le,{isDisabled:!u||r,minW:"140px",children:s.jsx(fn,{value:f,placeholder:"Select term",onChange:S=>m(S.target.value),isDisabled:!u||r,size:"sm",children:((j=(D=e.find(S=>S.id===u))==null?void 0:D.terms)==null?void 0:j.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id)))||[]})}),s.jsx(Ne,{colorScheme:"blue",size:"sm",onClick:v,isDisabled:!u||!f||r,children:"Add"}),s.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{l(!1),h(""),m("")},children:"Cancel"})]}):null,s.jsx(xe,{wrap:"wrap",spacing:2,mb:2,children:t.map((S,T)=>{const E=e.find(W=>W.id===S.taxonomyId),M=E==null?void 0:E.terms.find(W=>W.id===S.termId),A=`${S.taxonomyId}-${S.termId}`,I=g(S.taxonomyId,S.termId);return s.jsxs(Za,{placement:"top",closeOnBlur:!0,children:[s.jsx(Ya,{children:s.jsxs(ps,{size:"md",variant:"solid",colorScheme:I?"blue":"red",m:1,tabIndex:0,children:[s.jsxs(pa,{children:[E&&M?`${E.name}: ${M.name}`:"Unknown",!I&&s.jsx(ds,{label:"This term is no longer valid for the current value type",children:s.jsx(dr,{as:W2,ml:1,boxSize:3})})]}),!r&&s.jsx(d0,{onClick:()=>N(T)})]})}),s.jsx(cl,{width:"300px",children:s.jsx(ul,{p:4,children:s.jsxs(me,{align:"stretch",spacing:3,children:[E&&s.jsxs(s.Fragment,{children:[s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",fontSize:"sm",children:E.name}),E.description&&s.jsx(B,{fontSize:"sm",color:"gray.400",children:E.description})]}),M&&s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",fontSize:"sm",children:M.name}),M.description&&s.jsx(B,{fontSize:"sm",color:"gray.400",children:M.description}),!I&&s.jsx(B,{fontSize:"sm",color:"red.400",mt:1,children:"This term is no longer valid for the current value type"})]})]}),s.jsx(Z,{pt:2,children:s.jsx(Ne,{variant:"link",color:"blue.500",fontWeight:"semibold",tabIndex:0,_hover:{textDecoration:"underline"},onMouseDown:()=>{console.log("[TaxonomyPicker] View all classifications link mousedown"),i&&i()},children:"View all classifications"})})]})})})]},A)})})]})}const $8=({isOpen:e,onClose:t,onSave:n,algorithm:r,tokenCalculationStates:i,existingTokens:a,resolvedValueTypes:l})=>{const{colorMode:u}=nn(),[h,f]=P.useState([]);St.useEffect(()=>{if(e){const T=Array.from(i.values()).filter(E=>E.hasChanges).map(E=>E.tokenId);f(T)}},[e,i]);const m=Array.from(i.values()).filter(T=>T.hasChanges),x=Array.from(i.values()).filter(T=>!T.hasChanges),g=()=>{f(m.map(T=>T.tokenId))},v=()=>{f([])},N=T=>{f(E=>E.includes(T)?E.filter(M=>M!==T):[...E,T])},D=()=>{n(h),t()},j=T=>{const E=a.find(A=>A.id===T);if(!E)return"Unknown";const M=l.find(A=>A.id===E.resolvedValueTypeId);return(M==null?void 0:M.displayName)||"Unknown"},S=T=>typeof T=="number"?T.toString():typeof T=="string"?T:typeof T=="boolean"?T?"true":"false":String(T);return s.jsxs(Hn,{isOpen:e,onClose:t,size:"xl",scrollBehavior:"inside",children:[s.jsx(Mn,{}),s.jsxs(Wn,{maxH:"90vh",children:[s.jsx(Dn,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(B,{children:"Save Algorithm Changes"}),s.jsxs(ht,{colorScheme:"blue",variant:"subtle",children:[m.length," tokens affected"]})]})}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",bg:u==="light"?"blue.50":"blue.900",children:[s.jsxs(B,{fontWeight:"bold",mb:2,children:["Algorithm: ",r.name]}),s.jsxs(B,{fontSize:"sm",color:"gray.600",children:["This will update ",m.length," tokens with new calculated values based on your formula changes."]})]}),m.length>0&&s.jsxs(Z,{p:3,borderWidth:1,borderRadius:"md",bg:u==="light"?"gray.50":"gray.700",children:[s.jsxs(xe,{justify:"space-between",mb:3,children:[s.jsx(B,{fontWeight:"medium",children:"Select tokens to update:"}),s.jsxs(xe,{spacing:2,children:[s.jsx(Ne,{size:"sm",variant:"outline",onClick:g,children:"Select All"}),s.jsx(Ne,{size:"sm",variant:"outline",onClick:v,children:"Deselect All"})]})]}),s.jsxs(B,{fontSize:"sm",color:"gray.500",children:[h.length," of ",m.length," tokens selected"]})]}),m.length>0&&s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"bold",mb:3,color:"orange.600",children:["Tokens with Changes (",m.length,")"]}),s.jsx(Z,{children:s.jsx(me,{spacing:2,align:"stretch",children:m.map(T=>{const E=a.find(W=>W.id===T.tokenId);if(!E)return null;const M=h.includes(T.tokenId),A=T.originalValue&&"value"in T.originalValue?S(T.originalValue.value):"N/A",I=T.calculatedValue&&"value"in T.calculatedValue?S(T.calculatedValue.value):"N/A";return s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",borderColor:M?"blue.300":"gray.200",bg:M?u==="light"?"blue.50":"blue.900":u==="light"?"white":"gray.700",children:s.jsxs(xe,{justify:"space-between",align:"start",children:[s.jsxs(me,{align:"start",flex:1,spacing:1,children:[s.jsxs(xe,{children:[s.jsx(kn,{isChecked:M,onChange:()=>N(T.tokenId)}),s.jsx(B,{fontWeight:"medium",children:E.displayName}),s.jsx(ht,{size:"sm",colorScheme:"gray",children:j(T.tokenId)})]}),s.jsxs(xe,{spacing:4,fontSize:"sm",children:[s.jsxs(me,{align:"start",spacing:0,children:[s.jsx(B,{color:"gray.500",children:"Current:"}),s.jsx(B,{fontFamily:"mono",color:"red.500",children:A})]}),s.jsx(B,{color:"gray.400",children:""}),s.jsxs(me,{align:"start",spacing:0,children:[s.jsx(B,{color:"gray.500",children:"New:"}),s.jsx(B,{fontFamily:"mono",color:"green.500",children:I})]})]}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Iteration: ",T.iterationValue]})]}),s.jsx(ht,{colorScheme:"orange",variant:"subtle",children:"Changed"})]})},T.tokenId)})})})]}),x.length>0&&s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"bold",mb:3,color:"green.600",children:["Tokens Unchanged (",x.length,")"]}),s.jsx(Z,{children:s.jsxs(me,{spacing:2,align:"stretch",children:[x.slice(0,5).map(T=>{const E=a.find(A=>A.id===T.tokenId);if(!E)return null;const M=T.originalValue&&"value"in T.originalValue?S(T.originalValue.value):"N/A";return s.jsx(Z,{p:2,borderWidth:1,borderRadius:"md",bg:u==="light"?"gray.50":"gray.700",opacity:.7,children:s.jsxs(xe,{justify:"space-between",children:[s.jsxs(me,{align:"start",spacing:0,children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",children:E.displayName}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:[j(T.tokenId),"  ",M]})]}),s.jsx(ht,{colorScheme:"green",variant:"subtle",size:"sm",children:"Unchanged"})]})},T.tokenId)}),x.length>5&&s.jsxs(B,{fontSize:"sm",color:"gray.500",textAlign:"center",children:["... and ",x.length-5," more unchanged tokens"]})]})})]}),m.length===0&&s.jsxs(Gn,{status:"info",children:[s.jsx(qn,{}),s.jsx(B,{children:"No token values have changed. The algorithm will be saved without updating any tokens."})]})]})}),s.jsx(ar,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(Ne,{variant:"ghost",onClick:t,leftIcon:s.jsx(rm,{size:16}),children:"Cancel"}),s.jsxs(Ne,{colorScheme:"blue",onClick:D,leftIcon:s.jsx(Xp,{size:16}),isDisabled:m.length===0,children:["Save Algorithm",h.length>0&&` & Update ${h.length} Tokens`]})]})})]})]})},G8=({isOpen:e,onClose:t,onReset:n,algorithm:r,hasUnsavedChanges:i})=>{const{colorMode:a}=nn(),[l,u]=P.useState("last-save"),[h,f]=P.useState(""),m=Hr.getHistoryForAlgorithm(r.id),x=Hr.canUndo(r.id),g=Hr.canRedo(r.id),v=()=>{let j;l==="specific-history"&&h&&(j=m.find(S=>S.id===h)),n(l,j),t()},N=j=>new Date(j).toLocaleString(),D=j=>{switch(j){case"last-save":return"Revert to the last saved version of the algorithm";case"specific-history":return"Revert to a specific point in the algorithm history";case"original":return"Reset to the original algorithm state (this will clear all history)";default:return""}};return s.jsxs(Hn,{isOpen:e,onClose:t,size:"lg",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(bl,{size:20}),s.jsx(B,{children:"Reset Algorithm"})]})}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[i&&s.jsxs(Gn,{status:"warning",children:[s.jsx(qn,{}),s.jsx(B,{children:"You have unsaved changes. Resetting will discard these changes."})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:3,children:"Choose Reset Option:"}),s.jsx(bh,{value:l,onChange:j=>u(j),children:s.jsxs(me,{spacing:3,align:"start",children:[s.jsx(Fo,{value:"last-save",isDisabled:!x,children:s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(B,{fontWeight:"medium",children:"Last Saved Version"}),s.jsx(B,{fontSize:"sm",color:"gray.500",children:D("last-save")}),!x&&s.jsx(B,{fontSize:"xs",color:"orange.500",children:"No saved history available"})]})}),s.jsx(Fo,{value:"specific-history",isDisabled:m.length===0,children:s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(B,{fontWeight:"medium",children:"Specific History Point"}),s.jsx(B,{fontSize:"sm",color:"gray.500",children:D("specific-history")}),m.length===0&&s.jsx(B,{fontSize:"xs",color:"orange.500",children:"No history available"})]})}),s.jsx(Fo,{value:"original",children:s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(B,{fontWeight:"medium",children:"Original State"}),s.jsx(B,{fontSize:"sm",color:"gray.500",children:D("original")})]})})]})})]}),l==="specific-history"&&m.length>0&&s.jsxs(Z,{children:[s.jsx(us,{my:3}),s.jsx(B,{fontWeight:"bold",mb:3,children:"Select History Point:"}),s.jsx(Z,{maxH:"200px",overflowY:"auto",borderWidth:1,borderRadius:"md",p:2,children:s.jsx(bh,{value:h,onChange:f,children:s.jsx(me,{spacing:2,align:"start",children:m.map(j=>s.jsx(Fo,{value:j.id,children:s.jsxs(me,{align:"start",spacing:0,children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",children:j.description}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:[N(j.timestamp),"  ",j.type]})]})},j.id))})})})]}),s.jsxs(Z,{p:3,bg:a==="light"?"gray.50":"gray.700",borderRadius:"md",children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Current Status:"}),s.jsxs(me,{spacing:1,align:"start",children:[s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Undo available: ",x?"Yes":"No"]}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Redo available: ",g?"Yes":"No"]}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["History entries: ",m.length]})]})]})]})}),s.jsx(ar,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(Ne,{variant:"ghost",onClick:t,children:"Cancel"}),s.jsx(Ne,{colorScheme:"red",onClick:v,leftIcon:s.jsx(bl,{size:16}),isDisabled:l==="last-save"&&!x||l==="specific-history"&&(!h||m.length===0),children:"Reset Algorithm"})]})})]})]})};class nl{static analyzeFormulaDependencies(t){const n=[],r=[],i={},a=Qn.getSystemVariables(),l=new Set(["n",...a.map(h=>h.name)]);t.variables.forEach(h=>{i[h.name]={formulas:[],conditions:[],isSystemVariable:!1}}),l.forEach(h=>{i[h]={formulas:[],conditions:[],isSystemVariable:!0}}),t.formulas.forEach(h=>{const f=this.extractVariableDependencies(h.expressions.javascript.value,h.expressions.ast);f.forEach(g=>{i[g]&&i[g].formulas.push(h.id)});const m={id:h.id,name:h.name,type:"formula",inputs:f,outputs:[],dependencies:[],stepIndex:t.steps.findIndex(g=>g.id===h.id)},x=this.extractOutputVariables(h.expressions.javascript.value);m.outputs=x,n.push(m)}),t.conditions.forEach(h=>{const f=this.extractVariableDependencies(h.expression);f.forEach(x=>{i[x]&&i[x].conditions.push(h.id)});const m={id:h.id,name:h.name,type:"condition",inputs:f,outputs:[],dependencies:[],stepIndex:t.steps.findIndex(x=>x.id===h.id)};n.push(m)}),n.forEach(h=>{h.inputs.forEach(f=>{n.filter(x=>x.type==="formula"&&x.outputs.includes(f)).forEach(x=>{x.stepIndex!==void 0&&h.stepIndex!==void 0&&x.stepIndex<h.stepIndex&&(r.push({source:x.id,target:h.id,type:"formula",variableName:f}),h.dependencies.push(x.id))})})});const u=t.steps.map(h=>h.id);return{nodes:n,edges:r,executionOrder:u,variableUsage:i}}static getVariableUsage(t){return this.extractVariableDependencies(t.expressions.javascript.value,t.expressions.ast)}static validateFormulaDependencies(t){const n=[],r=this.analyzeFormulaDependencies(t),i=Qn.getSystemVariables(),a=new Set(["n",...i.map(u=>u.name)]);return r.nodes.forEach(u=>{u.inputs.forEach(h=>{const f=t.variables.some(x=>x.name===h),m=a.has(h);!f&&!m&&n.push({type:"error",message:`Undefined variable '${h}' used in ${u.type} '${u.name}'`,formulaId:u.type==="formula"?u.id:void 0,conditionId:u.type==="condition"?u.id:void 0,variableName:h})})}),this.detectCircularDependencies(r).forEach(u=>{n.push({type:"error",message:`Circular dependency detected: ${u.join(" -> ")}`,formulaId:u[0]})}),t.variables.forEach(u=>{const h=r.variableUsage[u.name];(!h||h.formulas.length===0&&h.conditions.length===0)&&n.push({type:"warning",message:`Variable '${u.name}' is defined but never used`,variableName:u.name})}),n}static generateExecutionTrace(t,n={}){const r=Date.now(),i=[],a=[];let l=null;try{const u=Qn.getSystemVariables(),h={...n,n:n.n||0};u.forEach(f=>{f.name in h||(h[f.name]=this.parseVariableValue(f.defaultValue||"",f.type))}),t.variables.forEach(f=>{f.name in h||(h[f.name]=this.parseVariableValue(f.defaultValue||"",f.type))}),t.steps.forEach((f,m)=>{var N,D,j;const x=Date.now();let g=null,v;try{if(f.type==="formula"){const E=t.formulas.find(M=>M.id===f.id);E&&(g=this.evaluateFormula(E,h),l=g)}else if(f.type==="condition"){const E=t.conditions.find(M=>M.id===f.id);E&&(g=this.evaluateCondition(E,h))}const S=Date.now(),T=f.type==="formula"?this.extractVariableDependencies(((N=t.formulas.find(E=>E.id===f.id))==null?void 0:N.expressions.javascript.value)||"",(D=t.formulas.find(E=>E.id===f.id))==null?void 0:D.expressions.ast):this.extractVariableDependencies(((j=t.conditions.find(E=>E.id===f.id))==null?void 0:j.expression)||"");i.push({stepId:f.id,stepName:f.name,stepType:f.type,inputValues:{...h},outputValue:g,error:v,executionTime:S-x,dependencies:T})}catch(S){v=S instanceof Error?S.message:String(S),a.push(`Step ${m+1} (${f.name}): ${v}`),i.push({stepId:f.id,stepName:f.name,stepType:f.type,inputValues:{...h},outputValue:null,error:v,executionTime:Date.now()-x,dependencies:[]})}})}catch(u){a.push(`Execution failed: ${u instanceof Error?u.message:String(u)}`)}return{steps:i,finalResult:l,errors:a,executionTime:Date.now()-r}}static extractVariableDependencies(t,n){if(n)return Sr.extractVariables(n);const r=/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g,i=t.match(r)||[],a=["Math","Array","console","function","return","if","else","for","while","var","let","const"],l=i.filter(u=>!a.includes(u));return[...new Set(l)]}static extractOutputVariables(t){const n=[],r=/^([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=/,i=t.match(r);return i&&n.push(i[1]),n}static detectCircularDependencies(t){const n=[],r=new Set,i=new Set,a=(l,u)=>{if(i.has(l)){const f=u.indexOf(l);n.push(u.slice(f));return}if(r.has(l))return;r.add(l),i.add(l);const h=t.nodes.find(f=>f.id===l);h&&h.dependencies.forEach(f=>{a(f,[...u,l])}),i.delete(l)};return t.nodes.forEach(l=>{r.has(l.id)||a(l.id,[])}),n}static parseVariableValue(t,n){switch(n){case"number":return Number(t)||0;case"string":return t;case"boolean":return t.toLowerCase()==="true";case"color":return t;default:return t}}static evaluateFormula(t,n){try{const r=t.expressions.javascript.value,i=Object.keys(n),a=Object.values(n);return new Function(...i,`return ${r}`)(...a)}catch(r){throw new Error(`Formula evaluation failed for ${t.name}: ${r}`)}}static evaluateCondition(t,n){try{const r=t.expression,i=Object.keys(n),a=Object.values(n);return!!new Function(...i,`return ${r}`)(...a)}catch(r){throw new Error(`Condition evaluation failed for ${t.name}: ${r}`)}}}const q8=({algorithm:e,showValidation:t=!0,showExecutionTrace:n=!1,executionContext:r={}})=>{const i=P.useMemo(()=>nl.analyzeFormulaDependencies(e),[e]),a=P.useMemo(()=>t?nl.validateFormulaDependencies(e):[],[e,t]),l=P.useMemo(()=>n?nl.generateExecutionTrace(e,r):null,[e,n,r]),u=m=>m==="formula"?"purple":"green",h=m=>{switch(m){case"error":return Vu;case"warning":return Vu;case"info":return Gh;default:return Gh}},f=m=>{switch(m){case"error":return"red";case"warning":return"orange";case"info":return"blue";default:return"gray"}};return s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:o4}),s.jsx(gt,{size:"md",children:"Dependency Graph"})]})}),s.jsx(Yi,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Ga,{columns:2,spacing:4,children:[s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"bold",mb:2,children:["Formulas (",i.nodes.filter(m=>m.type==="formula").length,")"]}),s.jsx(me,{align:"start",spacing:1,children:i.nodes.filter(m=>m.type==="formula").map(m=>s.jsxs(xe,{spacing:2,children:[s.jsx(ht,{colorScheme:u(m.type),size:"sm",children:m.type}),s.jsx(B,{fontSize:"sm",children:m.name}),m.inputs.length>0&&s.jsx(ds,{label:`Uses: ${m.inputs.join(", ")}`,children:s.jsxs(ht,{size:"sm",colorScheme:"blue",variant:"outline",children:[m.inputs.length," inputs"]})})]},m.id))})]}),s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"bold",mb:2,children:["Conditions (",i.nodes.filter(m=>m.type==="condition").length,")"]}),s.jsx(me,{align:"start",spacing:1,children:i.nodes.filter(m=>m.type==="condition").map(m=>s.jsxs(xe,{spacing:2,children:[s.jsx(ht,{colorScheme:u(m.type),size:"sm",children:m.type}),s.jsx(B,{fontSize:"sm",children:m.name}),m.inputs.length>0&&s.jsx(ds,{label:`Uses: ${m.inputs.join(", ")}`,children:s.jsxs(ht,{size:"sm",colorScheme:"blue",variant:"outline",children:[m.inputs.length," inputs"]})})]},m.id))})]})]}),s.jsx(us,{}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Execution Order"}),s.jsx(xe,{spacing:2,flexWrap:"wrap",children:i.executionOrder.map((m,x)=>{const g=i.nodes.find(v=>v.id===m);return g?s.jsxs(xe,{spacing:1,children:[s.jsx(ht,{colorScheme:"gray",size:"sm",children:x+1}),s.jsx(ht,{colorScheme:u(g.type),size:"sm",children:g.type}),s.jsx(B,{fontSize:"sm",children:g.name}),x<i.executionOrder.length-1&&s.jsx(dr,{as:Lh,size:16})]},m):null})})]}),i.edges.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(us,{}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Dependencies"}),s.jsx(me,{align:"start",spacing:1,children:i.edges.map((m,x)=>{const g=i.nodes.find(N=>N.id===m.source),v=i.nodes.find(N=>N.id===m.target);return!g||!v?null:s.jsxs(xe,{spacing:2,children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",children:g.name}),s.jsx(dr,{as:Lh,size:14}),s.jsx(B,{fontSize:"sm",fontWeight:"medium",children:v.name}),m.variableName&&s.jsx(ds,{label:`Via variable: ${m.variableName}`,children:s.jsx(ht,{size:"sm",colorScheme:"teal",variant:"outline",children:m.variableName})})]},x)})})]})]})]})})]}),s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:wl}),s.jsx(gt,{size:"md",children:"Variable Usage"})]})}),s.jsx(Yi,{children:s.jsx(Ga,{columns:2,spacing:4,children:Object.entries(i.variableUsage).map(([m,x])=>s.jsxs(Z,{p:3,borderWidth:1,borderRadius:"md",children:[s.jsxs(xe,{justify:"space-between",mb:2,children:[s.jsx(B,{fontWeight:"bold",children:m}),x.isSystemVariable&&s.jsx(ht,{size:"sm",colorScheme:"green",children:"System"})]}),x.formulas.length>0&&s.jsxs(B,{fontSize:"sm",color:"gray.500",children:["Used by ",x.formulas.length," formula",x.formulas.length!==1?"s":""]}),x.conditions.length>0&&s.jsxs(B,{fontSize:"sm",color:"gray.500",children:["Used by ",x.conditions.length," condition",x.conditions.length!==1?"s":""]})]},m))})})]}),t&&a.length>0&&s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:Fp}),s.jsx(gt,{size:"md",children:"Validation Results"})]})}),s.jsx(Yi,{children:s.jsx(me,{spacing:3,align:"stretch",children:a.map((m,x)=>s.jsxs(Gn,{status:m.type==="error"?"error":m.type==="warning"?"warning":"info",children:[s.jsx(qn,{as:h(m.type)}),s.jsxs(ls,{children:[m.message,m.formulaId&&s.jsx(ht,{ml:2,colorScheme:f(m.type),size:"sm",children:"Formula"}),m.conditionId&&s.jsx(ht,{ml:2,colorScheme:f(m.type),size:"sm",children:"Condition"})]})]},x))})})]}),n&&l&&s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:Hp}),s.jsx(gt,{size:"md",children:"Execution Trace"})]})}),s.jsx(Yi,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[l.errors.length>0&&s.jsxs(Gn,{status:"error",children:[s.jsx(qn,{}),s.jsxs(ls,{children:[l.errors.length," error",l.errors.length!==1?"s":""," occurred during execution"]})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Execution Steps"}),s.jsx(me,{spacing:2,align:"stretch",children:l.steps.map((m,x)=>s.jsxs(Z,{p:3,borderWidth:1,borderRadius:"md",children:[s.jsxs(xe,{justify:"space-between",mb:2,children:[s.jsxs(xe,{children:[s.jsx(ht,{colorScheme:"gray",size:"sm",children:x+1}),s.jsx(ht,{colorScheme:u(m.stepType),size:"sm",children:m.stepType}),s.jsx(B,{fontWeight:"medium",children:m.stepName})]}),s.jsxs(B,{fontSize:"sm",color:"gray.500",children:[m.executionTime,"ms"]})]}),m.error?s.jsxs(Gn,{status:"error",size:"sm",children:[s.jsx(qn,{}),s.jsx(ls,{children:m.error})]}):s.jsxs(me,{align:"start",spacing:1,children:[s.jsxs(B,{fontSize:"sm",children:[s.jsx("strong",{children:"Output:"})," ",String(m.outputValue)]}),m.dependencies.length>0&&s.jsxs(B,{fontSize:"sm",children:[s.jsx("strong",{children:"Dependencies:"})," ",m.dependencies.join(", ")]})]})]},m.stepId))})]}),s.jsx(us,{}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",children:"Final Result"}),s.jsx(B,{children:String(l.finalResult)}),s.jsxs(B,{fontSize:"sm",color:"gray.500",mt:1,children:["Total execution time: ",l.executionTime,"ms"]})]})]})})]})]})},H8=({algorithm:e,onExecutionComplete:t})=>{const{colorMode:n}=nn(),[r,i]=P.useState({}),[a,l]=P.useState(null),[u,h]=P.useState(!1),[f,m]=P.useState(-1),[x,g]=P.useState([]);P.useEffect(()=>{(()=>{const W=Qn.getSystemVariables(),J=[{id:"system_n",name:"n",type:"number",defaultValue:"0"},...W];g(J)})()},[]);const v=e.steps.length,N=v>0,D=()=>{h(!0);try{const I=nl.generateExecutionTrace(e,r);l(I),m(I.steps.length-1),t==null||t(I)}catch(I){console.error("Execution failed:",I)}finally{h(!1)}},j=()=>{f<v-1&&m(I=>I+1)},S=()=>{m(-1),l(null)},T=(I,W)=>{i(J=>({...J,[I]:W}))},E=I=>{var W;return!a||I>f?"pending":(W=a.steps[I])!=null&&W.error?"error":"completed"},M=I=>{switch(I){case"completed":return"green";case"error":return"red";case"pending":return"gray";default:return"gray"}},A=I=>I==null?"undefined":typeof I=="object"?JSON.stringify(I):String(I);return s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:qh}),s.jsx(gt,{size:"md",children:"Execution Preview"})]})}),s.jsx(Yi,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:3,children:"Execution Context"}),s.jsxs(me,{spacing:3,align:"stretch",children:[x.map(I=>s.jsxs(Le,{children:[s.jsxs(We,{children:[I.name," (",I.type,")",I.id==="system_n"&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"green",children:"Built-in"}),I.id!=="system_n"&&I.id.startsWith("system-")&&s.jsx(ht,{ml:2,size:"sm",colorScheme:"blue",children:"System"})]}),I.type==="number"?s.jsxs(yu,{value:r[I.name]||Number(I.defaultValue)||0,onChange:(W,J)=>T(I.name,J),min:-10,max:100,children:[s.jsx(bu,{}),s.jsxs(vu,{children:[s.jsx(wu,{}),s.jsx(Su,{})]})]}):s.jsx(dt,{value:r[I.name]||I.defaultValue||"",onChange:W=>T(I.name,W.target.value),placeholder:`Enter ${I.name}`})]},I.id)),e.variables.map(I=>s.jsxs(Le,{children:[s.jsxs(We,{children:[I.name," (",I.type,")"]}),I.type==="number"?s.jsxs(yu,{value:r[I.name]||Number(I.defaultValue)||0,onChange:(W,J)=>T(I.name,J),children:[s.jsx(bu,{}),s.jsxs(vu,{children:[s.jsx(wu,{}),s.jsx(Su,{})]})]}):s.jsx(dt,{value:r[I.name]||I.defaultValue||"",onChange:W=>T(I.name,W.target.value),placeholder:`Enter ${I.name}`})]},I.id))]})]}),s.jsxs(xe,{spacing:3,children:[s.jsx(Ne,{leftIcon:s.jsx(qh,{size:16}),colorScheme:"green",onClick:D,isLoading:u,isDisabled:!N,children:"Run Execution"}),s.jsx(Ne,{leftIcon:s.jsx(Z4,{size:16}),onClick:j,isDisabled:f>=v||!a,children:"Step Forward"}),s.jsx(Ne,{leftIcon:s.jsx(bl,{size:16}),onClick:S,variant:"outline",children:"Reset"})]}),N&&s.jsxs(Z,{children:[s.jsxs(B,{fontSize:"sm",color:"gray.500",mb:2,children:["Progress: ",f," / ",v," steps"]}),s.jsx(Z,{w:"100%",h:2,bg:n==="light"?"gray.200":"gray.700",borderRadius:"full",overflow:"hidden",children:s.jsx(Z,{h:"100%",bg:"blue.500",w:`${f/v*100}%`,transition:"width 0.3s ease"})})]})]})})]}),a&&s.jsxs(Ui,{children:[s.jsx(Zi,{children:s.jsxs(xe,{children:[s.jsx(dr,{as:Hp}),s.jsx(gt,{size:"md",children:"Execution Steps"}),a.errors.length>0&&s.jsxs(ht,{colorScheme:"red",size:"sm",children:[a.errors.length," Error",a.errors.length!==1?"s":""]})]})}),s.jsx(Yi,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Z,{p:3,bg:n==="light"?"gray.50":"gray.700",borderRadius:"md",children:[s.jsxs(xe,{justify:"space-between",children:[s.jsx(B,{fontWeight:"bold",children:"Execution Summary"}),s.jsxs(xe,{children:[s.jsx(dr,{as:Fh,size:14}),s.jsxs(B,{fontSize:"sm",children:[a.executionTime,"ms"]})]})]}),s.jsxs(B,{fontSize:"sm",color:"gray.500",mt:1,children:["Final Result: ",A(a.finalResult)]})]}),s.jsx(me,{spacing:3,align:"stretch",children:a.steps.map((I,W)=>{const J=E(W),le=W<=f;return s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",opacity:le?1:.5,transition:"opacity 0.3s ease",children:[s.jsxs(xe,{justify:"space-between",mb:3,children:[s.jsxs(xe,{children:[s.jsx(ht,{colorScheme:"gray",size:"sm",children:W+1}),s.jsx(ht,{colorScheme:M(J),size:"sm",children:I.stepType}),s.jsx(B,{fontWeight:"medium",children:I.stepName})]}),s.jsxs(xe,{children:[s.jsx(dr,{as:Fh,size:14}),s.jsxs(B,{fontSize:"sm",children:[I.executionTime,"ms"]})]})]}),le&&s.jsxs(me,{spacing:3,align:"stretch",children:[s.jsxs(Z,{children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Input Values"}),s.jsx(xe,{spacing:2,flexWrap:"wrap",children:Object.entries(I.inputValues).map(([ce,F])=>s.jsx(ht,{size:"sm",colorScheme:"blue",variant:"outline",children:s.jsxs(xe,{spacing:1,children:[s.jsx(dr,{as:wl,size:10}),s.jsxs(B,{children:[ce,": ",A(F)]})]})},ce))})]}),s.jsxs(Z,{children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Output"}),I.error?s.jsxs(Gn,{status:"error",size:"sm",children:[s.jsx(qn,{as:Vu}),s.jsx(ls,{children:I.error})]}):s.jsx(B,{fontSize:"sm",p:2,bg:n==="light"?"green.50":"green.900",borderRadius:"md",children:A(I.outputValue)})]}),I.dependencies.length>0&&s.jsxs(Z,{children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Dependencies"}),s.jsx(xe,{spacing:2,flexWrap:"wrap",children:I.dependencies.map(ce=>s.jsx(ht,{size:"sm",colorScheme:"purple",variant:"outline",children:s.jsxs(xe,{spacing:1,children:[s.jsx(dr,{as:wl,size:10}),s.jsx(B,{children:ce})]})},ce))})]})]})]},I.stepId)})}),a.errors.length>0&&s.jsxs(Gn,{status:"error",children:[s.jsx(qn,{}),s.jsxs(ls,{children:[a.errors.length," error",a.errors.length!==1?"s":""," occurred during execution"]})]})]})})]})]})},W8=({isOpen:e,onClose:t,onConfirm:n,algorithm:r})=>{const{colorMode:i}=nn(),[a,l]=P.useState([]),[u,h]=P.useState({});P.useEffect(()=>{if(!e)return;const j=ve.getDimensions(),S=r.variables||[],T=Qn.getSystemVariables(),M=[...S,...T].filter(J=>J.modeBased&&J.dimensionId);if(M.length===0){n({});return}const A=j.filter(J=>M.some(le=>le.dimensionId===J.id)),I=[];A.forEach(J=>{J.modes.forEach(le=>{I.push({dimensionId:J.id,dimensionName:J.displayName,modeId:le.id,modeName:le.name,isSelected:!0})})}),l(I);const W={};A.forEach(J=>{W[J.id]=J.modes.map(le=>le.id)}),h(W)},[e,r,n]);const f=(j,S,T)=>{h(E=>{const M=E[j]||[];return T?{...E,[j]:[...M,S]}:{...E,[j]:M.filter(A=>A!==S)}}),l(E=>E.map(M=>M.dimensionId===j&&M.modeId===S?{...M,isSelected:T}:M))},m=j=>{const T=a.filter(E=>E.dimensionId===j).map(E=>E.modeId);h(E=>({...E,[j]:T})),l(E=>E.map(M=>M.dimensionId===j?{...M,isSelected:!0}:M))},x=j=>{h(S=>({...S,[j]:[]})),l(S=>S.map(T=>T.dimensionId===j?{...T,isSelected:!1}:T))},g=()=>{const j={};Object.entries(u).forEach(([S,T])=>{T.length>0&&(j[S]=T)}),n(j),t()},v=()=>{t()},N=a.reduce((j,S)=>(j[S.dimensionId]||(j[S.dimensionId]={dimensionName:S.dimensionName,options:[]}),j[S.dimensionId].options.push(S),j),{}),D=Object.values(u).reduce((j,S)=>j*Math.max(S.length,1),1);return s.jsxs(Hn,{isOpen:e,onClose:t,size:"lg",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:"Select Modes for Token Generation"}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Gn,{status:"info",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(ls,{children:["Your algorithm contains mode-based variables. Select which modes to generate tokens for.",D>1&&s.jsxs(B,{mt:2,fontWeight:"bold",children:["This will generate ",D," tokens per iteration."]})]})]}),Object.entries(N).map(([j,S])=>{var M;const T=((M=u[j])==null?void 0:M.length)||0,E=S.options.length;return s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",bg:i==="dark"?"gray.800":"gray.50",children:[s.jsxs(xe,{justify:"space-between",mb:3,children:[s.jsx(B,{fontWeight:"bold",children:S.dimensionName}),s.jsxs(xe,{spacing:2,children:[s.jsxs(ht,{colorScheme:"blue",children:[T,"/",E," selected"]}),s.jsx(Ne,{size:"xs",onClick:()=>m(j),children:"Select All"}),s.jsx(Ne,{size:"xs",onClick:()=>x(j),children:"Deselect All"})]})]}),s.jsx(me,{spacing:2,align:"stretch",children:S.options.map(A=>s.jsx(kn,{isChecked:A.isSelected,onChange:I=>f(j,A.modeId,I.target.checked),children:s.jsxs(xe,{children:[s.jsx(B,{children:A.modeName}),s.jsx(ht,{size:"sm",colorScheme:"gray",variant:"outline",children:A.modeId})]})},A.modeId))})]},j)})]})}),s.jsx(ar,{children:s.jsxs(xe,{spacing:3,children:[s.jsx(Ne,{onClick:v,children:"Cancel"}),s.jsxs(Ne,{colorScheme:"blue",onClick:g,children:["Generate Tokens (",D," per iteration)"]})]})})]})]})},Ho={id:ni("algorithm"),name:"New Algorithm",resolvedValueTypeId:"color",variables:[],formulas:[],conditions:[],steps:[],tokenGeneration:{enabled:!1,iterationRange:{start:-2,end:8,step:1},bulkAssignments:{resolvedValueTypeId:"color",taxonomies:[],tokenTier:"PRIMITIVE",private:!1,status:"stable",themeable:!1},logicalMapping:{scaleType:"numeric",defaultValue:"100",increasingStep:100,decreasingStep:25,extraPrefix:"X",incrementDirection:"ascending",taxonomyId:void 0,newTaxonomyName:void 0}}},U8=({algorithm:e=Ho,onSave:t=()=>{},onUpdateTokens:n=()=>{}})=>{var At,gn,rn,Xt,_t,yr,fi,Oi,ko,jo,pi,xn,b,k,ke,_,$,un,qe,Zn,ws,ut,In,tr,mi,G,Dr,K;const{colorMode:r}=nn(),i=or(),[a,l]=P.useState(()=>e?{...e}:Ho);P.useEffect(()=>{l(e?{...e}:Ho)},[e]);const[u,h]=St.useState({name:"",type:"number",defaultValue:""}),[f,m]=St.useState({type:"formula",id:"",name:""}),[x,g]=P.useState(null),[v,N]=P.useState({}),[D,j]=P.useState([]),[S,T]=P.useState([]),[E,M]=P.useState([]),[A,I]=P.useState(!1),[W,J]=P.useState(new Map),[le,ce]=P.useState([]),[F,Q]=P.useState([]),[de,q]=P.useState(!1),[pe,H]=P.useState(!1),[L,X]=P.useState(!1),[he,ge]=P.useState(null),[oe,Se]=P.useState(!1),[ne,be]=P.useState({}),[De,Pe]=P.useState(!1),[Ve,ct]=P.useState([]),[Dt,Qt]=P.useState([]),[pn,_e]=P.useState([]),[pt,Ft]=P.useState(!1);P.useEffect(()=>{if(he){const Y=JSON.stringify(a)!==JSON.stringify(he);X(Y)}},[a,he]),P.useEffect(()=>{e&&ge({...e})},[e]),P.useEffect(()=>{const Y=()=>{var Oe,Te;const ee=ve.getTaxonomies(),Ie=(Te=(Oe=a.tokenGeneration)==null?void 0:Oe.bulkAssignments)==null?void 0:Te.resolvedValueTypeId;if(Ie){const kt=ee.filter(zt=>Array.isArray(zt.resolvedValueTypeIds)&&zt.resolvedValueTypeIds.includes(Ie));ct(kt)}else ct([])};return Y(),window.addEventListener("focus",Y),()=>{window.removeEventListener("focus",Y)}},[(gn=(At=a.tokenGeneration)==null?void 0:At.bulkAssignments)==null?void 0:gn.resolvedValueTypeId]),P.useEffect(()=>{var ee,Ie;const Y=((Ie=(ee=a.tokenGeneration)==null?void 0:ee.bulkAssignments)==null?void 0:Ie.taxonomies)||[];Qt(Y)},[(Xt=(rn=a.tokenGeneration)==null?void 0:rn.bulkAssignments)==null?void 0:Xt.taxonomies]),P.useEffect(()=>{const Y=ve.getValueTypes();_e(Y),Y.length>0&&l(ee=>Y.some(Oe=>Oe.id===ee.resolvedValueTypeId)?ee:{...ee,resolvedValueTypeId:Y[0].id})},[]),P.useEffect(()=>{var zt;const Y=a.variables||[],ee=new Set;(zt=a.formulas)==null||zt.forEach(vt=>{vt.expressions.javascript.value&&(vt.expressions.javascript.value.match(/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g)||[]).forEach(bn=>{Y.some(jt=>jt.name===bn)||ee.add(bn)})});const Oe=Qn.getSystemVariables().filter(vt=>ee.has(vt.name)),kt=[...Y,...Oe].filter(vt=>vt.modeBased&&vt.dimensionId);Pe(kt.length>0)},[a.variables,a.formulas]),P.useEffect(()=>{(()=>{var Oe;const ee=ve.getTokens(),Ie=Va.findTokensByAlgorithm(a.id,ee);M(Ie),I(Ie.length>0),Ie.length>0&&!((Oe=a.tokenGeneration)!=null&&Oe.enabled)&&(l(Te=>({...Te,tokenGeneration:{enabled:!0,iterationRange:{start:-2,end:8,step:1},bulkAssignments:{resolvedValueTypeId:Te.resolvedValueTypeId,taxonomies:[],tokenTier:"PRIMITIVE",private:!1,status:"stable",themeable:!1},logicalMapping:{scaleType:"numeric",defaultValue:"100",increasingStep:100,decreasingStep:25,extraPrefix:"X",incrementDirection:"ascending",taxonomyId:void 0,newTaxonomyName:void 0}}})),i({title:"Token Generation Auto-Enabled",description:`Found ${Ie.length} existing tokens generated by this algorithm. Token generation has been enabled.`,status:"info",duration:5e3,isClosable:!0}))})()},[a.id,(_t=a.tokenGeneration)==null?void 0:_t.enabled,i]),P.useEffect(()=>{var Y;if(A&&((Y=a.tokenGeneration)!=null&&Y.enabled)){const ee=ve.getTokens(),Ie=Va.calculateTokenValues(a,ee);J(Ie)}},[a,A]),P.useEffect(()=>{var Y;if(A&&((Y=a.tokenGeneration)!=null&&Y.enabled)){const ee=setTimeout(()=>{const Ie=ve.getTokens(),Oe=Va.analyzeFormulaDependencies(a,Ie);Q(Oe);const Te=le.length>0?Va.calculateTokenValuesSelective(a,Ie,le):Va.calculateTokenValues(a,Ie);J(Te);const kt=Array.from(Te.values()).filter(zt=>zt.hasChanges);kt.length>0&&i({title:"Formula Changes Detected",description:`${kt.length} tokens have updated values based on formula changes.`,status:"info",duration:3e3,isClosable:!0}),ce([])},500);return()=>clearTimeout(ee)}},[a.formulas,a.variables,a.steps,(yr=a.tokenGeneration)==null?void 0:yr.iterationRange,A,le]);const mn=Y=>{Qt(Y),l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,taxonomies:Y}}}))},Wt=Y=>{ce(ee=>[...new Set([...ee,Y])])},ln=Y=>{if(!Y.destination)return;const ee=Array.from(a.steps),[Ie]=ee.splice(Y.source.index,1);ee.splice(Y.destination.index,0,Ie),l(Oe=>({...Oe,steps:ee}))},Ut=()=>{var Ie;if(!((Ie=u.name)!=null&&Ie.trim())){i({title:"Error",description:"Please enter a variable name",status:"error",duration:3e3,isClosable:!0});return}const Y={id:ni("variable"),name:u.name,type:u.type||"number",defaultValue:u.defaultValue||"",modeBased:u.modeBased,dimensionId:u.dimensionId,valuesByMode:u.valuesByMode||[]},ee={...a,variables:[...a.variables,Y]};l(ee),h({name:"",type:"number",defaultValue:"",modeBased:!1,dimensionId:void 0,valuesByMode:[]}),ot(`Added variable: ${Y.name}`,"variable")},$t=()=>{const Y={id:ni("cond"),name:"",expression:"",variableIds:[]},ee={...a,conditions:[...a.conditions||[],Y]};l(ee)},fe=()=>{if(!f.id||!f.name||!f.type){i({title:"Error",description:"Please select a formula or condition",status:"error",duration:3e3,isClosable:!0});return}const Y={type:f.type,id:f.id,name:f.name};l(ee=>({...ee,steps:[...ee.steps,Y]})),m({type:"formula",id:"",name:""})},Ee=Y=>{const ee=a.variables.find(Oe=>Oe.id===Y),Ie={...a,variables:a.variables.filter(Oe=>Oe.id!==Y)};l(Ie),ee&&ot(`Deleted variable: ${ee.name}`,"variable")},ye=Y=>{l(ee=>({...ee,steps:ee.steps.filter((Ie,Oe)=>Oe!==Y)}))},Ue=()=>{var Y,ee,Ie,Oe,Te,kt,zt;if(!((Y=a.name)!=null&&Y.trim())){i({title:"Error",description:"Please enter an algorithm name",status:"error",duration:3e3,isClosable:!0});return}for(const vt of a.variables){if(!((ee=vt.name)!=null&&ee.trim())){i({title:"Error",description:`Variable with ID "${vt.id}" is missing a name`,status:"error",duration:3e3,isClosable:!0});return}if(!vt.type){i({title:"Error",description:`Variable "${vt.name}" is missing a type`,status:"error",duration:3e3,isClosable:!0});return}}for(const vt of a.formulas||[])if(!((Ie=vt.name)!=null&&Ie.trim())){i({title:"Error",description:`Formula with ID "${vt.id}" is missing a name`,status:"error",duration:3e3,isClosable:!0});return}for(const vt of a.conditions||[])if(!((Oe=vt.name)!=null&&Oe.trim())){i({title:"Error",description:`Condition with ID "${vt.id}" is missing a name`,status:"error",duration:3e3,isClosable:!0});return}if((Te=a.tokenGeneration)!=null&&Te.enabled&&!A){const{logicalMapping:vt}=a.tokenGeneration;if(!(vt.taxonomyId||((kt=vt.newTaxonomyName)==null?void 0:kt.trim()))){i({title:"Token Generation Configuration Required",description:"Please configure the taxonomy settings in the Token Generation tab before saving.",status:"error",duration:5e3,isClosable:!0});return}const bn=a.variables&&a.variables.length>0,jt=a.formulas&&a.formulas.length>0;if(!bn||!jt){const Bn=[];bn||Bn.push("variables"),jt||Bn.push("formulas"),i({title:"Algorithm Configuration Required",description:`Please add ${Bn.join(" and ")} before saving.`,status:"error",duration:5e3,isClosable:!0});return}}if(A&&Array.from(W.values()).some(vt=>vt.hasChanges)){q(!0);return}if((zt=a.tokenGeneration)!=null&&zt.enabled&&De&&!A){Se(!0);return}Fe([])},Fe=(Y,ee)=>{var Oe;t(a);const Ie={schemaVersion:"5.0.0",profile:"basic",metadata:{name:"Algorithm Collection",description:"Collection of algorithms for design token generation",version:"1.0.0"},config:{},algorithms:[a],execution:{order:[],parallel:!1,onError:"stop"},integration:{targetSchema:"https://designsystem.org/schemas/tokens/v1.0.0",outputFormat:"design-tokens",mergeStrategy:"merge",validation:!0},examples:[]};if(console.log("AlgorithmEditor: Saving algorithm in schema format:",{algorithmId:a.id,algorithmName:a.name,schemaData:Ie,rawAlgorithm:a}),ge({...a}),X(!1),ot("Saved algorithm","general"),Y.length>0)try{const kt=ve.getTokens().map(zt=>{var vt;if(Y.includes(zt.id)){const Pn=W.get(zt.id);if(Pn&&Pn.hasChanges)return{...zt,valuesByMode:[{modeIds:((vt=zt.valuesByMode[0])==null?void 0:vt.modeIds)||[],value:Pn.calculatedValue}]}}return zt});n(kt),i({title:"Success",description:`Algorithm saved and ${Y.length} tokens updated successfully!`,status:"success",duration:3e3,isClosable:!0})}catch(Te){i({title:"Token Update Failed",description:`Algorithm saved but token updates failed: ${Te}`,status:"error",duration:5e3,isClosable:!0})}else if((Oe=a.tokenGeneration)!=null&&Oe.enabled&&!A)try{const Te=ve.getTokens(),kt=ve.getCollections(),zt=ve.getTaxonomies(),{tokens:vt,errors:Pn,newTaxonomies:bn,updatedTaxonomies:jt}=Bf.generateTokens(a,Te,kt,zt,!0,ee);if(console.log("AlgorithmEditor: Received from TokenGenerationService:",{tokensCount:vt.length,errorsCount:Pn.length,newTaxonomiesCount:(bn==null?void 0:bn.length)||0,updatedTaxonomiesCount:(jt==null?void 0:jt.length)||0,newTaxonomies:bn,updatedTaxonomies:jt}),bn&&bn.length>0){const Bn=[...zt,...bn];ve.setTaxonomies(Bn),console.log("AlgorithmEditor: Saved new taxonomies:",bn)}if(jt&&jt.length>0){const Bn=zt.map(Ri=>jt.find(gi=>gi.id===Ri.id)||Ri);ve.setTaxonomies(Bn),console.log("AlgorithmEditor: Saved updated taxonomies:",jt)}if(Pn.length>0&&i({title:"Token Generation Errors",description:`Generated ${vt.length} tokens with ${Pn.length} errors. Check the preview for details.`,status:"warning",duration:5e3,isClosable:!0}),vt.length>0){const Bn=[...Te,...vt];n(Bn),console.log("new tokens",vt),i({title:"Success",description:`Algorithm saved and ${vt.length} tokens generated successfully!`,status:"success",duration:3e3,isClosable:!0})}}catch(Te){i({title:"Token Generation Failed",description:`Algorithm saved but token generation failed: ${Te}`,status:"error",duration:5e3,isClosable:!0})}else i({title:"Success",description:"Algorithm saved successfully!",status:"success",duration:3e3,isClosable:!0})},Ge=Y=>{h(ee=>({...ee,type:Y}))},Et=Y=>{h(ee=>({...ee,defaultValue:Y}))},Zt=Y=>{g(Y.id),N(Y)},cn=()=>{var ee;if(!((ee=v.name)!=null&&ee.trim())){i({title:"Error",description:"Please enter a variable name",status:"error",duration:3e3,isClosable:!0});return}if(!Je.test(v.name)){i({title:"Error",description:"Variable name must start with a letter or underscore and contain only letters, numbers, and underscores.",status:"error",duration:3e3,isClosable:!0});return}const Y={...a,variables:a.variables.map(Ie=>Ie.id===x?{...Ie,...v}:Ie)};l(Y),g(null),N({}),ot(`Updated variable: ${v.name}`,"variable")},ft=()=>{g(null),N({})},Re=()=>{var Ie;if(!((Ie=a.tokenGeneration)!=null&&Ie.enabled)){j([]),T([]);return}if(!pt){j([]),T([]);return}const Y=a.variables&&a.variables.length>0,ee=a.formulas&&a.formulas.length>0;if(!A&&(!Y||!ee)){j([]),T(["Please add variables and formulas before generating tokens."]);return}if(ee){const Oe=new Set(a.variables.map(jt=>jt.name)),Te=Qn.getSystemVariables(),kt=new Set(Te.map(jt=>jt.name)),zt=new Set([...Oe,...kt]),vt=[],Pn=[];if(a.formulas.forEach(jt=>{if(jt.expressions.javascript.value){const Bn=jt.expressions.javascript.value;Bn.includes("Math.pow(")&&Bn.includes("=")&&Pn.push(`Formula "${jt.name}" has invalid Math.pow syntax. Assignment cannot be done inside Math.pow().`),Bn.includes("(")&&!Bn.includes(")")&&Pn.push(`Formula "${jt.name}" has unmatched parentheses.`);const Vi=Ws.convertFormulaToNames(Bn,a.variables).match(/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g)||[],gi=[...new Set(Vi)],ja=["Math","Array","Object","String","Number","Boolean","Date","RegExp","Function","undefined","null","true","false","NaN","Infinity"];gi.filter(_n=>!ja.includes(_n)).forEach(_n=>{zt.has(_n)||vt.push(_n)})}}),Pn.length>0){j([]),T(Pn);return}if(vt.length>0){const jt=[...new Set(vt)];j([]),T([`The following variables are referenced in formulas but not defined: ${jt.join(", ")}. Please add them in the Variables tab or ensure system variables are properly configured.`]);return}const bn=[];if(a.formulas.forEach(jt=>{if(jt.expressions.javascript.value){const Bn=jt.expressions.javascript.value,Vi=Ws.convertFormulaToNames(Bn,a.variables).match(/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g)||[],gi=[...new Set(Vi)],ja=["Math","Array","Object","String","Number","Boolean","Date","RegExp","Function","undefined","null","true","false","NaN","Infinity"],zi=gi.filter(Ss=>!ja.includes(Ss)),_n=Ws.getAllVariableMappings(a.variables),Ca=new Set;zi.forEach(Ss=>{const Ls=_n.find(Pi=>Pi.name===Ss);Ls&&Ca.add(Ls.id)});const Co=Array.from(Ca).filter(Ss=>!jt.variableIds.includes(Ss));if(Co.length>0){const Ss=Co.map(Ls=>{const Pi=_n.find(cc=>cc.id===Ls);return Pi?Pi.name:Ls});bn.push(`Formula "${jt.name}" references variables not listed in variableIds: ${Ss.join(", ")}`)}}}),bn.length>0){j([]),T(bn);return}}try{const Oe=ve.getTokens(),Te=ve.getCollections(),kt=ve.getTaxonomies(),{tokens:zt,errors:vt}=Bf.generateTokens(a,Oe,Te,kt,!1,ne);j(zt),T(vt)}catch(Oe){console.error("Preview generation error:",Oe),T([`Preview generation failed: ${Oe}`]),j([])}};P.useEffect(()=>{Re()},[a,ne,pt]),P.useEffect(()=>{var kt,zt;if(!((kt=a.tokenGeneration)!=null&&kt.enabled)){Ft(!1);return}const{logicalMapping:Y}=a.tokenGeneration,ee=Y.taxonomyId||((zt=Y.newTaxonomyName)==null?void 0:zt.trim()),Ie=a.variables&&a.variables.length>0,Oe=a.formulas&&a.formulas.length>0;Ft(!!ee&&(A?!0:Ie&&Oe))},[(Oi=(fi=a.tokenGeneration)==null?void 0:fi.logicalMapping)==null?void 0:Oi.taxonomyId,(jo=(ko=a.tokenGeneration)==null?void 0:ko.logicalMapping)==null?void 0:jo.newTaxonomyName,(pi=a.tokenGeneration)==null?void 0:pi.enabled,a.variables,a.formulas,A]);const Ye=()=>{const Y={id:ni("formula"),name:"",description:"",expressions:{latex:{value:""},javascript:{value:"",metadata:{allowedOperations:["math"]}},ast:{type:"literal",value:"",metadata:{astVersion:"1.0.0",validationErrors:[],complexity:"low"}}},variableIds:[]},ee={...a,formulas:[...a.formulas||[],Y]};l(ee),Hr.saveToHistory(ee,"Added new formula","formula")},ot=(Y,ee)=>{Hr.saveToHistory(a,Y,ee)},It=()=>{const Y=Hr.undo(a.id);Y?(l(Y),i({title:"Undo Successful",description:"Algorithm reverted to previous state",status:"success",duration:3e3,isClosable:!0})):i({title:"Nothing to Undo",description:"No previous states available",status:"info",duration:3e3,isClosable:!0})},tt=()=>{const Y=Hr.redo(a.id);Y?(l(Y),i({title:"Redo Successful",description:"Algorithm restored to next state",status:"success",duration:3e3,isClosable:!0})):i({title:"Nothing to Redo",description:"No future states available",status:"info",duration:3e3,isClosable:!0})},Ce=(Y,ee)=>{let Ie;switch(Y){case"last-save":if(he)Ie={...he};else{i({title:"Reset Failed",description:"No saved state available",status:"error",duration:3e3,isClosable:!0});return}break;case"specific-history":if(ee)Ie={...ee.algorithm};else{i({title:"Reset Failed",description:"No history entry selected",status:"error",duration:3e3,isClosable:!0});return}break;case"original":Ie=e?{...e}:Ho,Hr.clearHistory(a.id);break;default:return}l(Ie),ge(Ie),X(!1),i({title:"Reset Successful",description:`Algorithm reset to ${Y.replace("-"," ")}`,status:"success",duration:3e3,isClosable:!0})},Tn=Y=>{be(Y),Se(!1),Fe([],Y)},Cr=Hr.canUndo(a.id),ae=Hr.canRedo(a.id),we=(Y,ee)=>{if(!ee)return Y;const Oe=ve.getDimensions().find(kt=>kt.id===ee);if(!Oe)return Y;const Te=Oe.modes.find(kt=>kt.id===Y);return Te?Te.name:Y},Je=/^[a-zA-Z_][a-zA-Z0-9_]*$/,Xe=u.name?Je.test(u.name):!1,mt=v.name?Je.test(v.name):!0;return s.jsx(Z,{children:s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsx(B,{fontSize:"xl",fontWeight:"bold",children:"Algorithm Editor"}),s.jsxs(xe,{spacing:2,children:[s.jsx(wt,{"aria-label":"Undo",icon:s.jsx(ib,{size:16}),size:"sm",variant:"ghost",isDisabled:!Cr,onClick:It,title:Cr?"Undo last change":"Nothing to undo"}),s.jsx(wt,{"aria-label":"Redo",icon:s.jsx(E4,{size:16}),size:"sm",variant:"ghost",isDisabled:!ae,onClick:tt,title:ae?"Redo last undone change":"Nothing to redo"}),s.jsx(wt,{"aria-label":"Reset Algorithm",icon:s.jsx(bl,{size:16}),size:"sm",variant:"ghost",colorScheme:"orange",onClick:()=>H(!0),title:"Reset algorithm to previous state"})]})]}),L&&s.jsx(Z,{p:2,bg:"orange.100",borderRadius:"md",borderWidth:1,borderColor:"orange.200",children:s.jsx(B,{fontSize:"sm",color:"orange.700",children:" You have unsaved changes"})}),s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsx(B,{fontSize:"lg",fontWeight:"bold",children:"Basic Information"}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Algorithm Name"}),s.jsx(dt,{placeholder:"Algorithm Name",value:a.name,onChange:Y=>{l(ee=>({...ee,name:Y.target.value})),ot("Updated algorithm name","general")}})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(ey,{placeholder:"Description (optional)",value:a.description,onChange:Y=>{l(ee=>({...ee,description:Y.target.value})),ot("Updated algorithm description","general")}})]})]}),s.jsx(us,{}),s.jsxs(Ai,{children:[s.jsxs(Ni,{children:[s.jsx($n,{children:"Variables"}),s.jsx($n,{children:"Formulas"}),s.jsx($n,{children:"Conditions"}),s.jsx($n,{children:"Token Generation"}),s.jsx($n,{children:"Algorithm Steps"}),s.jsx($n,{children:"Preview"}),s.jsx($n,{children:"Dependency Visualization"})]}),s.jsxs(ma,{children:[s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{spacing:4,justify:"start",children:[s.jsxs(Le,{isRequired:!0,isInvalid:!!u.name&&!Xe,children:[s.jsx(We,{children:"Variable Name"}),s.jsx(dt,{placeholder:"Variable Name",value:u.name,onChange:Y=>h(ee=>({...ee,name:Y.target.value}))}),!Xe&&u.name&&s.jsx(B,{fontSize:"xs",color:"red.500",children:"Variable names must start with a letter or underscore and contain only letters, numbers, and underscores."})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Type"}),s.jsxs(fn,{value:u.type,onChange:Y=>Ge(Y.target.value),children:[s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"string",children:"String"}),s.jsx("option",{value:"boolean",children:"Boolean"})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Default Value"}),s.jsx(dt,{placeholder:"Default Value (optional)",value:((xn=u.defaultValue)==null?void 0:xn.toString())||"",onChange:Y=>Et(Y.target.value)})]}),s.jsx(Ne,{leftIcon:s.jsx(Ur,{size:16}),flexShrink:0,onClick:Ut,isDisabled:!Xe,children:"Add Variable"})]}),u.name&&s.jsx(Bu,{variable:u,onVariableChange:Y=>h(Y),dimensions:ve.getDimensions()}),s.jsx(me,{spacing:2,align:"stretch",children:a.variables.map(Y=>{var ee;return s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",children:s.jsx(xe,{justify:"space-between",mb:2,children:x===Y.id?s.jsxs(me,{spacing:4,flex:1,align:"stretch",children:[s.jsxs(xe,{spacing:4,children:[s.jsxs(Le,{isRequired:!0,isInvalid:!!v.name&&!mt,children:[s.jsx(We,{children:"Variable Name"}),s.jsx(dt,{placeholder:"Variable Name",value:v.name,onChange:Ie=>N(Oe=>({...Oe,name:Ie.target.value}))}),!mt&&v.name&&s.jsx(B,{fontSize:"xs",color:"red.500",children:"Variable names must start with a letter or underscore and contain only letters, numbers, and underscores."})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Type"}),s.jsxs(fn,{value:v.type,onChange:Ie=>N(Oe=>({...Oe,type:Ie.target.value})),children:[s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"string",children:"String"}),s.jsx("option",{value:"boolean",children:"Boolean"})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Default Value"}),s.jsx(dt,{placeholder:"Default Value (optional)",value:((ee=v.defaultValue)==null?void 0:ee.toString())||"",onChange:Ie=>N(Oe=>({...Oe,defaultValue:Ie.target.value}))})]})]}),s.jsx(Bu,{variable:v,onVariableChange:Ie=>N(Ie),dimensions:ve.getDimensions()}),s.jsxs(xe,{spacing:2,children:[s.jsx(Ne,{size:"sm",colorScheme:"blue",onClick:cn,isDisabled:!mt,children:"Save"}),s.jsx(Ne,{size:"sm",onClick:ft,children:"Cancel"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(me,{align:"start",flex:1,spacing:1,children:[s.jsxs(xe,{children:[s.jsx(ht,{colorScheme:"blue",children:Y.name}),s.jsxs(B,{fontSize:"sm",color:"gray.500",children:["(",Y.type,")"]}),Y.defaultValue&&!Y.modeBased&&s.jsxs(B,{fontSize:"sm",color:"gray.500",children:["= ",Y.defaultValue]}),Y.modeBased&&s.jsx(ht,{colorScheme:"green",size:"sm",children:"Mode-Based"})]}),Y.modeBased&&Y.valuesByMode&&Y.valuesByMode.length>0&&s.jsxs(Z,{children:[s.jsx(B,{fontSize:"xs",color:"gray.500",mb:1,children:"Mode Values:"}),s.jsx(xe,{spacing:2,wrap:"wrap",children:Y.valuesByMode.map(({modeIds:Ie,value:Oe})=>s.jsxs(ht,{size:"sm",colorScheme:"purple",variant:"outline",children:[we(Ie[0],Y.dimensionId),": ",Oe]},Ie.join(", ")))})]})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit variable",icon:s.jsx(x0,{size:16}),size:"sm",onClick:()=>Zt(Y)}),s.jsx(wt,{"aria-label":"Delete variable",icon:s.jsx(cs,{size:16}),size:"sm",colorScheme:"red",onClick:()=>Ee(Y.id)})]})]})})},Y.id)})})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsx(xe,{justify:"space-between",children:s.jsx(Ne,{size:"sm",leftIcon:s.jsx(Ur,{size:16}),onClick:Ye,children:"Add Formula"})}),s.jsx(me,{spacing:4,align:"stretch",children:(a.formulas||[]).map((Y,ee)=>s.jsx(Z,{p:4,borderWidth:1,borderRadius:"md",position:"relative",children:s.jsxs(xe,{spacing:4,align:"start",children:[s.jsxs(Z,{flex:1,children:[s.jsxs(xe,{spacing:4,align:"start",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Formula Name"}),s.jsx(dt,{placeholder:"Formula Name",value:Y.name,onChange:Ie=>{const Oe=[...a.formulas||[]];Oe[ee]={...Y,name:Ie.target.value};const Te={...a,formulas:Oe};l(Te),Wt(Y.id),ot(`Updated formula name: ${Ie.target.value}`,"formula")},mb:2})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{placeholder:"Description",value:Y.description,onChange:Ie=>{const Oe=[...a.formulas||[]];Oe[ee]={...Y,description:Ie.target.value};const Te={...a,formulas:Oe};l(Te),Wt(Y.id),ot(`Updated formula description: ${Ie.target.value}`,"formula")},mb:2})]})]}),Y.expressions.latex.value&&s.jsxs(Z,{p:2,bg:r==="light"?"gray.50":"gray.700",borderRadius:"md",mb:2,fontSize:"sm",children:[s.jsx(B,{mb:-2,fontSize:"sm",color:"gray.500",children:"LaTeX preview:"}),s.jsx(L8.BlockMath,{math:Y.expressions.latex.value})]}),s.jsx(Vf,{variables:a.variables||[],value:Y.expressions.javascript.value,mode:"formula",onChange:(Ie,Oe,Te)=>{const kt=Ws.convertFormulaToIds(Ie,a.variables),zt=Ws.convertLatexToIds(Oe,a.variables),vt=Ws.convertASTToIds(Te,a.variables),Pn=[...a.formulas||[]];Pn[ee]={...Y,expressions:{latex:{value:zt},javascript:{value:kt,metadata:{allowedOperations:["math"]}},ast:vt}};const bn={...a,formulas:Pn};l(bn),Wt(Y.id),ot(`Updated formula expression: ${Y.name}`,"formula")}})]}),s.jsx(wt,{"aria-label":"Delete formula",icon:s.jsx(cs,{size:16}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>{const Ie=(a.formulas||[]).filter(Te=>Te.id!==Y.id),Oe={...a,formulas:Ie};l(Oe),ot(`Deleted formula: ${Y.name}`,"formula")}})]})},Y.id))})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsx(xe,{justify:"space-between",children:s.jsx(Ne,{size:"sm",leftIcon:s.jsx(Ur,{size:16}),onClick:$t,children:"Add Condition"})}),s.jsx(me,{spacing:4,align:"stretch",children:(a.conditions||[]).map((Y,ee)=>s.jsx(Z,{p:4,borderWidth:1,borderRadius:"md",position:"relative",children:s.jsxs(xe,{spacing:4,align:"start",children:[s.jsxs(Z,{flex:1,children:[s.jsx(xe,{spacing:4,align:"start",children:s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Condition Name"}),s.jsx(dt,{placeholder:"Condition Name",value:Y.name,onChange:Ie=>{const Oe=[...a.conditions||[]];Oe[ee]={...Y,name:Ie.target.value};const Te={...a,conditions:Oe};l(Te)},mb:2})]})}),s.jsx(Vf,{variables:a.variables||[],value:Y.expression,mode:"condition",onChange:Ie=>{const Oe=[...a.conditions||[]];Oe[ee]={...Y,expression:Ie};const Te={...a,conditions:Oe};l(Te)}})]}),s.jsx(wt,{"aria-label":"Delete condition",icon:s.jsx(cs,{size:16}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>{const Ie=(a.conditions||[]).filter(Te=>Te.id!==Y.id),Oe={...a,conditions:Ie};l(Oe)}})]})},Y.id))})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{justify:"space-between",children:[s.jsx(B,{fontSize:"lg",fontWeight:"bold",children:"Token Generation Settings"}),s.jsx(Ne,{size:"sm",colorScheme:(b=a.tokenGeneration)!=null&&b.enabled?"green":"gray",onClick:()=>{var ee;const Y=!((ee=a.tokenGeneration)!=null&&ee.enabled);l(Ie=>({...Ie,tokenGeneration:Y?{enabled:!0,iterationRange:{start:-2,end:8,step:1},bulkAssignments:{resolvedValueTypeId:pn.length>0?pn[0].id:"color",taxonomies:[],tokenTier:"PRIMITIVE",private:!1,status:"stable",themeable:!1},logicalMapping:{scaleType:"numeric",defaultValue:"100",increasingStep:100,decreasingStep:25,extraPrefix:"X",incrementDirection:"ascending",taxonomyId:void 0,newTaxonomyName:void 0}}:void 0}))},children:(k=a.tokenGeneration)!=null&&k.enabled?"Enabled":"Enable Token Generation"})]}),De&&((ke=a.tokenGeneration)==null?void 0:ke.enabled)&&s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",bg:r==="light"?"blue.50":"blue.900",children:[s.jsxs(xe,{justify:"space-between",mb:3,children:[s.jsx(B,{fontWeight:"bold",color:"blue.600",children:"Mode-Based Variables Detected"}),s.jsx(ht,{colorScheme:"blue",children:"Mode Selection Required"})]}),s.jsx(B,{fontSize:"sm",color:"gray.600",mb:3,children:"Your algorithm contains variables with mode-specific values. When you save, you'll be prompted to select which modes to generate tokens for."}),Object.keys(ne).length>0&&s.jsxs(Z,{children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Selected Modes:"}),s.jsx(me,{spacing:1,align:"stretch",children:Object.entries(ne).map(([Y,ee])=>{const Ie=ve.getDimensions().find(Oe=>Oe.id===Y);return s.jsxs(xe,{spacing:2,children:[s.jsx(ht,{size:"sm",colorScheme:"green",children:(Ie==null?void 0:Ie.displayName)||Y}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:[ee.length," mode",ee.length!==1?"s":""," selected"]})]},Y)})})]})]}),A&&s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",bg:r==="light"?"blue.50":"blue.900",children:[s.jsxs(xe,{justify:"space-between",mb:3,children:[s.jsxs(B,{fontWeight:"bold",color:"blue.600",children:["Existing Tokens (",E.length,")"]}),s.jsx(ht,{colorScheme:"blue",children:"Algorithm-Generated"})]}),s.jsxs(B,{fontSize:"sm",color:"gray.600",mb:3,children:["This algorithm has generated ",E.length," tokens. Token generation settings are simplified to focus on formula-driven updates."]}),s.jsx(me,{spacing:2,align:"stretch",maxH:"300px",overflowY:"auto",children:E.map(Y=>{var Te;const ee=W.get(Y.id),Ie=pn.find(kt=>kt.id===Y.resolvedValueTypeId),Oe=F.filter(kt=>kt.affectedTokens.includes(Y.id)).map(kt=>kt.formulaName);return s.jsxs(xe,{p:2,borderWidth:1,borderRadius:"md",bg:r==="light"?"white":"gray.700",children:[s.jsxs(me,{align:"start",flex:1,spacing:1,children:[s.jsx(B,{fontWeight:"medium",fontSize:"sm",children:Y.displayName}),s.jsxs(xe,{spacing:2,children:[s.jsx(ht,{size:"sm",colorScheme:"gray",children:(Ie==null?void 0:Ie.displayName)||"Unknown Type"}),ee&&s.jsx(ht,{size:"sm",colorScheme:ee.hasChanges?"orange":"green",children:ee.hasChanges?"Has Changes":"Up to Date"}),ee&&s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Iteration: ",ee.iterationValue]})]}),Oe.length>0&&s.jsxs(B,{fontSize:"xs",color:"blue.500",children:["Affected by: ",Oe.join(", ")]})]}),s.jsxs(me,{align:"end",spacing:1,children:[s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Current: ",(Te=Y.valuesByMode[0])!=null&&Te.value&&"value"in Y.valuesByMode[0].value?Y.valuesByMode[0].value.value:"N/A"]}),ee&&ee.hasChanges&&s.jsxs(B,{fontSize:"xs",color:"orange.500",children:["New: ",ee.calculatedValue&&"value"in ee.calculatedValue?ee.calculatedValue.value:"N/A"]})]})]},Y.id)})})]}),((_=a.tokenGeneration)==null?void 0:_.enabled)&&s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",children:[s.jsx(B,{fontWeight:"bold",mb:3,children:"Iteration Range"}),s.jsxs(xe,{spacing:4,children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Start"}),s.jsx(dt,{type:"number",value:a.tokenGeneration.iterationRange.start,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,iterationRange:{...ee.tokenGeneration.iterationRange,start:parseInt(Y.target.value)||0}}}))}})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"End"}),s.jsx(dt,{type:"number",value:a.tokenGeneration.iterationRange.end,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,iterationRange:{...ee.tokenGeneration.iterationRange,end:parseInt(Y.target.value)||0}}}))}})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Step"}),s.jsx(dt,{type:"number",value:a.tokenGeneration.iterationRange.step,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,iterationRange:{...ee.tokenGeneration.iterationRange,step:parseInt(Y.target.value)||1}}}))}})]})]})]}),!A&&s.jsxs(s.Fragment,{children:[s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",children:[s.jsx(B,{fontWeight:"bold",mb:3,children:"Bulk Assignments"}),s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Resolved Value Type"}),s.jsx(fn,{value:a.tokenGeneration.bulkAssignments.resolvedValueTypeId,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,resolvedValueTypeId:Y.target.value}}}))},children:pn.map(Y=>s.jsx("option",{value:Y.id,children:Y.displayName},Y.id))})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Token Tier"}),s.jsxs(fn,{value:a.tokenGeneration.bulkAssignments.tokenTier,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,tokenTier:Y.target.value}}}))},children:[s.jsx("option",{value:"PRIMITIVE",children:"Primitive"}),s.jsx("option",{value:"SEMANTIC",children:"Semantic"}),s.jsx("option",{value:"COMPONENT",children:"Component"})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Status"}),s.jsxs(fn,{value:a.tokenGeneration.bulkAssignments.status,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,status:Y.target.value}}}))},children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"experimental",children:"Experimental"}),s.jsx("option",{value:"stable",children:"Stable"}),s.jsx("option",{value:"deprecated",children:"Deprecated"})]})]}),s.jsxs(me,{spacing:3,align:"stretch",children:[s.jsx(kn,{isChecked:a.tokenGeneration.bulkAssignments.private,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,private:Y.target.checked}}}))},children:"Private"}),s.jsx(kn,{isChecked:a.tokenGeneration.bulkAssignments.themeable,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,bulkAssignments:{...ee.tokenGeneration.bulkAssignments,themeable:Y.target.checked}}}))},children:"Themeable"})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Taxonomies"}),s.jsxs(me,{spacing:2,align:"stretch",children:[s.jsx(B,{fontSize:"sm",color:"gray.600",children:"Select taxonomies for logical term assignment. Terms will be automatically mapped based on the logical mapping settings."}),s.jsx(Y1,{taxonomies:Ve,value:Dt,onChange:mn,disabled:Ve.length===0}),Ve.length===0&&s.jsx(Z,{p:3,bg:r==="light"?"gray.50":"gray.700",borderRadius:"md",children:s.jsx(B,{fontSize:"sm",color:"gray.500",children:(()=>{var Ie,Oe;const Y=ve.getTaxonomies(),ee=(Oe=(Ie=a.tokenGeneration)==null?void 0:Ie.bulkAssignments)==null?void 0:Oe.resolvedValueTypeId;return Y.length===0?"No taxonomies have been created yet. Please create taxonomies in the Classification setup first.":ee&&Y.filter(kt=>Array.isArray(kt.resolvedValueTypeIds)&&kt.resolvedValueTypeIds.includes(ee)).length===0?`No taxonomies support the "${ee}" value type. Please select a different value type (like "color" or "spacing") or create a taxonomy that supports "${ee}".`:"No taxonomies available for this value type. Please select a different value type or add taxonomies for this type."})()})})]})]})]})]}),s.jsxs(Z,{p:4,borderWidth:1,borderRadius:"md",children:[s.jsx(B,{fontWeight:"bold",mb:3,children:"Logical Mapping"}),s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Scale Type"}),s.jsxs(fn,{value:a.tokenGeneration.logicalMapping.scaleType,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,scaleType:Y.target.value}}}))},children:[s.jsx("option",{value:"numeric",children:"Numeric"}),s.jsx("option",{value:"tshirt",children:"T-Shirt Sizing"})]})]}),s.jsxs(Le,{isRequired:!pt,children:[s.jsxs(We,{children:["Taxonomy for Scale Terms",!pt&&s.jsx(B,{as:"span",color:"red.500",children:" *"})]}),s.jsxs(me,{spacing:3,align:"stretch",children:[s.jsx(B,{fontSize:"sm",color:"gray.600",children:"Choose an existing taxonomy or create a new one for the scale terms. This is required for token generation."}),s.jsxs(fn,{value:a.tokenGeneration.logicalMapping.taxonomyId||"",onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,taxonomyId:Y.target.value||void 0,newTaxonomyName:Y.target.value?void 0:ee.tokenGeneration.logicalMapping.newTaxonomyName}}}))},children:[s.jsx("option",{value:"",children:"Create new taxonomy"}),Ve.map(Y=>s.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),!a.tokenGeneration.logicalMapping.taxonomyId&&s.jsxs(Le,{isRequired:!pt,children:[s.jsxs(We,{children:["New Taxonomy Name",!pt&&s.jsx(B,{as:"span",color:"red.500",children:" *"})]}),s.jsx(dt,{placeholder:"Enter taxonomy name (e.g., 'Scale Terms', 'Size Categories')",value:a.tokenGeneration.logicalMapping.newTaxonomyName||"",onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,newTaxonomyName:Y.target.value}}}))}}),s.jsx(B,{fontSize:"xs",color:"gray.500",mt:1,children:"Provide a descriptive name for the new taxonomy that will contain the scale terms."})]}),!pt&&s.jsxs(Z,{p:3,bg:"orange.50",borderRadius:"md",borderWidth:1,borderColor:"orange.200",children:[s.jsx(B,{fontSize:"sm",color:"orange.700",mb:2,children:" Please complete the following to enable token generation preview:"}),s.jsxs(me,{spacing:1,align:"start",children:[!((un=($=a.tokenGeneration)==null?void 0:$.logicalMapping)!=null&&un.taxonomyId)&&!((ws=(Zn=(qe=a.tokenGeneration)==null?void 0:qe.logicalMapping)==null?void 0:Zn.newTaxonomyName)!=null&&ws.trim())&&s.jsx(B,{fontSize:"xs",color:"orange.600",children:" Configure taxonomy settings above"}),!A&&a.variables.length===0&&s.jsx(B,{fontSize:"xs",color:"orange.600",children:" Add variables in the Variables tab"}),!A&&a.formulas.length===0&&s.jsx(B,{fontSize:"xs",color:"orange.600",children:" Add formulas in the Formulas tab"})]})]})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Default Value"}),s.jsx(dt,{value:a.tokenGeneration.logicalMapping.defaultValue,onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,defaultValue:Y.target.value}}}))}})]}),a.tokenGeneration.logicalMapping.scaleType==="numeric"&&s.jsxs(s.Fragment,{children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Steps (Increasing)"}),s.jsx(dt,{type:"number",placeholder:"100",value:a.tokenGeneration.logicalMapping.increasingStep||"",onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,increasingStep:parseInt(Y.target.value)||void 0}}}))}})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Steps (Decreasing)"}),s.jsx(dt,{type:"number",placeholder:"25",value:a.tokenGeneration.logicalMapping.decreasingStep||"",onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,decreasingStep:parseInt(Y.target.value)||void 0}}}))}})]})]}),a.tokenGeneration.logicalMapping.scaleType==="tshirt"&&s.jsxs(Le,{children:[s.jsx(We,{children:"Prefix for Extra Sizes"}),s.jsxs(fn,{value:a.tokenGeneration.logicalMapping.extraPrefix||"X",onChange:Y=>{l(ee=>({...ee,tokenGeneration:{...ee.tokenGeneration,logicalMapping:{...ee.tokenGeneration.logicalMapping,extraPrefix:Y.target.value}}}))},children:[s.jsx("option",{value:"X",children:"X (X-Small, X-Large)"}),s.jsx("option",{value:"extra",children:"extra (extra-small, extra-large)"})]})]})]})]})]})]})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(xe,{spacing:4,children:[s.jsxs(fn,{value:f.type,onChange:Y=>m(ee=>({...ee,type:Y.target.value})),children:[s.jsx("option",{value:"formula",children:"Formula"}),s.jsx("option",{value:"condition",children:"Condition"})]}),s.jsxs(fn,{value:f.id,onChange:Y=>{const Ie=(f.type==="formula"?a.formulas:a.conditions).find(Oe=>Oe.id===Y.target.value);m(Oe=>({...Oe,id:Y.target.value,name:(Ie==null?void 0:Ie.name)||""}))},children:[s.jsxs("option",{value:"",children:["Select ",f.type==="formula"?"Formula":"Condition"]}),(f.type==="formula"?a.formulas:a.conditions).map(Y=>s.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),s.jsx(Ne,{leftIcon:s.jsx(Ur,{size:16}),onClick:fe,children:"Add Step"})]}),s.jsx(Z,{p:4,bg:r==="dark"?"gray.800":"gray.50",borderRadius:"md",children:s.jsx(Xl,{onDragEnd:ln,children:s.jsx(Kl,{droppableId:"algorithm-steps",children:Y=>s.jsxs(me,{...Y.droppableProps,ref:Y.innerRef,spacing:2,align:"stretch",children:[a.steps.map((ee,Ie)=>{const Oe=ee.type==="formula"?a.formulas.find(Te=>Te.id===ee.id):a.conditions.find(Te=>Te.id===ee.id);return s.jsx(io,{draggableId:`${ee.type}_${ee.id}_${Ie}`,index:Ie,children:(Te,kt)=>s.jsxs(xe,{ref:Te.innerRef,...Te.draggableProps,...Te.dragHandleProps,p:2,bg:r==="dark"?"gray.700":"white",borderRadius:"md",boxShadow:kt.isDragging?"md":"sm",borderWidth:1,borderColor:r==="dark"?"gray.600":"gray.200",justify:"space-between",children:[s.jsxs(xe,{children:[s.jsx(Z,{cursor:"grab",children:s.jsx(Ou,{size:16})}),s.jsx(ht,{colorScheme:ee.type==="formula"?"purple":"green",children:ee.type==="formula"?"Formula":"Condition"}),s.jsx(B,{children:Oe==null?void 0:Oe.name})]}),s.jsx(wt,{"aria-label":"Delete step",icon:s.jsx(cs,{size:16}),size:"sm",colorScheme:"red",onClick:()=>ye(Ie)})]})},`${ee.type}_${ee.id}_${Ie}`)}),Y.placeholder]})})})})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Z,{p:4,bg:r==="light"?"gray.50":"gray.800",borderRadius:"md",fontSize:"sm",fontFamily:"mono",overflowX:"auto",children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Algorithm JSON Preview"}),s.jsx("pre",{style:{margin:0},children:JSON.stringify(a,null,2)})]}),((ut=a.tokenGeneration)==null?void 0:ut.enabled)&&s.jsxs(Z,{p:4,bg:r==="light"?"gray.50":"gray.800",borderRadius:"md",fontSize:"sm",fontFamily:"mono",overflowX:"auto",children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Generated Tokens Preview"}),!pt&&s.jsxs(Z,{mb:3,p:3,bg:"orange.100",borderRadius:"md",children:[s.jsx(B,{fontWeight:"bold",color:"orange.600",children:"Configuration Required"}),s.jsxs(me,{spacing:1,align:"start",mt:2,children:[!((tr=(In=a.tokenGeneration)==null?void 0:In.logicalMapping)!=null&&tr.taxonomyId)&&!((Dr=(G=(mi=a.tokenGeneration)==null?void 0:mi.logicalMapping)==null?void 0:G.newTaxonomyName)!=null&&Dr.trim())&&s.jsx(B,{color:"orange.600",fontSize:"xs",children:" Configure taxonomy settings in the Token Generation tab"}),!A&&a.variables.length===0&&s.jsx(B,{color:"orange.600",fontSize:"xs",children:" Add variables in the Variables tab"}),!A&&a.formulas.length===0&&s.jsx(B,{color:"orange.600",fontSize:"xs",children:" Add formulas in the Formulas tab"})]})]}),S.length>0&&s.jsxs(Z,{mb:3,p:3,bg:"red.100",borderRadius:"md",children:[s.jsx(B,{fontWeight:"bold",color:"red.600",children:"Generation Errors:"}),S.map((Y,ee)=>s.jsxs(B,{color:"red.600",fontSize:"xs",children:[" ",Y]},ee))]}),D.length>0&&s.jsxs(Z,{children:[s.jsxs(B,{mb:2,fontSize:"sm",color:"gray.500",children:[D.length," tokens will be generated:"]}),s.jsxs(me,{spacing:2,align:"stretch",children:[D.slice(0,10).map((Y,ee)=>{var Ie,Oe;return s.jsxs(Z,{p:2,bg:"white",borderRadius:"sm",borderWidth:1,children:[s.jsx(B,{fontSize:"xs",fontWeight:"bold",children:Y.id}),s.jsx(B,{fontSize:"xs",color:"gray.600",children:Y.displayName}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["Value: ",(Ie=Y.valuesByMode[0])!=null&&Ie.value&&"value"in Y.valuesByMode[0].value?Y.valuesByMode[0].value.value:"N/A"]}),((Oe=Y.valuesByMode[0])==null?void 0:Oe.modeIds)&&Y.valuesByMode[0].modeIds.length>0&&s.jsxs(B,{fontSize:"xs",color:"blue.500",children:["Modes: ",Y.valuesByMode[0].modeIds.join(", ")]})]},ee)}),D.length>10&&s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["... and ",D.length-10," more tokens"]})]})]}),D.length===0&&S.length===0&&pt&&s.jsx(B,{fontSize:"sm",color:"gray.500",children:"No tokens will be generated. Check your algorithm configuration and iteration range settings."})]})]})}),s.jsx(nr,{children:s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsx(q8,{algorithm:a,showValidation:!0,showExecutionTrace:!1}),s.jsx(H8,{algorithm:a,onExecutionComplete:Y=>{console.log("Execution completed:",Y)}})]})})]})]}),s.jsx(Ne,{leftIcon:s.jsx(Xp,{size:16}),colorScheme:"blue",onClick:Ue,size:"lg",children:(K=a.tokenGeneration)!=null&&K.enabled?"Save and Run":"Save Algorithm"}),s.jsx($8,{isOpen:de,onClose:()=>q(!1),onSave:Fe,algorithm:a,tokenCalculationStates:W,existingTokens:E,resolvedValueTypes:pn}),s.jsx(G8,{isOpen:pe,onClose:()=>H(!1),onReset:Ce,algorithm:a,hasUnsavedChanges:L}),s.jsx(W8,{isOpen:oe,onClose:()=>Se(!1),onConfirm:Tn,algorithm:a})]})})},Z8=({algorithms:e,onUpdate:t,onUpdateTokens:n})=>{const{colorMode:r}=nn(),i=or(),[a,l]=P.useState(!1),[u,h]=P.useState();console.log("[AlgorithmsView] Received",e.length,"algorithms");const f=g=>{const v=u?e.map(N=>N.id===g.id?g:N):[...e,g];t(v),l(!1),h(void 0),i({title:"Success",description:`Algorithm ${u?"updated":"created"} successfully`,status:"success",duration:3e3,isClosable:!0})},m=g=>{const v=e.filter(N=>N.id!==g);t(v),i({title:"Success",description:"Algorithm deleted successfully",status:"success",duration:3e3,isClosable:!0})},x=g=>{h(g),l(!0)};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Algorithms"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:r==="dark"?"gray.900":"white",children:[s.jsx(Ne,{leftIcon:s.jsx(es,{}),colorScheme:"blue",size:"sm",mb:4,onClick:()=>{h(void 0),l(!0)},children:"New Algorithm"}),s.jsx(me,{align:"stretch",spacing:2,children:e.map(g=>s.jsx(Z,{p:4,bg:r==="dark"?"gray.800":"gray.50",borderRadius:"md",borderWidth:1,borderColor:r==="dark"?"gray.600":"gray.200",children:s.jsxs(me,{align:"stretch",spacing:2,children:[s.jsxs(xe,{justify:"space-between",children:[s.jsx(ga,{title:g.name,cardType:"algorithm"}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit algorithm",icon:s.jsx(xs,{}),size:"sm",onClick:()=>x(g)}),s.jsx(wt,{"aria-label":"Delete algorithm",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>m(g.id)})]})]}),g.description&&s.jsx(B,{color:"gray.500",children:g.description}),s.jsxs(B,{fontSize:"sm",children:[g.variables.length," variables  ",g.formulas.length," formulas  ",g.conditions.length," conditions  ",g.steps.length," steps"]})]})},g.id))}),s.jsxs(Hn,{isOpen:a,onClose:()=>l(!1),size:"6xl",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:u?"Edit Algorithm":"New Algorithm"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsx(U8,{algorithm:u,onSave:f,onUpdateTokens:n})})]})]})]})]})};function Y8({platform:e,open:t,onClose:n,onSave:r,isNew:i=!1}){var x,g,v,N,D,j,S;const[a,l]=P.useState(()=>{var T,E,M,A,I;return{...e,syntaxPatterns:{prefix:((T=e.syntaxPatterns)==null?void 0:T.prefix)??"",suffix:((E=e.syntaxPatterns)==null?void 0:E.suffix)??"",delimiter:((M=e.syntaxPatterns)==null?void 0:M.delimiter)??"_",capitalization:((A=e.syntaxPatterns)==null?void 0:A.capitalization)??"none",formatString:((I=e.syntaxPatterns)==null?void 0:I.formatString)??""}}}),{colorMode:u}=nn(),h=P.useMemo(()=>{const T={taxonomies:[{taxonomyId:"mock1",termId:"mock1"},{taxonomyId:"mock2",termId:"mock2"},{taxonomyId:"mock3",termId:"mock3"}]},E={namingRules:{taxonomyOrder:["mock1","mock2","mock3"]},taxonomies:[{id:"mock1",terms:[{id:"mock1",name:"primary"}]},{id:"mock2",terms:[{id:"mock2",name:"color"}]},{id:"mock3",terms:[{id:"mock3",name:"background"}]}],platforms:[{id:"preview",syntaxPatterns:a.syntaxPatterns}]};return Qi.generateCodeSyntax(T,"preview",E)},[a.syntaxPatterns]),f=!a.displayName||((x=a.syntaxPatterns)==null?void 0:x.delimiter)===void 0||!((g=a.syntaxPatterns)!=null&&g.capitalization),m=T=>{T.preventDefault(),r(a),n()};return s.jsxs(Hn,{isOpen:t,onClose:n,size:"xl",children:[s.jsx(Mn,{}),s.jsxs(Wn,{maxW:"900px",children:[s.jsxs(Dn,{children:[i?"Create Platform":`Edit Platform: ${a.displayName}`,s.jsx(B,{fontSize:"xs",color:"gray.500",mt:1,fontFamily:"mono",wordBreak:"break-all",children:a.id})]}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsx(B,{fontSize:"lg",fontWeight:"bold",mb:2,children:"Basic Information"}),s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:u==="dark"?"gray.800":"gray.50",borderColor:u==="dark"?"gray.600":"gray.200",children:s.jsxs(me,{spacing:3,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Display Name"}),s.jsx(dt,{value:a.displayName,onChange:T=>l(E=>({...E,displayName:T.target.value}))})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:a.description||"",onChange:T=>l(E=>({...E,description:T.target.value}))})]})]})}),s.jsx(B,{fontSize:"lg",fontWeight:"bold",mb:2,children:"Syntax Patterns"}),s.jsxs(Z,{p:3,borderWidth:1,borderRadius:"md",bg:u==="dark"?"gray.800":"gray.50",borderColor:u==="dark"?"gray.600":"gray.200",children:[s.jsxs(xe,{spacing:4,align:"flex-end",children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Prefix"}),s.jsx(dt,{value:((v=a.syntaxPatterns)==null?void 0:v.prefix)??"",onChange:T=>l(E=>({...E,syntaxPatterns:{...E.syntaxPatterns,prefix:T.target.value}})),placeholder:"e.g., TKN_"})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Suffix"}),s.jsx(dt,{value:((N=a.syntaxPatterns)==null?void 0:N.suffix)??"",onChange:T=>l(E=>({...E,syntaxPatterns:{...E.syntaxPatterns,suffix:T.target.value}})),placeholder:"e.g., _SUF"})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Delimiter"}),s.jsxs(fn,{value:((D=a.syntaxPatterns)==null?void 0:D.delimiter)??"_",onChange:T=>l(E=>({...E,syntaxPatterns:{...E.syntaxPatterns,delimiter:T.target.value}})),children:[s.jsx("option",{value:"",children:"None (no delimiter)"}),s.jsx("option",{value:"_",children:"Underscore (_)"}),s.jsx("option",{value:"-",children:"Hyphen (-)"}),s.jsx("option",{value:".",children:"Dot (.)"}),s.jsx("option",{value:"/",children:"Forward slash (/)"})]})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Capitalization"}),s.jsxs(fn,{value:((j=a.syntaxPatterns)==null?void 0:j.capitalization)??"none",onChange:T=>l(E=>({...E,syntaxPatterns:{...E.syntaxPatterns,capitalization:T.target.value}})),children:[s.jsx("option",{value:"none",children:"None"}),s.jsx("option",{value:"uppercase",children:"UPPERCASE"}),s.jsx("option",{value:"lowercase",children:"lowercase"}),s.jsx("option",{value:"capitalize",children:"Capitalize"})]})]})]}),s.jsxs(me,{spacing:3,align:"stretch",mt:4,children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Format String"}),s.jsx(dt,{value:((S=a.syntaxPatterns)==null?void 0:S.formatString)??"",onChange:T=>l(E=>({...E,syntaxPatterns:{...E.syntaxPatterns,formatString:T.target.value}})),placeholder:"e.g., {prefix}{name}{suffix}",width:"100%"})]}),s.jsxs(Z,{mt:2,p:3,borderWidth:1,borderRadius:"md",bg:u==="dark"?"gray.700":"gray.100",children:[s.jsx(B,{fontSize:"sm",color:"gray.500",mb:1,fontWeight:"bold",children:"Preview"}),s.jsx(B,{fontFamily:"mono",fontSize:"md",wordBreak:"break-all",children:h})]})]})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:n,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:m,disabled:f,children:i?"Create Platform":"Save"})]})]})]})}const J8=({platforms:e,setPlatforms:t,tokens:n,setTokens:r,taxonomies:i})=>{const{colorMode:a}=nn(),[l,u]=P.useState(null),[h,f]=P.useState(!1),[m,x]=P.useState(!1),g=vh("gray.50","gray.800"),v=vh("gray.200","gray.600"),N=or(),D=M=>{var L;const A=ve.getCollections(),I=ve.getDimensions(),W=ve.getTokens(),J=ve.getTaxonomies(),le=ve.getValueTypes(),ce=JSON.parse(localStorage.getItem("token-model:root")||"{}"),{systemName:F="Design System",systemId:Q="design-system",version:de="1.0.0",versionHistory:q=[]}=ce,pe={systemName:F,systemId:Q,tokenCollections:A,dimensions:I,tokens:W,platforms:M,taxonomies:J,resolvedValueTypes:le,version:de,versionHistory:q},H=sr.validateData(pe);return H.isValid?(t(M),!0):(N({title:"Schema Validation Failed",description:((L=H.errors)==null?void 0:L.map(X=>X.message).join(`
`))||"Your change would make the data invalid. See the Validation tab for details.",status:"error",duration:5e3,isClosable:!0}),!1)},j=M=>{const A=e.find(W=>W.id===M),I=e.filter(W=>W.id!==M);D(I)&&N({title:"Platform Deleted",description:`Successfully deleted platform "${A==null?void 0:A.displayName}"`,status:"info",duration:3e3,isClosable:!0})},S=M=>{u(M),f(!0),x(!1)},T=()=>{u({id:Ar("platform"),displayName:"",description:"",syntaxPatterns:{prefix:"",suffix:"",delimiter:"_",capitalization:"none",formatString:""}}),f(!0),x(!0)},E=M=>{let A;if(m){const J=M.displayName.trim().replace(/\s+/g,"_").toLowerCase()||`platform_${Date.now()}`;A=[...e,{...M,id:J}]}else A=e.map(J=>J.id===M.id?M:J);if(!D(A))return;const I={platforms:A,taxonomies:i},W=n.map(J=>{const le=A.map(ce=>({platformId:ce.id,formattedName:Qi.generateCodeSyntax(J,ce.id,I)}));return{...J,codeSyntax:le}});r(W),f(!1),u(null),x(!1)};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Platforms"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:a==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",leftIcon:s.jsx(es,{}),onClick:T,colorScheme:"blue",mb:4,children:"Add Platform"}),s.jsx(me,{align:"stretch",spacing:3,children:e.map(M=>{const A=M.syntaxPatterns||{};return s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:g,borderColor:v,children:s.jsxs(xe,{justify:"space-between",align:"flex-start",children:[s.jsxs(Z,{flex:1,minW:0,children:[s.jsx(B,{fontSize:"lg",fontWeight:"medium",children:M.displayName}),M.description&&s.jsx(B,{fontSize:"sm",color:"gray.500",children:M.description}),s.jsxs(Z,{mt:2,children:[s.jsx(B,{fontWeight:"bold",fontSize:"sm",mb:1,children:"Syntax Patterns"}),s.jsxs(xe,{spacing:4,wrap:"wrap",children:[s.jsxs(B,{fontSize:"sm",children:[s.jsx("b",{children:"Prefix:"})," ",A.prefix||s.jsx("span",{style:{color:"#888"},children:"none"})]}),s.jsxs(B,{fontSize:"sm",children:[s.jsx("b",{children:"Suffix:"})," ",A.suffix||s.jsx("span",{style:{color:"#888"},children:"none"})]}),s.jsxs(B,{fontSize:"sm",children:[s.jsx("b",{children:"Delimiter:"})," ",A.delimiter||s.jsx("span",{style:{color:"#888"},children:"none"})]}),s.jsxs(B,{fontSize:"sm",children:[s.jsx("b",{children:"Capitalization:"})," ",A.capitalization||s.jsx("span",{style:{color:"#888"},children:"none"})]}),s.jsxs(B,{fontSize:"sm",children:[s.jsx("b",{children:"Format String:"})," ",A.formatString||s.jsx("span",{style:{color:"#888"},children:"none"})]})]})]})]}),s.jsxs(xe,{spacing:2,align:"flex-start",children:[s.jsx(ds,{label:"Edit Platform",children:s.jsx(wt,{"aria-label":"Edit platform",icon:s.jsx(xs,{}),size:"sm",onClick:()=>S(M)})}),s.jsx(ds,{label:"Delete Platform",children:s.jsx(wt,{"aria-label":"Delete platform",colorScheme:"red",size:"sm",icon:s.jsx(ts,{}),onClick:()=>j(M.id)})})]})]})},M.id)})})]}),l&&s.jsx(Y8,{platform:l,open:h,onClose:()=>{f(!1),u(null),x(!1)},onSave:E,isNew:m})]})};function Lf(){const e=ve.getCollections(),t=ve.getTokens(),n=ve.getDimensions(),r=ve.getPlatforms(),i=ve.getThemes(),a=ve.getTaxonomies(),l=ve.getValueTypes(),u=ve.getNamingRules(),h=JSON.parse(localStorage.getItem("token-model:dimension-order")||"[]"),f=JSON.parse(localStorage.getItem("token-model:root")||"{}"),{systemName:m="Design System",systemId:x="design-system",description:g="A comprehensive design system with tokens, dimensions, and themes",version:v="1.0.0",versionHistory:N=[]}=f,D=Array.isArray(N)&&N.length>0?N:[{version:v,dimensions:Array.isArray(n)?n.map(I=>I.id):[],date:new Date().toISOString().slice(0,10),migrationStrategy:{emptyModeIds:"mapToDefaults",preserveOriginalValues:!0}}];let j=[];if(Array.isArray(l)&&l.length>0)j=l.map(I=>typeof I=="string"?{id:I,displayName:I}:I);else throw console.error("[createSchemaJsonFromLocalStorage] No resolvedValueTypes found in localStorage. Please ensure your system data includes all value types required by your schema."),new Error("[createSchemaJsonFromLocalStorage] No resolvedValueTypes found in localStorage. Please ensure your system data includes all value types required by your schema.");const S=new Set;n.forEach(I=>{(I.resolvedValueTypeIds||[]).forEach(W=>S.add(W))}),e.forEach(I=>{(I.resolvedValueTypeIds||[]).forEach(W=>S.add(W))}),t.forEach(I=>{I.resolvedValueTypeId&&S.add(I.resolvedValueTypeId)});const T=Array.from(S).filter(I=>!j.some(W=>W.id===I));if(T.length>0)throw console.error(`[createSchemaJsonFromLocalStorage] The following resolvedValueTypeIds are referenced in dimensions, collections, or tokens but missing from resolvedValueTypes: ${T.join(", ")}`),new Error(`[createSchemaJsonFromLocalStorage] The following resolvedValueTypeIds are referenced in dimensions, collections, or tokens but missing from resolvedValueTypes: ${T.join(", ")}`);const E=(r||[]).map(I=>{var W,J,le,ce,F;return{...I,syntaxPatterns:{prefix:((W=I.syntaxPatterns)==null?void 0:W.prefix)??"",suffix:((J=I.syntaxPatterns)==null?void 0:J.suffix)??"",delimiter:((le=I.syntaxPatterns)==null?void 0:le.delimiter)??"_",capitalization:((ce=I.syntaxPatterns)==null?void 0:ce.capitalization)??"none",formatString:((F=I.syntaxPatterns)==null?void 0:F.formatString)??""}}}),M=Array.isArray(i)&&i.length>0?i:[{id:"default",displayName:"Default Theme",description:"The default theme for the design system",isDefault:!0}];return{systemName:m,systemId:x,description:g,version:v,versionHistory:D,tokenCollections:e,dimensions:n,dimensionOrder:h,tokens:t,platforms:E,themes:M,taxonomies:a,resolvedValueTypes:j,namingRules:u||{taxonomyOrder:[]}}}function X8(){var u;const e=ve.getAlgorithms(),t=JSON.parse(localStorage.getItem("token-model:root")||"{}"),{systemName:n="Design System",version:r="1.0.0"}=t,i=ve.getAlgorithmFile();if(i)return{...i,algorithms:e.map(f=>({id:f.id,name:f.name,description:f.description||"",resolvedValueTypeId:f.resolvedValueTypeId,variables:f.variables.map(m=>({id:m.id,name:m.name,type:m.type,defaultValue:m.defaultValue||"",description:m.description||""})),formulas:f.formulas.map(m=>({id:m.id,name:m.name,description:m.description||"",expressions:{latex:{value:m.expressions.latex.value},javascript:{value:m.expressions.javascript.value,metadata:m.expressions.javascript.metadata||{allowedOperations:["math"]}},ast:m.expressions.ast||{type:"literal",value:m.expressions.javascript.value,metadata:{astVersion:"1.0.0",validationErrors:[],complexity:"low"}}},variableIds:m.variableIds||[]})),conditions:f.conditions.map(m=>({id:m.id,name:m.name,expression:m.expression,variableIds:m.variableIds||[]})),steps:f.steps.map(m=>({type:m.type,id:m.id,name:m.name}))}))};let a=[];if(e&&e.length>0){const h=e[0];(u=h.config)!=null&&u.systemVariables&&(a=h.config.systemVariables)}return{schemaVersion:"5.0.0",profile:"basic",metadata:{name:`${n} Algorithm Collection`,description:`Algorithm collection for ${n}`,version:r,author:"Design System Manager"},config:{systemVariables:a,defaultBaseValue:16,defaultRatio:1.25,defaultSpacing:4},algorithms:e.map(h=>({id:h.id,name:h.name,description:h.description||"",resolvedValueTypeId:h.resolvedValueTypeId,variables:h.variables.map(f=>({id:f.id,name:f.name,type:f.type,defaultValue:f.defaultValue||"",description:f.description||""})),formulas:h.formulas.map(f=>({id:f.id,name:f.name,description:f.description||"",expressions:{latex:{value:f.expressions.latex.value},javascript:{value:f.expressions.javascript.value,metadata:f.expressions.javascript.metadata||{allowedOperations:["math"]}},ast:f.expressions.ast||{type:"literal",value:f.expressions.javascript.value,metadata:{astVersion:"1.0.0",validationErrors:[],complexity:"low"}}},variableIds:f.variableIds||[]})),conditions:h.conditions.map(f=>({id:f.id,name:f.name,expression:f.expression,variableIds:f.variableIds||[]})),steps:h.steps.map(f=>({type:f.type,id:f.id,name:f.name}))})),execution:{order:[],parallel:!1,onError:"stop"},integration:{targetSchema:"https://designsystem.org/schemas/tokens/v1.0.0",outputFormat:"design-tokens",mergeStrategy:"merge",validation:!0},examples:[]}}function K8({tokens:e=[],collections:t=[],dimensions:n=[],platforms:r=[],taxonomies:i=[],version:a="1.0.0",versionHistory:l=[],onValidate:u}){var de,q,pe;const{colorMode:h}=nn(),[f,m]=P.useState(null),[x,g]=P.useState(!1),[v,N]=P.useState(null),[D,j]=P.useState(!1),[S,T]=P.useState(null),[E,M]=P.useState(!1),[A,I]=P.useState(""),W=St.useRef(null),J=or();P.useEffect(()=>{if(E){const H=Lf();I(JSON.stringify(H,null,2))}},[E,t,n,e,r,i,a,l]);const le=()=>{try{const H=Lf(),L=sr.validateData(H);L.isValid?J({title:"Validation Successful",description:"Your data is valid according to the schema.",status:"success",duration:3e3,isClosable:!0}):(T(L),j(!0))}catch{J({title:"Validation Error",description:"An error occurred during validation.",status:"error",duration:3e3,isClosable:!0})}},ce=()=>{M(!0)},F=H=>{const L=e.find(X=>X.id===H);m(L||null),N(null)},Q=()=>{if(f)try{u(f),J({title:"Token Validation Successful",description:"The selected token is valid.",status:"success",duration:3e3,isClosable:!0})}catch(H){N({isValid:!1,errors:[H]}),g(!0)}};return s.jsxs(Z,{children:[s.jsx(Z,{p:4,bg:h==="dark"?"gray.900":"white",children:s.jsxs(me,{align:"stretch",spacing:6,children:[s.jsxs(Z,{children:[s.jsx(gt,{as:"h2",size:"md",mb:4,children:"Global Data Validation"}),s.jsx(Ne,{colorScheme:"blue",onClick:le,mb:4,children:"Validate All Data"}),s.jsx(Ne,{variant:"outline",colorScheme:"gray",onClick:ce,mb:4,ml:2,children:"Preview JSON"})]}),s.jsxs(Z,{pt:6,children:[s.jsx(gt,{as:"h2",size:"md",mb:4,children:"Token Validation Tester"}),s.jsxs(me,{align:"stretch",spacing:4,children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Select Token"}),s.jsx(fn,{value:(f==null?void 0:f.id)||"",onChange:H=>F(H.target.value),placeholder:"Select token",children:e==null?void 0:e.map(H=>s.jsx("option",{value:H.id,children:H.displayName},H.id))})]}),f&&s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"semibold",mb:2,children:"Selected Token Details"}),s.jsxs(B,{fontSize:"sm",children:["Name: ",f.displayName]}),s.jsxs(B,{fontSize:"sm",children:["Collection: ",f.tokenCollectionId?(de=t==null?void 0:t.find(H=>H.id===f.tokenCollectionId))==null?void 0:de.name:"None"]}),s.jsxs(B,{fontSize:"sm",children:["Value Type: ",f.resolvedValueTypeId]}),s.jsx(Ne,{colorScheme:"blue",onClick:Q,mt:3,children:"Validate Token"})]})]})]})]})}),s.jsx(ku,{isOpen:D,leastDestructiveRef:W,onClose:()=>j(!1),children:s.jsx(Mn,{children:s.jsxs(ju,{children:[s.jsx(Dn,{fontSize:"lg",fontWeight:"bold",children:"Validation Failed"}),s.jsxs(On,{children:[s.jsx(B,{mb:4,children:"The following validation errors were found:"}),(q=S==null?void 0:S.errors)==null?void 0:q.map((H,L)=>s.jsx(nt,{display:"block",mb:2,p:2,whiteSpace:"pre-wrap",children:JSON.stringify(H,null,2)},L))]}),s.jsx(ar,{children:s.jsx(Ne,{ref:W,onClick:()=>j(!1),children:"Close"})})]})})}),s.jsx(ku,{isOpen:x,leastDestructiveRef:W,onClose:()=>g(!1),children:s.jsx(Mn,{children:s.jsxs(ju,{children:[s.jsx(Dn,{fontSize:"lg",fontWeight:"bold",children:"Token Validation Failed"}),s.jsxs(On,{children:[s.jsx(B,{mb:4,children:"The following validation errors were found:"}),(pe=v==null?void 0:v.errors)==null?void 0:pe.map((H,L)=>s.jsx(nt,{display:"block",mb:2,p:2,whiteSpace:"pre-wrap",children:JSON.stringify(H,null,2)},L))]}),s.jsx(ar,{children:s.jsx(Ne,{ref:W,onClick:()=>g(!1),children:"Close"})})]})})}),s.jsxs(Hn,{size:"4xl",isOpen:E,onClose:()=>M(!1),children:[s.jsx(Mn,{}),s.jsxs(Wn,{bg:h==="dark"?"gray.900":"white",maxH:"80vh",overflowY:"auto",children:[s.jsx(Dn,{children:"Local Storage Data Preview"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(Ai,{isFitted:!0,children:[s.jsxs(Ni,{children:[s.jsx($n,{children:"Core Data"}),s.jsx($n,{children:"Algorithm Data"})]}),s.jsxs(ma,{children:[s.jsx(nr,{children:s.jsx(Z,{maxH:"60vh",overflowY:"auto",children:s.jsx(nt,{width:"100%",whiteSpace:"pre",p:4,fontSize:"sm",display:"block",children:A})})}),s.jsx(nr,{children:s.jsx(Z,{maxH:"60vh",overflowY:"auto",children:s.jsx(nt,{width:"100%",whiteSpace:"pre",p:4,fontSize:"sm",display:"block",children:JSON.stringify(X8(),null,2)})})})]})]})})]})]})]})}function Q8(e,t){if(e==null)return{};var n,r,i=ty(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qu(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e9(e){if(Array.isArray(e))return Qu(e)}function t9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n9(e,t){if(e){if(typeof e=="string")return Qu(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qu(e,t):void 0}}function r9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0(e){return e9(e)||t9(e)||n9(e)||r9()}function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ff(Object(n),!0).forEach(function(r){Ip(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s9(e){var t=e.length;if(t===0||t===1)return e;if(t===2)return[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])];if(t===3)return[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])];if(t>=4)return[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]}var lu={};function i9(e){if(e.length===0||e.length===1)return e;var t=e.join(".");return lu[t]||(lu[t]=s9(e)),lu[t]}function a9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.filter(function(a){return a!=="token"}),i=i9(r);return i.reduce(function(a,l){return Xi(Xi({},a),n[l])},t)}function $f(e){return e.join(" ")}function o9(e,t){var n=0;return function(r){return n+=1,r.map(function(i,a){return J1({node:i,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(a)})})}}function J1(e){var t=e.node,n=e.stylesheet,r=e.style,i=r===void 0?{}:r,a=e.useInlineStyles,l=e.key,u=t.properties,h=t.type,f=t.tagName,m=t.value;if(h==="text")return m;if(f){var x=o9(n,a),g;if(!a)g=Xi(Xi({},u),{},{className:$f(u.className)});else{var v=Object.keys(n).reduce(function(S,T){return T.split(".").forEach(function(E){S.includes(E)||S.push(E)}),S},[]),N=u.className&&u.className.includes("token")?["token"]:[],D=u.className&&N.concat(u.className.filter(function(S){return!v.includes(S)}));g=Xi(Xi({},u),{},{className:$f(D)||void 0,style:a9(u.className,Object.assign({},u.style,i),n)})}var j=x(t.children);return St.createElement(f,h0({key:l},g),j)}}const l9=function(e,t){var n=e.listLanguages();return n.indexOf(t)!==-1};var c9=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gf(Object(n),!0).forEach(function(r){Ip(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var u9=/\n/g;function d9(e){return e.match(u9)}function h9(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(i,a){var l=a+n;return St.createElement("span",{key:"line-".concat(a),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(l):r},"".concat(l,`
`))})}function f9(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,i=r===void 0?{float:"left",paddingRight:"10px"}:r,a=e.numberStyle,l=a===void 0?{}:a,u=e.startingLineNumber;return St.createElement("code",{style:Object.assign({},n,i)},h9({lines:t.replace(/\n$/,"").split(`
`),style:l,startingLineNumber:u}))}function p9(e){return"".concat(e.toString().length,".25em")}function X1(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function K1(e,t,n){var r={display:"inline-block",minWidth:p9(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},i=typeof e=="function"?e(t):e,a=Xs(Xs({},r),i);return a}function rl(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,i=e.largestLineNumber,a=e.showInlineLineNumbers,l=e.lineProps,u=l===void 0?{}:l,h=e.className,f=h===void 0?[]:h,m=e.showLineNumbers,x=e.wrapLongLines,g=e.wrapLines,v=g===void 0?!1:g,N=v?Xs({},typeof u=="function"?u(n):u):{};if(N.className=N.className?[].concat(e0(N.className.trim().split(/\s+/)),e0(f)):f,n&&a){var D=K1(r,n,i);t.unshift(X1(n,D))}return x&m&&(N.style=Xs({display:"flex"},N.style)),{type:"element",tagName:"span",properties:N,children:t}}function Q1(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=0;r<e.length;r++){var i=e[r];if(i.type==="text")n.push(rl({children:[i],className:e0(new Set(t))}));else if(i.children){var a=t.concat(i.properties.className);Q1(i.children,a).forEach(function(l){return n.push(l)})}}return n}function m9(e,t,n,r,i,a,l,u,h){var f,m=Q1(e.value),x=[],g=-1,v=0;function N(A,I){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return rl({children:A,lineNumber:I,lineNumberStyle:u,largestLineNumber:l,showInlineLineNumbers:i,lineProps:n,className:W,showLineNumbers:r,wrapLongLines:h,wrapLines:t})}function D(A,I){if(r&&I&&i){var W=K1(u,I,l);A.unshift(X1(I,W))}return A}function j(A,I){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return t||W.length>0?N(A,I,W):D(A,I)}for(var S=function(){var I=m[v],W=I.children[0].value,J=d9(W);if(J){var le=W.split(`
`);le.forEach(function(ce,F){var Q=r&&x.length+a,de={type:"text",value:"".concat(ce,`
`)};if(F===0){var q=m.slice(g+1,v).concat(rl({children:[de],className:I.properties.className})),pe=j(q,Q);x.push(pe)}else if(F===le.length-1){var H=m[v+1]&&m[v+1].children&&m[v+1].children[0],L={type:"text",value:"".concat(ce)};if(H){var X=rl({children:[L],className:I.properties.className});m.splice(v+1,0,X)}else{var he=[L],ge=j(he,Q,I.properties.className);x.push(ge)}}else{var oe=[de],Se=j(oe,Q,I.properties.className);x.push(Se)}}),g=v}v++};v<m.length;)S();if(g!==m.length-1){var T=m.slice(g+1,m.length);if(T&&T.length){var E=r&&x.length+a,M=j(T,E);x.push(M)}}return t?x:(f=[]).concat.apply(f,x)}function g9(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(i,a){return J1({node:i,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(a)})})}function eg(e){return e&&typeof e.highlightAuto<"u"}function x9(e){var t=e.astGenerator,n=e.language,r=e.code,i=e.defaultCodeValue;if(eg(t)){var a=l9(t,n);return n==="text"?{value:i,language:"text"}:a?t.highlight(n,r):t.highlightAuto(r)}try{return n&&n!=="text"?{value:t.highlight(r,n)}:{value:i}}catch{return{value:i}}}function y9(e,t){return function(r){var i=r.language,a=r.children,l=r.style,u=l===void 0?t:l,h=r.customStyle,f=h===void 0?{}:h,m=r.codeTagProps,x=m===void 0?{className:i?"language-".concat(i):void 0,style:Xs(Xs({},u['code[class*="language-"]']),u['code[class*="language-'.concat(i,'"]')])}:m,g=r.useInlineStyles,v=g===void 0?!0:g,N=r.showLineNumbers,D=N===void 0?!1:N,j=r.showInlineLineNumbers,S=j===void 0?!0:j,T=r.startingLineNumber,E=T===void 0?1:T,M=r.lineNumberContainerStyle,A=r.lineNumberStyle,I=A===void 0?{}:A,W=r.wrapLines,J=r.wrapLongLines,le=J===void 0?!1:J,ce=r.lineProps,F=ce===void 0?{}:ce,Q=r.renderer,de=r.PreTag,q=de===void 0?"pre":de,pe=r.CodeTag,H=pe===void 0?"code":pe,L=r.code,X=L===void 0?(Array.isArray(a)?a[0]:a)||"":L,he=r.astGenerator,ge=Q8(r,c9);he=he||e;var oe=D?St.createElement(f9,{containerStyle:M,codeStyle:x.style||{},numberStyle:I,startingLineNumber:E,codeString:X}):null,Se=u.hljs||u['pre[class*="language-"]']||{backgroundColor:"#fff"},ne=eg(he)?"hljs":"prismjs",be=v?Object.assign({},ge,{style:Object.assign({},Se,f)}):Object.assign({},ge,{className:ge.className?"".concat(ne," ").concat(ge.className):ne,style:Object.assign({},f)});if(le?x.style=Xs({whiteSpace:"pre-wrap"},x.style):x.style=Xs({whiteSpace:"pre"},x.style),!he)return St.createElement(q,be,oe,St.createElement(H,x,X));(W===void 0&&Q||le)&&(W=!0),Q=Q||g9;var De=[{type:"text",value:X}],Pe=x9({astGenerator:he,language:i,code:X,defaultCodeValue:De});Pe.language===null&&(Pe.value=De);var Ve=Pe.value.length;Ve===1&&Pe.value[0].type==="text"&&(Ve=Pe.value[0].value.split(`
`).length);var ct=Ve+E,Dt=m9(Pe,W,F,D,S,E,ct,I,le);return St.createElement(q,be,St.createElement(H,x,!S&&oe,Q({rows:Dt,stylesheet:u,useInlineStyles:v})))}}var Di={};function W0(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&W0(n)}),e}var tg=W0,b9=W0;tg.default=b9;class qf{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function ea(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ks(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const i in r)n[i]=r[i]}),n}const v9="</span>",Hf=e=>!!e.kind;class w9{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=ea(t)}openNode(t){if(!Hf(t))return;let n=t.kind;t.sublanguage||(n=`${this.classPrefix}${n}`),this.span(n)}closeNode(t){Hf(t)&&(this.buffer+=v9)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class U0{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n={kind:t,children:[]};this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{U0._collapse(n)}))}}class S9 extends U0{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const r=t.root;r.kind=n,r.sublanguage=!0,this.add(r)}toHTML(){return new w9(this,this.options).value()}finalize(){return!0}}function k9(e){return new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function lo(e){return e?typeof e=="string"?e:e.source:null}function j9(...e){return e.map(n=>lo(n)).join("")}function C9(...e){return"("+e.map(n=>lo(n)).join("|")+")"}function T9(e){return new RegExp(e.toString()+"|").exec("").length-1}function I9(e,t){const n=e&&e.exec(t);return n&&n.index===0}const A9=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function N9(e,t="|"){let n=0;return e.map(r=>{n+=1;const i=n;let a=lo(r),l="";for(;a.length>0;){const u=A9.exec(a);if(!u){l+=a;break}l+=a.substring(0,u.index),a=a.substring(u.index+u[0].length),u[0][0]==="\\"&&u[1]?l+="\\"+String(Number(u[1])+i):(l+=u[0],u[0]==="("&&n++)}return l}).map(r=>`(${r})`).join(t)}const _9=/\b\B/,ng="[a-zA-Z]\\w*",Z0="[a-zA-Z_]\\w*",Y0="\\b\\d+(\\.\\d+)?",rg="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",sg="\\b(0b[01]+)",E9="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",M9=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=j9(t,/.*\b/,e.binary,/\b.*/)),Ks({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},co={begin:"\\\\[\\s\\S]",relevance:0},D9={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[co]},O9={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[co]},ig={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},ic=function(e,t,n={}){const r=Ks({className:"comment",begin:e,end:t,contains:[]},n);return r.contains.push(ig),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},R9=ic("//","$"),V9=ic("/\\*","\\*/"),z9=ic("#","$"),P9={className:"number",begin:Y0,relevance:0},B9={className:"number",begin:rg,relevance:0},L9={className:"number",begin:sg,relevance:0},F9={className:"number",begin:Y0+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},$9={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[co,{begin:/\[/,end:/\]/,relevance:0,contains:[co]}]}]},G9={className:"title",begin:ng,relevance:0},q9={className:"title",begin:Z0,relevance:0},H9={begin:"\\.\\s*"+Z0,relevance:0},W9=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Wo=Object.freeze({__proto__:null,MATCH_NOTHING_RE:_9,IDENT_RE:ng,UNDERSCORE_IDENT_RE:Z0,NUMBER_RE:Y0,C_NUMBER_RE:rg,BINARY_NUMBER_RE:sg,RE_STARTERS_RE:E9,SHEBANG:M9,BACKSLASH_ESCAPE:co,APOS_STRING_MODE:D9,QUOTE_STRING_MODE:O9,PHRASAL_WORDS_MODE:ig,COMMENT:ic,C_LINE_COMMENT_MODE:R9,C_BLOCK_COMMENT_MODE:V9,HASH_COMMENT_MODE:z9,NUMBER_MODE:P9,C_NUMBER_MODE:B9,BINARY_NUMBER_MODE:L9,CSS_NUMBER_MODE:F9,REGEXP_MODE:$9,TITLE_MODE:G9,UNDERSCORE_TITLE_MODE:q9,METHOD_GUARD:H9,END_SAME_AS_BEGIN:W9});function U9(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function Z9(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=U9,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function Y9(e,t){Array.isArray(e.illegal)&&(e.illegal=C9(...e.illegal))}function J9(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function X9(e,t){e.relevance===void 0&&(e.relevance=1)}const K9=["of","and","for","in","not","or","if","then","parent","list","value"],Q9="keyword";function ag(e,t,n=Q9){const r={};return typeof e=="string"?i(n,e.split(" ")):Array.isArray(e)?i(n,e):Object.keys(e).forEach(function(a){Object.assign(r,ag(e[a],t,a))}),r;function i(a,l){t&&(l=l.map(u=>u.toLowerCase())),l.forEach(function(u){const h=u.split("|");r[h[0]]=[a,ew(h[0],h[1])]})}}function ew(e,t){return t?Number(t):tw(e)?0:1}function tw(e){return K9.includes(e.toLowerCase())}function nw(e,{plugins:t}){function n(u,h){return new RegExp(lo(u),"m"+(e.case_insensitive?"i":"")+(h?"g":""))}class r{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(h,f){f.position=this.position++,this.matchIndexes[this.matchAt]=f,this.regexes.push([f,h]),this.matchAt+=T9(h)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const h=this.regexes.map(f=>f[1]);this.matcherRe=n(N9(h),!0),this.lastIndex=0}exec(h){this.matcherRe.lastIndex=this.lastIndex;const f=this.matcherRe.exec(h);if(!f)return null;const m=f.findIndex((g,v)=>v>0&&g!==void 0),x=this.matchIndexes[m];return f.splice(0,m),Object.assign(f,x)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(h){if(this.multiRegexes[h])return this.multiRegexes[h];const f=new r;return this.rules.slice(h).forEach(([m,x])=>f.addRule(m,x)),f.compile(),this.multiRegexes[h]=f,f}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(h,f){this.rules.push([h,f]),f.type==="begin"&&this.count++}exec(h){const f=this.getMatcher(this.regexIndex);f.lastIndex=this.lastIndex;let m=f.exec(h);if(this.resumingScanAtSamePosition()&&!(m&&m.index===this.lastIndex)){const x=this.getMatcher(0);x.lastIndex=this.lastIndex+1,m=x.exec(h)}return m&&(this.regexIndex+=m.position+1,this.regexIndex===this.count&&this.considerAll()),m}}function a(u){const h=new i;return u.contains.forEach(f=>h.addRule(f.begin,{rule:f,type:"begin"})),u.terminatorEnd&&h.addRule(u.terminatorEnd,{type:"end"}),u.illegal&&h.addRule(u.illegal,{type:"illegal"}),h}function l(u,h){const f=u;if(u.isCompiled)return f;[J9].forEach(x=>x(u,h)),e.compilerExtensions.forEach(x=>x(u,h)),u.__beforeBegin=null,[Z9,Y9,X9].forEach(x=>x(u,h)),u.isCompiled=!0;let m=null;if(typeof u.keywords=="object"&&(m=u.keywords.$pattern,delete u.keywords.$pattern),u.keywords&&(u.keywords=ag(u.keywords,e.case_insensitive)),u.lexemes&&m)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return m=m||u.lexemes||/\w+/,f.keywordPatternRe=n(m,!0),h&&(u.begin||(u.begin=/\B|\b/),f.beginRe=n(u.begin),u.endSameAsBegin&&(u.end=u.begin),!u.end&&!u.endsWithParent&&(u.end=/\B|\b/),u.end&&(f.endRe=n(u.end)),f.terminatorEnd=lo(u.end)||"",u.endsWithParent&&h.terminatorEnd&&(f.terminatorEnd+=(u.end?"|":"")+h.terminatorEnd)),u.illegal&&(f.illegalRe=n(u.illegal)),u.contains||(u.contains=[]),u.contains=[].concat(...u.contains.map(function(x){return rw(x==="self"?u:x)})),u.contains.forEach(function(x){l(x,f)}),u.starts&&l(u.starts,h),f.matcher=a(f),f}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ks(e.classNameAliases||{}),l(e)}function og(e){return e?e.endsWithParent||og(e.starts):!1}function rw(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Ks(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:og(e)?Ks(e,{starts:e.starts?Ks(e.starts):null}):Object.isFrozen(e)?Ks(e):e}var sw="10.7.3";function iw(e){return!!(e||e==="")}function aw(e){const t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,ea(this.code);let r={};return this.autoDetect?(r=e.highlightAuto(this.code),this.detectedLanguage=r.language):(r=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),r.value},autoDetect(){return!this.language||iw(this.autodetect)},ignoreIllegals(){return!0}},render(r){return r("pre",{},[r("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:t,VuePlugin:{install(r){r.component("highlightjs",t)}}}}const ow={"after:highlightElement":({el:e,result:t,text:n})=>{const r=Wf(e);if(!r.length)return;const i=document.createElement("div");i.innerHTML=t.value,t.value=lw(r,Wf(i),n)}};function t0(e){return e.nodeName.toLowerCase()}function Wf(e){const t=[];return function n(r,i){for(let a=r.firstChild;a;a=a.nextSibling)a.nodeType===3?i+=a.nodeValue.length:a.nodeType===1&&(t.push({event:"start",offset:i,node:a}),i=n(a,i),t0(a).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:a}));return i}(e,0),t}function lw(e,t,n){let r=0,i="";const a=[];function l(){return!e.length||!t.length?e.length?e:t:e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:t[0].event==="start"?e:t}function u(m){function x(g){return" "+g.nodeName+'="'+ea(g.value)+'"'}i+="<"+t0(m)+[].map.call(m.attributes,x).join("")+">"}function h(m){i+="</"+t0(m)+">"}function f(m){(m.event==="start"?u:h)(m.node)}for(;e.length||t.length;){let m=l();if(i+=ea(n.substring(r,m[0].offset)),r=m[0].offset,m===e){a.reverse().forEach(h);do f(m.splice(0,1)[0]),m=l();while(m===e&&m.length&&m[0].offset===r);a.reverse().forEach(u)}else m[0].event==="start"?a.push(m[0].node):a.pop(),f(m.splice(0,1)[0])}return i+ea(n.substr(r))}const Uf={},cu=e=>{console.error(e)},Zf=(e,...t)=>{console.log(`WARN: ${e}`,...t)},$r=(e,t)=>{Uf[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Uf[`${e}/${t}`]=!0)},uu=ea,Yf=Ks,Jf=Symbol("nomatch"),cw=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",u={disableAutodetect:!0,name:"Plain text",contains:[]};let h={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:S9};function f(ne){return h.noHighlightRe.test(ne)}function m(ne){let be=ne.className+" ";be+=ne.parentNode?ne.parentNode.className:"";const De=h.languageDetectRe.exec(be);if(De){const Pe=pe(De[1]);return Pe||(Zf(l.replace("{}",De[1])),Zf("Falling back to no-highlight mode for this block.",ne)),Pe?De[1]:"no-highlight"}return be.split(/\s+/).find(Pe=>f(Pe)||pe(Pe))}function x(ne,be,De,Pe){let Ve="",ct="";typeof be=="object"?(Ve=ne,De=be.ignoreIllegals,ct=be.language,Pe=void 0):($r("10.7.0","highlight(lang, code, ...args) has been deprecated."),$r("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ct=ne,Ve=be);const Dt={code:Ve,language:ct};ge("before:highlight",Dt);const Qt=Dt.result?Dt.result:g(Dt.language,Dt.code,De,Pe);return Qt.code=Dt.code,ge("after:highlight",Qt),Qt}function g(ne,be,De,Pe){function Ve(Re,Ye){const ot=$t.case_insensitive?Ye[0].toLowerCase():Ye[0];return Object.prototype.hasOwnProperty.call(Re.keywords,ot)&&Re.keywords[ot]}function ct(){if(!ye.keywords){Fe.addText(Ge);return}let Re=0;ye.keywordPatternRe.lastIndex=0;let Ye=ye.keywordPatternRe.exec(Ge),ot="";for(;Ye;){ot+=Ge.substring(Re,Ye.index);const It=Ve(ye,Ye);if(It){const[tt,Ce]=It;if(Fe.addText(ot),ot="",Et+=Ce,tt.startsWith("_"))ot+=Ye[0];else{const Tn=$t.classNameAliases[tt]||tt;Fe.addKeyword(Ye[0],Tn)}}else ot+=Ye[0];Re=ye.keywordPatternRe.lastIndex,Ye=ye.keywordPatternRe.exec(Ge)}ot+=Ge.substr(Re),Fe.addText(ot)}function Dt(){if(Ge==="")return;let Re=null;if(typeof ye.subLanguage=="string"){if(!t[ye.subLanguage]){Fe.addText(Ge);return}Re=g(ye.subLanguage,Ge,!0,Ue[ye.subLanguage]),Ue[ye.subLanguage]=Re.top}else Re=N(Ge,ye.subLanguage.length?ye.subLanguage:null);ye.relevance>0&&(Et+=Re.relevance),Fe.addSublanguage(Re.emitter,Re.language)}function Qt(){ye.subLanguage!=null?Dt():ct(),Ge=""}function pn(Re){return Re.className&&Fe.openNode($t.classNameAliases[Re.className]||Re.className),ye=Object.create(Re,{parent:{value:ye}}),ye}function _e(Re,Ye,ot){let It=I9(Re.endRe,ot);if(It){if(Re["on:end"]){const tt=new qf(Re);Re["on:end"](Ye,tt),tt.isMatchIgnored&&(It=!1)}if(It){for(;Re.endsParent&&Re.parent;)Re=Re.parent;return Re}}if(Re.endsWithParent)return _e(Re.parent,Ye,ot)}function pt(Re){return ye.matcher.regexIndex===0?(Ge+=Re[0],1):(ft=!0,0)}function Ft(Re){const Ye=Re[0],ot=Re.rule,It=new qf(ot),tt=[ot.__beforeBegin,ot["on:begin"]];for(const Ce of tt)if(Ce&&(Ce(Re,It),It.isMatchIgnored))return pt(Ye);return ot&&ot.endSameAsBegin&&(ot.endRe=k9(Ye)),ot.skip?Ge+=Ye:(ot.excludeBegin&&(Ge+=Ye),Qt(),!ot.returnBegin&&!ot.excludeBegin&&(Ge=Ye)),pn(ot),ot.returnBegin?0:Ye.length}function mn(Re){const Ye=Re[0],ot=be.substr(Re.index),It=_e(ye,Re,ot);if(!It)return Jf;const tt=ye;tt.skip?Ge+=Ye:(tt.returnEnd||tt.excludeEnd||(Ge+=Ye),Qt(),tt.excludeEnd&&(Ge=Ye));do ye.className&&Fe.closeNode(),!ye.skip&&!ye.subLanguage&&(Et+=ye.relevance),ye=ye.parent;while(ye!==It.parent);return It.starts&&(It.endSameAsBegin&&(It.starts.endRe=It.endRe),pn(It.starts)),tt.returnEnd?0:Ye.length}function Wt(){const Re=[];for(let Ye=ye;Ye!==$t;Ye=Ye.parent)Ye.className&&Re.unshift(Ye.className);Re.forEach(Ye=>Fe.openNode(Ye))}let ln={};function Ut(Re,Ye){const ot=Ye&&Ye[0];if(Ge+=Re,ot==null)return Qt(),0;if(ln.type==="begin"&&Ye.type==="end"&&ln.index===Ye.index&&ot===""){if(Ge+=be.slice(Ye.index,Ye.index+1),!i){const It=new Error("0 width match regex");throw It.languageName=ne,It.badRule=ln.rule,It}return 1}if(ln=Ye,Ye.type==="begin")return Ft(Ye);if(Ye.type==="illegal"&&!De){const It=new Error('Illegal lexeme "'+ot+'" for mode "'+(ye.className||"<unnamed>")+'"');throw It.mode=ye,It}else if(Ye.type==="end"){const It=mn(Ye);if(It!==Jf)return It}if(Ye.type==="illegal"&&ot==="")return 1;if(cn>1e5&&cn>Ye.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ge+=ot,ot.length}const $t=pe(ne);if(!$t)throw cu(l.replace("{}",ne)),new Error('Unknown language: "'+ne+'"');const fe=nw($t,{plugins:r});let Ee="",ye=Pe||fe;const Ue={},Fe=new h.__emitter(h);Wt();let Ge="",Et=0,Zt=0,cn=0,ft=!1;try{for(ye.matcher.considerAll();;){cn++,ft?ft=!1:ye.matcher.considerAll(),ye.matcher.lastIndex=Zt;const Re=ye.matcher.exec(be);if(!Re)break;const Ye=be.substring(Zt,Re.index),ot=Ut(Ye,Re);Zt=Re.index+ot}return Ut(be.substr(Zt)),Fe.closeAllNodes(),Fe.finalize(),Ee=Fe.toHTML(),{relevance:Math.floor(Et),value:Ee,language:ne,illegal:!1,emitter:Fe,top:ye}}catch(Re){if(Re.message&&Re.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:Re.message,context:be.slice(Zt-100,Zt+100),mode:Re.mode},sofar:Ee,relevance:0,value:uu(be),emitter:Fe};if(i)return{illegal:!1,relevance:0,value:uu(be),emitter:Fe,language:ne,top:ye,errorRaised:Re};throw Re}}function v(ne){const be={relevance:0,emitter:new h.__emitter(h),value:uu(ne),illegal:!1,top:u};return be.emitter.addText(ne),be}function N(ne,be){be=be||h.languages||Object.keys(t);const De=v(ne),Pe=be.filter(pe).filter(L).map(pn=>g(pn,ne,!1));Pe.unshift(De);const Ve=Pe.sort((pn,_e)=>{if(pn.relevance!==_e.relevance)return _e.relevance-pn.relevance;if(pn.language&&_e.language){if(pe(pn.language).supersetOf===_e.language)return 1;if(pe(_e.language).supersetOf===pn.language)return-1}return 0}),[ct,Dt]=Ve,Qt=ct;return Qt.second_best=Dt,Qt}function D(ne){return h.tabReplace||h.useBR?ne.replace(a,be=>be===`
`?h.useBR?"<br>":be:h.tabReplace?be.replace(/\t/g,h.tabReplace):be):ne}function j(ne,be,De){const Pe=be?n[be]:De;ne.classList.add("hljs"),Pe&&ne.classList.add(Pe)}const S={"before:highlightElement":({el:ne})=>{h.useBR&&(ne.innerHTML=ne.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,`
`))},"after:highlightElement":({result:ne})=>{h.useBR&&(ne.value=ne.value.replace(/\n/g,"<br>"))}},T=/^(<[^>]+>|\t)+/gm,E={"after:highlightElement":({result:ne})=>{h.tabReplace&&(ne.value=ne.value.replace(T,be=>be.replace(/\t/g,h.tabReplace)))}};function M(ne){let be=null;const De=m(ne);if(f(De))return;ge("before:highlightElement",{el:ne,language:De}),be=ne;const Pe=be.textContent,Ve=De?x(Pe,{language:De,ignoreIllegals:!0}):N(Pe);ge("after:highlightElement",{el:ne,result:Ve,text:Pe}),ne.innerHTML=Ve.value,j(ne,De,Ve.language),ne.result={language:Ve.language,re:Ve.relevance,relavance:Ve.relevance},Ve.second_best&&(ne.second_best={language:Ve.second_best.language,re:Ve.second_best.relevance,relavance:Ve.second_best.relevance})}function A(ne){ne.useBR&&($r("10.3.0","'useBR' will be removed entirely in v11.0"),$r("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),h=Yf(h,ne)}const I=()=>{if(I.called)return;I.called=!0,$r("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(M)};function W(){$r("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),J=!0}let J=!1;function le(){if(document.readyState==="loading"){J=!0;return}document.querySelectorAll("pre code").forEach(M)}function ce(){J&&le()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",ce,!1);function F(ne,be){let De=null;try{De=be(e)}catch(Pe){if(cu("Language definition for '{}' could not be registered.".replace("{}",ne)),i)cu(Pe);else throw Pe;De=u}De.name||(De.name=ne),t[ne]=De,De.rawDefinition=be.bind(null,e),De.aliases&&H(De.aliases,{languageName:ne})}function Q(ne){delete t[ne];for(const be of Object.keys(n))n[be]===ne&&delete n[be]}function de(){return Object.keys(t)}function q(ne){$r("10.4.0","requireLanguage will be removed entirely in v11."),$r("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const be=pe(ne);if(be)return be;throw new Error("The '{}' language is required, but not loaded.".replace("{}",ne))}function pe(ne){return ne=(ne||"").toLowerCase(),t[ne]||t[n[ne]]}function H(ne,{languageName:be}){typeof ne=="string"&&(ne=[ne]),ne.forEach(De=>{n[De.toLowerCase()]=be})}function L(ne){const be=pe(ne);return be&&!be.disableAutodetect}function X(ne){ne["before:highlightBlock"]&&!ne["before:highlightElement"]&&(ne["before:highlightElement"]=be=>{ne["before:highlightBlock"](Object.assign({block:be.el},be))}),ne["after:highlightBlock"]&&!ne["after:highlightElement"]&&(ne["after:highlightElement"]=be=>{ne["after:highlightBlock"](Object.assign({block:be.el},be))})}function he(ne){X(ne),r.push(ne)}function ge(ne,be){const De=ne;r.forEach(function(Pe){Pe[De]&&Pe[De](be)})}function oe(ne){return $r("10.2.0","fixMarkup will be removed entirely in v11.0"),$r("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),D(ne)}function Se(ne){return $r("10.7.0","highlightBlock will be removed entirely in v12.0"),$r("10.7.0","Please use highlightElement now."),M(ne)}Object.assign(e,{highlight:x,highlightAuto:N,highlightAll:le,fixMarkup:oe,highlightElement:M,highlightBlock:Se,configure:A,initHighlighting:I,initHighlightingOnLoad:W,registerLanguage:F,unregisterLanguage:Q,listLanguages:de,getLanguage:pe,registerAliases:H,requireLanguage:q,autoDetection:L,inherit:Yf,addPlugin:he,vuePlugin:aw(e).VuePlugin}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString=sw;for(const ne in Wo)typeof Wo[ne]=="object"&&tg(Wo[ne]);return Object.assign(e,Wo),e.addPlugin(S),e.addPlugin(ow),e.addPlugin(E),e};var uw=cw({}),dw=uw,lg={exports:{}};(function(e){(function(){var t;t=e.exports=i,t.format=i,t.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(t.printf=n);function n(){console.log(i.apply(null,arguments))}function r(a,l){return i.apply(null,[a].concat(l))}function i(a){for(var l=1,u=[].slice.call(arguments),h=0,f=a.length,m="",x,g=!1,v,N,D=!1,j,S=function(){return u[l++]},T=function(){for(var E="";/\d/.test(a[h]);)E+=a[h++],x=a[h];return E.length>0?parseInt(E):null};h<f;++h)if(x=a[h],g)switch(g=!1,x=="."?(D=!1,x=a[++h]):x=="0"&&a[h+1]=="."?(D=!0,h+=2,x=a[h]):D=!0,j=T(),x){case"b":m+=parseInt(S(),10).toString(2);break;case"c":v=S(),typeof v=="string"||v instanceof String?m+=v:m+=String.fromCharCode(parseInt(v,10));break;case"d":m+=parseInt(S(),10);break;case"f":N=String(parseFloat(S()).toFixed(j||6)),m+=D?N:N.replace(/^0/,"");break;case"j":m+=JSON.stringify(S());break;case"o":m+="0"+parseInt(S(),10).toString(8);break;case"s":m+=S();break;case"x":m+="0x"+parseInt(S(),10).toString(16);break;case"X":m+="0x"+parseInt(S(),10).toString(16).toUpperCase();break;default:m+=x;break}else x==="%"?g=!0:m+=x;return m}})()})(lg);var hw=lg.exports,fw=hw,di=hi(Error),pw=di;di.eval=hi(EvalError);di.range=hi(RangeError);di.reference=hi(ReferenceError);di.syntax=hi(SyntaxError);di.type=hi(TypeError);di.uri=hi(URIError);di.create=hi;function hi(e){return t.displayName=e.displayName||e.name,t;function t(n){return n&&(n=fw.apply(null,arguments)),new e(n)}}var os=dw,sl=pw;Di.highlight=cg;Di.highlightAuto=gw;Di.registerLanguage=xw;Di.listLanguages=yw;Di.registerAlias=bw;Bs.prototype.addText=Sw;Bs.prototype.addKeyword=vw;Bs.prototype.addSublanguage=ww;Bs.prototype.openNode=kw;Bs.prototype.closeNode=jw;Bs.prototype.closeAllNodes=ug;Bs.prototype.finalize=ug;Bs.prototype.toHTML=Cw;var mw="hljs-";function cg(e,t,n){var r=os.configure({}),i=n||{},a=i.prefix,l;if(typeof e!="string")throw sl("Expected `string` for name, got `%s`",e);if(!os.getLanguage(e))throw sl("Unknown language: `%s` is not registered",e);if(typeof t!="string")throw sl("Expected `string` for value, got `%s`",t);if(a==null&&(a=mw),os.configure({__emitter:Bs,classPrefix:a}),l=os.highlight(t,{language:e,ignoreIllegals:!0}),os.configure(r||{}),l.errorRaised)throw l.errorRaised;return{relevance:l.relevance,language:l.language,value:l.emitter.rootNode.children}}function gw(e,t){var n=t||{},r=n.subset||os.listLanguages();n.prefix;var i=r.length,a=-1,l,u,h,f;if(typeof e!="string")throw sl("Expected `string` for value, got `%s`",e);for(u={relevance:0,language:null,value:[]},l={relevance:0,language:null,value:[]};++a<i;)f=r[a],os.getLanguage(f)&&(h=cg(f,e,t),h.language=f,h.relevance>u.relevance&&(u=h),h.relevance>l.relevance&&(u=l,l=h));return u.language&&(l.secondBest=u),l}function xw(e,t){os.registerLanguage(e,t)}function yw(){return os.listLanguages()}function bw(e,t){var n=e,r;t&&(n={},n[e]=t);for(r in n)os.registerAliases(n[r],{languageName:r})}function Bs(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function vw(e,t){this.openNode(t),this.addText(e),this.closeNode()}function ww(e,t){var n=this.stack,r=n[n.length-1],i=e.rootNode.children,a=t?{type:"element",tagName:"span",properties:{className:[t]},children:i}:i;r.children=r.children.concat(a)}function Sw(e){var t=this.stack,n,r;e!==""&&(n=t[t.length-1],r=n.children[n.children.length-1],r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e}))}function kw(e){var t=this.stack,n=this.options.classPrefix+e,r=t[t.length-1],i={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(i),t.push(i)}function jw(){this.stack.pop()}function Cw(){return""}function ug(){}function Tw(e){const t={literal:"true false null"},n=[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],r=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],i={end:",",endsWithParent:!0,excludeEnd:!0,contains:r,keywords:t},a={begin:/\{/,end:/\}/,contains:[{className:"attr",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n"},e.inherit(i,{begin:/:/})].concat(n),illegal:"\\S"},l={begin:"\\[",end:"\\]",contains:[e.inherit(i)],illegal:"\\S"};return r.push(a,l),n.forEach(function(u){r.push(u)}),{name:"JSON",contains:r,keywords:t,illegal:"\\S"}}var Iw=Tw;const Aw=cy(Iw);var J0=y9(Di,{});J0.registerLanguage=Di.registerLanguage;const Nw={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#abb2bf",background:"#282c34"},"hljs-comment":{color:"#5c6370",fontStyle:"italic"},"hljs-quote":{color:"#5c6370",fontStyle:"italic"},"hljs-doctag":{color:"#c678dd"},"hljs-keyword":{color:"#c678dd"},"hljs-formula":{color:"#c678dd"},"hljs-section":{color:"#e06c75"},"hljs-name":{color:"#e06c75"},"hljs-selector-tag":{color:"#e06c75"},"hljs-deletion":{color:"#e06c75"},"hljs-subst":{color:"#e06c75"},"hljs-literal":{color:"#56b6c2"},"hljs-string":{color:"#98c379"},"hljs-regexp":{color:"#98c379"},"hljs-addition":{color:"#98c379"},"hljs-attribute":{color:"#98c379"},"hljs-meta-string":{color:"#98c379"},"hljs-built_in":{color:"#e6c07b"},"hljs-class .hljs-title":{color:"#e6c07b"},"hljs-attr":{color:"#d19a66"},"hljs-variable":{color:"#d19a66"},"hljs-template-variable":{color:"#d19a66"},"hljs-type":{color:"#d19a66"},"hljs-selector-class":{color:"#d19a66"},"hljs-selector-attr":{color:"#d19a66"},"hljs-selector-pseudo":{color:"#d19a66"},"hljs-number":{color:"#d19a66"},"hljs-symbol":{color:"#61aeee"},"hljs-bullet":{color:"#61aeee"},"hljs-link":{color:"#61aeee",textDecoration:"underline"},"hljs-meta":{color:"#61aeee"},"hljs-selector-id":{color:"#61aeee"},"hljs-title":{color:"#61aeee"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}},_w={hljs:{display:"block",overflowX:"auto",padding:"0.5em",color:"#383a42",background:"#fafafa"},"hljs-comment":{color:"#a0a1a7",fontStyle:"italic"},"hljs-quote":{color:"#a0a1a7",fontStyle:"italic"},"hljs-doctag":{color:"#a626a4"},"hljs-keyword":{color:"#a626a4"},"hljs-formula":{color:"#a626a4"},"hljs-section":{color:"#e45649"},"hljs-name":{color:"#e45649"},"hljs-selector-tag":{color:"#e45649"},"hljs-deletion":{color:"#e45649"},"hljs-subst":{color:"#e45649"},"hljs-literal":{color:"#0184bb"},"hljs-string":{color:"#50a14f"},"hljs-regexp":{color:"#50a14f"},"hljs-addition":{color:"#50a14f"},"hljs-attribute":{color:"#50a14f"},"hljs-meta-string":{color:"#50a14f"},"hljs-built_in":{color:"#c18401"},"hljs-class .hljs-title":{color:"#c18401"},"hljs-attr":{color:"#986801"},"hljs-variable":{color:"#986801"},"hljs-template-variable":{color:"#986801"},"hljs-type":{color:"#986801"},"hljs-selector-class":{color:"#986801"},"hljs-selector-attr":{color:"#986801"},"hljs-selector-pseudo":{color:"#986801"},"hljs-number":{color:"#986801"},"hljs-symbol":{color:"#4078f2"},"hljs-bullet":{color:"#4078f2"},"hljs-link":{color:"#4078f2",textDecoration:"underline"},"hljs-meta":{color:"#4078f2"},"hljs-selector-id":{color:"#4078f2"},"hljs-title":{color:"#4078f2"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};J0.registerLanguage("json",Aw);const on=({code:e,showLineNumbers:t=!1})=>{const{colorMode:n}=nn(),[r,i,a,l]=ny("colors",["gray.900","white","gray.700","gray.200"]);return s.jsx(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:n==="dark"?r:i,borderColor:n==="dark"?a:l,children:s.jsx(J0,{language:"json",showLineNumbers:t,style:n==="dark"?Nw:_w,customStyle:{background:"transparent",padding:0,margin:0,fontSize:"0.875rem",lineHeight:"1.5",fontFamily:"monospace"},children:e})})},Ew=()=>s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"System Name & ID"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"systemName"})," (required): Human-readable name for the design token system.",s.jsx("br",{}),s.jsx("b",{children:"systemId"})," (required): Unique identifier for the design token system, using the same pattern as other IDs.",s.jsx("br",{}),s.jsx("b",{children:"description"})," (optional): Human-readable description of the design token system.",s.jsx("br",{}),s.jsx("br",{}),"These fields are required at the top level of every token data file. They ensure that every data set is uniquely and clearly identified, and provide a summary for documentation and discovery."]}),s.jsx(on,{code:JSON.stringify({systemName:"Acme Design System",systemId:"acme-design-system",description:"The canonical design token set for Acme Corp."},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Version & Version History"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"version"})," (required): Semantic version of the token set, following ",s.jsx("a",{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer",children:"semantic versioning"})," (e.g., 1.0.0).",s.jsx("br",{}),s.jsx("b",{children:"versionHistory"})," (required): Array of previous versions, each with dimension configuration and date. This supports migrations and compatibility tracking."]}),s.jsx(on,{code:JSON.stringify({version:"1.0.0",versionHistory:[{version:"1.0.0",dimensions:["dimension-color-scheme"],date:"2024-06-01",migrationStrategy:{emptyModeIds:"mapToDefaults",preserveOriginalValues:!0}}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Metadata & Configuration"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"metadata"})," (optional): Additional information about the token set including maintainers and last updated date.",s.jsx("br",{}),s.jsx("b",{children:"dimensionOrder"})," (optional): Order of dimensions to use when resolving token values.",s.jsx("br",{}),s.jsx("b",{children:"exportConfigurations"})," (optional): Platform-specific export configuration rules."]}),s.jsx(on,{code:JSON.stringify({metadata:{description:"Core design tokens for Acme Corp applications",lastUpdated:"2024-06-01",maintainers:["design-team@acme.com"]},dimensionOrder:["dimension-color-scheme","dimension-size"],exportConfigurations:{"platform-web":{prefix:"--",delimiter:"-",capitalization:"lowercase"}}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Resolved Value Types"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"resolvedValueTypes"})," (required): The canonical list of value types supported by the system.",s.jsx("br",{}),"Each value type has a unique ",s.jsx(nt,{colorScheme:"purple",children:"id"})," (referenced by tokens, collections, dimensions, and taxonomies), a human-readable ",s.jsx(nt,{colorScheme:"purple",children:"displayName"}),", and an optional standard ",s.jsx(nt,{colorScheme:"purple",children:"type"})," (UPPER_CASE, for standards compliance).",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Custom value types:"})," You may define your own custom value types by omitting the ",s.jsx(nt,{colorScheme:"purple",children:"type"})," field. Custom types must still have a unique ",s.jsx(nt,{colorScheme:"purple",children:"id"})," and ",s.jsx(nt,{colorScheme:"purple",children:"displayName"}),". These can be referenced by tokens, collections, dimensions, and taxonomies using their ",s.jsx(nt,{colorScheme:"purple",children:"id"}),".",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Technical notes:"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsxs(Bt,{children:["All references to value types elsewhere in the data model must use the ",s.jsx("b",{children:"id"})," field from this array (never UPPER_CASE enums)."]}),s.jsxs(Bt,{children:["Additional fields like ",s.jsx(nt,{colorScheme:"purple",children:"description"})," and ",s.jsx(nt,{colorScheme:"purple",children:"validation"})," may be present for documentation and validation purposes."]}),s.jsx(Bt,{children:"Custom value types allow for extensibility beyond the standard set (see example below)."}),s.jsxs(Bt,{children:["See ",s.jsx(nt,{colorScheme:"purple",children:"schema.json"})," and ",s.jsx(nt,{colorScheme:"purple",children:"technical-decisions.md"})," for full structure and rationale."]})]})]}),s.jsx(on,{code:JSON.stringify({resolvedValueTypes:[{id:"color",displayName:"Color",type:"COLOR",description:"A color value, e.g. #RRGGBB or rgba()."},{id:"fontFamily",displayName:"Font Family",type:"FONT_FAMILY",description:"A font family name or stack."},{id:"dimension",displayName:"Dimension",type:"DIMENSION",description:"A numeric value with a unit, e.g. 16px or 1.5rem."},{id:"spacing",displayName:"Spacing",type:"SPACING",description:"A spacing value, e.g. 16px or 1rem."},{id:"icon",displayName:"Icon",description:"A custom value type for referencing icon names in the design system.",validation:{pattern:"^[a-z0-9-]+$"}}]},null,2)}),s.jsxs(B,{fontSize:"sm",color:"gray.500",mt:2,children:[s.jsx("b",{children:"Custom value type example:"})," The ",s.jsx(nt,{colorScheme:"purple",children:"icon"})," value type above is a custom type (no ",s.jsx(nt,{colorScheme:"purple",children:"type"})," field). It can be referenced by tokens, collections, dimensions, and taxonomies using ",s.jsx(nt,{colorScheme:"purple",children:'resolvedValueTypeId: "icon"'})," or ",s.jsx(nt,{colorScheme:"purple",children:'resolvedValueTypeIds: ["icon"]'}),". Custom types are validated and referenced exactly like standard types."]})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Token Collections"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"tokenCollections"})," (required): Collections of tokens grouped by type.",s.jsx("br",{}),"Each collection specifies which value types it supports using ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeIds"})," (string IDs, not enums).",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," All reference fields use the ",s.jsx("b",{children:"ID/Ids suffix"})," convention for clarity and validation."]}),s.jsx(on,{code:JSON.stringify({tokenCollections:[{id:"collection-color",name:"Color",description:"Color tokens for the design system",resolvedValueTypeIds:["color"],private:!1},{id:"collection-typography",name:"Typography",description:"Typography tokens for the design system",resolvedValueTypeIds:["fontFamily","fontSize","fontWeight","lineHeight"],private:!1}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Dimensions"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"dimensions"})," (required): Dimensions that can modify token values.",s.jsx("br",{}),"Each dimension contains one or more ",s.jsx("b",{children:"modes"})," (with ",s.jsx(nt,{colorScheme:"purple",children:"id"}),", ",s.jsx(nt,{colorScheme:"purple",children:"name"}),", and ",s.jsx(nt,{colorScheme:"purple",children:"dimensionId"}),"), and specifies supported value types via ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeIds"}),".",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," All reference fields use the ",s.jsx("b",{children:"ID/Ids suffix"})," convention. Value types are referenced by string ID only."]}),s.jsx(on,{code:JSON.stringify({dimensions:[{id:"dimension-color-scheme",displayName:"Color Scheme",description:"Color scheme dimension for light and dark themes",modes:[{id:"mode-light",name:"Light",description:"Light theme mode",dimensionId:"dimension-color-scheme"},{id:"mode-dark",name:"Dark",description:"Dark theme mode",dimensionId:"dimension-color-scheme"}],resolvedValueTypeIds:["color","dimension","spacing"],defaultMode:"mode-light",required:!0}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Tokens"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"tokens"})," (required): Design tokens with values that can vary by mode.",s.jsx("br",{}),"Each token references its collection and value type by ID (",s.jsx(nt,{colorScheme:"purple",children:"tokenCollectionId"}),", ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeId"}),").",s.jsx("br",{}),s.jsx("b",{children:"valuesByMode"}),": Each entry must use ",s.jsx(nt,{colorScheme:"purple",children:"modeIds"})," (array of string IDs). Value type is determined by the token's ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeId"}),".",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," Never use UPPER_CASE enums for value types; always reference by string ID. Do not add ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeId"})," to individual values."]}),s.jsx(on,{code:JSON.stringify({tokens:[{id:"token-blue-500",displayName:"Blue 500",description:"Primary blue color token",tokenCollectionId:"collection-color",resolvedValueTypeId:"color",tokenTier:"PRIMITIVE",private:!1,status:"stable",themeable:!0,generatedByAlgorithm:!1,propertyTypes:["color","background-color"],codeSyntax:[{platformId:"platform-web",formattedName:"--color-blue-500"},{platformId:"platform-figma",formattedName:"ColorBlue500"}],valuesByMode:[{modeIds:["mode-light"],value:{value:"#3B82F6"}},{modeIds:["mode-dark"],value:{value:"#60A5FA"}},{modeIds:[],value:{tokenId:"token-blue-400"}}]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Platforms"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"platforms"})," (required): Platforms that can be used to resolve token values.",s.jsx("br",{}),"Each platform can specify naming conventions and value formatting rules for code export using ",s.jsx(nt,{colorScheme:"purple",children:"syntaxPatterns"})," and ",s.jsx(nt,{colorScheme:"purple",children:"valueFormatters"}),".",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," All platform references use ",s.jsx(nt,{colorScheme:"purple",children:"id"})," fields. Syntax patterns and value formatters follow the schema structure."]}),s.jsx(on,{code:JSON.stringify({platforms:[{id:"platform-web",displayName:"Web",description:"Web platform for CSS and JavaScript",syntaxPatterns:{prefix:"--",delimiter:"-",capitalization:"lowercase",formatString:"var({name})"},valueFormatters:{color:"hex",dimension:"rem",numberPrecision:2}},{id:"platform-figma",displayName:"Figma",description:"Figma design tool",syntaxPatterns:{prefix:"",delimiter:"",capitalization:"capitalize"}}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Themes"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"themes"})," (required): Themes that can override token values across the entire dataset.",s.jsx("br",{}),"Each theme has an ",s.jsx(nt,{colorScheme:"purple",children:"overrideFileUri"})," that points to a theme override file.",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," Exactly one theme must be marked as ",s.jsx(nt,{colorScheme:"purple",children:"isDefault: true"}),"."]}),s.jsx(on,{code:JSON.stringify({themes:[{id:"theme-default",displayName:"Default Theme",description:"The default theme for the design system",isDefault:!0,overrideFileUri:"themed/default-overrides.json"},{id:"theme-brand-a",displayName:"Brand A Theme",description:"Brand A specific theme overrides",isDefault:!1,overrideFileUri:"themed/brand-a-overrides.json"}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Taxonomies"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"taxonomies"})," (optional): Categorical classification system for organizing tokens.",s.jsx("br",{}),"Each taxonomy contains terms and specifies which value types it supports via ",s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeIds"}),".",s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," Taxonomies provide flexible categorization beyond traditional grouping by value type."]}),s.jsx(on,{code:JSON.stringify({taxonomies:[{id:"taxonomy-semantic",name:"Semantic Classification",description:"Semantic classification of tokens",terms:[{id:"term-primary",name:"Primary",description:"Primary brand colors and elements"},{id:"term-secondary",name:"Secondary",description:"Secondary brand colors and elements"}],resolvedValueTypeIds:["color","dimension","spacing"]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Naming Rules"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"namingRules"})," (optional): Rules for generating code syntax and naming conventions for tokens.",s.jsx("br",{}),s.jsx(nt,{colorScheme:"purple",children:"taxonomyOrder"})," determines the order of taxonomy terms when generating code syntax strings."]}),s.jsx(on,{code:JSON.stringify({namingRules:{taxonomyOrder:["taxonomy-semantic","taxonomy-component"]}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Dimension Evolution"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"dimensionEvolution"})," (optional): Rules for handling dimension changes and migrations.",s.jsx("br",{}),"Defines how to handle empty modeIds and whether to preserve default values when mapping."]}),s.jsx(on,{code:JSON.stringify({dimensionEvolution:{rules:[{whenAdding:"dimension-size",mapEmptyModeIdsTo:["mode-default"],preserveDefaultValues:!0}]}},null,2)})]})]}),Mw=()=>{const[e,t]=P.useState(""),[n,r]=P.useState(!0),[i,a]=P.useState(null),{colorMode:l}=nn();return P.useEffect(()=>{(async()=>{r(!0),a(null);try{const h=await $l.core();t(JSON.stringify(h.default,null,2))}catch{a("Failed to load example data")}finally{r(!1)}})()},[]),n?s.jsx(Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:s.jsx(Fl,{})}):i?s.jsx(Z,{p:4,children:s.jsx(B,{color:"red.500",children:i})}):s.jsx(Z,{overflow:"auto",height:"100%",children:s.jsx(on,{code:e})})},Dw=()=>s.jsxs(Bl,{maxW:"1000px",p:0,children:[s.jsxs(me,{spacing:4,align:"stretch",mb:6,children:[s.jsx(gt,{size:"lg",children:"Core Data Schema"}),s.jsx(B,{children:"The core data schema defines the canonical structure for the Token Model system, including tokens, collections, dimensions, platforms, themes, and taxonomies. It serves as the single source of truth for validation and interoperability, defining which tokens are themeable, how they can be customized, and how they relate to each other. The schema requires system identification, versioning, and comprehensive token definitions with support for multi-dimensional modes, platform-specific code syntax, and algorithmic generation."})]}),s.jsxs(Ai,{children:[s.jsxs(Ni,{children:[s.jsx($n,{children:"Properties"}),s.jsx($n,{children:"Example"})]}),s.jsxs(ma,{children:[s.jsx(nr,{children:s.jsx(Ew,{})}),s.jsx(nr,{children:s.jsx(Mw,{})})]})]})]}),Ow=()=>s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"System ID"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"systemId"})," (required): ID of the core token system this theme override is for. This field ensures that the theme override file is linked to the correct core data set. It must match the ",s.jsx(nt,{colorScheme:"purple",children:"systemId"})," in the main core data file. This guarantees referential integrity and prevents accidental overrides of the wrong system.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Why is this required?"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsx(Bt,{children:"Ensures that overrides are only applied to the intended design system."}),s.jsx(Bt,{children:"Prevents data corruption and accidental cross-system overrides."}),s.jsx(Bt,{children:"Supports validation and safe merging of theme data."})]})]}),s.jsx(on,{code:JSON.stringify({systemId:"acme-design-system"},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Theme ID"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"themeId"})," (required): ID of the theme these overrides belong to. This field references the specific theme being customized. It must match a theme defined in the core data file's ",s.jsx(nt,{colorScheme:"purple",children:"themes"})," array. This linkage ensures that each override file is associated with a valid, existing theme.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Why is this required?"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsx(Bt,{children:"Guarantees that overrides are only applied to valid, pre-defined themes."}),s.jsx(Bt,{children:"Prevents orphaned or misapplied overrides."}),s.jsx(Bt,{children:"Supports validation and safe theme management."})]})]}),s.jsx(on,{code:JSON.stringify({themeId:"theme-brand-a"},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Token Overrides"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"tokenOverrides"})," (required): Overrides for tokens in this theme. This array lists all the tokens whose values are being customized for the theme. Each entry must reference a valid, themeable token from the core data set. Only tokens marked as ",s.jsx(nt,{colorScheme:"purple",children:"themeable: true"})," in the core data can be overridden.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"valuesByMode Structure:"})," Each token override uses the same ",s.jsx(nt,{colorScheme:"purple",children:"valuesByMode"})," structure as the core schema, with ",s.jsx(nt,{colorScheme:"purple",children:"modeIds"})," arrays and support for both direct values and aliases.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Why this structure?"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsx(Bt,{children:"Ensures that only explicitly themeable tokens can be overridden, preserving the integrity of core tokens."}),s.jsx(Bt,{children:"Allows theme designers to safely extend or customize the design system without modifying the core data."}),s.jsx(Bt,{children:"Supports mode-specific overrides, enabling different values for different theme modes (e.g., light/dark)."}),s.jsx(Bt,{children:"Supports validation: each override is checked for type and value constraints, and must reference a valid token ID."})]}),s.jsx("b",{children:"Technical note:"})," The ",s.jsx(nt,{colorScheme:"purple",children:"value"})," object must match the type and constraints of the original token. This ensures that overrides are always valid and compatible with the core schema."]}),s.jsx(on,{code:JSON.stringify({tokenOverrides:[{tokenId:"token-primary-color",valuesByMode:[{modeIds:["mode-light"],value:{value:"#FF6F61"}},{modeIds:["mode-dark"],value:{value:"#FF8A80"}},{modeIds:[],value:{tokenId:"token-accent-color"}}]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Platform Overrides"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"platformOverrides"})," (optional): Platform-specific overrides within each ",s.jsx(nt,{colorScheme:"purple",children:"valuesByMode"})," entry. This allows you to specify different override values for different platforms (e.g., Web, iOS, Android) within a specific mode combination.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Why platform overrides?"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsx(Bt,{children:"Enables fine-grained control over how tokens are rendered or exported for each platform."}),s.jsx(Bt,{children:"Supports platform-specific design requirements and constraints."}),s.jsx(Bt,{children:"Ensures that overrides remain valid and consistent across all platforms."}),s.jsx(Bt,{children:"Allows mode-specific platform overrides (e.g., different web colors for light vs dark modes)."})]}),s.jsx("b",{children:"Technical note:"})," Each ",s.jsx(nt,{colorScheme:"purple",children:"platformId"})," must reference a valid platform defined in the core data. The ",s.jsx(nt,{colorScheme:"purple",children:"value"})," must be a string that matches the platform's expected format."]}),s.jsx(on,{code:JSON.stringify({tokenOverrides:[{tokenId:"token-primary-color",valuesByMode:[{modeIds:["mode-light"],value:{value:"#FF6F61"},platformOverrides:[{platformId:"platform-web",value:"#FF6F61",metadata:{description:"Web-specific primary color override"}},{platformId:"platform-ios",value:"#FF6F61",metadata:{description:"iOS-specific primary color override"}}]}]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Metadata"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"metadata"})," (optional): Additional information about specific value overrides. This can include descriptions, change reasons, or other contextual information about why a particular override was made.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Why metadata?"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsx(Bt,{children:"Provides context for why specific overrides were made."}),s.jsx(Bt,{children:"Supports documentation and change tracking."}),s.jsx(Bt,{children:"Helps maintainers understand the reasoning behind theme customizations."})]})]}),s.jsx(on,{code:JSON.stringify({tokenOverrides:[{tokenId:"token-primary-color",valuesByMode:[{modeIds:["mode-light"],value:{value:"#FF6F61"},metadata:{description:"Brand A primary color for light mode",changeReason:"Brand guidelines update",approvedBy:"design-team"}}]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Complete Example"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"Complete theme override structure:"})," This example shows a comprehensive theme override file with all available features including mode-specific values, platform overrides, and metadata."]}),s.jsx(on,{code:JSON.stringify({systemId:"acme-design-system",themeId:"theme-brand-a",tokenOverrides:[{tokenId:"token-primary-color",valuesByMode:[{modeIds:["mode-light"],value:{value:"#FF6F61"},platformOverrides:[{platformId:"platform-web",value:"#FF6F61"}],metadata:{description:"Brand A primary color for light mode"}},{modeIds:["mode-dark"],value:{value:"#FF8A80"},metadata:{description:"Brand A primary color for dark mode"}}]},{tokenId:"token-accent-color",valuesByMode:[{modeIds:[],value:{tokenId:"token-primary-color"}}]}]},null,2)})]})]}),Rw=()=>{const[e,t]=P.useState(""),[n,r]=P.useState(!0),[i,a]=P.useState(null),{colorMode:l}=nn();return P.useEffect(()=>{(async()=>{r(!0),a(null);try{const h=await $l.brandAOverrides();t(JSON.stringify(h.default,null,2))}catch{a("Failed to load example data")}finally{r(!1)}})()},[]),n?s.jsx(Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:s.jsx(Fl,{})}):i?s.jsx(Z,{p:4,children:s.jsx(B,{color:"red.500",children:i})}):s.jsx(Z,{overflow:"auto",height:"100%",children:s.jsx(on,{code:e})})},Vw=()=>s.jsxs(Bl,{maxW:"1000px",p:0,children:[s.jsxs(me,{spacing:4,align:"stretch",mb:6,children:[s.jsx(gt,{size:"lg",children:"Theme Overrides Schema"}),s.jsx(B,{children:"Theme overrides provide a safe, schema-driven way to extend or customize tokens that are explicitly marked as themeable in the core data. This schema enables teams to create and maintain different themes independently, without modifying the core token set. Each theme override file must reference the core system ID and can only override tokens that are explicitly marked as themeable. The schema supports mode-specific overrides, platform-specific values, and comprehensive metadata for change tracking and documentation."})]}),s.jsxs(Ai,{children:[s.jsxs(Ni,{children:[s.jsx($n,{children:"Properties"}),s.jsx($n,{children:"Example"})]}),s.jsxs(ma,{children:[s.jsx(nr,{children:s.jsx(Ow,{})}),s.jsx(nr,{children:s.jsx(Rw,{})})]})]})]}),zw=()=>s.jsxs(me,{spacing:6,align:"stretch",children:[s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Schema Version & Profile"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"schemaVersion"})," (required): Semantic version of the algorithm schema, following semantic versioning (e.g., 5.0.0).",s.jsx("br",{}),s.jsx("b",{children:"profile"})," (optional): Complexity profile determining available features and validation strictness. Options are ",s.jsx(nt,{colorScheme:"purple",children:"basic"}),", ",s.jsx(nt,{colorScheme:"purple",children:"standard"}),", or ",s.jsx(nt,{colorScheme:"purple",children:"advanced"}),".",s.jsx("br",{}),s.jsx("br",{}),"The profile determines which features are available and how strict validation should be. Basic profiles have simpler validation rules, while advanced profiles support complex mathematical operations and conditional logic."]}),s.jsx(on,{code:JSON.stringify({schemaVersion:"5.0.0",profile:"basic"},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Metadata"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"metadata"})," (optional): Information about the algorithm collection including name, description, version, and author.",s.jsx("br",{}),"This provides context and documentation for the algorithm collection, making it easier to understand its purpose and maintain it over time."]}),s.jsx(on,{code:JSON.stringify({metadata:{name:"Design System Algorithm Collection",description:"Algorithms for generating design tokens programmatically",version:"1.0.0",author:"Design System Team"}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"System Variables"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"config.systemVariables"})," (optional): Global variables that can be referenced by algorithms across the collection.",s.jsx("br",{}),"System variables can be mode-based, allowing different values for different contexts (e.g., viewport sizes, text size indices).",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Mode-Based Variables:"})," Variables with ",s.jsx(nt,{colorScheme:"purple",children:"modeBased: true"})," use the same ",s.jsx(nt,{colorScheme:"purple",children:"valuesByMode"})," structure as tokens, with ",s.jsx(nt,{colorScheme:"purple",children:"modeIds"})," arrays and mode-specific values."]}),s.jsx(on,{code:JSON.stringify({config:{systemVariables:[{id:"viewport-width",name:"viewportWidth",type:"number",defaultValue:320,description:"Current viewport width for responsive calculations",modeBased:!0,dimensionId:"dimension-viewport",valuesByMode:[{modeIds:["mode-mobile"],value:320},{modeIds:["mode-tablet"],value:768},{modeIds:["mode-desktop"],value:1200}]},{id:"text-size-index",name:"textSizeIndex",type:"number",defaultValue:0,description:"Text size index for typography scaling",constraints:{min:-2,max:2,step:1}}]}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Algorithms"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"algorithms"})," (required): Array of algorithm definitions for generating design tokens programmatically.",s.jsx("br",{}),"Each algorithm specifies variables, formulas, conditions, and execution steps to produce token values.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Key Components:"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"resolvedValueTypeId"}),": References the value type this algorithm generates (must match core schema)"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"variables"}),": Input variables with types, defaults, and constraints"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"formulas"}),": Mathematical expressions in multiple formats (LaTeX, JavaScript, AST)"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"conditions"}),": Validation and conditional logic"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"steps"}),": Execution order of formulas and conditions"]})]})]}),s.jsx(on,{code:JSON.stringify({algorithms:[{id:"typography-scale-algorithm",name:"Typography Scale Algorithm",description:"Generates font sizes using modular scale",resolvedValueTypeId:"fontSize",variables:[{id:"base",name:"Base",type:"number",defaultValue:"16",description:"Base font size"},{id:"ratio",name:"Ratio",type:"number",defaultValue:"1.25",description:"Modular scale ratio"}],formulas:[{id:"font-size-calculation",name:"Font Size Calculation",description:"Calculate font size using modular scale",expressions:{latex:{value:"fontSize = base \\times ratio^n"},javascript:{value:"fontSize = base * Math.pow(ratio, n)",metadata:{allowedOperations:["math"]}},ast:{type:"assignment",variableName:"fontSize",expression:{type:"binary",operator:"*",left:{type:"variable",variableName:"base"},right:{type:"function",functionName:"Math.pow",arguments:[{type:"variable",variableName:"ratio"},{type:"variable",variableName:"n"}]}}}},variableIds:["base","ratio"]}],conditions:[{id:"validate-ratio",name:"Validate Ratio",expression:"ratio > 0 && ratio <= 2",variableIds:["ratio"]}],steps:[{type:"condition",id:"validate-ratio",name:"Validate Ratio"},{type:"formula",id:"font-size-calculation",name:"Calculate Font Size"}]}]},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Expression Formats"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"expressions"}),": Each formula supports multiple expression formats for different use cases and validation.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"LaTeX:"})," Mathematical notation for documentation and display purposes.",s.jsx("br",{}),s.jsx("b",{children:"JavaScript:"})," Executable code with metadata about allowed operations.",s.jsx("br",{}),s.jsx("b",{children:"AST:"})," Abstract Syntax Tree for validation, analysis, and transformation.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Technical note:"})," All expressions must produce the same result regardless of format. The AST format enables advanced validation and optimization."]}),s.jsx(on,{code:JSON.stringify({expressions:{latex:{value:"result = base \\times multiplier^n"},javascript:{value:"result = base * Math.pow(multiplier, n)",metadata:{allowedOperations:["math"]}},ast:{type:"assignment",variableName:"result",expression:{type:"binary",operator:"*",left:{type:"variable",variableName:"base"},right:{type:"function",functionName:"Math.pow",arguments:[{type:"variable",variableName:"multiplier"},{type:"variable",variableName:"n"}]}},metadata:{astVersion:"1.0.0",validationErrors:[],complexity:"medium"}}}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Execution Configuration"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"execution"})," (optional): Configuration for algorithm execution including order, parallel processing, and error handling.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Key Features:"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"order"}),": Explicit execution order for algorithms (optional if auto-detected)"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"parallel"}),": Enable parallel execution if supported"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"onError"}),": Error handling strategy (stop, skip, warn)"]})]})]}),s.jsx(on,{code:JSON.stringify({execution:{order:["typography-scale-algorithm","spacing-scale-algorithm"],parallel:!1,onError:"stop"}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Integration Settings"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"integration"})," (optional): Settings for integrating with the main token schema and output generation.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Key Features:"}),s.jsxs(Es,{mt:1,mb:1,children:[s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"targetSchema"}),": URI or path to the target token schema"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"outputFormat"}),": Format for generated tokens (design-tokens, custom)"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"mergeStrategy"}),": How to handle existing tokens (replace, merge, append)"]}),s.jsxs(Bt,{children:[s.jsx(nt,{colorScheme:"purple",children:"validation"}),": Whether to validate generated tokens against the target schema"]})]})]}),s.jsx(on,{code:JSON.stringify({integration:{targetSchema:"https://designsystem.org/schemas/tokens/v1.0.0",outputFormat:"design-tokens",mergeStrategy:"merge",validation:!0}},null,2)})]}),s.jsxs(Z,{children:[s.jsx(gt,{size:"md",mb:4,children:"Examples"}),s.jsxs(B,{mb:2,children:[s.jsx("b",{children:"examples"})," (optional): Use case examples for testing and validation of algorithms.",s.jsx("br",{}),"Each example includes configuration, algorithms, and expected output to help users understand how to use the algorithms effectively."]}),s.jsx(on,{code:JSON.stringify({examples:[{name:"Basic Typography Scale",description:"Generate font sizes for a typography scale",useCase:"Typography system generation",config:{baseFontSize:16,ratio:1.25},algorithms:[{id:"typography-scale-algorithm",variables:{base:16,ratio:1.25}}],expectedOutput:{tokens:[{name:"font-size-0",value:16,description:"Base font size"},{name:"font-size-1",value:20,description:"Font size with ratio applied once"}]}}]},null,2)})]})]}),Pw=()=>{const[e,t]=P.useState(""),[n,r]=P.useState(!0),[i,a]=P.useState(null);return P.useEffect(()=>{(async()=>{r(!0),a(null);try{const u=await Op.minimal();if(u)t(JSON.stringify(u.default,null,2));else throw new Error("No algorithm example data available")}catch(u){a("Failed to load example data"),console.error("Error loading algorithm example data:",u)}finally{r(!1)}})()},[]),n?s.jsx(Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:s.jsx(Fl,{})}):i?s.jsx(Z,{p:4,children:s.jsx(B,{color:"red.500",children:i})}):s.jsx(Z,{overflow:"auto",height:"100%",children:s.jsx(on,{code:e})})},Bw=()=>s.jsxs(Bl,{maxW:"1000px",p:0,children:[s.jsxs(me,{spacing:4,align:"stretch",mb:6,children:[s.jsx(gt,{size:"lg",children:"Algorithm Data Schema"}),s.jsx(B,{children:"The algorithm data schema defines the structure for algorithmic design token generation with support for multiple expression formats, system variables, and execution workflows. It serves as the foundation for programmatic token generation, enabling teams to create dynamic design systems that can adapt to different contexts and requirements. The schema supports mathematical formulas, conditional logic, platform-specific execution, and seamless integration with the core token system."})]}),s.jsxs(Ai,{children:[s.jsxs(Ni,{children:[s.jsx($n,{children:"Properties"}),s.jsx($n,{children:"Example"})]}),s.jsxs(ma,{children:[s.jsx(nr,{children:s.jsx(zw,{})}),s.jsx(nr,{children:s.jsx(Pw,{})})]})]})]});function qs(e,t){const n=t.find(r=>r.id===e);return n?n.name:(console.warn(`Unknown modeId: ${e}`),`Unknown Mode (${e})`)}function Hi(e){return e.length===0?[[]]:e.map(n=>n.modes.map(r=>r.id)).reduce((n,r)=>n.flatMap(i=>r.map(a=>[...i,a])),[[]])}function Lw(e){const t=ve.getDimensionOrder(),n=[...e].sort((a,l)=>{const u=t.indexOf(a.id),h=t.indexOf(l.id);return u===-1?1:h===-1?-1:u-h}),r=n.find(a=>a.modes.length<=3),i=n.filter(a=>a!==r);return{columnDimensions:r?[r]:[],rowDimensions:i}}function du(e,t){const n=t.find(r=>r.id===e);if(!n)throw new Error(`Unknown value type: ${e}`);switch(n.type){case"COLOR":return{value:"#000000"};case"DIMENSION":case"SPACING":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"BLUR":case"SPREAD":case"RADIUS":return{value:0};case"FONT_WEIGHT":return{value:400};case"FONT_FAMILY":return{value:"system-ui"};case"DURATION":return{value:0};case"CUBIC_BEZIER":return{value:"cubic-bezier(0.4, 0, 0.2, 1)"};default:return{value:""}}}function Fw({columnDimensions:e,rowDimensions:t,modes:n,valueMap:r,getValueEditor:i,onDeleteValue:a,resolvedValueTypeId:l,resolvedValueTypes:u,onAddValue:h,isDisabled:f}){var g;const m=Hi(e),x=Hi(t);if(t.length>1){const v=t[0],N=t.slice(1);return s.jsxs(Ns,{size:"sm",variant:"simple",width:"100%",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:v.displayName}),m.map((D,j)=>s.jsx(hn,{colSpan:1,children:D.map(S=>qs(S,n)).join(" + ")},j))]})}),s.jsx(_s,{children:v.modes.map(D=>s.jsx(St.Fragment,{children:Hi(N).map((j,S)=>s.jsxs(Kn,{children:[S===0&&s.jsx(an,{rowSpan:Hi(N).length,children:qs(D.id,n)}),m.map((T,E)=>{const A=[D.id,...j,...T].sort().join(",");return r.get(A),s.jsx(an,{children:s.jsx(Ns,{size:"sm",variant:"simple",children:s.jsx(_s,{children:j.map((I,W)=>{const J=[D.id,...j,...T].sort(),le=J.join(","),ce=r.get(le);return s.jsxs(Kn,{children:[s.jsx(an,{align:"left",children:qs(I,n)}),s.jsx(an,{align:"left",children:s.jsxs(Z,{display:"flex",alignItems:"flex-start",gap:2,children:[ce?i(ce.value,J):s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>h(J,du(l,u)),isDisabled:f,children:"Add value"}),ce&&s.jsx(wt,{"aria-label":"Remove value",icon:s.jsx(cs,{size:16}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>a(J),isDisabled:f})]})})]},W)})})})},E)})]},`${D.id}-${S}`))},D.id))})]})}if(e.length>1){const v=e[0],N=e.slice(1);return s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:(g=t[0])==null?void 0:g.displayName}),v.modes.map(D=>s.jsx(hn,{colSpan:1,children:qs(D.id,n)},D.id))]})}),s.jsx(_s,{children:x.map((D,j)=>s.jsxs(Kn,{children:[s.jsx(an,{children:qs(D[0],n)}),v.modes.map(S=>s.jsx(an,{children:s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsx(Kn,{children:Hi(N).map((T,E)=>s.jsx(hn,{children:T.map(M=>qs(M,n)).join(" + ")},E))})}),s.jsx(_s,{children:s.jsx(Kn,{children:Hi(N).map((T,E)=>{const M=[...D,S.id,...T].sort(),A=M.join(","),I=r.get(A);return s.jsx(an,{children:s.jsxs(Z,{display:"flex",alignItems:"center",gap:2,children:[I?i(I.value,M):s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>h(M,du(l,u)),isDisabled:f,children:"Add value"}),I&&s.jsx(wt,{"aria-label":"Remove value",icon:s.jsx(cs,{size:16}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>a(M),isDisabled:f})]})},E)})})})]})},S.id))]},j))})]})}return s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[t.map(v=>s.jsx(hn,{children:v.displayName},v.id)),m.map((v,N)=>s.jsx(hn,{children:v.map(D=>qs(D,n)).join(" + ")},N))]})}),s.jsx(_s,{children:x.map((v,N)=>s.jsxs(Kn,{children:[v.map(D=>s.jsx(an,{children:s.jsx(B,{fontSize:"sm",children:qs(D,n)})},D)),m.map((D,j)=>{const S=[...v,...D].sort(),T=S.join(","),E=r.get(T);return s.jsx(an,{children:s.jsxs(Z,{display:"flex",alignItems:"center",gap:2,children:[E?i(E.value,S):s.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>h(S,du(l,u)),isDisabled:f,children:"Add value"}),E&&s.jsx(wt,{"aria-label":"Remove value",icon:s.jsx(cs,{size:16}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>a(S),isDisabled:f})]})},j)})]},N))})]})}function Xf({valuesByMode:e,modes:t,dimensions:n,getValueEditor:r,onDeleteValue:i,resolvedValueTypeId:a,resolvedValueTypes:l,onAddValue:u,isDisabled:h}){const{columnDimensions:f,rowDimensions:m}=Lw(n),x=new Map(e.map(g=>[g.modeIds.slice().sort().join(","),g]));return s.jsx(Z,{overflowX:"auto",children:s.jsx(Fw,{columnDimensions:f,rowDimensions:m,modes:t,valueMap:x,getValueEditor:r,onDeleteValue:i,resolvedValueTypeId:a,resolvedValueTypes:l,onAddValue:u,isDisabled:h})})}function Kf(e){var n;const t=(n=e.valuesByMode)==null?void 0:n[0];return t?"value"in t.value?String(t.value.value):"tokenId"in t.value?` ${t.value.tokenId}`:"":""}function hu({value:e,tokens:t,excludeTokenId:n,modes:r,resolvedValueTypeId:i,resolvedValueTypes:a,onChange:l,isDisabled:u}){const{isOpen:h,onOpen:f,onClose:m}=Ki(),[x,g]=P.useState(""),v=a.find(I=>I.id===i);if(!v)throw new Error(`Unknown value type: ${i}`);const N=t.filter(I=>!(I.id===n||I.resolvedValueTypeId!==i||!I.displayName.toLowerCase().includes(x.toLowerCase()))),D=I=>{if(v.type)switch(v.type){case"COLOR":case"FONT_FAMILY":case"CUBIC_BEZIER":l({value:String(I)});break;case"DIMENSION":case"SPACING":case"FONT_WEIGHT":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"DURATION":case"BLUR":case"SPREAD":case"RADIUS":l({value:Number(I)});break;default:l({value:String(I)})}else l({value:String(I)})},j=I=>{l({tokenId:I.id}),m()},S=()=>{if(v.type)switch(v.type){case"COLOR":return s.jsx(dt,{size:"sm",value:typeof e=="object"&&"value"in e?String(e.value):"",onChange:I=>D(I.target.value),placeholder:"Enter color (hex)",isDisabled:u});case"DIMENSION":case"SPACING":case"FONT_WEIGHT":case"FONT_SIZE":case"LINE_HEIGHT":case"LETTER_SPACING":case"DURATION":case"BLUR":case"SPREAD":case"RADIUS":return s.jsxs(yu,{size:"sm",value:typeof e=="object"&&"value"in e?Number(e.value):0,onChange:(I,W)=>D(W),isDisabled:u,children:[s.jsx(bu,{}),s.jsxs(vu,{children:[s.jsx(wu,{}),s.jsx(Su,{})]})]});case"FONT_FAMILY":case"CUBIC_BEZIER":return s.jsx(dt,{size:"sm",value:typeof e=="object"&&"value"in e?String(e.value):"",onChange:I=>D(I.target.value),placeholder:`Enter ${v.type.toLowerCase()}`,isDisabled:u});default:return s.jsx(dt,{size:"sm",value:typeof e=="object"&&"value"in e?String(e.value):"",onChange:I=>D(I.target.value),placeholder:"Enter value",isDisabled:u})}return s.jsx(dt,{size:"sm",value:typeof e=="object"&&"value"in e?String(e.value):"",onChange:I=>D(I.target.value),placeholder:"Enter value",isDisabled:u})},T=typeof e=="object"&&"tokenId"in e?t.find(I=>I.id===e.tokenId):void 0;function E(I){if(Array.isArray(I.valuesByMode)){if(Array.isArray(r)&&r.length>0){const J=I.valuesByMode.find(le=>Array.isArray(le.modeIds)&&le.modeIds.length===r.length&&le.modeIds.every((ce,F)=>ce===r[F]));if(J)return J.value}const W=I.valuesByMode.find(J=>Array.isArray(J.modeIds)&&J.modeIds.length===0);if(W)return W.value;if(I.valuesByMode.length>0)return I.valuesByMode[0].value}}const M=()=>{if(T){const I=E(T);I&&"value"in I&&l({value:I.value})}},A=s.jsxs(cl,{children:[s.jsx(ry,{}),s.jsx(sy,{}),s.jsx(ul,{children:s.jsxs(me,{spacing:2,align:"stretch",children:[s.jsx(dt,{placeholder:"Search tokens...",value:x,size:"sm",onChange:I=>g(I.target.value)}),s.jsx(iy,{spacing:0,children:N.map(I=>s.jsx(Bt,{children:s.jsx(Ne,{variant:"ghost",width:"100%",justifyContent:"flex-start",size:"sm",onClick:()=>j(I),children:s.jsx(Pu,{displayName:I.displayName,resolvedValueTypeId:I.resolvedValueTypeId,resolvedValueTypes:a,value:Kf(I)})})},I.id))})]})})]});return s.jsx(me,{spacing:2,align:"stretch",children:s.jsx(xe,{children:typeof e=="object"&&"tokenId"in e&&T?s.jsxs(s.Fragment,{children:[s.jsxs(Za,{isOpen:h,onClose:m,placement:"bottom-start",children:[s.jsx(Ya,{children:s.jsx(Z,{width:"100%",children:s.jsx(Pu,{displayName:T.displayName,resolvedValueTypeId:T.resolvedValueTypeId,resolvedValueTypes:a,value:Kf(T),onClick:u?void 0:f})})}),A]}),s.jsx(wt,{size:"sm","aria-label":"Unlink token alias",icon:s.jsx(ob,{size:16}),onClick:M,isDisabled:u})]}):s.jsxs(s.Fragment,{children:[S(),s.jsxs(Za,{isOpen:h,onClose:m,placement:"bottom-start",children:[s.jsx(Ya,{children:s.jsx(wt,{size:"sm","aria-label":"Search tokens",icon:s.jsx(Kp,{size:16}),onClick:f,isDisabled:u})}),A]})]})})})}function La(e,t){return t?{value:Ab(e,t.resolvedValueTypes)}:{value:""}}function Qf(e,t){return e.filter(n=>Array.isArray(n.resolvedValueTypeIds)&&n.resolvedValueTypeIds.includes(t))}function $w(e,t,n,r,i,a){console.log("getPlatformOverridesForTable input:",{valuesByMode:e.map(h=>{var f,m;return{modeIds:h.modeIds,hasOverrides:!!h.platformOverrides,overrideCount:((f=h.platformOverrides)==null?void 0:f.length)||0,overridePlatforms:((m=h.platformOverrides)==null?void 0:m.map(x=>x.platformId))||[]}}),platformId:t,resolvedValueTypeId:i});const l=e.filter(h=>{var m;const f=(m=h.platformOverrides)==null?void 0:m.some(x=>x.platformId===t);return console.log("Checking modeIds:",h.modeIds,"hasOverride:",f),f});if(console.log("Mode combinations with overrides:",l.map(h=>({modeIds:h.modeIds,overrides:h.platformOverrides}))),l.length===0)return console.log("No overrides found for platform:",t),[];const u=l.map(h=>{var g;const f=(g=h.platformOverrides)==null?void 0:g.find(v=>v.platformId===t);if(console.log("Processing override:",{modeIds:h.modeIds,override:f,allOverrides:h.platformOverrides}),!f)return console.log("No override found for modeIds:",h.modeIds),{modeIds:h.modeIds,value:La(i,{resolvedValueTypes:a})};let m;try{i==="color"?m={value:f.value}:m=JSON.parse(f.value)}catch(v){console.warn("Failed to parse override value:",f.value,v),m={value:f.value}}const x={modeIds:h.modeIds,value:m};return console.log("Transformed override:",x),x});return console.log("Final transformed overrides:",u),u}function ep(e,t,n){var a;const r=[];if(!e.tokenCollectionId)return r;const i=(t??[]).find(l=>l.id===e.tokenCollectionId);return i?(i.resolvedValueTypeIds.includes(e.resolvedValueTypeId)||r.push(`Token '${e.displayName}' has type '${((a=n.find(l=>l.id===e.resolvedValueTypeId))==null?void 0:a.displayName)||e.resolvedValueTypeId}' which is not supported by collection '${i.name}'`),r):(r.push(`Token '${e.displayName}' references non-existent collection id '${e.tokenCollectionId}'`),r)}function Gw({token:e,tokens:t,dimensions:n,modes:r,platforms:i,open:a,onClose:l,onSave:u,taxonomies:h,resolvedValueTypes:f,isNew:m=!1,onViewClassifications:x,schema:g,onDeleteToken:v,collections:N}){var $t;console.debug("[TokenEditorDialog] Received resolvedValueTypes:",f);const{colorMode:D}=nn(),[j,S]=P.useState(()=>{if(m)return{...e,id:Ar("token"),themeable:e.themeable??!1,valuesByMode:[{modeIds:[],value:La(e.resolvedValueTypeId,{resolvedValueTypes:f})}]};const{valuesByMode:fe,...Ee}=e;return{...Ee,themeable:e.themeable??!1,valuesByMode:fe.map(ye=>({...ye,platformOverrides:ye.platformOverrides?[...ye.platformOverrides]:[]}))}}),[T,E]=P.useState(()=>Array.isArray(e.taxonomies)?e.taxonomies:[]),[M,A]=P.useState([]),I=P.useRef({}),W=P.useRef(null),[J,le]=P.useState(()=>Qf(h,e.resolvedValueTypeId));P.useEffect(()=>{const fe=Qf(h,j.resolvedValueTypeId);le(fe);const Ee=new Set(fe.map(Ue=>Ue.id)),ye=T.filter(Ue=>Ee.has(Ue.taxonomyId));ye.length!==T.length&&E(ye)},[j.resolvedValueTypeId,h]),P.useEffect(()=>{if(a&&g){const{valuesByMode:fe,...Ee}=e,ye={...Ee,themeable:e.themeable??!1,valuesByMode:fe.map(Ge=>({...Ge,platformOverrides:Ge.platformOverrides?[...Ge.platformOverrides]:[]}))};S(m?Ge=>({...ye,id:Ge.id}):ye),W.current=ye,E(Array.isArray(e.taxonomies)?e.taxonomies:[]),A(n.filter(Ge=>Ge.required).map(Ge=>Ge.id));const Ue={platforms:i,taxonomies:h,namingRules:(g==null?void 0:g.namingRules)||{taxonomyOrder:[]}},Fe={...ye,taxonomies:Array.isArray(e.taxonomies)?e.taxonomies:[],codeSyntax:Qi.generateAllCodeSyntaxes({...ye,taxonomies:Array.isArray(e.taxonomies)?e.taxonomies:[],valuesByMode:ye.valuesByMode},Ue)};S(m?Ge=>({...Fe,id:Ge.id}):Fe)}},[e,a,n,i,h,g==null?void 0:g.namingRules,m]),P.useEffect(()=>{if(e.valuesByMode&&e.valuesByMode.length>0){const fe=e.valuesByMode.flatMap(ye=>ye.modeIds),Ee=n.filter(ye=>ye.modes.some(Ue=>fe.includes(Ue.id))).map(ye=>ye.id);A(Ee)}else A([])},[e,a,n]);const ce=fe=>{const Ee=M.includes(fe);let ye;if(Ee){const Ue=n.find(Ge=>Ge.id===fe);if(!Ue)return;ye=M.filter(Ge=>Ge!==fe);const Fe=Ue.defaultMode;S(Ge=>{const Et=Ge.valuesByMode.reduce((cn,ft)=>{if(ft.modeIds.includes(Fe)||Ue.modes.some(Re=>ft.modeIds.includes(Re.id))){const Re=ft.modeIds.slice().sort().join(",");cn[Re]={modeIds:ft.modeIds,value:ft.value,platformOverrides:ft.platformOverrides?[...ft.platformOverrides]:void 0}}return cn},{});I.current[fe]=Et;const Zt=Ge.valuesByMode.flatMap(cn=>{if(!cn.modeIds.includes(Fe)&&!Ue.modes.some(Re=>cn.modeIds.includes(Re.id)))return[cn];const ft=cn.modeIds.filter(Re=>Re!==Fe&&!Ue.modes.some(Ye=>Ye.id===Re));return ft.length>0?[{modeIds:ft,value:cn.value,platformOverrides:cn.platformOverrides}]:[]});return{...Ge,valuesByMode:Zt}})}else{const Ue=n.find(Ge=>Ge.id===fe);if(!Ue)return;ye=[...M,fe];const Fe=Ue.defaultMode;S(Ge=>{const Et=I.current[fe]||{},cn=Ge.valuesByMode.flatMap(ft=>{var tt;const Re=[],Ye=[...ft.modeIds,Fe].sort().join(","),ot=Et[Ye];if(ot)Re.push({modeIds:[...ft.modeIds,Fe].sort(),value:ot.value,platformOverrides:ot.platformOverrides});else{const Ce=(tt=W.current)==null?void 0:tt.valuesByMode.find(Tn=>Tn.modeIds.slice().sort().join(",")===[...ft.modeIds,Fe].sort().join(","));Ce?Re.push({modeIds:[...ft.modeIds,Fe].sort(),value:Ce.value,platformOverrides:Ce.platformOverrides}):Re.push({modeIds:[...ft.modeIds,Fe].sort(),value:ft.value,platformOverrides:ft.platformOverrides})}const It=ft.modeIds.map((Ce,Tn)=>{var Je;const Cr=ft.modeIds.filter((Xe,mt)=>mt!==Tn),ae=[...Cr,Fe].sort().join(","),we=Et[ae];if(we)return{modeIds:[...Cr,Fe].sort(),value:we.value,platformOverrides:we.platformOverrides};{const Xe=(Je=W.current)==null?void 0:Je.valuesByMode.find(mt=>mt.modeIds.slice().sort().join(",")===[...Cr,Fe].sort().join(","));return Xe?{modeIds:[...Cr,Fe].sort(),value:Xe.value,platformOverrides:Xe.platformOverrides}:{modeIds:[...Cr,Fe].sort(),value:ft.value,platformOverrides:ft.platformOverrides}}});return[...Re,...It]}).reduce((ft,Re)=>{const Ye=Re.modeIds.sort().join(",");return ft[Ye]||(ft[Ye]=Re),ft},{});return{...Ge,valuesByMode:Object.values(cn)}})}A(ye)},F=(fe,Ee,ye,Ue)=>typeof fe=="string"?s.jsx(B,{fontSize:"sm",color:"gray.500",children:fe}):s.jsx(hu,{value:fe,tokens:t,excludeTokenId:j.id,modes:Ee,resolvedValueTypeId:j.resolvedValueTypeId,resolvedValueTypes:f,onChange:Fe=>{Ue?Ue(Fe):S(Ge=>({...Ge,valuesByMode:Ge.valuesByMode.map(Et=>Et.modeIds.slice().sort().join(",")===Ee.slice().sort().join(",")?{...Et,value:Fe}:Et)}))}}),Q=(fe,Ee,ye,Ue,Fe)=>{const Ge=typeof fe=="string"?JSON.parse(fe):fe;return s.jsx(hu,{value:Ge,tokens:t,excludeTokenId:j.id,modes:Ee,resolvedValueTypeId:j.resolvedValueTypeId,resolvedValueTypes:f,onChange:Et=>{Fe?Fe(Et):S(Zt=>{const cn=Zt.valuesByMode.map(ft=>ft.modeIds.slice().sort().join(",")===Ee.slice().sort().join(",")?{...ft,platformOverrides:[...(ft.platformOverrides||[]).filter(Re=>Re.platformId!==ye),{platformId:ye,value:JSON.stringify(Et)}]}:ft);return{...Zt,valuesByMode:cn}})}})},[de,q]=P.useState({}),[pe,H]=P.useState([]);P.useEffect(()=>{if(j.tokenCollectionId){const fe=ep(j,N,f);H(fe)}else H([])},[j.tokenCollectionId,j.resolvedValueTypeId,N,f]);const L=()=>{if(console.debug("[TokenEditorDialog] Collections:",N),console.debug("[TokenEditorDialog] Current resolvedValueTypeId:",j.resolvedValueTypeId),!N||!j.resolvedValueTypeId)return[];const fe=N.filter(Ee=>{const ye=Ee.resolvedValueTypeIds.includes(j.resolvedValueTypeId);return console.debug(`[TokenEditorDialog] Collection ${Ee.name} (${Ee.id}) compatible:`,ye),ye});return console.debug("[TokenEditorDialog] Compatible collections:",fe),fe},X=fe=>{if(fe.preventDefault(),console.log("[TokenEditorDialog] handleSave called with editedToken:",j),q({}),j.tokenCollectionId){const Zt=ep(j,N,f);if(Zt.length>0){console.log("[TokenEditorDialog] Collection validation errors:",Zt),H(Zt);return}}j.tokenTier&&!["PRIMITIVE","SEMANTIC","COMPONENT"].includes(j.tokenTier)&&(j.tokenTier="PRIMITIVE");const Ee={platforms:i,taxonomies:h,namingRules:(g==null?void 0:g.namingRules)||{taxonomyOrder:[]}},ye=j.tokenCollectionId?j:(()=>{const{tokenCollectionId:Zt,...cn}=j;return cn})(),Ue={...ye,taxonomies:T,codeSyntax:Qi.generateAllCodeSyntaxes(ye,Ee)},Fe=Pf(Ue.codeSyntax),Ge=Fe.some(Zt=>Zt===void 0),Et=!Ue.displayName||!Ue.resolvedValueTypeId;if(console.log("[TokenEditorDialog] Validation debug after code syntax generation:",{codeSyntaxArray:Fe,hasTaxonomyError:Ge,hasRequiredFieldError:Et,displayName:Ue.displayName,resolvedValueTypeId:Ue.resolvedValueTypeId}),Et){console.log("[TokenEditorDialog] Required field validation failed");return}console.log("[TokenEditorDialog] Calling onSave with token:",Ue),u(Ue),l()};function he(fe){E(fe);const Ee={platforms:i,taxonomies:h,namingRules:(g==null?void 0:g.namingRules)||{taxonomyOrder:[]}};S(ye=>({...ye,taxonomies:fe,codeSyntax:Qi.generateAllCodeSyntaxes({...ye,taxonomies:fe},Ee)}))}const ge=Pf(j.codeSyntax),oe=ge.some(fe=>fe===void 0);!j.displayName||j.resolvedValueTypeId;function Se(fe){return new Set(fe.map(Ee=>`${Ee.taxonomyId}:${Ee.termId}`))}const ne=Se(T),De=!!t.find(fe=>fe.id!==j.id&&Array.isArray(fe.taxonomies)&&fe.taxonomies.length===T.length&&Se(fe.taxonomies).size===ne.size&&Array.from(ne).every(Ee=>Se(fe.taxonomies).has(Ee))),Pe=fe=>{S(Ee=>({...Ee,status:fe}))},{isOpen:Ve,onToggle:ct}=Ki(),Dt=Ib(j.resolvedValueTypeId,f),[Qt,pn]=P.useState(""),[_e,pt]=P.useState(!1),Ft=P.useRef(null),mn=()=>{var Ee,ye;const fe={aliases:[],groups:[],variants:[],themeOverrides:[]};return t.forEach(Ue=>{Ue.valuesByMode.forEach(Fe=>{"tokenId"in Fe.value&&Fe.value.tokenId===e.id&&fe.aliases.push(Ue.id)})}),(Ee=g==null?void 0:g.extensions)!=null&&Ee.tokenGroups&&g.extensions.tokenGroups.forEach(Ue=>{Ue.tokens.some(Fe=>Fe.id===e.id)&&fe.groups.push(Ue.id)}),(ye=g==null?void 0:g.extensions)!=null&&ye.tokenVariants&&Object.entries(g.extensions.tokenVariants).forEach(([Ue,Fe])=>{Fe.tokens.some(Ge=>Ge.id===e.id)&&fe.variants.push(Ue)}),fe},Wt=()=>{v(e.id),pt(!1),l()},ln=mn(),Ut=Object.values(ln).some(fe=>fe.length>0);return s.jsxs(s.Fragment,{children:[s.jsxs(Hn,{isOpen:a,onClose:l,isCentered:!0,size:"xl",children:[s.jsx(Mn,{}),s.jsxs(Wn,{maxW:"900px",children:[s.jsx(Dn,{children:m?"Create Token":`Edit Token: ${j.displayName}`}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{gap:4,align:"stretch",children:[s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:D==="dark"?"gray.800":"gray.50",borderColor:D==="dark"?"gray.600":"gray.200",children:s.jsxs(me,{gap:3,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Display Name"}),s.jsx(dt,{value:j.displayName,onChange:fe=>S(Ee=>({...Ee,displayName:fe.target.value}))})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:j.description||"",onChange:fe=>S(Ee=>({...Ee,description:fe.target.value}))})]}),s.jsxs(ki,{direction:"row",gap:6,align:"flex-start",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Value Type"}),s.jsx(fn,{value:j.resolvedValueTypeId,onChange:fe=>{const Ee=fe.target.value;S(ye=>({...ye,resolvedValueTypeId:Ee,valuesByMode:[{modeIds:[],value:La(Ee,{resolvedValueTypes:f})}]}))},children:f.map(fe=>s.jsx("option",{value:fe.id,children:fe.displayName},fe.id))}),j.resolvedValueTypeId&&s.jsx(B,{fontSize:"sm",color:"gray.500",mt:1,children:($t=f.find(fe=>fe.id===j.resolvedValueTypeId))==null?void 0:$t.description})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Token Tier"}),s.jsxs(fn,{value:j.tokenTier||"PRIMITIVE",onChange:fe=>{S(Ee=>({...Ee,tokenTier:fe.target.value}))},children:[s.jsx("option",{value:"PRIMITIVE",children:"Primitive"}),s.jsx("option",{value:"SEMANTIC",children:"Semantic"}),s.jsx("option",{value:"COMPONENT",children:"Component"})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Status"}),s.jsxs(fn,{value:j.status||"",onChange:fe=>Pe(fe.target.value),children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"experimental",children:"Experimental"}),s.jsx("option",{value:"stable",children:"Stable"}),s.jsx("option",{value:"deprecated",children:"Deprecated"})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Collection"}),s.jsxs(fn,{value:j.tokenCollectionId||"",onChange:fe=>{const Ee=fe.target.value;S(ye=>{if(!Ee){const{tokenCollectionId:Ue,...Fe}=ye;return Fe}return{...ye,tokenCollectionId:Ee}})},children:[s.jsx("option",{value:"",children:"Select a collection"}),L().map(fe=>s.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),pe.length>0&&s.jsxs(Gn,{status:"error",mt:2,children:[s.jsx(qn,{}),s.jsx(me,{align:"start",spacing:1,children:pe.map((fe,Ee)=>s.jsx(B,{fontSize:"sm",children:fe},Ee))})]}),s.jsx(B,{fontSize:"sm",color:"gray.500",mt:1,children:"If no collection is selected, a compatible collection will be automatically assigned."})]}),s.jsxs(me,{mt:2,spacing:3,align:"stretch",flex:1,children:[s.jsx(kn,{isChecked:j.private,onChange:fe=>S(Ee=>({...Ee,private:fe.target.checked})),children:"Private"}),s.jsx(kn,{isChecked:!!j.themeable,onChange:fe=>S(Ee=>({...Ee,themeable:fe.target.checked})),children:"Themeable"})]})]})]})}),s.jsxs(xe,{gap:2,align:"center",mt:3,children:[s.jsx(X4,{size:24}),s.jsx(B,{fontSize:"lg",fontWeight:"bold",children:"Classification"})]}),s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:D==="dark"?"gray.800":"gray.50",borderColor:D==="dark"?"gray.600":"gray.200",children:s.jsxs(ki,{direction:"row",gap:6,align:"flex-start",children:[s.jsx(Z,{flex:1,minW:0,children:s.jsxs(Le,{isRequired:!0,mb:3,children:[s.jsx(We,{children:"Taxonomies"}),s.jsx(Y1,{taxonomies:J,value:T,onChange:he,disabled:J.length===0,onViewClassifications:x}),J.length===0&&s.jsxs(Gn,{status:"warning",mt:2,children:[s.jsx(qn,{}),"No taxonomies available for this value type. Please select a different value type or add taxonomies for this type."]}),De&&s.jsxs(Gn,{status:"error",mt:2,children:[s.jsx(qn,{}),"Another token already uses this exact set of taxonomy assignments. Please choose a unique combination."]})]})}),s.jsxs(Z,{flex:1,minW:0,children:[oe&&s.jsxs(Gn,{status:"error",mb:2,children:[s.jsx(qn,{}),"You must apply taxonomies to this token before a platform name can be generated."]}),s.jsx(B,{fontSize:"sm",fontWeight:"medium",mb:1,children:"Generated names per platform"}),s.jsxs(Ns,{size:"sm",variant:"simple",children:[s.jsx(Ys,{children:s.jsxs(Kn,{children:[s.jsx(hn,{children:"Platform"}),s.jsx(hn,{children:"Name"})]})}),s.jsx(_s,{children:i.map(fe=>{const Ee=ge.find(ye=>ye.platformId===fe.id);return s.jsxs(Kn,{children:[s.jsx(an,{children:fe.displayName}),s.jsx(an,{children:s.jsx(B,{fontFamily:"mono",fontSize:"sm",children:(Ee==null?void 0:Ee.formattedName)||""})})]},fe.id)})})]})]})]})}),s.jsxs(xe,{gap:2,align:"center",mt:3,children:[y0(Dt),s.jsx(B,{fontSize:"lg",fontWeight:"bold",children:"Values"})]}),e.generatedByAlgorithm&&e.algorithmId&&s.jsxs(Gn,{status:"info",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(Z,{flex:1,children:[s.jsx(B,{fontWeight:"bold",children:"Values generated by algorithm"}),s.jsxs(B,{fontSize:"sm",children:["This token's values are automatically generated by the algorithm ",e.algorithmId,". To modify the values, edit the algorithm instead."]})]}),s.jsx(Ne,{size:"sm",colorScheme:"blue",variant:"outline",onClick:()=>{window.location.href=`/tokens/algorithms?edit=${e.algorithmId}`},children:"Edit Algorithm"})]}),s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:D==="dark"?"gray.800":"gray.50",borderColor:D==="dark"?"gray.600":"gray.200",children:s.jsxs(me,{gap:8,justify:"flex-start",align:"stretch",children:[s.jsxs(xe,{gap:4,align:"center",width:"100%",children:[s.jsx(B,{fontSize:"sm",fontWeight:"medium",children:"Dimensions"}),n.map(fe=>s.jsx(kn,{isChecked:M.includes(fe.id),onChange:()=>ce(fe.id),isDisabled:e.generatedByAlgorithm,children:fe.displayName},fe.id))]}),M.length===0?(()=>{const fe=j.valuesByMode.find(Ee=>Array.isArray(Ee.modeIds)&&Ee.modeIds.length===0);return fe?s.jsxs(xe,{gap:2,width:"100%",children:[s.jsx(hu,{value:fe.value,tokens:t,excludeTokenId:j.id,modes:[],resolvedValueTypeId:j.resolvedValueTypeId,resolvedValueTypes:f,onChange:Ee=>S(ye=>({...ye,valuesByMode:ye.valuesByMode.map(Ue=>Array.isArray(Ue.modeIds)&&Ue.modeIds.length===0?{...Ue,value:Ee}:Ue)})),isDisabled:e.generatedByAlgorithm}),s.jsx(wt,{"aria-label":"Remove value",icon:s.jsx(cs,{}),onClick:()=>S(Ee=>({...Ee,valuesByMode:Ee.valuesByMode.filter(ye=>!(Array.isArray(ye.modeIds)&&ye.modeIds.length===0))})),isDisabled:e.generatedByAlgorithm})]}):s.jsx(Ne,{variant:"outline",onClick:()=>S(Ee=>({...Ee,valuesByMode:[...Ee.valuesByMode,{modeIds:[],value:La(Ee.resolvedValueTypeId,g)}]})),children:"Add Value"})})():s.jsx(Xf,{valuesByMode:j.valuesByMode,modes:r,dimensions:n.filter(fe=>M.includes(fe.id)),getValueEditor:F,onDeleteValue:fe=>{S(Ee=>({...Ee,valuesByMode:Ee.valuesByMode.filter(ye=>ye.modeIds.slice().sort().join(",")!==fe.slice().sort().join(","))}))},resolvedValueTypeId:j.resolvedValueTypeId,resolvedValueTypes:f,onAddValue:(fe,Ee)=>{S(ye=>({...ye,valuesByMode:[...ye.valuesByMode,{modeIds:fe,value:Ee}]}))},isDisabled:e.generatedByAlgorithm})]})}),s.jsx(Z,{children:s.jsxs(me,{gap:2,justify:"flex-start",align:"stretch",children:[s.jsxs(Ne,{variant:"ghost",onClick:ct,width:"fit-content",gap:2,justifyContent:"space-between",mb:2,children:[s.jsx(Up,{size:24}),s.jsx(B,{fontSize:"md",fontWeight:"bold",children:"Platform overrides"}),s.jsx(Qo,{size:16,style:{transform:Ve?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),s.jsx(ay,{in:Ve,animateOpacity:!0,children:s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:D==="dark"?"gray.800":"gray.50",borderColor:D==="dark"?"gray.600":"gray.200",children:s.jsxs(Ai,{size:"sm",children:[s.jsx(Ni,{children:i.map(fe=>s.jsx($n,{children:fe.displayName},fe.id))}),s.jsx(ma,{children:i.map(fe=>{console.log("Rendering tab for platform:",fe.id);const Ee=$w(j.valuesByMode,fe.id,r,n.filter(ye=>M.includes(ye.id)),j.resolvedValueTypeId,f);return console.log("Platform overrides for table:",Ee),s.jsx(nr,{children:Ee.length>0?s.jsx(Xf,{valuesByMode:Ee,modes:r,dimensions:n.filter(ye=>M.includes(ye.id)),getValueEditor:(ye,Ue,Fe,Ge)=>Q(ye,Ue,fe.id,Fe,Ge),onDeleteValue:ye=>{console.log("Deleting override for modeIds:",ye),S(Ue=>{const Fe=Ue.valuesByMode.map(Ge=>{var Et;return Ge.modeIds.slice().sort().join(",")===ye.slice().sort().join(",")?{...Ge,platformOverrides:(Et=Ge.platformOverrides)==null?void 0:Et.filter(Zt=>Zt.platformId!==fe.id)}:Ge});return{...Ue,valuesByMode:Fe}})},resolvedValueTypeId:j.resolvedValueTypeId,resolvedValueTypes:f,onAddValue:(ye,Ue)=>{console.log("Adding override for modeIds:",ye,Ue),S(Fe=>{const Ge=Fe.valuesByMode.map(Et=>Et.modeIds.slice().sort().join(",")===ye.slice().sort().join(",")?{...Et,platformOverrides:[...(Et.platformOverrides||[]).filter(Zt=>Zt.platformId!==fe.id),{platformId:fe.id,value:JSON.stringify(Ue)}]}:Et);return{...Fe,valuesByMode:Ge}})},isDisabled:e.generatedByAlgorithm}):s.jsxs(Z,{textAlign:"center",py:4,children:[s.jsx(B,{color:"gray.500",children:"No overrides for this platform"}),s.jsx(Ne,{variant:"outline",size:"sm",mt:2,onClick:()=>{S(ye=>({...ye,valuesByMode:ye.valuesByMode.map((Ue,Fe)=>Fe===0?{...Ue,platformOverrides:[...Ue.platformOverrides||[],{platformId:fe.id,value:JSON.stringify(La(ye.resolvedValueTypeId,{resolvedValueTypes:f}))}]}:Ue)}))},children:"Add override"})]})},fe.id)})})]})})})]})})]})}),s.jsx(ar,{children:s.jsxs(ki,{width:"100%",justify:"space-between",children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:l,children:"Cancel"}),s.jsxs(xe,{spacing:3,children:[!m&&s.jsx(Ne,{colorScheme:"red",variant:"outline",onClick:()=>pt(!0),children:"Delete"}),s.jsx(Ne,{colorScheme:"blue",onClick:X,children:m?"Create":"Save"})]})]})})]})]}),s.jsx(ku,{isOpen:_e,leastDestructiveRef:Ft,onClose:()=>pt(!1),isCentered:!0,children:s.jsx(Mn,{bg:"blackAlpha.300",backdropFilter:"blur(2px)",children:s.jsxs(ju,{maxW:"500px",mx:"auto",my:"auto",borderRadius:"lg",boxShadow:"xl",children:[s.jsx(Dn,{fontSize:"lg",fontWeight:"bold",children:"Delete Token"}),s.jsx(On,{children:s.jsxs(me,{align:"stretch",spacing:4,children:[s.jsxs(B,{children:["Delete ",e.displayName,"?"]}),Ut&&s.jsxs(Gn,{status:"warning",borderRadius:"md",children:[s.jsx(qn,{}),s.jsxs(me,{align:"start",spacing:1,children:[s.jsx(B,{fontWeight:"bold",children:"Warning: This token is referenced in:"}),ln.aliases.length>0&&s.jsxs(B,{children:[" ",ln.aliases.length," other token(s) as aliases"]}),ln.groups.length>0&&s.jsxs(B,{children:[" ",ln.groups.length," token group(s)"]}),ln.variants.length>0&&s.jsxs(B,{children:[" ",ln.variants.length," token variant(s)"]}),ln.themeOverrides.length>0&&s.jsxs(B,{children:[" ",ln.themeOverrides.length," theme override(s)"]})]})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Type Delete to confirm"}),s.jsx(dt,{value:Qt,onChange:fe=>pn(fe.target.value),placeholder:"Type Delete to confirm",autoFocus:!0})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{ref:Ft,onClick:()=>pt(!1),children:"Cancel"}),s.jsx(Ne,{colorScheme:"orange",onClick:()=>{const fe={...j,status:"deprecated"};u(fe),pt(!1),l()},ml:3,children:"Deprecate"}),s.jsx(Ne,{colorScheme:"red",onClick:Wt,ml:3,isDisabled:Qt!=="Delete",children:"Yes, delete"})]})]})})})]})}const qw=()=>({getItem:n=>{try{return localStorage.getItem(n)}catch(r){return console.error("Error reading from localStorage:",r),null}},setItem:(n,r)=>{try{localStorage.setItem(n,r)}catch(i){console.error("Error writing to localStorage:",i)}}}),Hw=()=>{const{getItem:e,setItem:t}=qw(),n=or(),r=(u,h)=>{const f=new Set(h.map(x=>x.id)),m=u.taxonomyOrder.filter(x=>f.has(x));return m.length!==u.taxonomyOrder.length&&console.warn("[useSchema] Removed invalid taxonomy IDs from naming rules:",u.taxonomyOrder.filter(x=>!f.has(x))),{taxonomyOrder:m}},[i,a]=P.useState(()=>{const u=e("schema");if(u)try{const h=JSON.parse(u),f=ve.getNamingRules(),m=ve.getTaxonomies(),x=r(f,m),g={...h,namingRules:x},v=sr.validateData(g);return v.isValid?g:(console.error("Invalid schema in storage:",v.errors),n({title:"Schema Error",description:"Invalid schema found in storage",status:"error",duration:5e3,isClosable:!0}),null)}catch(h){return console.error("Failed to parse stored schema:",h),n({title:"Schema Error",description:"Failed to parse stored schema",status:"error",duration:5e3,isClosable:!0}),null}try{const h=ve.getCollections(),f=ve.getTokens(),m=ve.getDimensions(),x=ve.getPlatforms(),g=ve.getThemes(),v=ve.getTaxonomies(),N=ve.getValueTypes(),D=ve.getNamingRules(),j=ve.getDimensionOrder();if(h.length>0||f.length>0){const S=r(D,v),T={version:"1.0.0",systemName:"Design System",systemId:"design-system",description:"A comprehensive design system with tokens, dimensions, and themes",tokenCollections:h,tokens:f,dimensions:m,platforms:x,themes:g,taxonomies:v,resolvedValueTypes:N,namingRules:S,dimensionOrder:j,versionHistory:[{version:"1.0.0",dimensions:m.map(M=>M.id),date:new Date().toISOString().slice(0,10)}]},E=sr.validateData(T);return E.isValid?T:(console.error("Invalid schema from storage:",E.errors),n({title:"Schema Error",description:"Invalid schema found in storage",status:"error",duration:5e3,isClosable:!0}),null)}}catch(h){console.error("Failed to load schema from storage:",h),n({title:"Schema Error",description:"Failed to load schema from storage",status:"error",duration:5e3,isClosable:!0})}return null});return P.useEffect(()=>{(async()=>{var h,f,m,x,g,v,N,D,j;if(!i)try{const T=(await $l.minimal()).default;console.debug("[useSchema] Raw core data:",{version:T.version,systemName:T.systemName,systemId:T.systemId,hasTokenCollections:!!T.tokenCollections,tokenCollectionsCount:(h=T.tokenCollections)==null?void 0:h.length,hasTokens:!!T.tokens,tokensCount:(f=T.tokens)==null?void 0:f.length,hasDimensions:!!T.dimensions,dimensionsCount:(m=T.dimensions)==null?void 0:m.length,hasPlatforms:!!T.platforms,platformsCount:(x=T.platforms)==null?void 0:x.length,hasTaxonomies:!!T.taxonomies,taxonomiesCount:(g=T.taxonomies)==null?void 0:g.length,hasThemes:!!T.themes,themesCount:(v=T.themes)==null?void 0:v.length,hasResolvedValueTypes:!!T.resolvedValueTypes,resolvedValueTypesCount:(N=T.resolvedValueTypes)==null?void 0:N.length,hasNamingRules:!!T.namingRules,hasVersionHistory:!!T.versionHistory,versionHistoryCount:(D=T.versionHistory)==null?void 0:D.length});const E={...T,version:T.version||"1.0.0",systemName:T.systemName||"Design System",systemId:T.systemId||"design-system",taxonomies:T.taxonomies||[],tokenCollections:T.tokenCollections||[],platforms:(T.platforms||[]).map(A=>({...A,syntaxPatterns:A.syntaxPatterns?{...A.syntaxPatterns,delimiter:A.syntaxPatterns.delimiter,capitalization:A.syntaxPatterns.capitalization}:void 0})),resolvedValueTypes:(T.resolvedValueTypes||[]).map(A=>({...A,type:A.type})),tokens:(T.tokens||[]).map(A=>({...A,status:A.status,tokenTier:A.tokenTier,valuesByMode:A.valuesByMode.map(I=>({...I,value:I.value}))})),namingRules:r(T.namingRules||{taxonomyOrder:[]},T.taxonomies||[]),versionHistory:T.versionHistory||[{version:T.version||"1.0.0",dimensions:(T.dimensions||[]).map(A=>A.id),date:new Date().toISOString().slice(0,10)}]};console.debug("[useSchema] Processed data structure:",{version:E.version,systemName:E.systemName,systemId:E.systemId,tokenCollections:{count:E.tokenCollections.length,sample:E.tokenCollections[0]},tokens:{count:E.tokens.length,sample:E.tokens[0]},dimensions:{count:E.dimensions.length,sample:E.dimensions[0]},platforms:{count:E.platforms.length,sample:E.platforms[0]},taxonomies:{count:E.taxonomies.length,sample:E.taxonomies[0]},themes:{count:E.themes.length,sample:E.themes[0]},resolvedValueTypes:{count:E.resolvedValueTypes.length,sample:E.resolvedValueTypes[0]},namingRules:E.namingRules,versionHistory:{count:E.versionHistory.length,sample:E.versionHistory[0]}});const M=sr.validateData(E);if(M.isValid)ve.setTaxonomies(E.taxonomies),a(E);else throw console.error("[useSchema] Schema validation failed:",{errors:M.errors,dataSummary:{version:E.version,systemName:E.systemName,systemId:E.systemId,tokenCollectionsCount:E.tokenCollections.length,tokensCount:E.tokens.length,dimensionsCount:E.dimensions.length,platformsCount:E.platforms.length,taxonomiesCount:E.taxonomies.length,themesCount:E.themes.length,resolvedValueTypesCount:E.resolvedValueTypes.length}}),new Error(`Invalid schema structure in default data: ${(j=M.errors)==null?void 0:j.join(", ")}`)}catch(S){console.error("Failed to load default schema:",S),n({title:"Schema Error",description:"Failed to load default schema",status:"error",duration:5e3,isClosable:!0})}})()},[i,n]),P.useEffect(()=>{var u;if(i)try{const h=sr.validateData(i);if(h.isValid)t("schema",JSON.stringify(i));else throw new Error(`Invalid schema structure: ${(u=h.errors)==null?void 0:u.join(", ")}`)}catch(h){console.error("Failed to save schema:",h),n({title:"Schema Error",description:"Failed to save schema",status:"error",duration:5e3,isClosable:!0})}},[i,t,n]),P.useEffect(()=>{console.debug("[useSchema] Current schema:",i)},[i]),{schema:i,updateSchema:u=>{var h;try{const f=sr.validateData(u);if(f.isValid)a(u);else throw new Error(`Invalid schema structure: ${(h=f.errors)==null?void 0:h.join(", ")}`)}catch(f){console.error("Failed to update schema:",f),n({title:"Schema Error",description:"Failed to update schema",status:"error",duration:5e3,isClosable:!0})}}}};function tp(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}var Ww={value:()=>{}};function vo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new il(n)}function il(e){this._=e}function Uw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}il.prototype=vo.prototype={constructor:il,on:function(e,t){var n=this._,r=Uw(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((i=(e=r[a]).type)&&(i=Zw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=r[a]).type)n[i]=np(n[i],e.name,t);else if(t==null)for(i in n)n[i]=np(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new il(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Zw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function np(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ww,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var n0="http://www.w3.org/1999/xhtml";const rp={svg:"http://www.w3.org/2000/svg",xhtml:n0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ac(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),rp.hasOwnProperty(t)?{space:rp[t],local:e}:e}function Yw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===n0&&t.documentElement.namespaceURI===n0?t.createElement(e):t.createElementNS(n,e)}}function Jw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function dg(e){var t=ac(e);return(t.local?Jw:Yw)(t)}function Xw(){}function X0(e){return e==null?Xw:function(){return this.querySelector(e)}}function Kw(e){typeof e!="function"&&(e=X0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=r[i]=new Array(l),h,f,m=0;m<l;++m)(h=a[m])&&(f=e.call(h,h.__data__,m,a))&&("__data__"in h&&(f.__data__=h.__data__),u[m]=f);return new Mr(r,this._parents)}function Qw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eS(){return[]}function hg(e){return e==null?eS:function(){return this.querySelectorAll(e)}}function tS(e){return function(){return Qw(e.apply(this,arguments))}}function nS(e){typeof e=="function"?e=tS(e):e=hg(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var l=t[a],u=l.length,h,f=0;f<u;++f)(h=l[f])&&(r.push(e.call(h,h.__data__,f,l)),i.push(h));return new Mr(r,i)}function fg(e){return function(){return this.matches(e)}}function pg(e){return function(t){return t.matches(e)}}var rS=Array.prototype.find;function sS(e){return function(){return rS.call(this.children,e)}}function iS(){return this.firstElementChild}function aS(e){return this.select(e==null?iS:sS(typeof e=="function"?e:pg(e)))}var oS=Array.prototype.filter;function lS(){return Array.from(this.children)}function cS(e){return function(){return oS.call(this.children,e)}}function uS(e){return this.selectAll(e==null?lS:cS(typeof e=="function"?e:pg(e)))}function dS(e){typeof e!="function"&&(e=fg(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=r[i]=[],h,f=0;f<l;++f)(h=a[f])&&e.call(h,h.__data__,f,a)&&u.push(h);return new Mr(r,this._parents)}function mg(e){return new Array(e.length)}function hS(){return new Mr(this._enter||this._groups.map(mg),this._parents)}function Ml(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ml.prototype={constructor:Ml,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fS(e){return function(){return e}}function pS(e,t,n,r,i,a){for(var l=0,u,h=t.length,f=a.length;l<f;++l)(u=t[l])?(u.__data__=a[l],r[l]=u):n[l]=new Ml(e,a[l]);for(;l<h;++l)(u=t[l])&&(i[l]=u)}function mS(e,t,n,r,i,a,l){var u,h,f=new Map,m=t.length,x=a.length,g=new Array(m),v;for(u=0;u<m;++u)(h=t[u])&&(g[u]=v=l.call(h,h.__data__,u,t)+"",f.has(v)?i[u]=h:f.set(v,h));for(u=0;u<x;++u)v=l.call(e,a[u],u,a)+"",(h=f.get(v))?(r[u]=h,h.__data__=a[u],f.delete(v)):n[u]=new Ml(e,a[u]);for(u=0;u<m;++u)(h=t[u])&&f.get(g[u])===h&&(i[u]=h)}function gS(e){return e.__data__}function xS(e,t){if(!arguments.length)return Array.from(this,gS);var n=t?mS:pS,r=this._parents,i=this._groups;typeof e!="function"&&(e=fS(e));for(var a=i.length,l=new Array(a),u=new Array(a),h=new Array(a),f=0;f<a;++f){var m=r[f],x=i[f],g=x.length,v=yS(e.call(m,m&&m.__data__,f,r)),N=v.length,D=u[f]=new Array(N),j=l[f]=new Array(N),S=h[f]=new Array(g);n(m,x,D,j,S,v,t);for(var T=0,E=0,M,A;T<N;++T)if(M=D[T]){for(T>=E&&(E=T+1);!(A=j[E])&&++E<N;);M._next=A||null}}return l=new Mr(l,r),l._enter=u,l._exit=h,l}function yS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bS(){return new Mr(this._exit||this._groups.map(mg),this._parents)}function vS(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function wS(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,l=Math.min(i,a),u=new Array(i),h=0;h<l;++h)for(var f=n[h],m=r[h],x=f.length,g=u[h]=new Array(x),v,N=0;N<x;++N)(v=f[N]||m[N])&&(g[N]=v);for(;h<i;++h)u[h]=n[h];return new Mr(u,this._parents)}function SS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],l;--i>=0;)(l=r[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function kS(e){e||(e=jS);function t(x,g){return x&&g?e(x.__data__,g.__data__):!x-!g}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var l=n[a],u=l.length,h=i[a]=new Array(u),f,m=0;m<u;++m)(f=l[m])&&(h[m]=f);h.sort(t)}return new Mr(i,this._parents).order()}function jS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function CS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function TS(){return Array.from(this)}function IS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var l=r[i];if(l)return l}return null}function AS(){let e=0;for(const t of this)++e;return e}function NS(){return!this.node()}function _S(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,l=i.length,u;a<l;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function ES(e){return function(){this.removeAttribute(e)}}function MS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DS(e,t){return function(){this.setAttribute(e,t)}}function OS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function VS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zS(e,t){var n=ac(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?MS:ES:typeof t=="function"?n.local?VS:RS:n.local?OS:DS)(n,t))}function gg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PS(e){return function(){this.style.removeProperty(e)}}function BS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function LS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function FS(e,t,n){return arguments.length>1?this.each((t==null?PS:typeof t=="function"?LS:BS)(e,t,n??"")):da(this.node(),e)}function da(e,t){return e.style.getPropertyValue(t)||gg(e).getComputedStyle(e,null).getPropertyValue(t)}function $S(e){return function(){delete this[e]}}function GS(e,t){return function(){this[e]=t}}function qS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function HS(e,t){return arguments.length>1?this.each((t==null?$S:typeof t=="function"?qS:GS)(e,t)):this.node()[e]}function xg(e){return e.trim().split(/^|\s+/)}function K0(e){return e.classList||new yg(e)}function yg(e){this._node=e,this._names=xg(e.getAttribute("class")||"")}yg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bg(e,t){for(var n=K0(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function vg(e,t){for(var n=K0(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function WS(e){return function(){bg(this,e)}}function US(e){return function(){vg(this,e)}}function ZS(e,t){return function(){(t.apply(this,arguments)?bg:vg)(this,e)}}function YS(e,t){var n=xg(e+"");if(arguments.length<2){for(var r=K0(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ZS:t?WS:US)(n,t))}function JS(){this.textContent=""}function XS(e){return function(){this.textContent=e}}function KS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QS(e){return arguments.length?this.each(e==null?JS:(typeof e=="function"?KS:XS)(e)):this.node().textContent}function ek(){this.innerHTML=""}function tk(e){return function(){this.innerHTML=e}}function nk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function rk(e){return arguments.length?this.each(e==null?ek:(typeof e=="function"?nk:tk)(e)):this.node().innerHTML}function sk(){this.nextSibling&&this.parentNode.appendChild(this)}function ik(){return this.each(sk)}function ak(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ok(){return this.each(ak)}function lk(e){var t=typeof e=="function"?e:dg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ck(){return null}function uk(e,t){var n=typeof e=="function"?e:dg(e),r=t==null?ck:typeof t=="function"?t:X0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dk(){var e=this.parentNode;e&&e.removeChild(this)}function hk(){return this.each(dk)}function fk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mk(e){return this.select(e?pk:fk)}function gk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xk(e){return function(t){e.call(this,t,this.__data__)}}function yk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function bk(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function vk(e,t,n){return function(){var r=this.__on,i,a=xk(t);if(r){for(var l=0,u=r.length;l<u;++l)if((i=r[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function wk(e,t,n){var r=yk(e+""),i,a=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var h=0,f=u.length,m;h<f;++h)for(i=0,m=u[h];i<a;++i)if((l=r[i]).type===m.type&&l.name===m.name)return m.value}return}for(u=t?vk:bk,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function wg(e,t,n){var r=gg(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Sk(e,t){return function(){return wg(this,e,t)}}function kk(e,t){return function(){return wg(this,e,t.apply(this,arguments))}}function jk(e,t){return this.each((typeof t=="function"?kk:Sk)(e,t))}function*Ck(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,l;i<a;++i)(l=r[i])&&(yield l)}var Sg=[null];function Mr(e,t){this._groups=e,this._parents=t}function wo(){return new Mr([[document.documentElement]],Sg)}function Tk(){return this}Mr.prototype=wo.prototype={constructor:Mr,select:Kw,selectAll:nS,selectChild:aS,selectChildren:uS,filter:dS,data:xS,enter:hS,exit:bS,join:vS,merge:wS,selection:Tk,order:SS,sort:kS,call:CS,nodes:TS,node:IS,size:AS,empty:NS,each:_S,attr:zS,style:FS,property:HS,classed:YS,text:QS,html:rk,raise:ik,lower:ok,append:lk,insert:uk,remove:hk,clone:mk,datum:gk,on:wk,dispatch:jk,[Symbol.iterator]:Ck};function hr(e){return typeof e=="string"?new Mr([[document.querySelector(e)]],[document.documentElement]):new Mr([[e]],Sg)}function Ik(e){let t;for(;t=e.sourceEvent;)e=t;return e}function As(e,t){if(e=Ik(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ak={passive:!1},uo={capture:!0,passive:!1};function fu(e){e.stopImmediatePropagation()}function ta(e){e.preventDefault(),e.stopImmediatePropagation()}function kg(e){var t=e.document.documentElement,n=hr(e).on("dragstart.drag",ta,uo);"onselectstart"in t?n.on("selectstart.drag",ta,uo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jg(e,t){var n=e.document.documentElement,r=hr(e).on("dragstart.drag",null);t&&(r.on("click.drag",ta,uo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Uo=e=>()=>e;function r0(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:l,y:u,dx:h,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}r0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nk(e){return!e.ctrlKey&&!e.button}function _k(){return this.parentNode}function Ek(e,t){return t??{x:e.x,y:e.y}}function Mk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dk(){var e=Nk,t=_k,n=Ek,r=Mk,i={},a=vo("start","drag","end"),l=0,u,h,f,m,x=0;function g(M){M.on("mousedown.drag",v).filter(r).on("touchstart.drag",j).on("touchmove.drag",S,Ak).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,A){if(!(m||!e.call(this,M,A))){var I=E(this,t.call(this,M,A),M,A,"mouse");I&&(hr(M.view).on("mousemove.drag",N,uo).on("mouseup.drag",D,uo),kg(M.view),fu(M),f=!1,u=M.clientX,h=M.clientY,I("start",M))}}function N(M){if(ta(M),!f){var A=M.clientX-u,I=M.clientY-h;f=A*A+I*I>x}i.mouse("drag",M)}function D(M){hr(M.view).on("mousemove.drag mouseup.drag",null),jg(M.view,f),ta(M),i.mouse("end",M)}function j(M,A){if(e.call(this,M,A)){var I=M.changedTouches,W=t.call(this,M,A),J=I.length,le,ce;for(le=0;le<J;++le)(ce=E(this,W,M,A,I[le].identifier,I[le]))&&(fu(M),ce("start",M,I[le]))}}function S(M){var A=M.changedTouches,I=A.length,W,J;for(W=0;W<I;++W)(J=i[A[W].identifier])&&(ta(M),J("drag",M,A[W]))}function T(M){var A=M.changedTouches,I=A.length,W,J;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),W=0;W<I;++W)(J=i[A[W].identifier])&&(fu(M),J("end",M,A[W]))}function E(M,A,I,W,J,le){var ce=a.copy(),F=As(le||I,A),Q,de,q;if((q=n.call(M,new r0("beforestart",{sourceEvent:I,target:g,identifier:J,active:l,x:F[0],y:F[1],dx:0,dy:0,dispatch:ce}),W))!=null)return Q=q.x-F[0]||0,de=q.y-F[1]||0,function pe(H,L,X){var he=F,ge;switch(H){case"start":i[J]=pe,ge=l++;break;case"end":delete i[J],--l;case"drag":F=As(X||L,A),ge=l;break}ce.call(H,M,new r0(H,{sourceEvent:L,subject:q,target:g,identifier:J,active:ge,x:F[0]+Q,y:F[1]+de,dx:F[0]-he[0],dy:F[1]-he[1],dispatch:ce}),W)}}return g.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Uo(!!M),g):e},g.container=function(M){return arguments.length?(t=typeof M=="function"?M:Uo(M),g):t},g.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Uo(M),g):n},g.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:Uo(!!M),g):r},g.on=function(){var M=a.on.apply(a,arguments);return M===a?g:M},g.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,g):Math.sqrt(x)},g}function Q0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function So(){}var ho=.7,Dl=1/ho,na="\\s*([+-]?\\d+)\\s*",fo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ok=/^#([0-9a-f]{3,8})$/,Rk=new RegExp(`^rgb\\(${na},${na},${na}\\)$`),Vk=new RegExp(`^rgb\\(${fs},${fs},${fs}\\)$`),zk=new RegExp(`^rgba\\(${na},${na},${na},${fo}\\)$`),Pk=new RegExp(`^rgba\\(${fs},${fs},${fs},${fo}\\)$`),Bk=new RegExp(`^hsl\\(${fo},${fs},${fs}\\)$`),Lk=new RegExp(`^hsla\\(${fo},${fs},${fs},${fo}\\)$`),sp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q0(So,ha,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ip,formatHex:ip,formatHex8:Fk,formatHsl:$k,formatRgb:ap,toString:ap});function ip(){return this.rgb().formatHex()}function Fk(){return this.rgb().formatHex8()}function $k(){return Tg(this).formatHsl()}function ap(){return this.rgb().formatRgb()}function ha(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ok.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?op(t):n===3?new kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rk.exec(e))?new kr(t[1],t[2],t[3],1):(t=Vk.exec(e))?new kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zk.exec(e))?Zo(t[1],t[2],t[3],t[4]):(t=Pk.exec(e))?Zo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bk.exec(e))?up(t[1],t[2]/100,t[3]/100,1):(t=Lk.exec(e))?up(t[1],t[2]/100,t[3]/100,t[4]):sp.hasOwnProperty(e)?op(sp[e]):e==="transparent"?new kr(NaN,NaN,NaN,0):null}function op(e){return new kr(e>>16&255,e>>8&255,e&255,1)}function Zo(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function Gk(e){return e instanceof So||(e=ha(e)),e?(e=e.rgb(),new kr(e.r,e.g,e.b,e.opacity)):new kr}function s0(e,t,n,r){return arguments.length===1?Gk(e):new kr(e,t,n,r??1)}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Q0(kr,s0,Cg(So,{brighter(e){return e=e==null?Dl:Math.pow(Dl,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ho:Math.pow(ho,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kr(ji(this.r),ji(this.g),ji(this.b),Ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lp,formatHex:lp,formatHex8:qk,formatRgb:cp,toString:cp}));function lp(){return`#${Si(this.r)}${Si(this.g)}${Si(this.b)}`}function qk(){return`#${Si(this.r)}${Si(this.g)}${Si(this.b)}${Si((isNaN(this.opacity)?1:this.opacity)*255)}`}function cp(){const e=Ol(this.opacity);return`${e===1?"rgb(":"rgba("}${ji(this.r)}, ${ji(this.g)}, ${ji(this.b)}${e===1?")":`, ${e})`}`}function Ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ji(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Si(e){return e=ji(e),(e<16?"0":"")+e.toString(16)}function up(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qr(e,t,n,r)}function Tg(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);if(e instanceof So||(e=ha(e)),!e)return new Qr;if(e instanceof Qr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,u=a-i,h=(a+i)/2;return u?(t===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-t)/u+2:l=(t-n)/u+4,u/=h<.5?a+i:2-a-i,l*=60):u=h>0&&h<1?0:l,new Qr(l,u,h,e.opacity)}function Hk(e,t,n,r){return arguments.length===1?Tg(e):new Qr(e,t,n,r??1)}function Qr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Q0(Qr,Hk,Cg(So,{brighter(e){return e=e==null?Dl:Math.pow(Dl,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ho:Math.pow(ho,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kr(pu(e>=240?e-240:e+120,i,r),pu(e,i,r),pu(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Qr(dp(this.h),Yo(this.s),Yo(this.l),Ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ol(this.opacity);return`${e===1?"hsl(":"hsla("}${dp(this.h)}, ${Yo(this.s)*100}%, ${Yo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dp(e){return e=(e||0)%360,e<0?e+360:e}function Yo(e){return Math.max(0,Math.min(1,e||0))}function pu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ig=e=>()=>e;function Wk(e,t){return function(n){return e+n*t}}function Uk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Zk(e){return(e=+e)==1?Ag:function(t,n){return n-t?Uk(t,n,e):Ig(isNaN(t)?n:t)}}function Ag(e,t){var n=t-e;return n?Wk(e,n):Ig(isNaN(e)?t:e)}const hp=function e(t){var n=Zk(t);function r(i,a){var l=n((i=s0(i)).r,(a=s0(a)).r),u=n(i.g,a.g),h=n(i.b,a.b),f=Ag(i.opacity,a.opacity);return function(m){return i.r=l(m),i.g=u(m),i.b=h(m),i.opacity=f(m),i+""}}return r.gamma=e,r}(1);function Us(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var i0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mu=new RegExp(i0.source,"g");function Yk(e){return function(){return e}}function Jk(e){return function(t){return e(t)+""}}function Xk(e,t){var n=i0.lastIndex=mu.lastIndex=0,r,i,a,l=-1,u=[],h=[];for(e=e+"",t=t+"";(r=i0.exec(e))&&(i=mu.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,h.push({i:l,x:Us(r,i)})),n=mu.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?h[0]?Jk(h[0].x):Yk(t):(t=h.length,function(f){for(var m=0,x;m<t;++m)u[(x=h[m]).i]=x.x(f);return u.join("")})}var fp=180/Math.PI,a0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ng(e,t,n,r,i,a){var l,u,h;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(h=e*n+t*r)&&(n-=e*h,r-=t*h),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,h/=u),e*r<t*n&&(e=-e,t=-t,h=-h,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*fp,skewX:Math.atan(h)*fp,scaleX:l,scaleY:u}}var Jo;function Kk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?a0:Ng(t.a,t.b,t.c,t.d,t.e,t.f)}function Qk(e){return e==null||(Jo||(Jo=document.createElementNS("http://www.w3.org/2000/svg","g")),Jo.setAttribute("transform",e),!(e=Jo.transform.baseVal.consolidate()))?a0:(e=e.matrix,Ng(e.a,e.b,e.c,e.d,e.e,e.f))}function _g(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function a(f,m,x,g,v,N){if(f!==x||m!==g){var D=v.push("translate(",null,t,null,n);N.push({i:D-4,x:Us(f,x)},{i:D-2,x:Us(m,g)})}else(x||g)&&v.push("translate("+x+t+g+n)}function l(f,m,x,g){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),g.push({i:x.push(i(x)+"rotate(",null,r)-2,x:Us(f,m)})):m&&x.push(i(x)+"rotate("+m+r)}function u(f,m,x,g){f!==m?g.push({i:x.push(i(x)+"skewX(",null,r)-2,x:Us(f,m)}):m&&x.push(i(x)+"skewX("+m+r)}function h(f,m,x,g,v,N){if(f!==x||m!==g){var D=v.push(i(v)+"scale(",null,",",null,")");N.push({i:D-4,x:Us(f,x)},{i:D-2,x:Us(m,g)})}else(x!==1||g!==1)&&v.push(i(v)+"scale("+x+","+g+")")}return function(f,m){var x=[],g=[];return f=e(f),m=e(m),a(f.translateX,f.translateY,m.translateX,m.translateY,x,g),l(f.rotate,m.rotate,x,g),u(f.skewX,m.skewX,x,g),h(f.scaleX,f.scaleY,m.scaleX,m.scaleY,x,g),f=m=null,function(v){for(var N=-1,D=g.length,j;++N<D;)x[(j=g[N]).i]=j.x(v);return x.join("")}}}var ej=_g(Kk,"px, ","px)","deg)"),tj=_g(Qk,", ",")",")"),nj=1e-12;function pp(e){return((e=Math.exp(e))+1/e)/2}function rj(e){return((e=Math.exp(e))-1/e)/2}function sj(e){return((e=Math.exp(2*e))-1)/(e+1)}const ij=function e(t,n,r){function i(a,l){var u=a[0],h=a[1],f=a[2],m=l[0],x=l[1],g=l[2],v=m-u,N=x-h,D=v*v+N*N,j,S;if(D<nj)S=Math.log(g/f)/t,j=function(W){return[u+W*v,h+W*N,f*Math.exp(t*W*S)]};else{var T=Math.sqrt(D),E=(g*g-f*f+r*D)/(2*f*n*T),M=(g*g-f*f-r*D)/(2*g*n*T),A=Math.log(Math.sqrt(E*E+1)-E),I=Math.log(Math.sqrt(M*M+1)-M);S=(I-A)/t,j=function(W){var J=W*S,le=pp(A),ce=f/(n*T)*(le*sj(t*J+A)-rj(A));return[u+ce*v,h+ce*N,f*le/pp(t*J+A)]}}return j.duration=S*1e3*t/Math.SQRT2,j}return i.rho=function(a){var l=Math.max(.001,+a),u=l*l,h=u*u;return e(l,u,h)},i}(Math.SQRT2,2,4);var fa=0,Fa=0,za=0,Eg=1e3,Rl,$a,Vl=0,Ii=0,oc=0,po=typeof performance=="object"&&performance.now?performance:Date,Mg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ed(){return Ii||(Mg(aj),Ii=po.now()+oc)}function aj(){Ii=0}function zl(){this._call=this._time=this._next=null}zl.prototype=td.prototype={constructor:zl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ed():+n)+(t==null?0:+t),!this._next&&$a!==this&&($a?$a._next=this:Rl=this,$a=this),this._call=e,this._time=n,o0()},stop:function(){this._call&&(this._call=null,this._time=1/0,o0())}};function td(e,t,n){var r=new zl;return r.restart(e,t,n),r}function oj(){ed(),++fa;for(var e=Rl,t;e;)(t=Ii-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fa}function mp(){Ii=(Vl=po.now())+oc,fa=Fa=0;try{oj()}finally{fa=0,cj(),Ii=0}}function lj(){var e=po.now(),t=e-Vl;t>Eg&&(oc-=t,Vl=e)}function cj(){for(var e,t=Rl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rl=n);$a=e,o0(r)}function o0(e){if(!fa){Fa&&(Fa=clearTimeout(Fa));var t=e-Ii;t>24?(e<1/0&&(Fa=setTimeout(mp,e-po.now()-oc)),za&&(za=clearInterval(za))):(za||(Vl=po.now(),za=setInterval(lj,Eg)),fa=1,Mg(mp))}}function gp(e,t,n){var r=new zl;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var uj=vo("start","end","cancel","interrupt"),dj=[],Dg=0,xp=1,l0=2,al=3,yp=4,c0=5,ol=6;function lc(e,t,n,r,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;hj(e,n,{name:t,index:r,group:i,on:uj,tween:dj,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Dg})}function nd(e,t){var n=ns(e,t);if(n.state>Dg)throw new Error("too late; already scheduled");return n}function vs(e,t){var n=ns(e,t);if(n.state>al)throw new Error("too late; already running");return n}function ns(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hj(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=td(a,0,n.time);function a(f){n.state=xp,n.timer.restart(l,n.delay,n.time),n.delay<=f&&l(f-n.delay)}function l(f){var m,x,g,v;if(n.state!==xp)return h();for(m in r)if(v=r[m],v.name===n.name){if(v.state===al)return gp(l);v.state===yp?(v.state=ol,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[m]):+m<t&&(v.state=ol,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[m])}if(gp(function(){n.state===al&&(n.state=yp,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=l0,n.on.call("start",e,e.__data__,n.index,n.group),n.state===l0){for(n.state=al,i=new Array(g=n.tween.length),m=0,x=-1;m<g;++m)(v=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(i[++x]=v);i.length=x+1}}function u(f){for(var m=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(h),n.state=c0,1),x=-1,g=i.length;++x<g;)i[x].call(e,m);n.state===c0&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=ol,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function ll(e,t){var n=e.__transition,r,i,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}i=r.state>l0&&r.state<c0,r.state=ol,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function fj(e){return this.each(function(){ll(this,e)})}function pj(e,t){var n,r;return function(){var i=vs(this,e),a=i.tween;if(a!==n){r=n=a;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}i.tween=r}}function mj(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=vs(this,e),l=a.tween;if(l!==r){i=(r=l).slice();for(var u={name:t,value:n},h=0,f=i.length;h<f;++h)if(i[h].name===t){i[h]=u;break}h===f&&i.push(u)}a.tween=i}}function gj(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ns(this.node(),n).tween,i=0,a=r.length,l;i<a;++i)if((l=r[i]).name===e)return l.value;return null}return this.each((t==null?pj:mj)(n,e,t))}function rd(e,t,n){var r=e._id;return e.each(function(){var i=vs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ns(i,r).value[t]}}function Og(e,t){var n;return(typeof t=="number"?Us:t instanceof ha?hp:(n=ha(t))?(t=n,hp):Xk)(e,t)}function xj(e){return function(){this.removeAttribute(e)}}function yj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bj(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===r?a:a=t(r=l,n)}}function vj(e,t,n){var r,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?a:a=t(r=l,n)}}function wj(e,t,n){var r,i,a;return function(){var l,u=n(this),h;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),h=u+"",l===h?null:l===r&&h===i?a:(i=h,a=t(r=l,u)))}}function Sj(e,t,n){var r,i,a;return function(){var l,u=n(this),h;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),h=u+"",l===h?null:l===r&&h===i?a:(i=h,a=t(r=l,u)))}}function kj(e,t){var n=ac(e),r=n==="transform"?tj:Og;return this.attrTween(e,typeof t=="function"?(n.local?Sj:wj)(n,r,rd(this,"attr."+e,t)):t==null?(n.local?yj:xj)(n):(n.local?vj:bj)(n,r,t))}function jj(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cj(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Tj(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Cj(e,a)),n}return i._value=t,i}function Ij(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&jj(e,a)),n}return i._value=t,i}function Aj(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ac(e);return this.tween(n,(r.local?Tj:Ij)(r,t))}function Nj(e,t){return function(){nd(this,e).delay=+t.apply(this,arguments)}}function _j(e,t){return t=+t,function(){nd(this,e).delay=t}}function Ej(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nj:_j)(t,e)):ns(this.node(),t).delay}function Mj(e,t){return function(){vs(this,e).duration=+t.apply(this,arguments)}}function Dj(e,t){return t=+t,function(){vs(this,e).duration=t}}function Oj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mj:Dj)(t,e)):ns(this.node(),t).duration}function Rj(e,t){if(typeof t!="function")throw new Error;return function(){vs(this,e).ease=t}}function Vj(e){var t=this._id;return arguments.length?this.each(Rj(t,e)):ns(this.node(),t).ease}function zj(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vs(this,e).ease=n}}function Pj(e){if(typeof e!="function")throw new Error;return this.each(zj(this._id,e))}function Bj(e){typeof e!="function"&&(e=fg(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,u=r[i]=[],h,f=0;f<l;++f)(h=a[f])&&e.call(h,h.__data__,f,a)&&u.push(h);return new zs(r,this._parents,this._name,this._id)}function Lj(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var h=t[u],f=n[u],m=h.length,x=l[u]=new Array(m),g,v=0;v<m;++v)(g=h[v]||f[v])&&(x[v]=g);for(;u<r;++u)l[u]=t[u];return new zs(l,this._parents,this._name,this._id)}function Fj(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $j(e,t,n){var r,i,a=Fj(t)?nd:vs;return function(){var l=a(this,e),u=l.on;u!==r&&(i=(r=u).copy()).on(t,n),l.on=i}}function Gj(e,t){var n=this._id;return arguments.length<2?ns(this.node(),n).on.on(e):this.each($j(n,e,t))}function qj(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hj(){return this.on("end.remove",qj(this._id))}function Wj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=X0(e));for(var r=this._groups,i=r.length,a=new Array(i),l=0;l<i;++l)for(var u=r[l],h=u.length,f=a[l]=new Array(h),m,x,g=0;g<h;++g)(m=u[g])&&(x=e.call(m,m.__data__,g,u))&&("__data__"in m&&(x.__data__=m.__data__),f[g]=x,lc(f[g],t,n,g,f,ns(m,n)));return new zs(a,this._parents,t,n)}function Uj(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hg(e));for(var r=this._groups,i=r.length,a=[],l=[],u=0;u<i;++u)for(var h=r[u],f=h.length,m,x=0;x<f;++x)if(m=h[x]){for(var g=e.call(m,m.__data__,x,h),v,N=ns(m,n),D=0,j=g.length;D<j;++D)(v=g[D])&&lc(v,t,n,D,g,N);a.push(g),l.push(m)}return new zs(a,l,t,n)}var Zj=wo.prototype.constructor;function Yj(){return new Zj(this._groups,this._parents)}function Jj(e,t){var n,r,i;return function(){var a=da(this,e),l=(this.style.removeProperty(e),da(this,e));return a===l?null:a===n&&l===r?i:i=t(n=a,r=l)}}function Rg(e){return function(){this.style.removeProperty(e)}}function Xj(e,t,n){var r,i=n+"",a;return function(){var l=da(this,e);return l===i?null:l===r?a:a=t(r=l,n)}}function Kj(e,t,n){var r,i,a;return function(){var l=da(this,e),u=n(this),h=u+"";return u==null&&(h=u=(this.style.removeProperty(e),da(this,e))),l===h?null:l===r&&h===i?a:(i=h,a=t(r=l,u))}}function Qj(e,t){var n,r,i,a="style."+t,l="end."+a,u;return function(){var h=vs(this,e),f=h.on,m=h.value[a]==null?u||(u=Rg(t)):void 0;(f!==n||i!==m)&&(r=(n=f).copy()).on(l,i=m),h.on=r}}function eC(e,t,n){var r=(e+="")=="transform"?ej:Og;return t==null?this.styleTween(e,Jj(e,r)).on("end.style."+e,Rg(e)):typeof t=="function"?this.styleTween(e,Kj(e,r,rd(this,"style."+e,t))).each(Qj(this._id,e)):this.styleTween(e,Xj(e,r,t),n).on("end.style."+e,null)}function tC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function nC(e,t,n){var r,i;function a(){var l=t.apply(this,arguments);return l!==i&&(r=(i=l)&&tC(e,l,n)),r}return a._value=t,a}function rC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,nC(e,t,n??""))}function sC(e){return function(){this.textContent=e}}function iC(e){return function(){var t=e(this);this.textContent=t??""}}function aC(e){return this.tween("text",typeof e=="function"?iC(rd(this,"text",e)):sC(e==null?"":e+""))}function oC(e){return function(t){this.textContent=e.call(this,t)}}function lC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&oC(i)),t}return r._value=e,r}function cC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,lC(e))}function uC(){for(var e=this._name,t=this._id,n=Vg(),r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],u=l.length,h,f=0;f<u;++f)if(h=l[f]){var m=ns(h,t);lc(h,e,n,f,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new zs(r,this._parents,e,n)}function dC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,l){var u={value:l},h={value:function(){--i===0&&a()}};n.each(function(){var f=vs(this,r),m=f.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(h)),f.on=t}),i===0&&a()})}var hC=0;function zs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vg(){return++hC}var Is=wo.prototype;zs.prototype={constructor:zs,select:Wj,selectAll:Uj,selectChild:Is.selectChild,selectChildren:Is.selectChildren,filter:Bj,merge:Lj,selection:Yj,transition:uC,call:Is.call,nodes:Is.nodes,node:Is.node,size:Is.size,empty:Is.empty,each:Is.each,on:Gj,attr:kj,attrTween:Aj,style:eC,styleTween:rC,text:aC,textTween:cC,remove:Hj,tween:gj,delay:Ej,duration:Oj,ease:Vj,easeVarying:Pj,end:dC,[Symbol.iterator]:Is[Symbol.iterator]};function fC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var pC={time:null,delay:0,duration:250,ease:fC};function mC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function gC(e){var t,n;e instanceof zs?(t=e._id,e=e._name):(t=Vg(),(n=pC).time=ed(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var l=r[a],u=l.length,h,f=0;f<u;++f)(h=l[f])&&lc(h,e,t,f,l,n||mC(h,t));return new zs(r,this._parents,e,t)}wo.prototype.interrupt=fj;wo.prototype.transition=gC;function xC(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var a,l=n.length,u,h=0,f=0;for(a=0;a<l;++a)u=n[a],h+=u.x,f+=u.y;for(h=(h/l-e)*r,f=(f/l-t)*r,a=0;a<l;++a)u=n[a],u.x-=h,u.y-=f}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(e=+a,i):e},i.y=function(a){return arguments.length?(t=+a,i):t},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function yC(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return zg(this.cover(t,n),t,n,e)}function zg(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a=e._root,l={data:r},u=e._x0,h=e._y0,f=e._x1,m=e._y1,x,g,v,N,D,j,S,T;if(!a)return e._root=l,e;for(;a.length;)if((D=t>=(x=(u+f)/2))?u=x:f=x,(j=n>=(g=(h+m)/2))?h=g:m=g,i=a,!(a=a[S=j<<1|D]))return i[S]=l,e;if(v=+e._x.call(null,a.data),N=+e._y.call(null,a.data),t===v&&n===N)return l.next=a,i?i[S]=l:e._root=l,e;do i=i?i[S]=new Array(4):e._root=new Array(4),(D=t>=(x=(u+f)/2))?u=x:f=x,(j=n>=(g=(h+m)/2))?h=g:m=g;while((S=j<<1|D)===(T=(N>=g)<<1|v>=x));return i[T]=a,i[S]=l,e}function bC(e){var t,n,r=e.length,i,a,l=new Array(r),u=new Array(r),h=1/0,f=1/0,m=-1/0,x=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(l[n]=i,u[n]=a,i<h&&(h=i),i>m&&(m=i),a<f&&(f=a),a>x&&(x=a));if(h>m||f>x)return this;for(this.cover(h,f).cover(m,x),n=0;n<r;++n)zg(this,l[n],u[n],e[n]);return this}function vC(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var l=i-n||1,u=this._root,h,f;n>e||e>=i||r>t||t>=a;)switch(f=(t<r)<<1|e<n,h=new Array(4),h[f]=u,u=h,l*=2,f){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function wC(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function SC(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function fr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function kC(e,t,n){var r,i=this._x0,a=this._y0,l,u,h,f,m=this._x1,x=this._y1,g=[],v=this._root,N,D;for(v&&g.push(new fr(v,i,a,m,x)),n==null?n=1/0:(i=e-n,a=t-n,m=e+n,x=t+n,n*=n);N=g.pop();)if(!(!(v=N.node)||(l=N.x0)>m||(u=N.y0)>x||(h=N.x1)<i||(f=N.y1)<a))if(v.length){var j=(l+h)/2,S=(u+f)/2;g.push(new fr(v[3],j,S,h,f),new fr(v[2],l,S,j,f),new fr(v[1],j,u,h,S),new fr(v[0],l,u,j,S)),(D=(t>=S)<<1|e>=j)&&(N=g[g.length-1],g[g.length-1]=g[g.length-1-D],g[g.length-1-D]=N)}else{var T=e-+this._x.call(null,v.data),E=t-+this._y.call(null,v.data),M=T*T+E*E;if(M<n){var A=Math.sqrt(n=M);i=e-A,a=t-A,m=e+A,x=t+A,r=v.data}}return r}function jC(e){if(isNaN(m=+this._x.call(null,e))||isNaN(x=+this._y.call(null,e)))return this;var t,n=this._root,r,i,a,l=this._x0,u=this._y0,h=this._x1,f=this._y1,m,x,g,v,N,D,j,S;if(!n)return this;if(n.length)for(;;){if((N=m>=(g=(l+h)/2))?l=g:h=g,(D=x>=(v=(u+f)/2))?u=v:f=v,t=n,!(n=n[j=D<<1|N]))return this;if(!n.length)break;(t[j+1&3]||t[j+2&3]||t[j+3&3])&&(r=t,S=j)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):t?(a?t[j]=a:delete t[j],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=a,this)}function CC(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function TC(){return this._root}function IC(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function AC(e){var t=[],n,r=this._root,i,a,l,u,h;for(r&&t.push(new fr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,a=n.x0,l=n.y0,u=n.x1,h=n.y1)&&r.length){var f=(a+u)/2,m=(l+h)/2;(i=r[3])&&t.push(new fr(i,f,m,u,h)),(i=r[2])&&t.push(new fr(i,a,m,f,h)),(i=r[1])&&t.push(new fr(i,f,l,u,m)),(i=r[0])&&t.push(new fr(i,a,l,f,m))}return this}function NC(e){var t=[],n=[],r;for(this._root&&t.push(new fr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var a,l=r.x0,u=r.y0,h=r.x1,f=r.y1,m=(l+h)/2,x=(u+f)/2;(a=i[0])&&t.push(new fr(a,l,u,m,x)),(a=i[1])&&t.push(new fr(a,m,u,h,x)),(a=i[2])&&t.push(new fr(a,l,x,m,f)),(a=i[3])&&t.push(new fr(a,m,x,h,f))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function _C(e){return e[0]}function EC(e){return arguments.length?(this._x=e,this):this._x}function MC(e){return e[1]}function DC(e){return arguments.length?(this._y=e,this):this._y}function sd(e,t,n){var r=new id(t??_C,n??MC,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function id(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function bp(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xr=sd.prototype=id.prototype;xr.copy=function(){var e=new id(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=bp(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=bp(r));return e};xr.add=yC;xr.addAll=bC;xr.cover=vC;xr.data=wC;xr.extent=SC;xr.find=kC;xr.remove=jC;xr.removeAll=CC;xr.root=TC;xr.size=IC;xr.visit=AC;xr.visitAfter=NC;xr.x=EC;xr.y=DC;function pr(e){return function(){return e}}function Qs(e){return(e()-.5)*1e-6}function OC(e){return e.x+e.vx}function RC(e){return e.y+e.vy}function VC(e){var t,n,r,i=1,a=1;typeof e!="function"&&(e=pr(e==null?1:+e));function l(){for(var f,m=t.length,x,g,v,N,D,j,S=0;S<a;++S)for(x=sd(t,OC,RC).visitAfter(u),f=0;f<m;++f)g=t[f],D=n[g.index],j=D*D,v=g.x+g.vx,N=g.y+g.vy,x.visit(T);function T(E,M,A,I,W){var J=E.data,le=E.r,ce=D+le;if(J){if(J.index>g.index){var F=v-J.x-J.vx,Q=N-J.y-J.vy,de=F*F+Q*Q;de<ce*ce&&(F===0&&(F=Qs(r),de+=F*F),Q===0&&(Q=Qs(r),de+=Q*Q),de=(ce-(de=Math.sqrt(de)))/de*i,g.vx+=(F*=de)*(ce=(le*=le)/(j+le)),g.vy+=(Q*=de)*ce,J.vx-=F*(ce=1-ce),J.vy-=Q*ce)}return}return M>v+ce||I<v-ce||A>N+ce||W<N-ce}}function u(f){if(f.data)return f.r=n[f.data.index];for(var m=f.r=0;m<4;++m)f[m]&&f[m].r>f.r&&(f.r=f[m].r)}function h(){if(t){var f,m=t.length,x;for(n=new Array(m),f=0;f<m;++f)x=t[f],n[x.index]=+e(x,f,t)}}return l.initialize=function(f,m){t=f,r=m,h()},l.iterations=function(f){return arguments.length?(a=+f,l):a},l.strength=function(f){return arguments.length?(i=+f,l):i},l.radius=function(f){return arguments.length?(e=typeof f=="function"?f:pr(+f),h(),l):e},l}function zC(e){return e.index}function vp(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function PC(e){var t=zC,n=x,r,i=pr(30),a,l,u,h,f,m=1;e==null&&(e=[]);function x(j){return 1/Math.min(u[j.source.index],u[j.target.index])}function g(j){for(var S=0,T=e.length;S<m;++S)for(var E=0,M,A,I,W,J,le,ce;E<T;++E)M=e[E],A=M.source,I=M.target,W=I.x+I.vx-A.x-A.vx||Qs(f),J=I.y+I.vy-A.y-A.vy||Qs(f),le=Math.sqrt(W*W+J*J),le=(le-a[E])/le*j*r[E],W*=le,J*=le,I.vx-=W*(ce=h[E]),I.vy-=J*ce,A.vx+=W*(ce=1-ce),A.vy+=J*ce}function v(){if(l){var j,S=l.length,T=e.length,E=new Map(l.map((A,I)=>[t(A,I,l),A])),M;for(j=0,u=new Array(S);j<T;++j)M=e[j],M.index=j,typeof M.source!="object"&&(M.source=vp(E,M.source)),typeof M.target!="object"&&(M.target=vp(E,M.target)),u[M.source.index]=(u[M.source.index]||0)+1,u[M.target.index]=(u[M.target.index]||0)+1;for(j=0,h=new Array(T);j<T;++j)M=e[j],h[j]=u[M.source.index]/(u[M.source.index]+u[M.target.index]);r=new Array(T),N(),a=new Array(T),D()}}function N(){if(l)for(var j=0,S=e.length;j<S;++j)r[j]=+n(e[j],j,e)}function D(){if(l)for(var j=0,S=e.length;j<S;++j)a[j]=+i(e[j],j,e)}return g.initialize=function(j,S){l=j,f=S,v()},g.links=function(j){return arguments.length?(e=j,v(),g):e},g.id=function(j){return arguments.length?(t=j,g):t},g.iterations=function(j){return arguments.length?(m=+j,g):m},g.strength=function(j){return arguments.length?(n=typeof j=="function"?j:pr(+j),N(),g):n},g.distance=function(j){return arguments.length?(i=typeof j=="function"?j:pr(+j),D(),g):i},g}const BC=1664525,LC=1013904223,wp=4294967296;function FC(){let e=1;return()=>(e=(BC*e+LC)%wp)/wp}function $C(e){return e.x}function GC(e){return e.y}var qC=10,HC=Math.PI*(3-Math.sqrt(5));function WC(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,l=.6,u=new Map,h=td(x),f=vo("tick","end"),m=FC();e==null&&(e=[]);function x(){g(),f.call("tick",t),n<r&&(h.stop(),f.call("end",t))}function g(D){var j,S=e.length,T;D===void 0&&(D=1);for(var E=0;E<D;++E)for(n+=(a-n)*i,u.forEach(function(M){M(n)}),j=0;j<S;++j)T=e[j],T.fx==null?T.x+=T.vx*=l:(T.x=T.fx,T.vx=0),T.fy==null?T.y+=T.vy*=l:(T.y=T.fy,T.vy=0);return t}function v(){for(var D=0,j=e.length,S;D<j;++D){if(S=e[D],S.index=D,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var T=qC*Math.sqrt(.5+D),E=D*HC;S.x=T*Math.cos(E),S.y=T*Math.sin(E)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function N(D){return D.initialize&&D.initialize(e,m),D}return v(),t={tick:g,restart:function(){return h.restart(x),t},stop:function(){return h.stop(),t},nodes:function(D){return arguments.length?(e=D,v(),u.forEach(N),t):e},alpha:function(D){return arguments.length?(n=+D,t):n},alphaMin:function(D){return arguments.length?(r=+D,t):r},alphaDecay:function(D){return arguments.length?(i=+D,t):+i},alphaTarget:function(D){return arguments.length?(a=+D,t):a},velocityDecay:function(D){return arguments.length?(l=1-D,t):1-l},randomSource:function(D){return arguments.length?(m=D,u.forEach(N),t):m},force:function(D,j){return arguments.length>1?(j==null?u.delete(D):u.set(D,N(j)),t):u.get(D)},find:function(D,j,S){var T=0,E=e.length,M,A,I,W,J;for(S==null?S=1/0:S*=S,T=0;T<E;++T)W=e[T],M=D-W.x,A=j-W.y,I=M*M+A*A,I<S&&(J=W,S=I);return J},on:function(D,j){return arguments.length>1?(f.on(D,j),t):f.on(D)}}}function UC(){var e,t,n,r,i=pr(-30),a,l=1,u=1/0,h=.81;function f(v){var N,D=e.length,j=sd(e,$C,GC).visitAfter(x);for(r=v,N=0;N<D;++N)t=e[N],j.visit(g)}function m(){if(e){var v,N=e.length,D;for(a=new Array(N),v=0;v<N;++v)D=e[v],a[D.index]=+i(D,v,e)}}function x(v){var N=0,D,j,S=0,T,E,M;if(v.length){for(T=E=M=0;M<4;++M)(D=v[M])&&(j=Math.abs(D.value))&&(N+=D.value,S+=j,T+=j*D.x,E+=j*D.y);v.x=T/S,v.y=E/S}else{D=v,D.x=D.data.x,D.y=D.data.y;do N+=a[D.data.index];while(D=D.next)}v.value=N}function g(v,N,D,j){if(!v.value)return!0;var S=v.x-t.x,T=v.y-t.y,E=j-N,M=S*S+T*T;if(E*E/h<M)return M<u&&(S===0&&(S=Qs(n),M+=S*S),T===0&&(T=Qs(n),M+=T*T),M<l&&(M=Math.sqrt(l*M)),t.vx+=S*v.value*r/M,t.vy+=T*v.value*r/M),!0;if(v.length||M>=u)return;(v.data!==t||v.next)&&(S===0&&(S=Qs(n),M+=S*S),T===0&&(T=Qs(n),M+=T*T),M<l&&(M=Math.sqrt(l*M)));do v.data!==t&&(E=a[v.data.index]*r/M,t.vx+=S*E,t.vy+=T*E);while(v=v.next)}return f.initialize=function(v,N){e=v,n=N,m()},f.strength=function(v){return arguments.length?(i=typeof v=="function"?v:pr(+v),m(),f):i},f.distanceMin=function(v){return arguments.length?(l=v*v,f):Math.sqrt(l)},f.distanceMax=function(v){return arguments.length?(u=v*v,f):Math.sqrt(u)},f.theta=function(v){return arguments.length?(h=v*v,f):Math.sqrt(h)},f}function ZC(e){var t=pr(.1),n,r,i;typeof e!="function"&&(e=pr(e==null?0:+e));function a(u){for(var h=0,f=n.length,m;h<f;++h)m=n[h],m.vx+=(i[h]-m.x)*r[h]*u}function l(){if(n){var u,h=n.length;for(r=new Array(h),i=new Array(h),u=0;u<h;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,l()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:pr(+u),l(),a):t},a.x=function(u){return arguments.length?(e=typeof u=="function"?u:pr(+u),l(),a):e},a}function YC(e){var t=pr(.1),n,r,i;typeof e!="function"&&(e=pr(e==null?0:+e));function a(u){for(var h=0,f=n.length,m;h<f;++h)m=n[h],m.vy+=(i[h]-m.y)*r[h]*u}function l(){if(n){var u,h=n.length;for(r=new Array(h),i=new Array(h),u=0;u<h;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,l()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:pr(+u),l(),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:pr(+u),l(),a):e},a}const Xo=e=>()=>e;function JC(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ds(e,t,n){this.k=e,this.x=t,this.y=n}Ds.prototype={constructor:Ds,scale:function(e){return e===1?this:new Ds(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ds(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pl=new Ds(1,0,0);Ds.prototype;function gu(e){e.stopImmediatePropagation()}function Pa(e){e.preventDefault(),e.stopImmediatePropagation()}function XC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function KC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sp(){return this.__zoom||Pl}function QC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eT(){return navigator.maxTouchPoints||"ontouchstart"in this}function tT(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function nT(){var e=XC,t=KC,n=tT,r=QC,i=eT,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,h=ij,f=vo("start","zoom","end"),m,x,g,v=500,N=150,D=0,j=10;function S(q){q.property("__zoom",Sp).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",le).on("dblclick.zoom",ce).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",de).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(q,pe,H,L){var X=q.selection?q.selection():q;X.property("__zoom",Sp),q!==X?A(q,pe,H,L):X.interrupt().each(function(){I(this,arguments).event(L).start().zoom(null,typeof pe=="function"?pe.apply(this,arguments):pe).end()})},S.scaleBy=function(q,pe,H,L){S.scaleTo(q,function(){var X=this.__zoom.k,he=typeof pe=="function"?pe.apply(this,arguments):pe;return X*he},H,L)},S.scaleTo=function(q,pe,H,L){S.transform(q,function(){var X=t.apply(this,arguments),he=this.__zoom,ge=H==null?M(X):typeof H=="function"?H.apply(this,arguments):H,oe=he.invert(ge),Se=typeof pe=="function"?pe.apply(this,arguments):pe;return n(E(T(he,Se),ge,oe),X,l)},H,L)},S.translateBy=function(q,pe,H,L){S.transform(q,function(){return n(this.__zoom.translate(typeof pe=="function"?pe.apply(this,arguments):pe,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),l)},null,L)},S.translateTo=function(q,pe,H,L,X){S.transform(q,function(){var he=t.apply(this,arguments),ge=this.__zoom,oe=L==null?M(he):typeof L=="function"?L.apply(this,arguments):L;return n(Pl.translate(oe[0],oe[1]).scale(ge.k).translate(typeof pe=="function"?-pe.apply(this,arguments):-pe,typeof H=="function"?-H.apply(this,arguments):-H),he,l)},L,X)};function T(q,pe){return pe=Math.max(a[0],Math.min(a[1],pe)),pe===q.k?q:new Ds(pe,q.x,q.y)}function E(q,pe,H){var L=pe[0]-H[0]*q.k,X=pe[1]-H[1]*q.k;return L===q.x&&X===q.y?q:new Ds(q.k,L,X)}function M(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function A(q,pe,H,L){q.on("start.zoom",function(){I(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(L).end()}).tween("zoom",function(){var X=this,he=arguments,ge=I(X,he).event(L),oe=t.apply(X,he),Se=H==null?M(oe):typeof H=="function"?H.apply(X,he):H,ne=Math.max(oe[1][0]-oe[0][0],oe[1][1]-oe[0][1]),be=X.__zoom,De=typeof pe=="function"?pe.apply(X,he):pe,Pe=h(be.invert(Se).concat(ne/be.k),De.invert(Se).concat(ne/De.k));return function(Ve){if(Ve===1)Ve=De;else{var ct=Pe(Ve),Dt=ne/ct[2];Ve=new Ds(Dt,Se[0]-ct[0]*Dt,Se[1]-ct[1]*Dt)}ge.zoom(null,Ve)}})}function I(q,pe,H){return!H&&q.__zooming||new W(q,pe)}function W(q,pe){this.that=q,this.args=pe,this.active=0,this.sourceEvent=null,this.extent=t.apply(q,pe),this.taps=0}W.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,pe){return this.mouse&&q!=="mouse"&&(this.mouse[1]=pe.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=pe.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=pe.invert(this.touch1[0])),this.that.__zoom=pe,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var pe=hr(this.that).datum();f.call(q,this.that,new JC(q,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:f}),pe)}};function J(q,...pe){if(!e.apply(this,arguments))return;var H=I(this,pe).event(q),L=this.__zoom,X=Math.max(a[0],Math.min(a[1],L.k*Math.pow(2,r.apply(this,arguments)))),he=As(q);if(H.wheel)(H.mouse[0][0]!==he[0]||H.mouse[0][1]!==he[1])&&(H.mouse[1]=L.invert(H.mouse[0]=he)),clearTimeout(H.wheel);else{if(L.k===X)return;H.mouse=[he,L.invert(he)],ll(this),H.start()}Pa(q),H.wheel=setTimeout(ge,N),H.zoom("mouse",n(E(T(L,X),H.mouse[0],H.mouse[1]),H.extent,l));function ge(){H.wheel=null,H.end()}}function le(q,...pe){if(g||!e.apply(this,arguments))return;var H=q.currentTarget,L=I(this,pe,!0).event(q),X=hr(q.view).on("mousemove.zoom",Se,!0).on("mouseup.zoom",ne,!0),he=As(q,H),ge=q.clientX,oe=q.clientY;kg(q.view),gu(q),L.mouse=[he,this.__zoom.invert(he)],ll(this),L.start();function Se(be){if(Pa(be),!L.moved){var De=be.clientX-ge,Pe=be.clientY-oe;L.moved=De*De+Pe*Pe>D}L.event(be).zoom("mouse",n(E(L.that.__zoom,L.mouse[0]=As(be,H),L.mouse[1]),L.extent,l))}function ne(be){X.on("mousemove.zoom mouseup.zoom",null),jg(be.view,L.moved),Pa(be),L.event(be).end()}}function ce(q,...pe){if(e.apply(this,arguments)){var H=this.__zoom,L=As(q.changedTouches?q.changedTouches[0]:q,this),X=H.invert(L),he=H.k*(q.shiftKey?.5:2),ge=n(E(T(H,he),L,X),t.apply(this,pe),l);Pa(q),u>0?hr(this).transition().duration(u).call(A,ge,L,q):hr(this).call(S.transform,ge,L,q)}}function F(q,...pe){if(e.apply(this,arguments)){var H=q.touches,L=H.length,X=I(this,pe,q.changedTouches.length===L).event(q),he,ge,oe,Se;for(gu(q),ge=0;ge<L;++ge)oe=H[ge],Se=As(oe,this),Se=[Se,this.__zoom.invert(Se),oe.identifier],X.touch0?!X.touch1&&X.touch0[2]!==Se[2]&&(X.touch1=Se,X.taps=0):(X.touch0=Se,he=!0,X.taps=1+!!m);m&&(m=clearTimeout(m)),he&&(X.taps<2&&(x=Se[0],m=setTimeout(function(){m=null},v)),ll(this),X.start())}}function Q(q,...pe){if(this.__zooming){var H=I(this,pe).event(q),L=q.changedTouches,X=L.length,he,ge,oe,Se;for(Pa(q),he=0;he<X;++he)ge=L[he],oe=As(ge,this),H.touch0&&H.touch0[2]===ge.identifier?H.touch0[0]=oe:H.touch1&&H.touch1[2]===ge.identifier&&(H.touch1[0]=oe);if(ge=H.that.__zoom,H.touch1){var ne=H.touch0[0],be=H.touch0[1],De=H.touch1[0],Pe=H.touch1[1],Ve=(Ve=De[0]-ne[0])*Ve+(Ve=De[1]-ne[1])*Ve,ct=(ct=Pe[0]-be[0])*ct+(ct=Pe[1]-be[1])*ct;ge=T(ge,Math.sqrt(Ve/ct)),oe=[(ne[0]+De[0])/2,(ne[1]+De[1])/2],Se=[(be[0]+Pe[0])/2,(be[1]+Pe[1])/2]}else if(H.touch0)oe=H.touch0[0],Se=H.touch0[1];else return;H.zoom("touch",n(E(ge,oe,Se),H.extent,l))}}function de(q,...pe){if(this.__zooming){var H=I(this,pe).event(q),L=q.changedTouches,X=L.length,he,ge;for(gu(q),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),he=0;he<X;++he)ge=L[he],H.touch0&&H.touch0[2]===ge.identifier?delete H.touch0:H.touch1&&H.touch1[2]===ge.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(ge=As(ge,this),Math.hypot(x[0]-ge[0],x[1]-ge[1])<j)){var oe=hr(this).on("dblclick.zoom");oe&&oe.apply(this,arguments)}}}return S.wheelDelta=function(q){return arguments.length?(r=typeof q=="function"?q:Xo(+q),S):r},S.filter=function(q){return arguments.length?(e=typeof q=="function"?q:Xo(!!q),S):e},S.touchable=function(q){return arguments.length?(i=typeof q=="function"?q:Xo(!!q),S):i},S.extent=function(q){return arguments.length?(t=typeof q=="function"?q:Xo([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),S):t},S.scaleExtent=function(q){return arguments.length?(a[0]=+q[0],a[1]=+q[1],S):[a[0],a[1]]},S.translateExtent=function(q){return arguments.length?(l[0][0]=+q[0][0],l[1][0]=+q[1][0],l[0][1]=+q[0][1],l[1][1]=+q[1][1],S):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},S.constrain=function(q){return arguments.length?(n=q,S):n},S.duration=function(q){return arguments.length?(u=+q,S):u},S.interpolate=function(q){return arguments.length?(h=q,S):h},S.on=function(){var q=f.on.apply(f,arguments);return q===f?S:q},S.clickDistance=function(q){return arguments.length?(D=(q=+q)*q,S):Math.sqrt(D)},S.tapDistance=function(q){return arguments.length?(j=+q,S):j},S}const rT=({tokens:e,collections:t,dimensions:n,platforms:r,taxonomies:i,resolvedValueTypes:a})=>{const l=P.useRef(null),u=P.useRef(null),[h,f]=P.useState(!1),m=P.useRef(null),x={systemName:"Token Analysis",systemId:"token-analysis",tokens:e,resolvedValueTypes:a,tokenCollections:t,dimensions:n,platforms:r,taxonomies:i,version:"1.0.0",versionHistory:[]};P.useEffect(()=>{console.log("Loaded Data:",{tokenCount:e==null?void 0:e.length,collectionCount:t==null?void 0:t.length,dimensionCount:n==null?void 0:n.length,platformCount:r==null?void 0:r.length,taxonomyCount:i==null?void 0:i.length,valueTypeCount:a==null?void 0:a.length,sampleTokens:e==null?void 0:e.slice(0,2),sampleValueTypes:a==null?void 0:a.slice(0,2)})},[e,t,n,r,i,a]),P.useEffect(()=>{const E=()=>{if(l.current){console.log("SVG element found:",l.current);const M=nT().scaleExtent([.1,4]).on("zoom",A=>{hr(l.current).select("g").attr("transform",A.transform)});return u.current=M,f(!0),console.log("Zoom behavior initialized"),!0}return!1};if(!E()){const M=setInterval(()=>{E()&&clearInterval(M)},100),A=setTimeout(()=>{clearInterval(M)},5e3);return()=>{clearInterval(M),clearTimeout(A)}}},[]),P.useEffect(()=>{if(console.log("Checking visualization readiness...",{isInitialized:h,hasSvgRef:!!l.current,hasZoom:!!u.current,hasTokens:!!e,hasValueTypes:!!a}),!h||!l.current||!u.current){console.log("Not ready for visualization yet");return}try{if(!e||!a){console.error("Missing required data:",{hasTokens:!!e,hasValueTypes:!!a});return}const E=sr.validateData(x);if(!E.isValid){console.error("Invalid schema:",E.errors);return}console.log("Creating visualization..."),D()}catch(E){console.error("Error creating visualization:",E)}},[h,x]);const g=E=>{!E.active&&m.current&&m.current.alphaTarget(.3).restart(),E.subject.fx=E.subject.x,E.subject.fy=E.subject.y},v=E=>{E.subject.fx=E.x,E.subject.fy=E.y},N=E=>{!E.active&&m.current&&m.current.alphaTarget(0),E.subject.fx=null,E.subject.fy=null},D=()=>{var E;if(!l.current||!u.current){console.error("Missing required refs:",{hasSvgRef:!!l.current,hasZoom:!!u.current});return}try{hr(l.current).selectAll("*").remove();const M={COLOR:"#48BB78",DIMENSION:"#4299E1",SPACING:"#667EEA",FONT_FAMILY:"#9F7AEA",FONT_WEIGHT:"#ED64A6",FONT_SIZE:"#F56565",LINE_HEIGHT:"#ED8936",LETTER_SPACING:"#ECC94B",DURATION:"#38B2AC",CUBIC_BEZIER:"#4FD1C5",BLUR:"#4A5568",SPREAD:"#718096",RADIUS:"#A0AEC0"},A=e.map(X=>{var ge,oe;const he=a.find(Se=>Se.id===X.resolvedValueTypeId);return{id:X.id,name:X.displayName,type:X.resolvedValueTypeId,valueTypeName:(he==null?void 0:he.displayName)||"Unknown",valueTypeCategory:(he==null?void 0:he.type)||"Unknown",group:1,value:(oe=(ge=X.valuesByMode)==null?void 0:ge[0])==null?void 0:oe.value}}),I=[];e.forEach(X=>{var he;console.log(`Processing token: ${X.displayName} (${X.id})`),(he=X.valuesByMode)==null||he.forEach(ge=>{const oe=ge.value;if(console.log("Checking value for mode:",ge),oe&&typeof oe=="object"&&"tokenId"in oe){const Se=oe.tokenId;console.log(`Found tokenId reference: ${Se}`);const ne=e.find(be=>be.id===Se);if(ne)if(console.log(`Found target token: ${ne.displayName} (${ne.id})`),I.some(De=>De.source.id===X.id&&De.target.id===ne.id))console.log(`Link already exists between ${X.displayName} and ${ne.displayName}`);else{const De=A.find(Ve=>Ve.id===X.id),Pe=A.find(Ve=>Ve.id===ne.id);De&&Pe?(I.push({source:De,target:Pe,value:1}),console.log(`Created link: ${X.displayName} -> ${ne.displayName}`)):console.log(`Could not find node objects for link: ${X.displayName} -> ${ne.displayName}`)}else console.log(`Target token not found for ID: ${Se}`)}else console.log("Value does not contain tokenId:",oe)})}),console.log("All created links:",I.map(X=>({source:X.source.name,target:X.target.name,sourceId:X.source.id,targetId:X.target.id}))),console.log("Visualization Data:",{nodeCount:A.length,linkCount:I.length,sampleNodes:A.slice(0,2),sampleLinks:I.slice(0,2)});const W=l.current.clientWidth,J=l.current.clientHeight,le=50,ce=hr(l.current),F=ce.append("g");ce.call(u.current);const Q=WC().force("link",PC().id(X=>X.id).distance(150).strength(.2)).force("charge",UC().strength(-400).distanceMax(300)).force("center",xC(W/2,J/2)).force("collision",VC(30)).force("x",ZC(W/2).strength(.1)).force("y",YC(J/2).strength(.1)).force("cluster",X=>{const ge=Q.nodes(),oe=new Map;ge.forEach(ne=>{var De;const be=ne.valueTypeCategory;oe.has(be)||oe.set(be,[]),(De=oe.get(be))==null||De.push(ne)});const Se=new Map;oe.forEach((ne,be)=>{const De={x:tp(ne,Pe=>Pe.x??0)??0,y:tp(ne,Pe=>Pe.y??0)??0};Se.set(be,De)}),ge.forEach(ne=>{const be=Se.get(ne.valueTypeCategory);if(be){const De=be.x-(ne.x??0),Pe=be.y-(ne.y??0);ne.x=(ne.x??0)+De*.2*X,ne.y=(ne.y??0)+Pe*.2*X}})});m.current=Q;const de=F.append("g").attr("class","links").selectAll("line").data(I).enter().append("line").attr("stroke","#4A5568").attr("stroke-width",2).attr("stroke-opacity",.8),q=F.append("g").attr("class","nodes").selectAll("circle").data(A).enter().append("circle").attr("r",8).attr("fill",X=>M[X.valueTypeCategory]||"#A0AEC0").attr("stroke",X=>{var ge;const he=M[X.valueTypeCategory]||"#A0AEC0";return((ge=ha(he))==null?void 0:ge.darker(.5).toString())||he}).attr("stroke-width",2).call(Dk().on("start",g).on("drag",v).on("end",N)),pe=F.append("g").attr("class","labels").selectAll("text").data(A).enter().append("text").text(X=>X.name).attr("font-size",12).attr("dx",12).attr("dy",4).attr("fill","#2D3748").attr("pointer-events","none");(E=Q.force("link"))==null||E.links(I),Q.nodes(A).on("tick",()=>{A.forEach(X=>{X.x=Math.max(le,Math.min(W-le,X.x??0)),X.y=Math.max(le,Math.min(J-le,X.y??0))}),de.attr("x1",X=>X.source.x??0).attr("y1",X=>X.source.y??0).attr("x2",X=>X.target.x??0).attr("y2",X=>X.target.y??0),q.attr("cx",X=>X.x??0).attr("cy",X=>X.y??0),pe.attr("x",X=>X.x??0).attr("y",X=>X.y??0)});const L=Pl.translate(W/2,J/2).scale(.8).translate(-W/2,-J/2);ce.transition().duration(750).call(u.current.transform,L),console.log("Visualization created successfully")}catch(M){console.error("Error in createVisualization:",M)}},j=()=>{l.current&&u.current&&u.current.scaleBy(hr(l.current),1.3)},S=()=>{l.current&&u.current&&u.current.scaleBy(hr(l.current),.7)},T=()=>{l.current&&u.current&&hr(l.current).transition().duration(750).call(u.current.transform,Pl)};return s.jsxs(Z,{children:[s.jsxs(xe,{gap:2,mb:4,children:[s.jsx(Ne,{size:"sm",onClick:j,children:"Zoom In"}),s.jsx(Ne,{size:"sm",onClick:S,children:"Zoom Out"}),s.jsx(Ne,{size:"sm",onClick:T,children:"Reset"})]}),s.jsx(Z,{borderWidth:1,borderRadius:"md",overflow:"hidden",bg:"white",children:s.jsx("svg",{ref:l,width:"100%",height:"600",style:{background:"#F7FAFC"}})})]})};function sT({dimensions:e,setDimensions:t,isOpen:n,onClose:r,editingIndex:i}){const[a,l]=P.useState({id:"",displayName:"",description:"",modes:[],defaultMode:"",required:!1,resolvedValueTypeIds:[]}),[u,h]=P.useState({id:"",name:"",description:""}),[f,m]=P.useState(!1),[x,g]=P.useState(null),v=or();St.useEffect(()=>{var A;if(i!==null&&e[i]){const I=e[i];console.log("[DimensionsEditor] Editing existing dimension:",I),l({id:I.id,displayName:I.displayName,description:I.description||"",modes:I.modes,defaultMode:I.defaultMode||(((A=I.modes[0])==null?void 0:A.id)??""),required:I.required||!1,resolvedValueTypeIds:I.resolvedValueTypeIds||[]})}else console.log("[DimensionsEditor] Creating new dimension"),l({id:Ar("dimension"),displayName:"",description:"",modes:[],defaultMode:"",required:!1,resolvedValueTypeIds:[]})},[i,e,n]);const N=(A,I)=>{console.log(`[DimensionsEditor] Form field "${A}" changed to:`,I),l(W=>({...W,[A]:I}))},D=(A=null)=>{if(console.log("[DimensionsEditor] Opening mode dialog for index:",A),g(A),A!==null&&a.modes){const I=a.modes[A];console.log("[DimensionsEditor] Editing existing mode:",I),h({id:I.id,name:I.name,description:I.description||""})}else console.log("[DimensionsEditor] Creating new mode"),h({id:Ar("mode"),name:"",description:""});m(!0)},j=()=>{m(!1),g(null)},S=(A,I)=>{h(W=>({...W,[A]:I}))},T=()=>{if(console.log("[DimensionsEditor] Saving mode:",u),!u.id||!u.name){console.error("[DimensionsEditor] Mode validation failed: Missing id or name");return}const A=a.modes?[...a.modes]:[];let I=a.defaultMode;x!==null?(console.log("[DimensionsEditor] Updating existing mode at index:",x),A[x]={...u,dimensionId:a.id}):(console.log("[DimensionsEditor] Adding new mode"),A.push({...u,dimensionId:a.id}),A.length===1&&(I=A[0].id,console.log("[DimensionsEditor] Setting first mode as default:",I))),l(W=>({...W,modes:A,defaultMode:I})),m(!1),g(null)},E=A=>{l(I=>{var le,ce;const W=(I.modes||[]).filter((F,Q)=>Q!==A);let J=I.defaultMode;return((le=I.modes[A])==null?void 0:le.id)===I.defaultMode&&(J=((ce=W[0])==null?void 0:ce.id)||""),{...I,modes:W,defaultMode:J}})},M=()=>{if(console.log("[DimensionsEditor] Starting save process with form data:",a),!a.id||!a.displayName){console.error("[DimensionsEditor] Validation failed: Missing id or displayName",a),v({title:"Required Fields Missing",description:"ID and display name are required fields.",status:"error",duration:4e3,isClosable:!0});return}if(!a.modes||a.modes.length===0){console.error("[DimensionsEditor] Validation failed: No modes",a),v({title:"At least one mode required",description:"You must add at least one mode to the dimension.",status:"error",duration:4e3,isClosable:!0});return}if(!a.defaultMode||!a.modes.some(F=>F.id===a.defaultMode)){console.error("[DimensionsEditor] Validation failed: Invalid defaultMode",a),v({title:"Invalid Default Mode",description:"Please select a valid default mode from the available modes.",status:"error",duration:4e3,isClosable:!0});return}if(typeof a.required!="boolean"){console.error("[DimensionsEditor] Validation failed: required is not boolean",a),v({title:"Required Field Missing",description:'The "Required" field must be set.',status:"error",duration:4e3,isClosable:!0});return}for(const F of a.modes)if(!F.id||!F.name||!F.dimensionId){console.error("[DimensionsEditor] Validation failed: Mode missing required fields",F),v({title:"Invalid Mode",description:"Each mode must have an id, name, and dimensionId.",status:"error",duration:4e3,isClosable:!0});return}const A=[...e],I={...a,modes:a.modes||[],required:a.required,defaultMode:a.defaultMode,resolvedValueTypeIds:a.resolvedValueTypeIds||[]};console.log("[DimensionsEditor] Prepared dimension to save:",I),i!==null?(console.log("[DimensionsEditor] Updating existing dimension at index:",i),A[i]=I):(console.log("[DimensionsEditor] Adding new dimension"),A.push(I));const W=localStorage.getItem("tokenSystem");console.log("[DimensionsEditor] Existing data from storage:",W);const J=W?JSON.parse(W):{systemName:"Design System",systemId:"design-system",description:"Design system for validation",tokenCollections:[],tokens:[],platforms:[],taxonomies:[],version:"1.0.0",versionHistory:[]},le=ve.getValueTypes()||[],ce={...J,dimensions:A,resolvedValueTypes:le};if(console.log("[DimensionsEditor] Validation data:",ce),typeof sr<"u"&&typeof sr.validateData=="function"){console.log("[DimensionsEditor] Calling ValidationService");const F=sr.validateData(ce);if(console.log("[DimensionsEditor] Validation result:",F),!F.isValid){console.error("[DimensionsEditor] Schema validation failed:",F.errors),v({title:"Schema Validation Failed",description:Array.isArray(F.errors)?F.errors.join(", "):"See console for details.",status:"error",duration:5e3,isClosable:!0});return}}t(A),r(),v({title:"Dimension Saved",description:`Successfully ${i!==null?"updated":"created"} dimension "${a.displayName}"`,status:"success",duration:3e3,isClosable:!0})};return s.jsxs(s.Fragment,{children:[s.jsxs(Hn,{isOpen:n,onClose:r,size:"lg",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:i!==null?"Edit Dimension":"Add Dimension"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"ID"}),s.jsx(dt,{value:a.id,isReadOnly:!0})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Display Name"}),s.jsx(dt,{value:a.displayName,onChange:A=>N("displayName",A.target.value)})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:a.description,onChange:A=>N("description",A.target.value)})]}),s.jsxs(Le,{isRequired:!0,display:"flex",alignItems:"center",children:[s.jsx(We,{mb:"0",children:"Required"}),s.jsx(jp,{isChecked:a.required||!1,onChange:A=>l(I=>({...I,required:A.target.checked}))})]}),s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Default Mode"}),s.jsxs(fn,{value:a.defaultMode,onChange:A=>N("defaultMode",A.target.value),children:[s.jsx("option",{value:"",children:"None"}),a.modes.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),s.jsxs(Z,{children:[s.jsxs(B,{fontWeight:"bold",mb:2,children:["Modes ",s.jsx("span",{style:{color:"red"},children:"*"})]}),s.jsx(Ne,{leftIcon:s.jsx(es,{}),size:"sm",onClick:()=>D(null),mb:2,children:"Add Mode"}),s.jsx(me,{align:"stretch",spacing:1,children:a.modes.map((A,I)=>s.jsxs(xe,{children:[s.jsx(B,{children:A.name}),s.jsx(wt,{"aria-label":"Edit mode",icon:s.jsx(xs,{}),size:"xs",onClick:()=>D(I)}),s.jsx(wt,{"aria-label":"Delete mode",icon:s.jsx(ts,{}),size:"xs",colorScheme:"red",onClick:()=>E(I)})]},A.id))})]}),s.jsx(Le,{children:s.jsx(im,{value:a.resolvedValueTypeIds,onChange:A=>l(I=>({...I,resolvedValueTypeIds:A})),label:"Value Types",isRequired:!1,error:void 0})})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:r,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:M,children:i!==null?"Save":"Add"})]})]})]}),s.jsxs(Hn,{isOpen:f,onClose:j,size:"sm",children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:x!==null?"Edit Mode":"Add Mode"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Name"}),s.jsx(dt,{value:u.name,onChange:A=>S("name",A.target.value)})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:u.description,onChange:A=>S("description",A.target.value)})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:j,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:T,children:x!==null?"Save":"Add"})]})]})]})]})}function iT({dimensions:e,setDimensions:t,dimensionOrder:n,setDimensionOrder:r,onDataChange:i}){const{colorMode:a}=nn(),[l,u]=P.useState(!1),[h,f]=P.useState(null),m=or(),x=ve.getValueTypes();P.useEffect(()=>{if(!n||n.length===0){const S=e.map(T=>T.id);typeof r=="function"?(console.log("Initializing dimension order:",S),r(S),ve.setDimensionOrder(S),i&&i({dimensions:e,dimensionOrder:S})):console.warn("setDimensionOrder is not a function, skipping initialization")}},[e,n,r,i]),P.useEffect(()=>{ve.setDimensions(e)},[e]);const g=S=>{if(console.log("Drag end result:",S),console.log("Current dimensionOrder:",n),!S.destination||!n){console.log("No destination or dimensionOrder is undefined");return}const T=Array.from(n),[E]=T.splice(S.source.index,1);T.splice(S.destination.index,0,E),console.log("New order after drag:",T);const M=new Set(e.map(J=>J.id)),A=new Set(T);M.forEach(J=>{A.has(J)||T.push(J)});const I={systemName:"Design System",systemId:"design-system",dimensions:e,dimensionOrder:T,tokenCollections:[],tokens:[],platforms:[],taxonomies:[],resolvedValueTypes:x,version:"1.0.0",versionHistory:[]};console.log("[ValidationService] Data being validated:",I);const W=sr.validateData(I);if(console.log("Validation result:",W),!W.isValid){console.log("Validation failed:",W.errors);const J=W.errors.map(le=>typeof le=="object"&&le!==null&&"message"in le?le.message:String(le));m({title:"Validation Error",description:J.join(`
`),status:"error",duration:5e3,isClosable:!0});return}r(T),i&&i({dimensions:e,dimensionOrder:T})};P.useEffect(()=>{const S=ve.getDimensionOrder();console.log("Initial dimension order from localStorage:",S),S&&Array.isArray(S)&&S.length>0&&typeof r=="function"&&(console.log("Setting initial dimension order:",S),r(S))},[r]),P.useEffect(()=>{console.log("Dimension order changed:",n)},[n]),P.useEffect(()=>{console.log("Dimensions changed:",e)},[e]);const v=(S=null)=>{f(S),u(!0)},N=()=>{u(!1),f(null)},D=S=>{var W;const T=e[S],E=e.filter((J,le)=>le!==S),M=n.filter(J=>J!==T.id),A={dimensions:E,dimensionOrder:M,tokenCollections:[],tokens:[],platforms:[],taxonomies:[],resolvedValueTypes:x,version:"1.0.0",versionHistory:[]},I=sr.validateData(A);if(!I.isValid){m({title:"Cannot Delete Dimension",description:(W=I.errors)==null?void 0:W.join(`
`),status:"error",duration:5e3,isClosable:!0});return}t(E),typeof r=="function"&&(r(M),ve.setDimensionOrder(M)),i&&i({dimensions:E,dimensionOrder:M}),m({title:"Dimension Deleted",description:`Successfully deleted dimension "${T.displayName}"`,status:"info",duration:3e3,isClosable:!0})},j=[...e].sort((S,T)=>{if(!n||n.length===0)return console.log("No dimension order, using original order"),0;const E=n.indexOf(S.id),M=n.indexOf(T.id);return E===-1?1:M===-1?-1:E-M});return console.log("Sorted dimensions:",j),s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Dimensions"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:a==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",leftIcon:s.jsx(es,{}),onClick:()=>v(null),colorScheme:"blue",mb:4,children:"Add Dimension"}),s.jsx(Xl,{onDragEnd:g,children:s.jsx(Kl,{droppableId:"dimensions",children:S=>s.jsxs(me,{...S.droppableProps,ref:S.innerRef,align:"stretch",spacing:2,children:[j.map((T,E)=>s.jsx(io,{draggableId:T.id,index:E,children:(M,A)=>s.jsx(Z,{ref:M.innerRef,...M.draggableProps,p:3,borderWidth:1,borderRadius:"md",bg:a==="dark"?"gray.800":"gray.50",borderColor:a==="dark"?"gray.600":"gray.200",boxShadow:A.isDragging?"md":"sm",transition:"all 0.2s",children:s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsxs(xe,{spacing:2,children:[s.jsx(Z,{w:"32px",textAlign:"center",fontWeight:"bold",color:"gray.500",children:E+1}),s.jsx(Z,{...M.dragHandleProps,cursor:"grab",children:s.jsx(Pp,{})}),s.jsxs(Z,{children:[s.jsx(ga,{title:T.displayName,cardType:"dimension"}),s.jsxs(B,{fontSize:"sm",color:"gray.600",children:["Modes: ",T.modes.map(I=>I.name).join(", ")]}),s.jsxs(B,{fontSize:"xs",color:"gray.500",children:["ID: ",T.id]}),Array.isArray(T.resolvedValueTypeIds)&&T.resolvedValueTypeIds.length>0&&s.jsx(Ll,{mt:2,spacing:2,children:T.resolvedValueTypeIds.map(I=>{const W=x.find(J=>J.id===I);return W?s.jsx(ps,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"blue",children:s.jsx(pa,{children:W.displayName})},I):null})})]})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit dimension",icon:s.jsx(xs,{}),size:"sm",onClick:()=>v(E)}),s.jsx(wt,{"aria-label":"Delete dimension",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>D(E)})]})]})})},T.id)),S.placeholder]})})})]}),s.jsx(sT,{dimensions:e,setDimensions:t,isOpen:l,onClose:N,editingIndex:h})]})}const aT=e=>{const{open:t,onClose:n,onSave:r,form:i,handleFormChange:a,handleTermDialogOpen:l,handleTermDelete:u,resolvedValueTypes:h}=e,{colorMode:f}=nn();St.useEffect(()=>{t&&console.log("[TaxonomyEditorDialog] Form data:",JSON.stringify(i,null,2))},[t,i]);const m=g=>{var v;if(!((v=i.resolvedValueTypeIds)!=null&&v.includes(g))){const N=[...i.resolvedValueTypeIds||[],g];a("resolvedValueTypeIds",N)}},x=g=>{const v=(i.resolvedValueTypeIds||[]).filter(N=>N!==g);a("resolvedValueTypeIds",v)};return s.jsxs(Hn,{isOpen:t,onClose:n,size:"lg",children:[s.jsx(Mn,{}),s.jsxs(Wn,{bg:f==="dark"?"gray.900":"white",children:[s.jsx(Dn,{children:i.editingIndex!==null?"Edit Taxonomy":"Add Taxonomy"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Name"}),s.jsx(dt,{value:i.name,onChange:g=>a("name",g.target.value)})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:i.description,onChange:g=>a("description",g.target.value)})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Value Types"}),s.jsx(fn,{placeholder:"Add a value type...",value:"",onChange:g=>{g.target.value&&m(g.target.value)},children:h.filter(g=>!(i.resolvedValueTypeIds||[]).includes(g.id)).map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))}),s.jsx(Ll,{mt:2,spacing:2,children:(i.resolvedValueTypeIds||[]).map(g=>{const v=h.find(N=>N.id===g);return v?s.jsxs(ps,{size:"md",borderRadius:"full",variant:"solid",colorScheme:"blue",children:[s.jsx(pa,{children:v.name}),s.jsx(d0,{onClick:()=>x(g)})]},g):null})})]}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"bold",mb:2,children:"Terms"}),s.jsx(Ne,{leftIcon:s.jsx(es,{}),size:"sm",onClick:()=>l(null),mb:2,children:"Add Term"}),s.jsx(me,{align:"stretch",spacing:1,children:i.terms.map((g,v)=>s.jsxs(xe,{children:[s.jsx(B,{children:g.name}),s.jsx(wt,{"aria-label":"Edit term",icon:s.jsx(xs,{}),size:"xs",onClick:()=>l(v)}),s.jsx(wt,{"aria-label":"Delete term",icon:s.jsx(ts,{}),size:"xs",colorScheme:"red",onClick:()=>u(v)})]},g.id))})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:n,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:r,children:"Save"})]})]})]})},oT=({open:e,onClose:t,onSave:n,termForm:r,handleTermFormChange:i,termEditIndex:a})=>{const{colorMode:l}=nn();return s.jsxs(Hn,{isOpen:e,onClose:t,size:"sm",children:[s.jsx(Mn,{}),s.jsxs(Wn,{bg:l==="dark"?"gray.900":"white",children:[s.jsx(Dn,{children:a!==null?"Edit Term":"Add Term"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{isRequired:!0,children:[s.jsx(We,{children:"Name"}),s.jsx(dt,{value:r.name,onChange:u=>i("name",u.target.value)})]}),s.jsxs(Le,{children:[s.jsx(We,{children:"Description"}),s.jsx(dt,{value:r.description,onChange:u=>i("description",u.target.value)})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:t,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:n,children:"Save"})]})]})]})};function Ko(e){return e.map(t=>({...t,description:typeof t.description=="string"?t.description:""}))}function lT({taxonomies:e,setTaxonomies:t,tokens:n,collections:r,dimensions:i,platforms:a,resolvedValueTypes:l}){const{colorMode:u}=nn(),[h,f]=P.useState(!1),[m,x]=P.useState(null),[g,v]=P.useState({id:"",name:"",description:"",terms:Ko([]),resolvedValueTypeIds:[]}),[N,D]=P.useState({id:"",name:"",description:""}),[j,S]=P.useState(!1),[T,E]=P.useState(null),M=or(),A=(H=null)=>{if(x(H),H!==null){const L=e[H];v({id:L.id,name:L.name,description:L.description||"",terms:Ko(L.terms||[]),resolvedValueTypeIds:Array.isArray(L.resolvedValueTypeIds)?L.resolvedValueTypeIds:[]})}else v({id:Ar("taxonomy"),name:"",description:"",terms:Ko([]),resolvedValueTypeIds:[]});f(!0)},I=()=>{f(!1),x(null)},W=(H,L)=>{v(X=>H==="terms"?{...X,terms:Ko(L)}:H==="resolvedValueTypeIds"?{...X,resolvedValueTypeIds:L}:{...X,[H]:L})},J=async H=>{try{const L=JSON.parse(localStorage.getItem("token-model:root")||"{}"),{systemName:X="Design System",systemId:he="design-system",version:ge="1.0.0",versionHistory:oe=[]}=L,Se={systemName:X,systemId:he,tokenCollections:r,dimensions:i,tokens:n,platforms:a,taxonomies:H,resolvedValueTypes:l,version:ge,versionHistory:oe};console.log("[ClassificationView] Validation data:",JSON.stringify(Se,null,2));const ne=sr.validateData(Se);if(console.log("[ClassificationView] Validation result:",ne),!ne.isValid){console.error("[ClassificationView] Validation errors:",ne.errors),M({title:"Validation Error",description:`Schema Validation Failed: ${Array.isArray(ne.errors)?ne.errors.join(", "):"See console for details."}`,status:"error",duration:5e3,isClosable:!0});return}localStorage.setItem("token-model:taxonomies",JSON.stringify(H)),t(H)}catch(L){console.error("[ClassificationView] Validation error:",L),M({title:"Validation Error",description:"An error occurred while validating the data",status:"error",duration:5e3,isClosable:!0})}},le=()=>{const H=g.id&&g.id.trim()?g.id:Ar("taxonomy");if(!g.name.trim()){M({title:"Name is required",status:"error",duration:2e3});return}const L=(g.terms||[]).map(Se=>({...Se,id:Se.id&&Se.id.trim()?Se.id:Ar("term"),name:Se.name&&Se.name.trim()?Se.name:""}));if(L.some(Se=>!Se.name.trim())){M({title:"All terms must have a name",status:"error",duration:2e3});return}const X=L.map(Se=>Se.id);if(new Set(X).size!==X.length){M({title:"Term IDs must be unique",status:"error",duration:2e3});return}const he=L.map(Se=>Se.name.trim().toLowerCase());if(new Set(he).size!==he.length){M({title:"Term names must be unique",status:"error",duration:2e3});return}const ge=[...e],oe={...g,id:H,terms:L,resolvedValueTypeIds:Array.isArray(g.resolvedValueTypeIds)?g.resolvedValueTypeIds:[]};m!==null?ge[m]=oe:ge.push(oe),J(ge)&&(f(!1),x(null),M({title:"Taxonomy saved",status:"success",duration:2e3}))},ce=H=>{const L=e.filter((X,he)=>he!==H);J(L)&&M({title:"Taxonomy deleted",status:"info",duration:2e3})},F=H=>{if(H!==null&&g.terms[H]){const L=g.terms[H];D({id:L.id,name:L.name,description:L.description||""})}else D({id:Ar("term"),name:"",description:""});S(!0),E(H)},Q=()=>{S(!1),E(null)},de=(H,L)=>{D(X=>({...X,[H]:L}))},q=()=>{const H=N.id&&N.id.trim()?N.id:Ar("term");if(!N.name.trim()){M({title:"Term name is required",status:"error",duration:2e3});return}const L=g.terms?[...g.terms]:[],X=L.map(he=>he.name.trim().toLowerCase());if(T===null&&X.includes(N.name.trim().toLowerCase())||T!==null&&X.filter((he,ge)=>ge!==T).includes(N.name.trim().toLowerCase())){M({title:"Term names must be unique",status:"error",duration:2e3});return}T!==null?L[T]={...N,id:H}:L.push({...N,id:H}),v(he=>({...he,terms:L})),S(!1),E(null)},pe=H=>{v(L=>({...L,terms:(L.terms||[]).filter((X,he)=>he!==H)}))};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Classification"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:u==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",leftIcon:s.jsx(es,{}),onClick:()=>A(null),colorScheme:"blue",mb:4,children:"Add Taxonomy"}),s.jsx(me,{align:"stretch",spacing:2,children:e.map((H,L)=>s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:u==="dark"?"gray.800":"gray.50",borderColor:u==="dark"?"gray.600":"gray.200",children:s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsxs(Z,{children:[s.jsx(ga,{title:H.name,cardType:"taxonomy"}),s.jsx(B,{fontSize:"sm",color:"gray.600",children:H.description}),s.jsxs(B,{fontSize:"sm",color:"gray.600",children:["Terms: ",H.terms.map(X=>X.name).join(", ")]}),Array.isArray(H.resolvedValueTypeIds)&&H.resolvedValueTypeIds.length>0&&s.jsx(Ll,{mt:2,spacing:2,children:H.resolvedValueTypeIds.map(X=>{const he=l.find(ge=>ge.id===X);return he?s.jsx(ps,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"blue",children:s.jsx(pa,{children:he.displayName})},X):null})})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit taxonomy",icon:s.jsx(xs,{}),size:"sm",onClick:()=>A(L)}),s.jsx(wt,{"aria-label":"Delete taxonomy",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>ce(L)})]})]})},H.id))})]}),s.jsx(aT,{open:h,onClose:I,onSave:le,form:{...g,editingIndex:m},handleFormChange:W,handleTermDialogOpen:F,handleTermDelete:pe,resolvedValueTypes:Array.isArray(l)?l.map(H=>({id:H.id,name:H.displayName})):[]}),s.jsx(oT,{open:j,onClose:Q,onSave:q,termForm:N,handleTermFormChange:de,termEditIndex:T})]})}function cT({taxonomies:e,taxonomyOrder:t,setTaxonomyOrder:n}){const{colorMode:r}=nn(),i=or(),a=g=>{if(!g.destination)return;const v=Array.from(t),[N]=v.splice(g.source.index,1);v.splice(g.destination.index,0,N),n(v),ve.setNamingRules({taxonomyOrder:v})},l=g=>{if(t.includes(g)){i({title:"Taxonomy already in order",status:"warning",duration:3e3,isClosable:!0});return}const v=[...t,g];n(v),ve.setNamingRules({taxonomyOrder:v})},u=g=>{const v=t.filter(N=>N!==g);n(v),ve.setNamingRules({taxonomyOrder:v})},h=g=>{if(g===0)return;const v=[...t];[v[g-1],v[g]]=[v[g],v[g-1]],n(v),ve.setNamingRules({taxonomyOrder:v})},f=g=>{if(g===t.length-1)return;const v=[...t];[v[g],v[g+1]]=[v[g+1],v[g]],n(v),ve.setNamingRules({taxonomyOrder:v})},m=e.filter(g=>!t.includes(g.id)),x=t.filter(g=>e.some(v=>v.id===g));return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Naming Rules"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:r==="dark"?"gray.900":"white",children:[s.jsx(gt,{size:"md",mb:2,children:"Taxonomy Order"}),s.jsx(B,{fontSize:"sm",color:"gray.600",mb:4,children:"Define the order of taxonomies in token names. This order determines how taxonomy terms appear in generated code syntax."}),s.jsxs(me,{spacing:4,align:"stretch",children:[s.jsxs(Le,{children:[s.jsx(We,{children:"Add Taxonomy to Order"}),s.jsx(xe,{children:s.jsx(fn,{placeholder:"Select taxonomy",onChange:g=>l(g.target.value),value:"",children:m.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))})})]}),s.jsx(us,{}),s.jsxs(Z,{children:[s.jsx(B,{fontWeight:"medium",mb:2,children:"Current Order"}),s.jsx(Xl,{onDragEnd:a,children:s.jsx(Kl,{droppableId:"taxonomy-order",children:g=>s.jsxs(me,{...g.droppableProps,ref:g.innerRef,spacing:2,align:"stretch",children:[x.map((v,N)=>{const D=e.find(j=>j.id===v);return D?s.jsx(io,{draggableId:v,index:N,children:(j,S)=>s.jsxs(xe,{ref:j.innerRef,...j.draggableProps,p:3,bg:r==="dark"?"gray.800":"gray.50",borderRadius:"md",boxShadow:S.isDragging?"md":"sm",border:"1px",borderColor:r==="dark"?"gray.600":"gray.200",transition:"all 0.2s",children:[s.jsx(Z,{w:"32px",textAlign:"center",fontWeight:"bold",color:"gray.500",children:N+1}),s.jsx(Z,{...j.dragHandleProps,cursor:"grab",children:s.jsx(Pp,{})}),s.jsx(B,{flex:1,children:D.name}),s.jsxs(xe,{spacing:1,children:[s.jsx(wt,{"aria-label":"Move up",icon:s.jsx(v2,{}),size:"sm",variant:"ghost",isDisabled:N===0,onClick:()=>h(N)}),s.jsx(wt,{"aria-label":"Move down",icon:s.jsx(b2,{}),size:"sm",variant:"ghost",isDisabled:N===x.length-1,onClick:()=>f(N)}),s.jsx(wt,{"aria-label":"Remove taxonomy",icon:s.jsx(ts,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>u(v)})]})]})},v):null}),g.placeholder]})})})]})]})]})]})}const Pg=tn(["COLOR","DIMENSION","SPACING","FONT_FAMILY","FONT_WEIGHT","FONT_SIZE","LINE_HEIGHT","LETTER_SPACING","DURATION","CUBIC_BEZIER","BLUR","SPREAD","RADIUS"]),uT=Be({pattern:se().optional(),minimum:Jt().optional(),maximum:Jt().optional(),allowedValues:Qe(se()).optional()}),dT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),type:Pg.optional(),description:se().optional(),validation:uT.optional()}),hT=tn(["experimental","stable","deprecated"]),fT=tn(["PRIMITIVE","SEMANTIC","COMPONENT"]),pT=tn(["MOST_SPECIFIC_MATCH","DIMENSION_PRIORITY","NEAREST_PARENT","DEFAULT_VALUE"]),u0=Be({hex:se().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/),rgb:Be({r:Jt().int().min(0).max(255),g:Jt().int().min(0).max(255),b:Jt().int().min(0).max(255),a:Jt().min(0).max(1).optional()}).optional()}),qr=Jn([Be({value:Jt(),unit:tn(["px","rem","%","em","vh","vw","pt"])}),se().regex(/^[0-9]+(\.[0-9]+)?(px|rem|%|em|vh|vw|pt)$/)]);Jn([Be({value:Jt().min(0),unit:tn(["ms","s"])}),se().regex(/^[0-9]+(\.[0-9]+)?(ms|s)$/)]);Jn([Be({x1:Jt().min(0).max(1),y1:Jt(),x2:Jt().min(0).max(1),y2:Jt()}),se().regex(/^cubic-bezier\([0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?, ?[0-9]*(\.[0-9]+)?\)$/)]);Jn([Be({offsetX:qr,offsetY:qr,blur:qr,spread:qr,color:u0,inset:Rn().optional()}),Qe(Be({offsetX:qr,offsetY:qr,blur:qr,spread:qr,color:u0,inset:Rn().optional()})),se().regex(/^([0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))( inset)?)(, ?[0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) [0-9]+(\.[0-9]+)?(px|rem) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))( inset)?)*$/)]);Be({fontFamily:se(),fontSize:qr,fontWeight:Jn([Jt().int().min(100).max(900).multipleOf(100),tn(["normal","bold","lighter","bolder"])]),lineHeight:Jn([Jt(),qr]).optional(),letterSpacing:qr.optional(),textDecoration:tn(["none","underline","line-through","overline"]).optional(),textTransform:tn(["none","capitalize","uppercase","lowercase"]).optional()});Jn([Be({width:qr,style:tn(["solid","dashed","dotted","double","groove","ridge","inset","outset","none"]),color:u0}),se().regex(/^[0-9]+(\.[0-9]+)?(px|rem) (solid|dashed|dotted|double|groove|ridge|inset|outset|none) (#[A-Fa-f0-9]{6}|rgba?\([0-9]+, ?[0-9]+, ?[0-9]+(, ?[0-9]+(\.[0-9]+)?)?\))$/)]);const mT=Jn([Be({value:li()}),Be({tokenId:se().regex(/^[a-zA-Z0-9-_]+$/)})]),gT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),dimensionId:se().regex(/^[a-zA-Z0-9-_]+$/)}),xT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),modes:Qe(gT).min(1),required:Rn().default(!1),defaultMode:se(),resolvedValueTypeIds:Qe(se()).optional()}),yT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),resolvedValueTypeIds:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),private:Rn().default(!1),defaultModeIds:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)).optional(),modeResolutionStrategy:Be({priorityByType:Qe(se()),fallbackStrategy:pT}).optional()}),bT=Be({platformId:se(),value:se(),metadata:ci(li()).optional()}),vT=Be({taxonomyId:se(),termId:se()}),ad=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/).optional(),resolvedValueTypeId:se().regex(/^[a-zA-Z0-9-_]+$/),private:Rn().default(!1),themeable:Rn().default(!1),status:hT.optional(),tokenTier:fT,generatedByAlgorithm:Rn().default(!1),algorithmId:se().regex(/^[a-zA-Z0-9-_]+$/).optional(),taxonomies:Qe(vT),propertyTypes:Qe(se()),codeSyntax:Qe(Be({platformId:se(),formattedName:se()})),valuesByMode:Qe(Be({modeIds:Qe(se()),value:mT,metadata:ci(li()).optional(),platformOverrides:Qe(bT).optional()})).describe("If any entry in valuesByMode has modeIds: [], it must be the only entry in the array. Otherwise, all entries must have modeIds.length > 0. This enforces that a token can have either a single global value or multiple mode-specific values, but not both.").min(1)}),wT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/),tokens:Qe(ad)});Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),name:se(),description:se().optional(),tokenCollectionId:se().regex(/^[a-zA-Z0-9-_]+$/),tokens:Qe(ad)});const ST=tn(["","_","-",".","/"]),kT=Be({id:se(),displayName:se(),description:se().optional(),syntaxPatterns:Be({prefix:se().optional(),suffix:se().optional(),delimiter:ST.optional(),capitalization:tn(["none","uppercase","lowercase","capitalize"]).optional(),formatString:se().optional()}).optional(),valueFormatters:Be({color:tn(["hex","rgb","rgba","hsl","hsla"]).optional(),dimension:tn(["px","rem","em","pt","dp","sp"]).optional(),numberPrecision:Jt().int().min(0).max(10).optional()}).optional()}),jT=Be({id:se().regex(/^[a-zA-Z0-9-_]+$/),displayName:se(),description:se().optional(),isDefault:Rn()}),Bg=Be({value:Jn([se(),Jt(),Rn()]),tokenId:se().regex(/^[a-zA-Z0-9-_]+$/).optional()}),CT=Be({platformId:se(),value:Bg}),TT=Be({tokenId:se().regex(/^[a-zA-Z0-9-_]+$/),value:Bg,platformOverrides:Qe(CT).optional()}),IT=ci(Qe(TT)),AT=Be({id:se(),name:se(),description:se().optional()}),NT=Be({id:se(),name:se(),description:se(),terms:Qe(AT),resolvedValueTypeIds:Qe(se()).optional()}),_T=Be({emptyModeIds:tn(["mapToDefaults","preserveEmpty","requireExplicit"]),preserveOriginalValues:Rn()}),ET=Be({version:se(),dimensions:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),date:se(),migrationStrategy:_T.optional()}),MT=Be({whenAdding:se().regex(/^[a-zA-Z0-9-_]+$/),mapEmptyModeIdsTo:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)),preserveDefaultValues:Rn().optional()}),DT=Be({rules:Qe(MT)});Be({systemName:se(),systemId:se().regex(/^[a-zA-Z0-9-_]+$/),description:se().optional(),version:se(),versionHistory:Qe(ET),dimensionEvolution:DT.optional(),dimensions:Qe(xT),dimensionOrder:Qe(se().regex(/^[a-zA-Z0-9-_]+$/)).optional(),tokenCollections:Qe(yT),tokens:Qe(ad),platforms:Qe(kT),themes:Qe(jT).optional(),themeOverrides:IT.optional(),taxonomies:Qe(NT),resolvedValueTypes:Qe(dT),extensions:Be({tokenGroups:Qe(wT).optional(),tokenVariants:ci(li()).optional()}).optional()}).refine(e=>{if(!e.dimensionOrder)return!0;const t=new Set(e.dimensions.map(n=>n.id));return e.dimensionOrder.every(n=>t.has(n))},{message:"All dimensionOrder IDs must match existing dimension IDs",path:["dimensionOrder"]});function OT({valueTypes:e,onUpdate:t,tokens:n,collections:r,dimensions:i,platforms:a,taxonomies:l,themes:u}){const{colorMode:h}=nn(),[f,m]=P.useState(!1),[x,g]=P.useState(null),[v,N]=P.useState(""),[D,j]=P.useState("CUSTOM"),[S,T]=P.useState({}),E=or(),M=e.filter(Q=>!x||Q.id!==x.id).map(Q=>Q.type).filter(Q=>!!Q),A=Object.values(Pg.enum).filter(Q=>!M.includes(Q)),I=()=>{g(null),N(""),j("CUSTOM"),m(!0)},W=Q=>{g(Q),N(Q.displayName),j(Q.type||"CUSTOM"),m(!0)},J=Q=>{const de=JSON.parse(localStorage.getItem("token-model:data")||"{}"),q=de.systemName||"Design Token System",pe=de.systemId||"default-system-id",H={tokenCollections:r,dimensions:i,tokens:n,platforms:a,taxonomies:l,themes:u,resolvedValueTypes:Q,version:"1.0.0",versionHistory:[],systemName:q,systemId:pe},L=sr.validateData(H);return L.isValid?(t(Q),!0):(console.error("[ValueTypesView] Schema validation failed:",{errors:L.errors,data:H}),E({title:"Schema Validation Failed",description:"Your change would make the data invalid. See the Validation tab for details.",status:"error",duration:4e3,isClosable:!0}),!1)},le=()=>{if(T({}),!v.trim()){T({name:"Name is required"}),E({title:"Required Field Missing",description:"Value type name is required.",status:"error",duration:4e3,isClosable:!0});return}if(!D){T({type:"Type is required"}),E({title:"Required Field Missing",description:"Value type must be selected.",status:"error",duration:4e3,isClosable:!0});return}const Q={id:v.trim().toLowerCase().replace(/\s+/g,"-"),displayName:v.trim(),...D!=="CUSTOM"?{type:D}:{}};if(x){const de=e.map(q=>q.id===x.id?Q:q);if(!J(de))return;E({title:"Value Type Updated",description:`Successfully updated value type "${Q.displayName}"`,status:"success",duration:3e3,isClosable:!0})}else{const de=[...e,Q];if(!J(de))return;E({title:"Value Type Created",description:`Successfully created value type "${Q.displayName}"`,status:"success",duration:3e3,isClosable:!0})}m(!1)},ce=()=>{m(!1)},F=Q=>{const de=e.filter(q=>q.id!==Q.id);J(de)&&E({title:"Value Type Deleted",description:`Successfully deleted value type "${Q.displayName}"`,status:"info",duration:3e3,isClosable:!0})};return s.jsxs(Z,{children:[s.jsx(B,{fontSize:"2xl",fontWeight:"bold",mb:4,children:"Value Types"}),s.jsxs(Z,{p:4,mb:4,borderWidth:1,borderRadius:"md",bg:h==="dark"?"gray.900":"white",children:[s.jsx(Ne,{size:"sm",onClick:I,colorScheme:"blue",mb:4,leftIcon:s.jsx(es,{}),children:"Create New Value Type"}),s.jsx(me,{align:"stretch",spacing:2,children:e.map(Q=>s.jsx(Z,{p:3,borderWidth:1,borderRadius:"md",bg:h==="dark"?"gray.800":"gray.50",borderColor:h==="dark"?"gray.600":"gray.200",children:s.jsxs(xe,{justify:"space-between",align:"center",children:[s.jsxs(Z,{children:[s.jsx(ga,{title:Q.displayName,cardType:Q.type||"Custom"}),s.jsxs(B,{fontSize:"sm",color:"gray.600",children:["Type: ",Q.type||"Custom"]})]}),s.jsxs(xe,{children:[s.jsx(wt,{"aria-label":"Edit value type",icon:s.jsx(xs,{}),size:"sm",onClick:()=>W(Q)}),s.jsx(wt,{"aria-label":"Delete value type",icon:s.jsx(ts,{}),size:"sm",colorScheme:"red",onClick:()=>F(Q)})]})]})},Q.id))})]}),s.jsxs(Hn,{isOpen:f,onClose:ce,children:[s.jsx(Mn,{}),s.jsxs(Wn,{children:[s.jsx(Dn,{children:x?"Edit Value Type":"Create Value Type"}),s.jsx(ir,{}),s.jsx(On,{children:s.jsxs(me,{spacing:4,children:[s.jsxs(Le,{isInvalid:!!S.name,children:[s.jsx(We,{children:"Name"}),s.jsx(dt,{value:v,onChange:Q=>N(Q.target.value),placeholder:"Enter value type name"}),S.name&&s.jsx(wh,{children:S.name})]}),s.jsxs(Le,{isInvalid:!!S.type,children:[s.jsx(We,{children:"Type"}),s.jsxs(fn,{value:D,onChange:Q=>j(Q.target.value),children:[s.jsx("option",{value:"CUSTOM",children:"Custom"}),A.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]}),S.type&&s.jsx(wh,{children:S.type})]})]})}),s.jsxs(ar,{children:[s.jsx(Ne,{variant:"ghost",mr:3,onClick:ce,children:"Cancel"}),s.jsx(Ne,{colorScheme:"blue",onClick:le,children:"Save"})]})]})]})]})}const RT=()=>{const{schema:e}=Hw(),[t,n]=P.useState("minimal"),[r,i]=P.useState([]),[a,l]=P.useState([]),[u,h]=P.useState([]),[f,m]=P.useState([]),[x,g]=P.useState([]),[v,N]=P.useState([]),[D,j]=P.useState([]),[S,T]=P.useState([]),[E,M]=P.useState([]),[A,I]=P.useState(!0),[W,J]=P.useState([]),[le,ce]=P.useState([]),[F,Q]=P.useState(()=>{const _e=ve.getDimensionOrder();return _e&&Array.isArray(_e)&&_e.length>0?_e:u.map(pt=>pt.id)}),[de,q]=P.useState(null),[pe,H]=P.useState(!1),L=or();P.useEffect(()=>{const _e=ve.getCollections(),pt=ve.getModes(),Ft=ve.getDimensions(),mn=ve.getValueTypes(),Wt=ve.getPlatforms(),ln=ve.getThemes(),Ut=ve.getTokens(),$t=ve.getTaxonomies(),fe=ve.getAlgorithms();_e.length>0&&JSON.stringify(_e)!==JSON.stringify(r)&&i(_e),pt.length>0&&JSON.stringify(pt)!==JSON.stringify(a)&&l(pt),Ft.length>0&&JSON.stringify(Ft)!==JSON.stringify(u)&&h(Ft),mn.length>0&&JSON.stringify(mn)!==JSON.stringify(f)&&m(mn),Wt.length>0&&JSON.stringify(Wt)!==JSON.stringify(v)&&N(Wt),ln.length>0&&JSON.stringify(ln)!==JSON.stringify(D)&&j(ln),Ut.length>0&&JSON.stringify(Ut)!==JSON.stringify(x)&&g(Ut),$t.length>0&&JSON.stringify($t)!==JSON.stringify(S)&&T($t),fe.length>0&&JSON.stringify(fe)!==JSON.stringify(E)&&M(fe)},[]),P.useEffect(()=>{J([{label:"Example Minimal (with algorithms)",value:"minimal",hasAlgorithms:!0},{label:"Core Data (with algorithms)",value:"core",hasAlgorithms:!0},{label:"Brand A Overrides",value:"brandAOverrides",hasAlgorithms:!1},{label:"Brand B Overrides",value:"brandBOverrides",hasAlgorithms:!1}])},[]);const X=async _e=>{var pt;try{console.log("[App] Loading data from package source:",_e);const Ft=await $l[_e](),mn=Ft.default||Ft;let Wt=null,ln=null;try{const tt=await Op[_e]();tt&&tt.default?(console.log("[App] Algorithm module loaded:",tt.default),ln=tt.default,Wt=tt.default.algorithms||[],console.log("[App] Loaded algorithms:",Wt)):(console.log("[App] No algorithm data available for this data source"),Wt=null)}catch{console.log("[App] No algorithm data available for:",_e)}const Ut=mn,$t=Ut.tokenCollections??[],fe=Ut.dimensions??[],Ee=(Ut.tokens??[]).map(tt=>({...tt,valuesByMode:tt.valuesByMode})),ye=Ut.platforms??[],Ue=(Ut.themes??[]).map(tt=>({id:tt.id,displayName:tt.displayName,isDefault:tt.isDefault??!1,description:tt.description})),Fe=Ut.taxonomies??[],Ge=Ut.resolvedValueTypes??[],Et={taxonomyOrder:((pt=Ut.namingRules)==null?void 0:pt.taxonomyOrder)??[]},Zt=Ut.versionHistory??[],cn=Ut.systemName??"Design System",ft=Ut.systemId??"design-system",Re=Ut.description??"A comprehensive design system with tokens, dimensions, and themes",Ye=Ut.version??"1.0.0",ot=fe.flatMap(tt=>tt.modes||[]);i($t),l(ot),h(fe),m(Ge),g(Ee),N(ye),j(Ue),T(Fe),ce(Et.taxonomyOrder),Wt?(console.log("[App] Loading",Wt.length,"algorithms"),M(Wt),ve.setAlgorithms(Wt),ln&&ve.setAlgorithmFile(ln),console.log(`Loaded ${Wt.length} algorithms from ${_e}`)):(console.log("[App] No algorithm data found, clearing algorithms state"),M([]),ve.setAlgorithms([]),localStorage.removeItem("token-model:algorithm-file")),I(!1),ve.setCollections($t),ve.setModes(ot),ve.setDimensions(fe),ve.setValueTypes(Ge),ve.setTokens(Ee),ve.setPlatforms(ye),ve.setThemes(Ue),ve.setTaxonomies(Fe),ve.setNamingRules(Et);const It={systemName:cn,systemId:ft,description:Re,version:Ye,versionHistory:Zt};localStorage.setItem("token-model:root",JSON.stringify(It))}catch(Ft){let mn="Error loading data:";Ft instanceof SyntaxError?mn+=" The selected file is not valid JSON.":Ft instanceof Error&&(mn+=" "+Ft.message),console.error(mn,Ft),alert(mn),I(!1)}};P.useEffect(()=>{t&&X(t)},[t]);const he=()=>{localStorage.clear(),sessionStorage.clear(),ve.clearAll(),g([]),i([]),l([]),h([]),m([]),N([]),j([]),T([]),ce([]),"caches"in window&&caches.keys().then(_e=>{_e.forEach(pt=>{caches.delete(pt)})}),window.location.reload()},ge=()=>{q({id:"",displayName:"",description:"",tokenCollectionId:"",resolvedValueTypeId:"color",propertyTypes:[],private:!1,themeable:!1,status:"experimental",tokenTier:"PRIMITIVE",generatedByAlgorithm:!1,taxonomies:[],codeSyntax:[],valuesByMode:[]}),H(!0)},oe=()=>{H(!1),q(null)},Se=_e=>{console.log("[App] handleSaveToken called with token:",_e),g(pt=>{console.log("[App] Previous tokens:",pt);let Ft;const mn=pt.findIndex(Wt=>Wt.id===_e.id);return mn!==-1?(console.log("[App] Updating existing token at index:",mn),Ft=pt.map(Wt=>Wt.id===_e.id?_e:Wt)):(console.log("[App] Adding new token with ID:",_e.id),Ft=[...pt,_e]),console.log("[App] Updated tokens:",Ft),ve.setTokens(Ft),Ft}),L({title:"Token saved",description:`Token "${_e.displayName}" has been saved successfully`,status:"success",duration:3e3,isClosable:!0}),oe()},ne=_e=>{const pt=x.find(Ft=>Ft.id===_e);g(Ft=>{const mn=Ft.filter(Wt=>Wt.id!==_e);return ve.setTokens(mn),mn}),pt&&L({title:"Token deleted",description:`Token "${pt.displayName}" has been deleted`,status:"info",duration:3e3,isClosable:!0})},be=_e=>{g(_e),ve.setTokens(_e)},De=_e=>{i(_e),ve.setCollections(_e)},Pe=_e=>{h(_e),ve.setDimensions(_e)},Ve=_e=>{m(_e),ve.setValueTypes(_e)},ct=_e=>{N(_e),ve.setPlatforms(_e)},Dt=_e=>{j(_e),ve.setThemes(_e)},Qt=_e=>{T(_e),ve.setTaxonomies(_e)},pn=_e=>{M(_e),ve.setAlgorithms(_e)};return A?s.jsx(Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:s.jsx(Fl,{})}):s.jsx(Ap,{theme:zu,children:s.jsx(hy,{children:s.jsx(Z,{h:"100vh",display:"flex",flexDirection:"column",children:s.jsx(Z,{flex:"1",position:"relative",children:s.jsx(jb,{dataSource:t,setDataSource:n,dataOptions:W,onResetData:he,onExportData:()=>{},children:s.jsxs(fy,{children:[s.jsx(wn,{path:"/",element:s.jsx(qi,{to:"/dashboard",replace:!0})}),s.jsx(wn,{path:"/dashboard",element:s.jsx(N2,{tokens:x,platforms:v,themes:D})}),s.jsx(wn,{path:"/tokens",element:s.jsx(qi,{to:"/tokens/tokens",replace:!0})}),s.jsx(wn,{path:"/tokens/tokens",element:s.jsxs(s.Fragment,{children:[s.jsx(_b,{tokens:x,collections:r,resolvedValueTypes:f,modes:a,taxonomies:S,renderAddTokenButton:s.jsx(Ne,{colorScheme:"blue",size:"sm",onClick:ge,leftIcon:s.jsx(Ur,{}),children:"Add Token"}),onEditToken:_e=>{q(_e),H(!0)}}),pe&&de&&s.jsx(Gw,{token:de,tokens:x,dimensions:u,modes:a,platforms:v,open:pe,onClose:oe,onSave:Se,taxonomies:S,resolvedValueTypes:f,isNew:!de.id,onViewClassifications:()=>{},onDeleteToken:ne,collections:r,schema:e})]})}),s.jsx(wn,{path:"/tokens/collections",element:s.jsx(Mb,{collections:r,onUpdate:De,tokens:x,resolvedValueTypes:f})}),s.jsx(wn,{path:"/tokens/system-variables",element:s.jsx(Ob,{dimensions:u})}),s.jsx(wn,{path:"/tokens/algorithms",element:s.jsx(Z8,{algorithms:E,onUpdate:pn,onUpdateTokens:be})}),s.jsx(wn,{path:"/tokens/analysis",element:s.jsx(rT,{tokens:x,collections:r,dimensions:u,platforms:v,taxonomies:S,resolvedValueTypes:f})}),s.jsx(wn,{path:"/schemas",element:s.jsx(qi,{to:"/schemas/core-data",replace:!0})}),s.jsx(wn,{path:"/schemas/core-data",element:s.jsx(Dw,{})}),s.jsx(wn,{path:"/schemas/theme-overrides",element:s.jsx(Vw,{})}),s.jsx(wn,{path:"/schemas/algorithm-data",element:s.jsx(Bw,{})}),s.jsx(wn,{path:"/setup",element:s.jsx(qi,{to:"/dimensions",replace:!0})}),s.jsx(wn,{path:"/dimensions",element:s.jsx(iT,{dimensions:u,setDimensions:Pe,dimensionOrder:F,setDimensionOrder:Q,onDataChange:_e=>{Pe(_e.dimensions),Q(_e.dimensionOrder),ve.setDimensionOrder(_e.dimensionOrder)}})}),s.jsx(wn,{path:"/classification",element:s.jsx(lT,{taxonomies:S,setTaxonomies:Qt,tokens:x,collections:r,dimensions:u,platforms:v,resolvedValueTypes:f})}),s.jsx(wn,{path:"/naming-rules",element:s.jsx(cT,{taxonomies:S,taxonomyOrder:le,setTaxonomyOrder:ce})}),s.jsx(wn,{path:"/value-types",element:s.jsx(OT,{valueTypes:f,onUpdate:Ve,tokens:x,collections:r,dimensions:u,platforms:v,taxonomies:S,themes:D})}),s.jsx(wn,{path:"/themes",element:s.jsx(k2,{themes:D,setThemes:Dt})}),s.jsx(wn,{path:"/publishing",element:s.jsx(qi,{to:"/platforms",replace:!0})}),s.jsx(wn,{path:"/platforms",element:s.jsx(J8,{platforms:v,setPlatforms:ct,tokens:x,setTokens:be,taxonomies:S})}),s.jsx(wn,{path:"/export-settings",element:s.jsx(Z,{p:4,children:"Export settings content coming soon..."})}),s.jsx(wn,{path:"/validation",element:s.jsx(K8,{tokens:x,collections:r,dimensions:u,platforms:v,taxonomies:S,version:"1.0.0",versionHistory:[],onValidate:()=>{}})}),s.jsx(wn,{path:"/version-history",element:s.jsx(Z,{p:4,children:"Version history content coming soon..."})}),s.jsx(wn,{path:"/access",element:s.jsx(Z,{p:4,children:"Access management coming soon..."})}),s.jsx(wn,{path:"*",element:s.jsx(qi,{to:"/dashboard",replace:!0})})]})})})})})})};typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{console.log("System color scheme changed:",e.matches?"dark":"light")});const Lg=document.getElementById("root");if(!Lg)throw new Error("Failed to find the root element");Cu.createRoot(Lg).render(s.jsx(St.StrictMode,{children:s.jsxs(Ap,{theme:zu,children:[s.jsx(oy,{initialColorMode:zu.config.initialColorMode}),s.jsx(RT,{})]})}));
